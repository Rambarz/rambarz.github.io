(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))p(w);new MutationObserver(w=>{for(const S of w)if(S.type==="childList")for(const C of S.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&p(C)}).observe(document,{childList:!0,subtree:!0});function d(w){const S={};return w.integrity&&(S.integrity=w.integrity),w.referrerPolicy&&(S.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?S.credentials="include":w.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function p(w){if(w.ep)return;w.ep=!0;const S=d(w);fetch(w.href,S)}})();function Vh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ly={exports:{}},dp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function Iw(){if(N_)return dp;N_=1;var o=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function d(p,w,S){var C=null;if(S!==void 0&&(C=""+S),w.key!==void 0&&(C=""+w.key),"key"in w){S={};for(var A in w)A!=="key"&&(S[A]=w[A])}else S=w;return w=S.ref,{$$typeof:o,type:p,key:C,ref:w!==void 0?w:null,props:S}}return dp.Fragment=u,dp.jsx=d,dp.jsxs=d,dp}var j_;function Qw(){return j_||(j_=1,ly.exports=Iw()),ly.exports}var se=Qw(),cy={exports:{}},Lr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function Dw(){if(V_)return Lr;V_=1;var o=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),q=Symbol.iterator;function X(he){return he===null||typeof he!="object"?null:(he=q&&he[q]||he["@@iterator"],typeof he=="function"?he:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,ye={};function Se(he,nt,yt){this.props=he,this.context=nt,this.refs=ye,this.updater=yt||W}Se.prototype.isReactComponent={},Se.prototype.setState=function(he,nt){if(typeof he!="object"&&typeof he!="function"&&he!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,he,nt,"setState")},Se.prototype.forceUpdate=function(he){this.updater.enqueueForceUpdate(this,he,"forceUpdate")};function le(){}le.prototype=Se.prototype;function ve(he,nt,yt){this.props=he,this.context=nt,this.refs=ye,this.updater=yt||W}var De=ve.prototype=new le;De.constructor=ve,ne(De,Se.prototype),De.isPureReactComponent=!0;var Re=Array.isArray,Me={H:null,A:null,T:null,S:null,V:null},Ne=Object.prototype.hasOwnProperty;function st(he,nt,yt,_t,xt,Ft){return yt=Ft.ref,{$$typeof:o,type:he,key:nt,ref:yt!==void 0?yt:null,props:Ft}}function mt(he,nt){return st(he.type,nt,void 0,void 0,void 0,he.props)}function ot(he){return typeof he=="object"&&he!==null&&he.$$typeof===o}function Qt(he){var nt={"=":"=0",":":"=2"};return"$"+he.replace(/[=:]/g,function(yt){return nt[yt]})}var He=/\/+/g;function Zt(he,nt){return typeof he=="object"&&he!==null&&he.key!=null?Qt(""+he.key):nt.toString(36)}function Ut(){}function Vt(he){switch(he.status){case"fulfilled":return he.value;case"rejected":throw he.reason;default:switch(typeof he.status=="string"?he.then(Ut,Ut):(he.status="pending",he.then(function(nt){he.status==="pending"&&(he.status="fulfilled",he.value=nt)},function(nt){he.status==="pending"&&(he.status="rejected",he.reason=nt)})),he.status){case"fulfilled":return he.value;case"rejected":throw he.reason}}throw he}function Wt(he,nt,yt,_t,xt){var Ft=typeof he;(Ft==="undefined"||Ft==="boolean")&&(he=null);var Pt=!1;if(he===null)Pt=!0;else switch(Ft){case"bigint":case"string":case"number":Pt=!0;break;case"object":switch(he.$$typeof){case o:case u:Pt=!0;break;case k:return Pt=he._init,Wt(Pt(he._payload),nt,yt,_t,xt)}}if(Pt)return xt=xt(he),Pt=_t===""?"."+Zt(he,0):_t,Re(xt)?(yt="",Pt!=null&&(yt=Pt.replace(He,"$&/")+"/"),Wt(xt,nt,yt,"",function(yr){return yr})):xt!=null&&(ot(xt)&&(xt=mt(xt,yt+(xt.key==null||he&&he.key===xt.key?"":(""+xt.key).replace(He,"$&/")+"/")+Pt)),nt.push(xt)),1;Pt=0;var ur=_t===""?".":_t+":";if(Re(he))for(var ir=0;ir<he.length;ir++)_t=he[ir],Ft=ur+Zt(_t,ir),Pt+=Wt(_t,nt,yt,Ft,xt);else if(ir=X(he),typeof ir=="function")for(he=ir.call(he),ir=0;!(_t=he.next()).done;)_t=_t.value,Ft=ur+Zt(_t,ir++),Pt+=Wt(_t,nt,yt,Ft,xt);else if(Ft==="object"){if(typeof he.then=="function")return Wt(Vt(he),nt,yt,_t,xt);throw nt=String(he),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return Pt}function Te(he,nt,yt){if(he==null)return he;var _t=[],xt=0;return Wt(he,_t,"","",function(Ft){return nt.call(yt,Ft,xt++)}),_t}function ut(he){if(he._status===-1){var nt=he._result;nt=nt(),nt.then(function(yt){(he._status===0||he._status===-1)&&(he._status=1,he._result=yt)},function(yt){(he._status===0||he._status===-1)&&(he._status=2,he._result=yt)}),he._status===-1&&(he._status=0,he._result=nt)}if(he._status===1)return he._result.default;throw he._result}var Ct=typeof reportError=="function"?reportError:function(he){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof he=="object"&&he!==null&&typeof he.message=="string"?String(he.message):String(he),error:he});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",he);return}console.error(he)};function Rt(){}return Lr.Children={map:Te,forEach:function(he,nt,yt){Te(he,function(){nt.apply(this,arguments)},yt)},count:function(he){var nt=0;return Te(he,function(){nt++}),nt},toArray:function(he){return Te(he,function(nt){return nt})||[]},only:function(he){if(!ot(he))throw Error("React.Children.only expected to receive a single React element child.");return he}},Lr.Component=Se,Lr.Fragment=d,Lr.Profiler=w,Lr.PureComponent=ve,Lr.StrictMode=p,Lr.Suspense=D,Lr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Me,Lr.__COMPILER_RUNTIME={__proto__:null,c:function(he){return Me.H.useMemoCache(he)}},Lr.cache=function(he){return function(){return he.apply(null,arguments)}},Lr.cloneElement=function(he,nt,yt){if(he==null)throw Error("The argument must be a React element, but you passed "+he+".");var _t=ne({},he.props),xt=he.key,Ft=void 0;if(nt!=null)for(Pt in nt.ref!==void 0&&(Ft=void 0),nt.key!==void 0&&(xt=""+nt.key),nt)!Ne.call(nt,Pt)||Pt==="key"||Pt==="__self"||Pt==="__source"||Pt==="ref"&&nt.ref===void 0||(_t[Pt]=nt[Pt]);var Pt=arguments.length-2;if(Pt===1)_t.children=yt;else if(1<Pt){for(var ur=Array(Pt),ir=0;ir<Pt;ir++)ur[ir]=arguments[ir+2];_t.children=ur}return st(he.type,xt,void 0,void 0,Ft,_t)},Lr.createContext=function(he){return he={$$typeof:C,_currentValue:he,_currentValue2:he,_threadCount:0,Provider:null,Consumer:null},he.Provider=he,he.Consumer={$$typeof:S,_context:he},he},Lr.createElement=function(he,nt,yt){var _t,xt={},Ft=null;if(nt!=null)for(_t in nt.key!==void 0&&(Ft=""+nt.key),nt)Ne.call(nt,_t)&&_t!=="key"&&_t!=="__self"&&_t!=="__source"&&(xt[_t]=nt[_t]);var Pt=arguments.length-2;if(Pt===1)xt.children=yt;else if(1<Pt){for(var ur=Array(Pt),ir=0;ir<Pt;ir++)ur[ir]=arguments[ir+2];xt.children=ur}if(he&&he.defaultProps)for(_t in Pt=he.defaultProps,Pt)xt[_t]===void 0&&(xt[_t]=Pt[_t]);return st(he,Ft,void 0,void 0,null,xt)},Lr.createRef=function(){return{current:null}},Lr.forwardRef=function(he){return{$$typeof:A,render:he}},Lr.isValidElement=ot,Lr.lazy=function(he){return{$$typeof:k,_payload:{_status:-1,_result:he},_init:ut}},Lr.memo=function(he,nt){return{$$typeof:R,type:he,compare:nt===void 0?null:nt}},Lr.startTransition=function(he){var nt=Me.T,yt={};Me.T=yt;try{var _t=he(),xt=Me.S;xt!==null&&xt(yt,_t),typeof _t=="object"&&_t!==null&&typeof _t.then=="function"&&_t.then(Rt,Ct)}catch(Ft){Ct(Ft)}finally{Me.T=nt}},Lr.unstable_useCacheRefresh=function(){return Me.H.useCacheRefresh()},Lr.use=function(he){return Me.H.use(he)},Lr.useActionState=function(he,nt,yt){return Me.H.useActionState(he,nt,yt)},Lr.useCallback=function(he,nt){return Me.H.useCallback(he,nt)},Lr.useContext=function(he){return Me.H.useContext(he)},Lr.useDebugValue=function(){},Lr.useDeferredValue=function(he,nt){return Me.H.useDeferredValue(he,nt)},Lr.useEffect=function(he,nt,yt){var _t=Me.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return _t.useEffect(he,nt)},Lr.useId=function(){return Me.H.useId()},Lr.useImperativeHandle=function(he,nt,yt){return Me.H.useImperativeHandle(he,nt,yt)},Lr.useInsertionEffect=function(he,nt){return Me.H.useInsertionEffect(he,nt)},Lr.useLayoutEffect=function(he,nt){return Me.H.useLayoutEffect(he,nt)},Lr.useMemo=function(he,nt){return Me.H.useMemo(he,nt)},Lr.useOptimistic=function(he,nt){return Me.H.useOptimistic(he,nt)},Lr.useReducer=function(he,nt,yt){return Me.H.useReducer(he,nt,yt)},Lr.useRef=function(he){return Me.H.useRef(he)},Lr.useState=function(he){return Me.H.useState(he)},Lr.useSyncExternalStore=function(he,nt,yt){return Me.H.useSyncExternalStore(he,nt,yt)},Lr.useTransition=function(){return Me.H.useTransition()},Lr.version="19.1.0",Lr}var G_;function y_(){return G_||(G_=1,cy.exports=Dw()),cy.exports}var be=y_();const Lw=Vh(be);var uy={exports:{}},pp={},hy={exports:{}},fy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function Pw(){return K_||(K_=1,function(o){function u(Te,ut){var Ct=Te.length;Te.push(ut);e:for(;0<Ct;){var Rt=Ct-1>>>1,he=Te[Rt];if(0<w(he,ut))Te[Rt]=ut,Te[Ct]=he,Ct=Rt;else break e}}function d(Te){return Te.length===0?null:Te[0]}function p(Te){if(Te.length===0)return null;var ut=Te[0],Ct=Te.pop();if(Ct!==ut){Te[0]=Ct;e:for(var Rt=0,he=Te.length,nt=he>>>1;Rt<nt;){var yt=2*(Rt+1)-1,_t=Te[yt],xt=yt+1,Ft=Te[xt];if(0>w(_t,Ct))xt<he&&0>w(Ft,_t)?(Te[Rt]=Ft,Te[xt]=Ct,Rt=xt):(Te[Rt]=_t,Te[yt]=Ct,Rt=yt);else if(xt<he&&0>w(Ft,Ct))Te[Rt]=Ft,Te[xt]=Ct,Rt=xt;else break e}}return ut}function w(Te,ut){var Ct=Te.sortIndex-ut.sortIndex;return Ct!==0?Ct:Te.id-ut.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var C=Date,A=C.now();o.unstable_now=function(){return C.now()-A}}var D=[],R=[],k=1,q=null,X=3,W=!1,ne=!1,ye=!1,Se=!1,le=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;function Re(Te){for(var ut=d(R);ut!==null;){if(ut.callback===null)p(R);else if(ut.startTime<=Te)p(R),ut.sortIndex=ut.expirationTime,u(D,ut);else break;ut=d(R)}}function Me(Te){if(ye=!1,Re(Te),!ne)if(d(D)!==null)ne=!0,Ne||(Ne=!0,Zt());else{var ut=d(R);ut!==null&&Wt(Me,ut.startTime-Te)}}var Ne=!1,st=-1,mt=5,ot=-1;function Qt(){return Se?!0:!(o.unstable_now()-ot<mt)}function He(){if(Se=!1,Ne){var Te=o.unstable_now();ot=Te;var ut=!0;try{e:{ne=!1,ye&&(ye=!1,ve(st),st=-1),W=!0;var Ct=X;try{t:{for(Re(Te),q=d(D);q!==null&&!(q.expirationTime>Te&&Qt());){var Rt=q.callback;if(typeof Rt=="function"){q.callback=null,X=q.priorityLevel;var he=Rt(q.expirationTime<=Te);if(Te=o.unstable_now(),typeof he=="function"){q.callback=he,Re(Te),ut=!0;break t}q===d(D)&&p(D),Re(Te)}else p(D);q=d(D)}if(q!==null)ut=!0;else{var nt=d(R);nt!==null&&Wt(Me,nt.startTime-Te),ut=!1}}break e}finally{q=null,X=Ct,W=!1}ut=void 0}}finally{ut?Zt():Ne=!1}}}var Zt;if(typeof De=="function")Zt=function(){De(He)};else if(typeof MessageChannel<"u"){var Ut=new MessageChannel,Vt=Ut.port2;Ut.port1.onmessage=He,Zt=function(){Vt.postMessage(null)}}else Zt=function(){le(He,0)};function Wt(Te,ut){st=le(function(){Te(o.unstable_now())},ut)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Te){Te.callback=null},o.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):mt=0<Te?Math.floor(1e3/Te):5},o.unstable_getCurrentPriorityLevel=function(){return X},o.unstable_next=function(Te){switch(X){case 1:case 2:case 3:var ut=3;break;default:ut=X}var Ct=X;X=ut;try{return Te()}finally{X=Ct}},o.unstable_requestPaint=function(){Se=!0},o.unstable_runWithPriority=function(Te,ut){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var Ct=X;X=Te;try{return ut()}finally{X=Ct}},o.unstable_scheduleCallback=function(Te,ut,Ct){var Rt=o.unstable_now();switch(typeof Ct=="object"&&Ct!==null?(Ct=Ct.delay,Ct=typeof Ct=="number"&&0<Ct?Rt+Ct:Rt):Ct=Rt,Te){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ct+he,Te={id:k++,callback:ut,priorityLevel:Te,startTime:Ct,expirationTime:he,sortIndex:-1},Ct>Rt?(Te.sortIndex=Ct,u(R,Te),d(D)===null&&Te===d(R)&&(ye?(ve(st),st=-1):ye=!0,Wt(Me,Ct-Rt))):(Te.sortIndex=he,u(D,Te),ne||W||(ne=!0,Ne||(Ne=!0,Zt()))),Te},o.unstable_shouldYield=Qt,o.unstable_wrapCallback=function(Te){var ut=X;return function(){var Ct=X;X=ut;try{return Te.apply(this,arguments)}finally{X=Ct}}}}(fy)),fy}var Z_;function Rw(){return Z_||(Z_=1,hy.exports=Pw()),hy.exports}var dy={exports:{}},za={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function Ow(){if(q_)return za;q_=1;var o=y_();function u(D){var R="https://react.dev/errors/"+D;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)R+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+D+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var p={d:{f:d,r:function(){throw Error(u(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},w=Symbol.for("react.portal");function S(D,R,k){var q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w,key:q==null?null:""+q,children:D,containerInfo:R,implementation:k}}var C=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(D,R){if(D==="font")return"";if(typeof R=="string")return R==="use-credentials"?R:""}return za.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,za.createPortal=function(D,R){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)throw Error(u(299));return S(D,R,null,k)},za.flushSync=function(D){var R=C.T,k=p.p;try{if(C.T=null,p.p=2,D)return D()}finally{C.T=R,p.p=k,p.d.f()}},za.preconnect=function(D,R){typeof D=="string"&&(R?(R=R.crossOrigin,R=typeof R=="string"?R==="use-credentials"?R:"":void 0):R=null,p.d.C(D,R))},za.prefetchDNS=function(D){typeof D=="string"&&p.d.D(D)},za.preinit=function(D,R){if(typeof D=="string"&&R&&typeof R.as=="string"){var k=R.as,q=A(k,R.crossOrigin),X=typeof R.integrity=="string"?R.integrity:void 0,W=typeof R.fetchPriority=="string"?R.fetchPriority:void 0;k==="style"?p.d.S(D,typeof R.precedence=="string"?R.precedence:void 0,{crossOrigin:q,integrity:X,fetchPriority:W}):k==="script"&&p.d.X(D,{crossOrigin:q,integrity:X,fetchPriority:W,nonce:typeof R.nonce=="string"?R.nonce:void 0})}},za.preinitModule=function(D,R){if(typeof D=="string")if(typeof R=="object"&&R!==null){if(R.as==null||R.as==="script"){var k=A(R.as,R.crossOrigin);p.d.M(D,{crossOrigin:k,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0})}}else R==null&&p.d.M(D)},za.preload=function(D,R){if(typeof D=="string"&&typeof R=="object"&&R!==null&&typeof R.as=="string"){var k=R.as,q=A(k,R.crossOrigin);p.d.L(D,k,{crossOrigin:q,integrity:typeof R.integrity=="string"?R.integrity:void 0,nonce:typeof R.nonce=="string"?R.nonce:void 0,type:typeof R.type=="string"?R.type:void 0,fetchPriority:typeof R.fetchPriority=="string"?R.fetchPriority:void 0,referrerPolicy:typeof R.referrerPolicy=="string"?R.referrerPolicy:void 0,imageSrcSet:typeof R.imageSrcSet=="string"?R.imageSrcSet:void 0,imageSizes:typeof R.imageSizes=="string"?R.imageSizes:void 0,media:typeof R.media=="string"?R.media:void 0})}},za.preloadModule=function(D,R){if(typeof D=="string")if(R){var k=A(R.as,R.crossOrigin);p.d.m(D,{as:typeof R.as=="string"&&R.as!=="script"?R.as:void 0,crossOrigin:k,integrity:typeof R.integrity=="string"?R.integrity:void 0})}else p.d.m(D)},za.requestFormReset=function(D){p.d.r(D)},za.unstable_batchedUpdates=function(D,R){return D(R)},za.useFormState=function(D,R,k){return C.H.useFormState(D,R,k)},za.useFormStatus=function(){return C.H.useHostTransitionStatus()},za.version="19.1.0",za}var X_;function zv(){if(X_)return dy.exports;X_=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(u){console.error(u)}}return o(),dy.exports=Ow(),dy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function zw(){if(Y_)return pp;Y_=1;var o=Rw(),u=y_(),d=zv();function p(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)s+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function w(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function S(r){var s=r,h=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(h=s.return),r=s.return;while(r)}return s.tag===3?h:null}function C(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function A(r){if(S(r)!==r)throw Error(p(188))}function D(r){var s=r.alternate;if(!s){if(s=S(r),s===null)throw Error(p(188));return s!==r?null:r}for(var h=r,y=s;;){var E=h.return;if(E===null)break;var M=E.alternate;if(M===null){if(y=E.return,y!==null){h=y;continue}break}if(E.child===M.child){for(M=E.child;M;){if(M===h)return A(E),r;if(M===y)return A(E),s;M=M.sibling}throw Error(p(188))}if(h.return!==y.return)h=E,y=M;else{for(var G=!1,re=E.child;re;){if(re===h){G=!0,h=E,y=M;break}if(re===y){G=!0,y=E,h=M;break}re=re.sibling}if(!G){for(re=M.child;re;){if(re===h){G=!0,h=M,y=E;break}if(re===y){G=!0,y=M,h=E;break}re=re.sibling}if(!G)throw Error(p(189))}}if(h.alternate!==y)throw Error(p(190))}if(h.tag!==3)throw Error(p(188));return h.stateNode.current===h?r:s}function R(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=R(r),s!==null)return s;r=r.sibling}return null}var k=Object.assign,q=Symbol.for("react.element"),X=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),ve=Symbol.for("react.consumer"),De=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),st=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),ot=Symbol.for("react.activity"),Qt=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function Zt(r){return r===null||typeof r!="object"?null:(r=He&&r[He]||r["@@iterator"],typeof r=="function"?r:null)}var Ut=Symbol.for("react.client.reference");function Vt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Ut?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ne:return"Fragment";case Se:return"Profiler";case ye:return"StrictMode";case Me:return"Suspense";case Ne:return"SuspenseList";case ot:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case W:return"Portal";case De:return(r.displayName||"Context")+".Provider";case ve:return(r._context.displayName||"Context")+".Consumer";case Re:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case st:return s=r.displayName||null,s!==null?s:Vt(r.type)||"Memo";case mt:s=r._payload,r=r._init;try{return Vt(r(s))}catch{}}return null}var Wt=Array.isArray,Te=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ct={pending:!1,data:null,method:null,action:null},Rt=[],he=-1;function nt(r){return{current:r}}function yt(r){0>he||(r.current=Rt[he],Rt[he]=null,he--)}function _t(r,s){he++,Rt[he]=r.current,r.current=s}var xt=nt(null),Ft=nt(null),Pt=nt(null),ur=nt(null);function ir(r,s){switch(_t(Pt,s),_t(Ft,r),_t(xt,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Uh(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Uh(s),r=Mh(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}yt(xt),_t(xt,r)}function yr(){yt(xt),yt(Ft),yt(Pt)}function nn(r){r.memoizedState!==null&&_t(ur,r);var s=xt.current,h=Mh(s,r.type);s!==h&&(_t(Ft,r),_t(xt,h))}function Rr(r){Ft.current===r&&(yt(xt),yt(Ft)),ur.current===r&&(yt(ur),Dt._currentValue=Ct)}var Ye=Object.prototype.hasOwnProperty,Lt=o.unstable_scheduleCallback,bt=o.unstable_cancelCallback,xr=o.unstable_shouldYield,Xr=o.unstable_requestPaint,Ar=o.unstable_now,jr=o.unstable_getCurrentPriorityLevel,Rn=o.unstable_ImmediatePriority,vr=o.unstable_UserBlockingPriority,Gr=o.unstable_NormalPriority,cn=o.unstable_LowPriority,en=o.unstable_IdlePriority,fr=o.log,or=o.unstable_setDisableYieldValue,Nn=null,Nr=null;function Yr(r){if(typeof fr=="function"&&or(r),Nr&&typeof Nr.setStrictMode=="function")try{Nr.setStrictMode(Nn,r)}catch{}}var Un=Math.clz32?Math.clz32:as,Ii=Math.log,jn=Math.LN2;function as(r){return r>>>=0,r===0?32:31-(Ii(r)/jn|0)|0}var No=256,Ba=4194304;function Le(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function J(r,s,h){var y=r.pendingLanes;if(y===0)return 0;var E=0,M=r.suspendedLanes,G=r.pingedLanes;r=r.warmLanes;var re=y&134217727;return re!==0?(y=re&~M,y!==0?E=Le(y):(G&=re,G!==0?E=Le(G):h||(h=re&~r,h!==0&&(E=Le(h))))):(re=y&~M,re!==0?E=Le(re):G!==0?E=Le(G):h||(h=y&~r,h!==0&&(E=Le(h)))),E===0?0:s!==0&&s!==E&&(s&M)===0&&(M=E&-E,h=s&-s,M>=h||M===32&&(h&4194048)!==0)?s:E}function te(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function K(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pe(){var r=No;return No<<=1,(No&4194048)===0&&(No=256),r}function Fe(){var r=Ba;return Ba<<=1,(Ba&62914560)===0&&(Ba=4194304),r}function Ce(r){for(var s=[],h=0;31>h;h++)s.push(r);return s}function ze(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Qe(r,s,h,y,E,M){var G=r.pendingLanes;r.pendingLanes=h,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=h,r.entangledLanes&=h,r.errorRecoveryDisabledLanes&=h,r.shellSuspendCounter=0;var re=r.entanglements,xe=r.expirationTimes,Ke=r.hiddenUpdates;for(h=G&~h;0<h;){var At=31-Un(h),gt=1<<At;re[At]=0,xe[At]=-1;var Xe=Ke[At];if(Xe!==null)for(Ke[At]=null,At=0;At<Xe.length;At++){var $e=Xe[At];$e!==null&&($e.lane&=-536870913)}h&=~gt}y!==0&&tt(r,y,0),M!==0&&E===0&&r.tag!==0&&(r.suspendedLanes|=M&~(G&~s))}function tt(r,s,h){r.pendingLanes|=s,r.suspendedLanes&=~s;var y=31-Un(s);r.entangledLanes|=s,r.entanglements[y]=r.entanglements[y]|1073741824|h&4194090}function We(r,s){var h=r.entangledLanes|=s;for(r=r.entanglements;h;){var y=31-Un(h),E=1<<y;E&s|r[y]&s&&(r[y]|=s),h&=~E}}function Oe(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ct(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function St(){var r=ut.p;return r!==0?r:(r=window.event,r===void 0?32:Xi(r.type))}function Mt(r,s){var h=ut.p;try{return ut.p=r,s()}finally{ut.p=h}}var qe=Math.random().toString(36).slice(2),qt="__reactFiber$"+qe,Ot="__reactProps$"+qe,nr="__reactContainer$"+qe,Ur="__reactEvents$"+qe,pt="__reactListeners$"+qe,zt="__reactHandles$"+qe,Tt="__reactResources$"+qe,sr="__reactMarker$"+qe;function Bn(r){delete r[qt],delete r[Ot],delete r[Ur],delete r[pt],delete r[zt]}function Wi(r){var s=r[qt];if(s)return s;for(var h=r.parentNode;h;){if(s=h[nr]||h[qt]){if(h=s.alternate,s.child!==null||h!==null&&h.child!==null)for(r=lp(r);r!==null;){if(h=r[qt])return h;r=lp(r)}return s}r=h,h=r.parentNode}return null}function $t(r){if(r=r[qt]||r[nr]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function On(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(p(33))}function Kr(r){var s=r[Tt];return s||(s=r[Tt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Wn(r){r[sr]=!0}var jo=new Set,Is={};function ti(r,s){tn(r,s),tn(r+"Capture",s)}function tn(r,s){for(Is[r]=s,r=0;r<s.length;r++)jo.add(s[r])}var gd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vo={},Cc={};function no(r){return Ye.call(Cc,r)?!0:Ye.call(Vo,r)?!1:gd.test(r)?Cc[r]=!0:(Vo[r]=!0,!1)}function Qs(r,s,h){if(no(s))if(h===null)r.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var y=s.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+h)}}function vl(r,s,h){if(h===null)r.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+h)}}function ss(r,s,h,y){if(y===null)r.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(h);return}r.setAttributeNS(s,h,""+y)}}var Ec,Go;function Ko(r){if(Ec===void 0)try{throw Error()}catch(h){var s=h.stack.trim().match(/\n( *(at )?)/);Ec=s&&s[1]||"",Go=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ec+r+Go}var Ru=!1;function Tc(r,s){if(!r||Ru)return"";Ru=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(s){var gt=function(){throw Error()};if(Object.defineProperty(gt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(gt,[])}catch($e){var Xe=$e}Reflect.construct(r,[],gt)}else{try{gt.call()}catch($e){Xe=$e}r.call(gt.prototype)}}else{try{throw Error()}catch($e){Xe=$e}(gt=r())&&typeof gt.catch=="function"&&gt.catch(function(){})}}catch($e){if($e&&Xe&&typeof $e.stack=="string")return[$e.stack,Xe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=y.DetermineComponentFrameRoot(),G=M[0],re=M[1];if(G&&re){var xe=G.split(`
`),Ke=re.split(`
`);for(E=y=0;y<xe.length&&!xe[y].includes("DetermineComponentFrameRoot");)y++;for(;E<Ke.length&&!Ke[E].includes("DetermineComponentFrameRoot");)E++;if(y===xe.length||E===Ke.length)for(y=xe.length-1,E=Ke.length-1;1<=y&&0<=E&&xe[y]!==Ke[E];)E--;for(;1<=y&&0<=E;y--,E--)if(xe[y]!==Ke[E]){if(y!==1||E!==1)do if(y--,E--,0>E||xe[y]!==Ke[E]){var At=`
`+xe[y].replace(" at new "," at ");return r.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",r.displayName)),At}while(1<=y&&0<=E);break}}}finally{Ru=!1,Error.prepareStackTrace=h}return(h=r?r.displayName||r.name:"")?Ko(h):""}function xl(r){switch(r.tag){case 26:case 27:case 5:return Ko(r.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 15:return Tc(r.type,!1);case 11:return Tc(r.type.render,!1);case 1:return Tc(r.type,!0);case 31:return Ko("Activity");default:return""}}function Ou(r){try{var s="";do s+=xl(r),r=r.return;while(r);return s}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function ua(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function io(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function zu(r){var s=io(r)?"checked":"value",h=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),y=""+r[s];if(!r.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var E=h.get,M=h.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return E.call(this)},set:function(G){y=""+G,M.call(this,G)}}),Object.defineProperty(r,s,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function wl(r){r._valueTracker||(r._valueTracker=zu(r))}function Sc(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var h=s.getValue(),y="";return r&&(y=io(r)?r.checked?"true":"false":r.value),r=y,r!==h?(s.setValue(r),!0):!1}function Zo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var bl=/[\n"\\]/g;function Vn(r){return r.replace(bl,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function wr(r,s,h,y,E,M,G,re){r.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?r.type=G:r.removeAttribute("type"),s!=null?G==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+ua(s)):r.value!==""+ua(s)&&(r.value=""+ua(s)):G!=="submit"&&G!=="reset"||r.removeAttribute("value"),s!=null?os(r,G,ua(s)):h!=null?os(r,G,ua(h)):y!=null&&r.removeAttribute("value"),E==null&&M!=null&&(r.defaultChecked=!!M),E!=null&&(r.checked=E&&typeof E!="function"&&typeof E!="symbol"),re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?r.name=""+ua(re):r.removeAttribute("name")}function ao(r,s,h,y,E,M,G,re){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(r.type=M),s!=null||h!=null){if(!(M!=="submit"&&M!=="reset"||s!=null))return;h=h!=null?""+ua(h):"",s=s!=null?""+ua(s):h,re||s===r.value||(r.value=s),r.defaultValue=s}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,r.checked=re?r.checked:!!y,r.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(r.name=G)}function os(r,s,h){s==="number"&&Zo(r.ownerDocument)===r||r.defaultValue===""+h||(r.defaultValue=""+h)}function $i(r,s,h,y){if(r=r.options,s){s={};for(var E=0;E<h.length;E++)s["$"+h[E]]=!0;for(h=0;h<r.length;h++)E=s.hasOwnProperty("$"+r[h].value),r[h].selected!==E&&(r[h].selected=E),E&&y&&(r[h].defaultSelected=!0)}else{for(h=""+ua(h),s=null,E=0;E<r.length;E++){if(r[E].value===h){r[E].selected=!0,y&&(r[E].defaultSelected=!0);return}s!==null||r[E].disabled||(s=r[E])}s!==null&&(s.selected=!0)}}function qo(r,s,h){if(s!=null&&(s=""+ua(s),s!==r.value&&(r.value=s),h==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=h!=null?""+ua(h):""}function Qr(r,s,h,y){if(s==null){if(y!=null){if(h!=null)throw Error(p(92));if(Wt(y)){if(1<y.length)throw Error(p(93));y=y[0]}h=y}h==null&&(h=""),s=h}h=ua(s),r.defaultValue=h,y=r.textContent,y===h&&y!==""&&y!==null&&(r.value=y)}function vi(r,s){if(s){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=s;return}}r.textContent=s}var Bl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(r,s,h){var y=s.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":y?r.setProperty(s,h):typeof h!="number"||h===0||Bl.has(s)?s==="float"?r.cssFloat=h:r[s]=(""+h).trim():r[s]=h+"px"}function Qi(r,s,h){if(s!=null&&typeof s!="object")throw Error(p(62));if(r=r.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||s!=null&&s.hasOwnProperty(y)||(y.indexOf("--")===0?r.setProperty(y,""):y==="float"?r.cssFloat="":r[y]="");for(var E in s)y=s[E],s.hasOwnProperty(E)&&h[E]!==y&&Xo(r,E,y)}else for(var M in s)s.hasOwnProperty(M)&&Xo(r,M,s[M])}function ci(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gi(r){return Fc.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Di=null;function $n(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Yo=null,ha=null;function mn(r){var s=$t(r);if(s&&(r=s.stateNode)){var h=r[Ot]||null;e:switch(r=s.stateNode,s.type){case"input":if(wr(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),s=h.name,h.type==="radio"&&s!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Vn(""+s)+'"][type="radio"]'),s=0;s<h.length;s++){var y=h[s];if(y!==r&&y.form===r.form){var E=y[Ot]||null;if(!E)throw Error(p(90));wr(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<h.length;s++)y=h[s],y.form===r.form&&Sc(y)}break e;case"textarea":qo(r,h.value,h.defaultValue);break e;case"select":s=h.value,s!=null&&$i(r,!!h.multiple,s,!1)}}}var so=!1;function Ds(r,s,h){if(so)return r(s,h);so=!0;try{var y=r(s);return y}finally{if(so=!1,(Yo!==null||ha!==null)&&(xh(),Yo&&(s=Yo,r=ha,ha=Yo=null,mn(s),r)))for(s=0;s<r.length;s++)mn(r[s])}}function Ls(r,s){var h=r.stateNode;if(h===null)return null;var y=h[Ot]||null;if(y===null)return null;h=y[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(p(231,s,typeof h));return h}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),an=!1;if(Gn)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){an=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{an=!1}var Cr=null,mr=null,Ps=null;function Mr(){if(Ps)return Ps;var r,s=mr,h=s.length,y,E="value"in Cr?Cr.value:Cr.textContent,M=E.length;for(r=0;r<h&&s[r]===E[r];r++);var G=h-r;for(y=1;y<=G&&s[h-y]===E[M-y];y++);return Ps=E.slice(r,1<y?1-y:void 0)}function Rs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ea(){return!0}function RA(){return!1}function mi(r){function s(h,y,E,M,G){this._reactName=h,this._targetInst=E,this.type=y,this.nativeEvent=M,this.target=G,this.currentTarget=null;for(var re in r)r.hasOwnProperty(re)&&(h=r[re],this[re]=h?h(M):M[re]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?ea:RA,this.isPropagationStopped=RA,this}return k(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),s}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=mi(As),Os=k({},As,{view:0,detail:0}),Uc=mi(Os),Ao,Mc,Na,ri=k({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ks,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Na&&(Na&&r.type==="mousemove"?(Ao=r.screenX-Na.screenX,Mc=r.screenY-Na.screenY):Mc=Ao=0,Na=r),Ao)},movementY:function(r){return"movementY"in r?r.movementY:Mc}}),Cl=mi(ri),Zh=k({},ri,{dataTransfer:0}),Li=mi(Zh),ni=k({},Os,{relatedTarget:0}),fa=mi(ni),OA=k({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=mi(OA),qh=k({},As,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),zs=mi(qh),Hu=k({},As,{data:0}),Xh=mi(Hu),Ic={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ja[r])?!!s[r]:!1}function ks(){return Yh}var Nu=k({},Os,{key:function(r){if(r.key){var s=Ic[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Rs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ks,charCode:function(r){return r.type==="keypress"?Rs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Rs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),zA=mi(Nu),ju=k({},ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dc=mi(ju),ls=k({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ks}),md=mi(ls),kA=k({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),El=mi(kA),HA=k({},ri,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Wh=mi(HA),Lc=k({},As,{newState:0,oldState:0}),$h=mi(Lc),NA=[9,13,27,32],Vu=Gn&&"CompositionEvent"in window,jA=null;Gn&&"documentMode"in document&&(jA=document.documentMode);var yd=Gn&&"TextEvent"in window&&!jA,Gu=Gn&&(!Vu||jA&&8<jA&&11>=jA),Tl=" ",Pc=!1;function Rc(r,s){switch(r){case"keyup":return NA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ku(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Wo=!1;function $o(r,s){switch(r){case"compositionend":return Ku(s);case"keypress":return s.which!==32?null:(Pc=!0,Tl);case"textInput":return r=s.data,r===Tl&&Pc?null:r;default:return null}}function Oc(r,s){if(Wo)return r==="compositionend"||!Vu&&Rc(r,s)?(r=Mr(),Ps=mr=Cr=null,Wo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Gu&&s.locale!=="ko"?null:s.data;default:return null}}var Jh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VA(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Jh[r.type]:s==="textarea"}function ef(r,s,h,y){Yo?ha?ha.push(y):ha=[y]:Yo=y,s=kf(s,"onChange"),0<s.length&&(h=new oo("onChange","change",null,h,y),r.push({event:h,listeners:s}))}var Hs=null,GA=null;function _d(r){Oa(r,0)}function Sl(r){var s=On(r);if(Sc(s))return r}function zc(r,s){if(r==="change")return s}var kc=!1;if(Gn){var Fl;if(Gn){var Hc="oninput"in document;if(!Hc){var Ul=document.createElement("div");Ul.setAttribute("oninput","return;"),Hc=typeof Ul.oninput=="function"}Fl=Hc}else Fl=!1;kc=Fl&&(!document.documentMode||9<document.documentMode)}function Va(){Hs&&(Hs.detachEvent("onpropertychange",Nc),GA=Hs=null)}function Nc(r){if(r.propertyName==="value"&&Sl(GA)){var s=[];ef(s,GA,r,$n(r)),Ds(_d,s)}}function Zu(r,s,h){r==="focusin"?(Va(),Hs=s,GA=h,Hs.attachEvent("onpropertychange",Nc)):r==="focusout"&&Va()}function qu(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Sl(GA)}function tf(r,s){if(r==="click")return Sl(s)}function kr(r,s){if(r==="input"||r==="change")return Sl(s)}function Jo(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Hi=typeof Object.is=="function"?Object.is:Jo;function Ml(r,s){if(Hi(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var h=Object.keys(r),y=Object.keys(s);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var E=h[y];if(!Ye.call(s,E)||!Hi(r[E],s[E]))return!1}return!0}function rf(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function nf(r,s){var h=rf(r);r=0;for(var y;h;){if(h.nodeType===3){if(y=r+h.textContent.length,r<=s&&y>=s)return{node:h,offset:s-r};r=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=rf(h)}}function af(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?af(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Xu(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Zo(r.document);s instanceof r.HTMLIFrameElement;){try{var h=typeof s.contentWindow.location.href=="string"}catch{h=!1}if(h)r=s.contentWindow;else break;s=Zo(r.document)}return s}function Yu(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var sf=Gn&&"documentMode"in document&&11>=document.documentMode,Ns=null,KA=null,lo=null,Il=!1;function co(r,s,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Il||Ns==null||Ns!==Zo(y)||(y=Ns,"selectionStart"in y&&Yu(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),lo&&Ml(lo,y)||(lo=y,y=kf(KA,"onSelect"),0<y.length&&(s=new oo("onSelect","select",null,s,h),r.push({event:s,listeners:y}),s.target=Ns)))}function Ca(r,s){var h={};return h[r.toLowerCase()]=s.toLowerCase(),h["Webkit"+r]="webkit"+s,h["Moz"+r]="moz"+s,h}var xi={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionrun:Ca("Transition","TransitionRun"),transitionstart:Ca("Transition","TransitionStart"),transitioncancel:Ca("Transition","TransitionCancel"),transitionend:Ca("Transition","TransitionEnd")},jc={},Wu={};Gn&&(Wu=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);function js(r){if(jc[r])return jc[r];if(!xi[r])return r;var s=xi[r],h;for(h in s)if(s.hasOwnProperty(h)&&h in Wu)return jc[r]=s[h];return r}var uo=js("animationend"),Ql=js("animationiteration"),Dl=js("animationstart"),Ll=js("transitionrun"),Vc=js("transitionstart"),of=js("transitioncancel"),eA=js("transitionend"),tA=new Map,Gc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gc.push("scrollEnd");function da(r,s){tA.set(r,s),ti(s,[r])}var Pr=new WeakMap;function Ni(r,s){if(typeof r=="object"&&r!==null){var h=Pr.get(r);return h!==void 0?h:(s={value:r,source:s,stack:Ou(s)},Pr.set(r,s),s)}return{value:r,source:s,stack:Ou(s)}}var ta=[],rA=0,nA=0;function Kc(){for(var r=rA,s=nA=rA=0;s<r;){var h=ta[s];ta[s++]=null;var y=ta[s];ta[s++]=null;var E=ta[s];ta[s++]=null;var M=ta[s];if(ta[s++]=null,y!==null&&E!==null){var G=y.pending;G===null?E.next=E:(E.next=G.next,G.next=E),y.pending=E}M!==0&&iA(h,E,M)}}function Pl(r,s,h,y){ta[rA++]=r,ta[rA++]=s,ta[rA++]=h,ta[rA++]=y,nA|=y,r.lanes|=y,r=r.alternate,r!==null&&(r.lanes|=y)}function Zc(r,s,h,y){return Pl(r,s,h,y),ho(r)}function ZA(r,s){return Pl(r,null,null,s),ho(r)}function iA(r,s,h){r.lanes|=h;var y=r.alternate;y!==null&&(y.lanes|=h);for(var E=!1,M=r.return;M!==null;)M.childLanes|=h,y=M.alternate,y!==null&&(y.childLanes|=h),M.tag===22&&(r=M.stateNode,r===null||r._visibility&1||(E=!0)),r=M,M=M.return;return r.tag===3?(M=r.stateNode,E&&s!==null&&(E=31-Un(h),r=M.hiddenUpdates,y=r[E],y===null?r[E]=[s]:y.push(s),s.lane=h|536870912),M):null}function ho(r){if(50<Es)throw Es=0,gu=null,Error(p(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Vs={};function $u(r,s,h,y){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(r,s,h,y){return new $u(r,s,h,y)}function qc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ea(r,s){var h=r.alternate;return h===null?(h=ji(r.tag,s,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=s,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&65011712,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,s=r.dependencies,h.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h.refCleanup=r.refCleanup,h}function qA(r,s){r.flags&=65011714;var h=r.alternate;return h===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,s=h.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function aA(r,s,h,y,E,M){var G=0;if(y=r,typeof r=="function")qc(r)&&(G=1);else if(typeof r=="string")G=ie(r,h,xt.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ot:return r=ji(31,h,s,E),r.elementType=ot,r.lanes=M,r;case ne:return sA(h.children,E,M,s);case ye:G=8,E|=24;break;case Se:return r=ji(12,h,s,E|2),r.elementType=Se,r.lanes=M,r;case Me:return r=ji(13,h,s,E),r.elementType=Me,r.lanes=M,r;case Ne:return r=ji(19,h,s,E),r.elementType=Ne,r.lanes=M,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case le:case De:G=10;break e;case ve:G=9;break e;case Re:G=11;break e;case st:G=14;break e;case mt:G=16,y=null;break e}G=29,h=Error(p(130,r===null?"null":typeof r,"")),y=null}return s=ji(G,h,s,E),s.elementType=r,s.type=y,s.lanes=M,s}function sA(r,s,h,y){return r=ji(7,r,y,s),r.lanes=h,r}function Rl(r,s,h){return r=ji(6,r,null,s),r.lanes=h,r}function Xc(r,s,h){return s=ji(4,r.children!==null?r.children:[],r.key,s),s.lanes=h,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var fo=[],cs=0,oA=null,AA=0,Vi=[],wi=0,Ta=null,Gs=1,us="";function sn(r,s){fo[cs++]=AA,fo[cs++]=oA,oA=r,AA=s}function po(r,s,h){Vi[wi++]=Gs,Vi[wi++]=us,Vi[wi++]=Ta,Ta=r;var y=Gs;r=us;var E=32-Un(y)-1;y&=~(1<<E),h+=1;var M=32-Un(s)+E;if(30<M){var G=E-E%5;M=(y&(1<<G)-1).toString(32),y>>=G,E-=G,Gs=1<<32-Un(s)+E|h<<E|y,us=M+r}else Gs=1<<M|h<<E|y,us=r}function ra(r){r.return!==null&&(sn(r,1),po(r,1,0))}function Ol(r){for(;r===oA;)oA=fo[--cs],fo[cs]=null,AA=fo[--cs],fo[cs]=null;for(;r===Ta;)Ta=Vi[--wi],Vi[wi]=null,us=Vi[--wi],Vi[wi]=null,Gs=Vi[--wi],Vi[wi]=null}var yi=null,Mn=null,Fr=!1,Ga=null,pa=!1,zl=Error(p(519));function go(r){var s=Error(p(418,""));throw XA(Ni(s,r)),zl}function Yc(r){var s=r.stateNode,h=r.type,y=r.memoizedProps;switch(s[qt]=r,s[Ot]=y,h){case"dialog":Tr("cancel",s),Tr("close",s);break;case"iframe":case"object":case"embed":Tr("load",s);break;case"video":case"audio":for(h=0;h<cc.length;h++)Tr(cc[h],s);break;case"source":Tr("error",s);break;case"img":case"image":case"link":Tr("error",s),Tr("load",s);break;case"details":Tr("toggle",s);break;case"input":Tr("invalid",s),ao(s,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),wl(s);break;case"select":Tr("invalid",s);break;case"textarea":Tr("invalid",s),Qr(s,y.value,y.defaultValue,y.children),wl(s)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||s.textContent===""+h||y.suppressHydrationWarning===!0||np(s.textContent,h)?(y.popover!=null&&(Tr("beforetoggle",s),Tr("toggle",s)),y.onScroll!=null&&Tr("scroll",s),y.onScrollEnd!=null&&Tr("scrollend",s),y.onClick!=null&&(s.onclick=Hf),s=!0):s=!1,s||go(r)}function Wc(r){for(yi=r.return;yi;)switch(yi.tag){case 5:case 13:pa=!1;return;case 27:case 3:pa=!0;return;default:yi=yi.return}}function hs(r){if(r!==yi)return!1;if(!Fr)return Wc(r),Fr=!0,!1;var s=r.tag,h;if((h=s!==3&&s!==27)&&((h=s===5)&&(h=r.type,h=!(h!=="form"&&h!=="button")||ip(r.type,r.memoizedProps)),h=!h),h&&Mn&&go(r),Wc(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(p(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(h=r.data,h==="/$"){if(s===0){Mn=ts(r.nextSibling);break e}s--}else h!=="$"&&h!=="$!"&&h!=="$?"||s++;r=r.nextSibling}Mn=null}}else s===27?(s=Mn,FA(r.type)?(r=Ih,Ih=null,Mn=r):Mn=s):Mn=yi?ts(r.stateNode.nextSibling):null;return!0}function Ka(){Mn=yi=null,Fr=!1}function Ju(){var r=Ga;return r!==null&&(aa===null?aa=r:aa.push.apply(aa,r),Ga=null),r}function XA(r){Ga===null?Ga=[r]:Ga.push(r)}var $c=nt(null),mo=null,fs=null;function ga(r,s,h){_t($c,s._currentValue),s._currentValue=h}function na(r){r._currentValue=$c.current,yt($c)}function _i(r,s,h){for(;r!==null;){var y=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,y!==null&&(y.childLanes|=s)):y!==null&&(y.childLanes&s)!==s&&(y.childLanes|=s),r===h)break;r=r.return}}function yo(r,s,h,y){var E=r.child;for(E!==null&&(E.return=r);E!==null;){var M=E.dependencies;if(M!==null){var G=E.child;M=M.firstContext;e:for(;M!==null;){var re=M;M=E;for(var xe=0;xe<s.length;xe++)if(re.context===s[xe]){M.lanes|=h,re=M.alternate,re!==null&&(re.lanes|=h),_i(M.return,h,r),y||(G=null);break e}M=re.next}}else if(E.tag===18){if(G=E.return,G===null)throw Error(p(341));G.lanes|=h,M=G.alternate,M!==null&&(M.lanes|=h),_i(G,h,r),G=null}else G=E.child;if(G!==null)G.return=E;else for(G=E;G!==null;){if(G===r){G=null;break}if(E=G.sibling,E!==null){E.return=G.return,G=E;break}G=G.return}E=G}}function Pi(r,s,h,y){r=null;for(var E=s,M=!1;E!==null;){if(!M){if((E.flags&524288)!==0)M=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var G=E.alternate;if(G===null)throw Error(p(387));if(G=G.memoizedProps,G!==null){var re=E.type;Hi(E.pendingProps.value,G.value)||(r!==null?r.push(re):r=[re])}}else if(E===ur.current){if(G=E.alternate,G===null)throw Error(p(387));G.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(r!==null?r.push(Dt):r=[Dt])}E=E.return}r!==null&&yo(s,r,h,y),s.flags|=262144}function ma(r){for(r=r.firstContext;r!==null;){if(!Hi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function _o(r){mo=r,fs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function rn(r){return Jc(mo,r)}function ds(r,s){return mo===null&&_o(r),Jc(r,s)}function Jc(r,s){var h=s._currentValue;if(s={context:s,memoizedValue:h,next:null},fs===null){if(r===null)throw Error(p(308));fs=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else fs=fs.next=s;return h}var vd=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(h,y){r.push(y)}};this.abort=function(){s.aborted=!0,r.forEach(function(h){return h()})}},eh=o.unstable_scheduleCallback,xd=o.unstable_NormalPriority,In={$$typeof:De,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lA(){return{controller:new vd,data:new Map,refCount:0}}function bi(r){r.refCount--,r.refCount===0&&eh(xd,function(){r.controller.abort()})}var It=null,eu=0,Za=0,cA=null;function uA(r,s){if(It===null){var h=It=[];eu=0,Za=Lf(),cA={status:"pending",value:void 0,then:function(y){h.push(y)}}}return eu++,s.then(Ks,Ks),s}function Ks(){if(--eu===0&&It!==null){cA!==null&&(cA.status="fulfilled");var r=It;It=null,Za=0,cA=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function th(r,s){var h=[],y={status:"pending",value:null,reason:null,then:function(E){h.push(E)}};return r.then(function(){y.status="fulfilled",y.value=s;for(var E=0;E<h.length;E++)(0,h[E])(s)},function(E){for(y.status="rejected",y.reason=E,E=0;E<h.length;E++)(0,h[E])(void 0)}),y}var Er=Te.S;Te.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&uA(r,s),Er!==null&&Er(r,s)};var ps=nt(null);function tu(){var r=ps.current;return r!==null?r:Tn.pooledCache}function vo(r,s){s===null?_t(ps,ps.current):_t(ps,s.pool)}function rh(){var r=tu();return r===null?null:{parent:In._currentValue,pool:r}}var kl=Error(p(460)),ru=Error(p(474)),YA=Error(p(542)),Hl={then:function(){}};function nh(r){return r=r.status,r==="fulfilled"||r==="rejected"}function WA(){}function Af(r,s,h){switch(h=r[h],h===void 0?r.push(s):h!==s&&(s.then(WA,WA),s=h),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,un(r),r;default:if(typeof s.status=="string")s.then(WA,WA);else{if(r=Tn,r!==null&&100<r.shellSuspendCounter)throw Error(p(482));r=s,r.status="pending",r.then(function(y){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=y}},function(y){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=y}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,un(r),r}throw Nl=s,kl}}var Nl=null;function gs(){if(Nl===null)throw Error(p(459));var r=Nl;return Nl=null,r}function un(r){if(r===kl||r===YA)throw Error(p(483))}var Sa=!1;function $A(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hA(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Zs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function qa(r,s,h){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(An&2)!==0){var E=y.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),y.pending=s,s=ho(r),iA(r,null,h),s}return Pl(r,y,s,h),ho(r)}function jl(r,s,h){if(s=s.updateQueue,s!==null&&(s=s.shared,(h&4194048)!==0)){var y=s.lanes;y&=r.pendingLanes,h|=y,s.lanes=h,We(r,h)}}function Fa(r,s){var h=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var E=null,M=null;if(h=h.firstBaseUpdate,h!==null){do{var G={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};M===null?E=M=G:M=M.next=G,h=h.next}while(h!==null);M===null?E=M=s:M=M.next=s}else E=M=s;h={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:M,shared:y.shared,callbacks:y.callbacks},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=s:r.next=s,h.lastBaseUpdate=s}var fA=!1;function Nt(){if(fA){var r=cA;if(r!==null)throw r}}function Jt(r,s,h,y){fA=!1;var E=r.updateQueue;Sa=!1;var M=E.firstBaseUpdate,G=E.lastBaseUpdate,re=E.shared.pending;if(re!==null){E.shared.pending=null;var xe=re,Ke=xe.next;xe.next=null,G===null?M=Ke:G.next=Ke,G=xe;var At=r.alternate;At!==null&&(At=At.updateQueue,re=At.lastBaseUpdate,re!==G&&(re===null?At.firstBaseUpdate=Ke:re.next=Ke,At.lastBaseUpdate=xe))}if(M!==null){var gt=E.baseState;G=0,At=Ke=xe=null,re=M;do{var Xe=re.lane&-536870913,$e=Xe!==re.lane;if($e?(zr&Xe)===Xe:(y&Xe)===Xe){Xe!==0&&Xe===Za&&(fA=!0),At!==null&&(At=At.next={lane:0,tag:re.tag,payload:re.payload,callback:null,next:null});e:{var dr=r,cr=re;Xe=s;var br=h;switch(cr.tag){case 1:if(dr=cr.payload,typeof dr=="function"){gt=dr.call(br,gt,Xe);break e}gt=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=cr.payload,Xe=typeof dr=="function"?dr.call(br,gt,Xe):dr,Xe==null)break e;gt=k({},gt,Xe);break e;case 2:Sa=!0}}Xe=re.callback,Xe!==null&&(r.flags|=64,$e&&(r.flags|=8192),$e=E.callbacks,$e===null?E.callbacks=[Xe]:$e.push(Xe))}else $e={lane:Xe,tag:re.tag,payload:re.payload,callback:re.callback,next:null},At===null?(Ke=At=$e,xe=gt):At=At.next=$e,G|=Xe;if(re=re.next,re===null){if(re=E.shared.pending,re===null)break;$e=re,re=$e.next,$e.next=null,E.lastBaseUpdate=$e,E.shared.pending=null}}while(!0);At===null&&(xe=gt),E.baseState=xe,E.firstBaseUpdate=Ke,E.lastBaseUpdate=At,M===null&&(E.shared.lanes=0),sl|=G,r.lanes=G,r.memoizedState=gt}}function Vl(r,s){if(typeof r!="function")throw Error(p(191,r));r.call(s)}function nu(r,s){var h=r.callbacks;if(h!==null)for(r.callbacks=null,r=0;r<h.length;r++)Vl(h[r],s)}var xo=nt(null),Bi=nt(0);function ih(r,s){r=Io,_t(Bi,r),_t(xo,s),Io=r|s.baseLanes}function Ci(){_t(Bi,Io),_t(xo,xo.current)}function ah(){Io=Bi.current,yt(xo),yt(Bi)}var Ua=0,tr=null,lr=null,Jn=null,wo=!1,Gi=!1,ms=!1,bo=0,Bo=0,Ma=null,sh=0;function yn(){throw Error(p(321))}function qs(r,s){if(s===null)return!1;for(var h=0;h<s.length&&h<r.length;h++)if(!Hi(r[h],s[h]))return!1;return!0}function Gl(r,s,h,y,E,M){return Ua=M,tr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Te.H=r===null||r.memoizedState===null?lf:lh,ms=!1,M=h(y,E),ms=!1,Gi&&(M=Co(s,h,y,E)),Kl(r),M}function Kl(r){Te.H=xs;var s=lr!==null&&lr.next!==null;if(Ua=0,Jn=lr=tr=null,wo=!1,Bo=0,Ma=null,s)throw Error(p(300));r===null||Ei||(r=r.dependencies,r!==null&&ma(r)&&(Ei=!0))}function Co(r,s,h,y){tr=r;var E=0;do{if(Gi&&(Ma=null),Bo=0,Gi=!1,25<=E)throw Error(p(301));if(E+=1,Jn=lr=null,r.updateQueue!=null){var M=r.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}Te.H=ch,M=s(h,y)}while(Gi);return M}function oh(){var r=Te.H,s=r.useState()[0];return s=typeof s.then=="function"?c(s):s,r=r.useState()[0],(lr!==null?lr.memoizedState:null)!==r&&(tr.flags|=1024),s}function Zl(){var r=bo!==0;return bo=0,r}function dA(r,s,h){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~h}function ql(r){if(wo){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wo=!1}Ua=0,Jn=lr=tr=null,Gi=!1,Bo=bo=0,Ma=null}function m(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?tr.memoizedState=Jn=r:Jn=Jn.next=r,Jn}function e(){if(lr===null){var r=tr.alternate;r=r!==null?r.memoizedState:null}else r=lr.next;var s=Jn===null?tr.memoizedState:Jn.next;if(s!==null)Jn=s,lr=r;else{if(r===null)throw tr.alternate===null?Error(p(467)):Error(p(310));lr=r,r={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},Jn===null?tr.memoizedState=Jn=r:Jn=Jn.next=r}return Jn}function n(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function c(r){var s=Bo;return Bo+=1,Ma===null&&(Ma=[]),r=Af(Ma,r,s),s=tr,(Jn===null?s.memoizedState:Jn.next)===null&&(s=s.alternate,Te.H=s===null||s.memoizedState===null?lf:lh),r}function f(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return c(r);if(r.$$typeof===De)return rn(r)}throw Error(p(438,String(r)))}function _(r){var s=null,h=tr.updateQueue;if(h!==null&&(s=h.memoCache),s==null){var y=tr.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(s={data:y.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),h===null&&(h=n(),tr.updateQueue=h),h.memoCache=s,h=s.data[s.index],h===void 0)for(h=s.data[s.index]=Array(r),y=0;y<r;y++)h[y]=Qt;return s.index++,h}function b(r,s){return typeof s=="function"?s(r):s}function T(r){var s=e();return U(s,lr,r)}function U(r,s,h){var y=r.queue;if(y===null)throw Error(p(311));y.lastRenderedReducer=h;var E=r.baseQueue,M=y.pending;if(M!==null){if(E!==null){var G=E.next;E.next=M.next,M.next=G}s.baseQueue=E=M,y.pending=null}if(M=r.baseState,E===null)r.memoizedState=M;else{s=E.next;var re=G=null,xe=null,Ke=s,At=!1;do{var gt=Ke.lane&-536870913;if(gt!==Ke.lane?(zr&gt)===gt:(Ua&gt)===gt){var Xe=Ke.revertLane;if(Xe===0)xe!==null&&(xe=xe.next={lane:0,revertLane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),gt===Za&&(At=!0);else if((Ua&Xe)===Xe){Ke=Ke.next,Xe===Za&&(At=!0);continue}else gt={lane:0,revertLane:Ke.revertLane,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},xe===null?(re=xe=gt,G=M):xe=xe.next=gt,tr.lanes|=Xe,sl|=Xe;gt=Ke.action,ms&&h(M,gt),M=Ke.hasEagerState?Ke.eagerState:h(M,gt)}else Xe={lane:gt,revertLane:Ke.revertLane,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},xe===null?(re=xe=Xe,G=M):xe=xe.next=Xe,tr.lanes|=gt,sl|=gt;Ke=Ke.next}while(Ke!==null&&Ke!==s);if(xe===null?G=M:xe.next=re,!Hi(M,r.memoizedState)&&(Ei=!0,At&&(h=cA,h!==null)))throw h;r.memoizedState=M,r.baseState=G,r.baseQueue=xe,y.lastRenderedState=M}return E===null&&(y.lanes=0),[r.memoizedState,y.dispatch]}function Q(r){var s=e(),h=s.queue;if(h===null)throw Error(p(311));h.lastRenderedReducer=r;var y=h.dispatch,E=h.pending,M=s.memoizedState;if(E!==null){h.pending=null;var G=E=E.next;do M=r(M,G.action),G=G.next;while(G!==E);Hi(M,s.memoizedState)||(Ei=!0),s.memoizedState=M,s.baseQueue===null&&(s.baseState=M),h.lastRenderedState=M}return[M,y]}function O(r,s,h){var y=tr,E=e(),M=Fr;if(M){if(h===void 0)throw Error(p(407));h=h()}else h=s();var G=!Hi((lr||E).memoizedState,h);G&&(E.memoizedState=h,Ei=!0),E=E.queue;var re=Y.bind(null,y,E,r);if(Dr(2048,8,re,[r]),E.getSnapshot!==s||G||Jn!==null&&Jn.memoizedState.tag&1){if(y.flags|=2048,Bt(9,lt(),z.bind(null,y,E,h,s),null),Tn===null)throw Error(p(349));M||(Ua&124)!==0||H(y,s,h)}return h}function H(r,s,h){r.flags|=16384,r={getSnapshot:s,value:h},s=tr.updateQueue,s===null?(s=n(),tr.updateQueue=s,s.stores=[r]):(h=s.stores,h===null?s.stores=[r]:h.push(r))}function z(r,s,h,y){s.value=h,s.getSnapshot=y,ee(s)&&Ae(r)}function Y(r,s,h){return h(function(){ee(s)&&Ae(r)})}function ee(r){var s=r.getSnapshot;r=r.value;try{var h=s();return!Hi(r,h)}catch{return!0}}function Ae(r){var s=ZA(r,2);s!==null&&sa(s,r,2)}function oe(r){var s=m();if(typeof r=="function"){var h=r;if(r=h(),ms){Yr(!0);try{h()}finally{Yr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:r},s}function ce(r,s,h,y){return r.baseState=h,U(r,lr,typeof y=="function"?y:b)}function fe(r,s,h,y,E){if(qr(r))throw Error(p(485));if(r=s.action,r!==null){var M={payload:E,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){M.listeners.push(G)}};Te.T!==null?h(!0):M.isTransition=!1,y(M),h=s.pending,h===null?(M.next=s.pending=M,me(s,M)):(M.next=h.next,s.pending=h.next=M)}}function me(r,s){var h=s.action,y=s.payload,E=r.state;if(s.isTransition){var M=Te.T,G={};Te.T=G;try{var re=h(E,y),xe=Te.S;xe!==null&&xe(G,re),_e(r,s,re)}catch(Ke){Ue(r,s,Ke)}finally{Te.T=M}}else try{M=h(E,y),_e(r,s,M)}catch(Ke){Ue(r,s,Ke)}}function _e(r,s,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){we(r,s,y)},function(y){return Ue(r,s,y)}):we(r,s,h)}function we(r,s,h){s.status="fulfilled",s.value=h,Ee(s),r.state=h,s=r.pending,s!==null&&(h=s.next,h===s?r.pending=null:(h=h.next,s.next=h,me(r,h)))}function Ue(r,s,h){var y=r.pending;if(r.pending=null,y!==null){y=y.next;do s.status="rejected",s.reason=h,Ee(s),s=s.next;while(s!==y)}r.action=null}function Ee(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Ge(r,s){return s}function je(r,s){if(Fr){var h=Tn.formState;if(h!==null){e:{var y=tr;if(Fr){if(Mn){t:{for(var E=Mn,M=pa;E.nodeType!==8;){if(!M){E=null;break t}if(E=ts(E.nextSibling),E===null){E=null;break t}}M=E.data,E=M==="F!"||M==="F"?E:null}if(E){Mn=ts(E.nextSibling),y=E.data==="F!";break e}}go(y)}y=!1}y&&(s=h[0])}}return h=m(),h.memoizedState=h.baseState=s,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ge,lastRenderedState:s},h.queue=y,h=Qn.bind(null,tr,y),y.dispatch=h,y=oe(!1),M=Kn.bind(null,tr,!1,y.queue),y=m(),E={state:s,dispatch:null,action:r,pending:null},y.queue=E,h=fe.bind(null,tr,E,M,h),E.dispatch=h,y.memoizedState=r,[s,h,!1]}function rt(r){var s=e();return it(s,lr,r)}function it(r,s,h){if(s=U(r,s,Ge)[0],r=T(b)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var y=c(s)}catch(G){throw G===kl?YA:G}else y=s;s=e();var E=s.queue,M=E.dispatch;return h!==s.memoizedState&&(tr.flags|=2048,Bt(9,lt(),et.bind(null,E,h),null)),[y,M,r]}function et(r,s){r.action=s}function Et(r){var s=e(),h=lr;if(h!==null)return it(s,h,r);e(),s=s.memoizedState,h=e();var y=h.queue.dispatch;return h.memoizedState=r,[s,y,!1]}function Bt(r,s,h,y){return r={tag:r,create:h,deps:y,inst:s,next:null},s=tr.updateQueue,s===null&&(s=n(),tr.updateQueue=s),h=s.lastEffect,h===null?s.lastEffect=r.next=r:(y=h.next,h.next=r,r.next=y,s.lastEffect=r),r}function lt(){return{destroy:void 0,resource:void 0}}function kt(){return e().memoizedState}function hr(r,s,h,y){var E=m();y=y===void 0?null:y,tr.flags|=r,E.memoizedState=Bt(1|s,lt(),h,y)}function Dr(r,s,h,y){var E=e();y=y===void 0?null:y;var M=E.memoizedState.inst;lr!==null&&y!==null&&qs(y,lr.memoizedState.deps)?E.memoizedState=Bt(s,M,h,y):(tr.flags|=r,E.memoizedState=Bt(1|s,M,h,y))}function _r(r,s){hr(8390656,8,r,s)}function Wr(r,s){Dr(2048,8,r,s)}function on(r,s){return Dr(4,2,r,s)}function hn(r,s){return Dr(4,4,r,s)}function Zr(r,s){if(typeof s=="function"){r=r();var h=s(r);return function(){typeof h=="function"?h():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function $r(r,s,h){h=h!=null?h.concat([r]):null,Dr(4,4,Zr.bind(null,s,r),h)}function zn(){}function ii(r,s){var h=e();s=s===void 0?null:s;var y=h.memoizedState;return s!==null&&qs(s,y[1])?y[0]:(h.memoizedState=[r,s],r)}function ui(r,s){var h=e();s=s===void 0?null:s;var y=h.memoizedState;if(s!==null&&qs(s,y[1]))return y[0];if(y=r(),ms){Yr(!0);try{r()}finally{Yr(!1)}}return h.memoizedState=[y,s],y}function Ri(r,s,h){return h===void 0||(Ua&1073741824)!==0?r.memoizedState=s:(r.memoizedState=h,r=sc(),tr.lanes|=r,sl|=r,h)}function ys(r,s,h,y){return Hi(h,s)?h:xo.current!==null?(r=Ri(r,h,y),Hi(r,s)||(Ei=!0),r):(Ua&42)===0?(Ei=!0,r.memoizedState=h):(r=sc(),tr.lanes|=r,sl|=r,s)}function Xa(r,s,h,y,E){var M=ut.p;ut.p=M!==0&&8>M?M:8;var G=Te.T,re={};Te.T=re,Kn(r,!1,s,h);try{var xe=E(),Ke=Te.S;if(Ke!==null&&Ke(re,xe),xe!==null&&typeof xe=="object"&&typeof xe.then=="function"){var At=th(xe,y);fn(r,s,At,qi(r))}else fn(r,s,y,qi(r))}catch(gt){fn(r,s,{then:function(){},status:"rejected",reason:gt},qi())}finally{ut.p=M,Te.T=G}}function Eo(){}function _s(r,s,h,y){if(r.tag!==5)throw Error(p(476));var E=To(r).queue;Xa(r,E,s,Ct,h===null?Eo:function(){return Ya(r),h(y)})}function To(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Ct,baseState:Ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:Ct},next:null};var h={};return s.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:h},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Ya(r){var s=To(r).next.queue;fn(r,s,{},qi())}function Wa(){return rn(Dt)}function ia(){return e().memoizedState}function vs(){return e().memoizedState}function pA(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var h=qi();r=Zs(h);var y=qa(s,r,h);y!==null&&(sa(y,s,h),jl(y,s,h)),s={cache:lA()},r.payload=s;return}s=s.return}}function gA(r,s,h){var y=qi();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},qr(r)?Xs(s,h):(h=Zc(r,s,h,y),h!==null&&(sa(h,r,y),Ah(h,s,y)))}function Qn(r,s,h){var y=qi();fn(r,s,h,y)}function fn(r,s,h,y){var E={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(qr(r))Xs(s,E);else{var M=r.alternate;if(r.lanes===0&&(M===null||M.lanes===0)&&(M=s.lastRenderedReducer,M!==null))try{var G=s.lastRenderedState,re=M(G,h);if(E.hasEagerState=!0,E.eagerState=re,Hi(re,G))return Pl(r,s,E,0),Tn===null&&Kc(),!1}catch{}finally{}if(h=Zc(r,s,E,y),h!==null)return sa(h,r,y),Ah(h,s,y),!0}return!1}function Kn(r,s,h,y){if(y={lane:2,revertLane:Lf(),action:y,hasEagerState:!1,eagerState:null,next:null},qr(r)){if(s)throw Error(p(479))}else s=Zc(r,h,y,2),s!==null&&sa(s,r,2)}function qr(r){var s=r.alternate;return r===tr||s!==null&&s===tr}function Xs(r,s){Gi=wo=!0;var h=r.pending;h===null?s.next=s:(s.next=h.next,h.next=s),r.pending=s}function Ah(r,s,h){if((h&4194048)!==0){var y=s.lanes;y&=r.pendingLanes,h|=y,s.lanes=h,We(r,h)}}var xs={readContext:rn,use:f,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn},lf={readContext:rn,use:f,useCallback:function(r,s){return m().memoizedState=[r,s===void 0?null:s],r},useContext:rn,useEffect:_r,useImperativeHandle:function(r,s,h){h=h!=null?h.concat([r]):null,hr(4194308,4,Zr.bind(null,s,r),h)},useLayoutEffect:function(r,s){return hr(4194308,4,r,s)},useInsertionEffect:function(r,s){hr(4,2,r,s)},useMemo:function(r,s){var h=m();s=s===void 0?null:s;var y=r();if(ms){Yr(!0);try{r()}finally{Yr(!1)}}return h.memoizedState=[y,s],y},useReducer:function(r,s,h){var y=m();if(h!==void 0){var E=h(s);if(ms){Yr(!0);try{h(s)}finally{Yr(!1)}}}else E=s;return y.memoizedState=y.baseState=E,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:E},y.queue=r,r=r.dispatch=gA.bind(null,tr,r),[y.memoizedState,r]},useRef:function(r){var s=m();return r={current:r},s.memoizedState=r},useState:function(r){r=oe(r);var s=r.queue,h=Qn.bind(null,tr,s);return s.dispatch=h,[r.memoizedState,h]},useDebugValue:zn,useDeferredValue:function(r,s){var h=m();return Ri(h,r,s)},useTransition:function(){var r=oe(!1);return r=Xa.bind(null,tr,r.queue,!0,!1),m().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,h){var y=tr,E=m();if(Fr){if(h===void 0)throw Error(p(407));h=h()}else{if(h=s(),Tn===null)throw Error(p(349));(zr&124)!==0||H(y,s,h)}E.memoizedState=h;var M={value:h,getSnapshot:s};return E.queue=M,_r(Y.bind(null,y,M,r),[r]),y.flags|=2048,Bt(9,lt(),z.bind(null,y,M,h,s),null),h},useId:function(){var r=m(),s=Tn.identifierPrefix;if(Fr){var h=us,y=Gs;h=(y&~(1<<32-Un(y)-1)).toString(32)+h,s=""+s+"R"+h,h=bo++,0<h&&(s+="H"+h.toString(32)),s+=""}else h=sh++,s=""+s+"r"+h.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:Wa,useFormState:je,useActionState:je,useOptimistic:function(r){var s=m();s.memoizedState=s.baseState=r;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=h,s=Kn.bind(null,tr,!0,h),h.dispatch=s,[r,s]},useMemoCache:_,useCacheRefresh:function(){return m().memoizedState=pA.bind(null,tr)}},lh={readContext:rn,use:f,useCallback:ii,useContext:rn,useEffect:Wr,useImperativeHandle:$r,useInsertionEffect:on,useLayoutEffect:hn,useMemo:ui,useReducer:T,useRef:kt,useState:function(){return T(b)},useDebugValue:zn,useDeferredValue:function(r,s){var h=e();return ys(h,lr.memoizedState,r,s)},useTransition:function(){var r=T(b)[0],s=e().memoizedState;return[typeof r=="boolean"?r:c(r),s]},useSyncExternalStore:O,useId:ia,useHostTransitionStatus:Wa,useFormState:rt,useActionState:rt,useOptimistic:function(r,s){var h=e();return ce(h,lr,r,s)},useMemoCache:_,useCacheRefresh:vs},ch={readContext:rn,use:f,useCallback:ii,useContext:rn,useEffect:Wr,useImperativeHandle:$r,useInsertionEffect:on,useLayoutEffect:hn,useMemo:ui,useReducer:Q,useRef:kt,useState:function(){return Q(b)},useDebugValue:zn,useDeferredValue:function(r,s){var h=e();return lr===null?Ri(h,r,s):ys(h,lr.memoizedState,r,s)},useTransition:function(){var r=Q(b)[0],s=e().memoizedState;return[typeof r=="boolean"?r:c(r),s]},useSyncExternalStore:O,useId:ia,useHostTransitionStatus:Wa,useFormState:Et,useActionState:Et,useOptimistic:function(r,s){var h=e();return lr!==null?ce(h,lr,r,s):(h.baseState=r,[r,h.queue.dispatch])},useMemoCache:_,useCacheRefresh:vs},ya=null,Ia=0;function $a(r){var s=Ia;return Ia+=1,ya===null&&(ya=[]),Af(ya,r,s)}function mA(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function JA(r,s){throw s.$$typeof===q?Error(p(525)):(r=Object.prototype.toString.call(s),Error(p(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Xl(r){var s=r._init;return s(r._payload)}function Yl(r){function s(Pe,Ie){if(r){var ke=Pe.deletions;ke===null?(Pe.deletions=[Ie],Pe.flags|=16):ke.push(Ie)}}function h(Pe,Ie){if(!r)return null;for(;Ie!==null;)s(Pe,Ie),Ie=Ie.sibling;return null}function y(Pe){for(var Ie=new Map;Pe!==null;)Pe.key!==null?Ie.set(Pe.key,Pe):Ie.set(Pe.index,Pe),Pe=Pe.sibling;return Ie}function E(Pe,Ie){return Pe=Ea(Pe,Ie),Pe.index=0,Pe.sibling=null,Pe}function M(Pe,Ie,ke){return Pe.index=ke,r?(ke=Pe.alternate,ke!==null?(ke=ke.index,ke<Ie?(Pe.flags|=67108866,Ie):ke):(Pe.flags|=67108866,Ie)):(Pe.flags|=1048576,Ie)}function G(Pe){return r&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function re(Pe,Ie,ke,ht){return Ie===null||Ie.tag!==6?(Ie=Rl(ke,Pe.mode,ht),Ie.return=Pe,Ie):(Ie=E(Ie,ke),Ie.return=Pe,Ie)}function xe(Pe,Ie,ke,ht){var Ht=ke.type;return Ht===ne?At(Pe,Ie,ke.props.children,ht,ke.key):Ie!==null&&(Ie.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===mt&&Xl(Ht)===Ie.type)?(Ie=E(Ie,ke.props),mA(Ie,ke),Ie.return=Pe,Ie):(Ie=aA(ke.type,ke.key,ke.props,null,Pe.mode,ht),mA(Ie,ke),Ie.return=Pe,Ie)}function Ke(Pe,Ie,ke,ht){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==ke.containerInfo||Ie.stateNode.implementation!==ke.implementation?(Ie=Xc(ke,Pe.mode,ht),Ie.return=Pe,Ie):(Ie=E(Ie,ke.children||[]),Ie.return=Pe,Ie)}function At(Pe,Ie,ke,ht,Ht){return Ie===null||Ie.tag!==7?(Ie=sA(ke,Pe.mode,ht,Ht),Ie.return=Pe,Ie):(Ie=E(Ie,ke),Ie.return=Pe,Ie)}function gt(Pe,Ie,ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Rl(""+Ie,Pe.mode,ke),Ie.return=Pe,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case X:return ke=aA(Ie.type,Ie.key,Ie.props,null,Pe.mode,ke),mA(ke,Ie),ke.return=Pe,ke;case W:return Ie=Xc(Ie,Pe.mode,ke),Ie.return=Pe,Ie;case mt:var ht=Ie._init;return Ie=ht(Ie._payload),gt(Pe,Ie,ke)}if(Wt(Ie)||Zt(Ie))return Ie=sA(Ie,Pe.mode,ke,null),Ie.return=Pe,Ie;if(typeof Ie.then=="function")return gt(Pe,$a(Ie),ke);if(Ie.$$typeof===De)return gt(Pe,ds(Pe,Ie),ke);JA(Pe,Ie)}return null}function Xe(Pe,Ie,ke,ht){var Ht=Ie!==null?Ie.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Ht!==null?null:re(Pe,Ie,""+ke,ht);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case X:return ke.key===Ht?xe(Pe,Ie,ke,ht):null;case W:return ke.key===Ht?Ke(Pe,Ie,ke,ht):null;case mt:return Ht=ke._init,ke=Ht(ke._payload),Xe(Pe,Ie,ke,ht)}if(Wt(ke)||Zt(ke))return Ht!==null?null:At(Pe,Ie,ke,ht,null);if(typeof ke.then=="function")return Xe(Pe,Ie,$a(ke),ht);if(ke.$$typeof===De)return Xe(Pe,Ie,ds(Pe,ke),ht);JA(Pe,ke)}return null}function $e(Pe,Ie,ke,ht,Ht){if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return Pe=Pe.get(ke)||null,re(Ie,Pe,""+ht,Ht);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case X:return Pe=Pe.get(ht.key===null?ke:ht.key)||null,xe(Ie,Pe,ht,Ht);case W:return Pe=Pe.get(ht.key===null?ke:ht.key)||null,Ke(Ie,Pe,ht,Ht);case mt:var Hr=ht._init;return ht=Hr(ht._payload),$e(Pe,Ie,ke,ht,Ht)}if(Wt(ht)||Zt(ht))return Pe=Pe.get(ke)||null,At(Ie,Pe,ht,Ht,null);if(typeof ht.then=="function")return $e(Pe,Ie,ke,$a(ht),Ht);if(ht.$$typeof===De)return $e(Pe,Ie,ke,ds(Ie,ht),Ht);JA(Ie,ht)}return null}function dr(Pe,Ie,ke,ht){for(var Ht=null,Hr=null,ar=Ie,pr=Ie=0,Aa=null;ar!==null&&pr<ke.length;pr++){ar.index>pr?(Aa=ar,ar=null):Aa=ar.sibling;var ln=Xe(Pe,ar,ke[pr],ht);if(ln===null){ar===null&&(ar=Aa);break}r&&ar&&ln.alternate===null&&s(Pe,ar),Ie=M(ln,Ie,pr),Hr===null?Ht=ln:Hr.sibling=ln,Hr=ln,ar=Aa}if(pr===ke.length)return h(Pe,ar),Fr&&sn(Pe,pr),Ht;if(ar===null){for(;pr<ke.length;pr++)ar=gt(Pe,ke[pr],ht),ar!==null&&(Ie=M(ar,Ie,pr),Hr===null?Ht=ar:Hr.sibling=ar,Hr=ar);return Fr&&sn(Pe,pr),Ht}for(ar=y(ar);pr<ke.length;pr++)Aa=$e(ar,Pe,pr,ke[pr],ht),Aa!==null&&(r&&Aa.alternate!==null&&ar.delete(Aa.key===null?pr:Aa.key),Ie=M(Aa,Ie,pr),Hr===null?Ht=Aa:Hr.sibling=Aa,Hr=Aa);return r&&ar.forEach(function(bu){return s(Pe,bu)}),Fr&&sn(Pe,pr),Ht}function cr(Pe,Ie,ke,ht){if(ke==null)throw Error(p(151));for(var Ht=null,Hr=null,ar=Ie,pr=Ie=0,Aa=null,ln=ke.next();ar!==null&&!ln.done;pr++,ln=ke.next()){ar.index>pr?(Aa=ar,ar=null):Aa=ar.sibling;var bu=Xe(Pe,ar,ln.value,ht);if(bu===null){ar===null&&(ar=Aa);break}r&&ar&&bu.alternate===null&&s(Pe,ar),Ie=M(bu,Ie,pr),Hr===null?Ht=bu:Hr.sibling=bu,Hr=bu,ar=Aa}if(ln.done)return h(Pe,ar),Fr&&sn(Pe,pr),Ht;if(ar===null){for(;!ln.done;pr++,ln=ke.next())ln=gt(Pe,ln.value,ht),ln!==null&&(Ie=M(ln,Ie,pr),Hr===null?Ht=ln:Hr.sibling=ln,Hr=ln);return Fr&&sn(Pe,pr),Ht}for(ar=y(ar);!ln.done;pr++,ln=ke.next())ln=$e(ar,Pe,pr,ln.value,ht),ln!==null&&(r&&ln.alternate!==null&&ar.delete(ln.key===null?pr:ln.key),Ie=M(ln,Ie,pr),Hr===null?Ht=ln:Hr.sibling=ln,Hr=ln);return r&&ar.forEach(function(Mw){return s(Pe,Mw)}),Fr&&sn(Pe,pr),Ht}function br(Pe,Ie,ke,ht){if(typeof ke=="object"&&ke!==null&&ke.type===ne&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case X:e:{for(var Ht=ke.key;Ie!==null;){if(Ie.key===Ht){if(Ht=ke.type,Ht===ne){if(Ie.tag===7){h(Pe,Ie.sibling),ht=E(Ie,ke.props.children),ht.return=Pe,Pe=ht;break e}}else if(Ie.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===mt&&Xl(Ht)===Ie.type){h(Pe,Ie.sibling),ht=E(Ie,ke.props),mA(ht,ke),ht.return=Pe,Pe=ht;break e}h(Pe,Ie);break}else s(Pe,Ie);Ie=Ie.sibling}ke.type===ne?(ht=sA(ke.props.children,Pe.mode,ht,ke.key),ht.return=Pe,Pe=ht):(ht=aA(ke.type,ke.key,ke.props,null,Pe.mode,ht),mA(ht,ke),ht.return=Pe,Pe=ht)}return G(Pe);case W:e:{for(Ht=ke.key;Ie!==null;){if(Ie.key===Ht)if(Ie.tag===4&&Ie.stateNode.containerInfo===ke.containerInfo&&Ie.stateNode.implementation===ke.implementation){h(Pe,Ie.sibling),ht=E(Ie,ke.children||[]),ht.return=Pe,Pe=ht;break e}else{h(Pe,Ie);break}else s(Pe,Ie);Ie=Ie.sibling}ht=Xc(ke,Pe.mode,ht),ht.return=Pe,Pe=ht}return G(Pe);case mt:return Ht=ke._init,ke=Ht(ke._payload),br(Pe,Ie,ke,ht)}if(Wt(ke))return dr(Pe,Ie,ke,ht);if(Zt(ke)){if(Ht=Zt(ke),typeof Ht!="function")throw Error(p(150));return ke=Ht.call(ke),cr(Pe,Ie,ke,ht)}if(typeof ke.then=="function")return br(Pe,Ie,$a(ke),ht);if(ke.$$typeof===De)return br(Pe,Ie,ds(Pe,ke),ht);JA(Pe,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,Ie!==null&&Ie.tag===6?(h(Pe,Ie.sibling),ht=E(Ie,ke),ht.return=Pe,Pe=ht):(h(Pe,Ie),ht=Rl(ke,Pe.mode,ht),ht.return=Pe,Pe=ht),G(Pe)):h(Pe,Ie)}return function(Pe,Ie,ke,ht){try{Ia=0;var Ht=br(Pe,Ie,ke,ht);return ya=null,Ht}catch(ar){if(ar===kl||ar===YA)throw ar;var Hr=ji(29,ar,null,Pe.mode);return Hr.lanes=ht,Hr.return=Pe,Hr}finally{}}}var iu=Yl(!0),wd=Yl(!1),ws=nt(null),bs=null;function el(r){var s=r.alternate;_t(kn,kn.current&1),_t(ws,r),bs===null&&(s===null||xo.current!==null||s.memoizedState!==null)&&(bs=r)}function cf(r){if(r.tag===22){if(_t(kn,kn.current),_t(ws,r),bs===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(bs=r)}}else yA()}function yA(){_t(kn,kn.current),_t(ws,ws.current)}function So(r){yt(ws),bs===r&&(bs=null),yt(kn)}var kn=nt(0);function uf(r){for(var s=r;s!==null;){if(s.tag===13){var h=s.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Ap(h)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Wl(r,s,h,y){s=r.memoizedState,h=h(y,s),h=h==null?s:k({},s,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var au={enqueueSetState:function(r,s,h){r=r._reactInternals;var y=qi(),E=Zs(y);E.payload=s,h!=null&&(E.callback=h),s=qa(r,E,y),s!==null&&(sa(s,r,y),jl(s,r,y))},enqueueReplaceState:function(r,s,h){r=r._reactInternals;var y=qi(),E=Zs(y);E.tag=1,E.payload=s,h!=null&&(E.callback=h),s=qa(r,E,y),s!==null&&(sa(s,r,y),jl(s,r,y))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var h=qi(),y=Zs(h);y.tag=2,s!=null&&(y.callback=s),s=qa(r,y,h),s!==null&&(sa(s,r,h),jl(s,r,h))}};function uh(r,s,h,y,E,M,G){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,M,G):s.prototype&&s.prototype.isPureReactComponent?!Ml(h,y)||!Ml(E,M):!0}function bd(r,s,h,y){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(h,y),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(h,y),s.state!==r&&au.enqueueReplaceState(s,s.state,null)}function tl(r,s){var h=s;if("ref"in s){h={};for(var y in s)y!=="ref"&&(h[y]=s[y])}if(r=r.defaultProps){h===s&&(h=k({},h));for(var E in r)h[E]===void 0&&(h[E]=r[E])}return h}var hf=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function eg(r){hf(r)}function Bd(r){console.error(r)}function Cd(r){hf(r)}function hh(r,s){try{var h=r.onUncaughtError;h(s.value,{componentStack:s.stack})}catch(y){setTimeout(function(){throw y})}}function tg(r,s,h){try{var y=r.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function fh(r,s,h){return h=Zs(h),h.tag=3,h.payload={element:null},h.callback=function(){hh(r,s)},h}function Ed(r){return r=Zs(r),r.tag=3,r}function ff(r,s,h,y){var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var M=y.value;r.payload=function(){return E(M)},r.callback=function(){tg(s,h,y)}}var G=h.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(r.callback=function(){tg(s,h,y),typeof E!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var re=y.stack;this.componentDidCatch(y.value,{componentStack:re!==null?re:""})})}function dh(r,s,h,y,E){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(s=h.alternate,s!==null&&Pi(s,h,E,!0),h=ws.current,h!==null){switch(h.tag){case 13:return bs===null?qd():h.alternate===null&&ai===0&&(ai=3),h.flags&=-257,h.flags|=65536,h.lanes=E,y===Hl?h.flags|=16384:(s=h.updateQueue,s===null?h.updateQueue=new Set([y]):s.add(y),Bh(r,y,E)),!1;case 22:return h.flags|=65536,y===Hl?h.flags|=16384:(s=h.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=s):(h=s.retryQueue,h===null?s.retryQueue=new Set([y]):h.add(y)),Bh(r,y,E)),!1}throw Error(p(435,h.tag))}return Bh(r,y,E),qd(),!1}if(Fr)return s=ws.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=E,y!==zl&&(r=Error(p(422),{cause:y}),XA(Ni(r,h)))):(y!==zl&&(s=Error(p(423),{cause:y}),XA(Ni(s,h))),r=r.current.alternate,r.flags|=65536,E&=-E,r.lanes|=E,y=Ni(y,h),E=fh(r.stateNode,y,E),Fa(r,E),ai!==4&&(ai=2)),!1;var M=Error(p(520),{cause:y});if(M=Ni(M,h),Hn===null?Hn=[M]:Hn.push(M),ai!==4&&(ai=2),s===null)return!0;y=Ni(y,h),h=s;do{switch(h.tag){case 3:return h.flags|=65536,r=E&-E,h.lanes|=r,r=fh(h.stateNode,y,r),Fa(h,r),!1;case 1:if(s=h.type,M=h.stateNode,(h.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(ol===null||!ol.has(M))))return h.flags|=65536,E&=-E,h.lanes|=E,E=Ed(E),ff(E,r,h,y),Fa(h,E),!1}h=h.return}while(h!==null);return!1}var Qa=Error(p(461)),Ei=!1;function Ti(r,s,h,y){s.child=r===null?wd(s,null,h,y):iu(s,r.child,h,y)}function rg(r,s,h,y,E){h=h.render;var M=s.ref;if("ref"in y){var G={};for(var re in y)re!=="ref"&&(G[re]=y[re])}else G=y;return _o(s),y=Gl(r,s,h,G,M,E),re=Zl(),r!==null&&!Ei?(dA(r,s,E),Fo(r,s,E)):(Fr&&re&&ra(s),s.flags|=1,Ti(r,s,y,E),s.child)}function Td(r,s,h,y,E){if(r===null){var M=h.type;return typeof M=="function"&&!qc(M)&&M.defaultProps===void 0&&h.compare===null?(s.tag=15,s.type=M,ng(r,s,M,y,E)):(r=aA(h.type,null,y,s,s.mode,E),r.ref=s.ref,r.return=s,s.child=r)}if(M=r.child,!Jl(r,E)){var G=M.memoizedProps;if(h=h.compare,h=h!==null?h:Ml,h(G,y)&&r.ref===s.ref)return Fo(r,s,E)}return s.flags|=1,r=Ea(M,y),r.ref=s.ref,r.return=s,s.child=r}function ng(r,s,h,y,E){if(r!==null){var M=r.memoizedProps;if(Ml(M,y)&&r.ref===s.ref)if(Ei=!1,s.pendingProps=y=M,Jl(r,E))(r.flags&131072)!==0&&(Ei=!0);else return s.lanes=r.lanes,Fo(r,s,E)}return ph(r,s,h,y,E)}function ig(r,s,h){var y=s.pendingProps,E=y.children,M=r!==null?r.memoizedState:null;if(y.mode==="hidden"){if((s.flags&128)!==0){if(y=M!==null?M.baseLanes|h:h,r!==null){for(E=s.child=r.child,M=0;E!==null;)M=M|E.lanes|E.childLanes,E=E.sibling;s.childLanes=M&~y}else s.childLanes=0,s.child=null;return ag(r,s,y,h)}if((h&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&vo(s,M!==null?M.cachePool:null),M!==null?ih(s,M):Ci(),cf(s);else return s.lanes=s.childLanes=536870912,ag(r,s,M!==null?M.baseLanes|h:h,h)}else M!==null?(vo(s,M.cachePool),ih(s,M),yA(),s.memoizedState=null):(r!==null&&vo(s,null),Ci(),yA());return Ti(r,s,E,h),s.child}function ag(r,s,h,y){var E=tu();return E=E===null?null:{parent:In._currentValue,pool:E},s.memoizedState={baseLanes:h,cachePool:E},r!==null&&vo(s,null),Ci(),cf(s),r!==null&&Pi(r,s,y,!0),null}function df(r,s){var h=s.ref;if(h===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(p(284));(r===null||r.ref!==h)&&(s.flags|=4194816)}}function ph(r,s,h,y,E){return _o(s),h=Gl(r,s,h,y,void 0,E),y=Zl(),r!==null&&!Ei?(dA(r,s,E),Fo(r,s,E)):(Fr&&y&&ra(s),s.flags|=1,Ti(r,s,h,E),s.child)}function pf(r,s,h,y,E,M){return _o(s),s.updateQueue=null,h=Co(s,y,h,E),Kl(r),y=Zl(),r!==null&&!Ei?(dA(r,s,M),Fo(r,s,M)):(Fr&&y&&ra(s),s.flags|=1,Ti(r,s,h,M),s.child)}function Sd(r,s,h,y,E){if(_o(s),s.stateNode===null){var M=Vs,G=h.contextType;typeof G=="object"&&G!==null&&(M=rn(G)),M=new h(y,M),s.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=au,s.stateNode=M,M._reactInternals=s,M=s.stateNode,M.props=y,M.state=s.memoizedState,M.refs={},$A(s),G=h.contextType,M.context=typeof G=="object"&&G!==null?rn(G):Vs,M.state=s.memoizedState,G=h.getDerivedStateFromProps,typeof G=="function"&&(Wl(s,h,G,y),M.state=s.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(G=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),G!==M.state&&au.enqueueReplaceState(M,M.state,null),Jt(s,y,M,E),Nt(),M.state=s.memoizedState),typeof M.componentDidMount=="function"&&(s.flags|=4194308),y=!0}else if(r===null){M=s.stateNode;var re=s.memoizedProps,xe=tl(h,re);M.props=xe;var Ke=M.context,At=h.contextType;G=Vs,typeof At=="object"&&At!==null&&(G=rn(At));var gt=h.getDerivedStateFromProps;At=typeof gt=="function"||typeof M.getSnapshotBeforeUpdate=="function",re=s.pendingProps!==re,At||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(re||Ke!==G)&&bd(s,M,y,G),Sa=!1;var Xe=s.memoizedState;M.state=Xe,Jt(s,y,M,E),Nt(),Ke=s.memoizedState,re||Xe!==Ke||Sa?(typeof gt=="function"&&(Wl(s,h,gt,y),Ke=s.memoizedState),(xe=Sa||uh(s,h,xe,y,Xe,Ke,G))?(At||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(s.flags|=4194308)):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=y,s.memoizedState=Ke),M.props=y,M.state=Ke,M.context=G,y=xe):(typeof M.componentDidMount=="function"&&(s.flags|=4194308),y=!1)}else{M=s.stateNode,hA(r,s),G=s.memoizedProps,At=tl(h,G),M.props=At,gt=s.pendingProps,Xe=M.context,Ke=h.contextType,xe=Vs,typeof Ke=="object"&&Ke!==null&&(xe=rn(Ke)),re=h.getDerivedStateFromProps,(Ke=typeof re=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(G!==gt||Xe!==xe)&&bd(s,M,y,xe),Sa=!1,Xe=s.memoizedState,M.state=Xe,Jt(s,y,M,E),Nt();var $e=s.memoizedState;G!==gt||Xe!==$e||Sa||r!==null&&r.dependencies!==null&&ma(r.dependencies)?(typeof re=="function"&&(Wl(s,h,re,y),$e=s.memoizedState),(At=Sa||uh(s,h,At,y,Xe,$e,xe)||r!==null&&r.dependencies!==null&&ma(r.dependencies))?(Ke||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,$e,xe),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,$e,xe)),typeof M.componentDidUpdate=="function"&&(s.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof M.componentDidUpdate!="function"||G===r.memoizedProps&&Xe===r.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&Xe===r.memoizedState||(s.flags|=1024),s.memoizedProps=y,s.memoizedState=$e),M.props=y,M.state=$e,M.context=xe,y=At):(typeof M.componentDidUpdate!="function"||G===r.memoizedProps&&Xe===r.memoizedState||(s.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||G===r.memoizedProps&&Xe===r.memoizedState||(s.flags|=1024),y=!1)}return M=y,df(r,s),y=(s.flags&128)!==0,M||y?(M=s.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:M.render(),s.flags|=1,r!==null&&y?(s.child=iu(s,r.child,null,E),s.child=iu(s,null,h,E)):Ti(r,s,h,E),s.memoizedState=M.state,r=s.child):r=Fo(r,s,E),r}function rl(r,s,h,y){return Ka(),s.flags|=256,Ti(r,s,h,y),s.child}var $l={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fd(r){return{baseLanes:r,cachePool:rh()}}function Ud(r,s,h){return r=r!==null?r.childLanes&~h:0,s&&(r|=Ra),r}function sg(r,s,h){var y=s.pendingProps,E=!1,M=(s.flags&128)!==0,G;if((G=M)||(G=r!==null&&r.memoizedState===null?!1:(kn.current&2)!==0),G&&(E=!0,s.flags&=-129),G=(s.flags&32)!==0,s.flags&=-33,r===null){if(Fr){if(E?el(s):yA(),Fr){var re=Mn,xe;if(xe=re){e:{for(xe=re,re=pa;xe.nodeType!==8;){if(!re){re=null;break e}if(xe=ts(xe.nextSibling),xe===null){re=null;break e}}re=xe}re!==null?(s.memoizedState={dehydrated:re,treeContext:Ta!==null?{id:Gs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},xe=ji(18,null,null,0),xe.stateNode=re,xe.return=s,s.child=xe,yi=s,Mn=null,xe=!0):xe=!1}xe||go(s)}if(re=s.memoizedState,re!==null&&(re=re.dehydrated,re!==null))return Ap(re)?s.lanes=32:s.lanes=536870912,null;So(s)}return re=y.children,y=y.fallback,E?(yA(),E=s.mode,re=gf({mode:"hidden",children:re},E),y=sA(y,E,h,null),re.return=s,y.return=s,re.sibling=y,s.child=re,E=s.child,E.memoizedState=Fd(h),E.childLanes=Ud(r,G,h),s.memoizedState=$l,y):(el(s),Md(s,re))}if(xe=r.memoizedState,xe!==null&&(re=xe.dehydrated,re!==null)){if(M)s.flags&256?(el(s),s.flags&=-257,s=Id(r,s,h)):s.memoizedState!==null?(yA(),s.child=r.child,s.flags|=128,s=null):(yA(),E=y.fallback,re=s.mode,y=gf({mode:"visible",children:y.children},re),E=sA(E,re,h,null),E.flags|=2,y.return=s,E.return=s,y.sibling=E,s.child=y,iu(s,r.child,null,h),y=s.child,y.memoizedState=Fd(h),y.childLanes=Ud(r,G,h),s.memoizedState=$l,s=E);else if(el(s),Ap(re)){if(G=re.nextSibling&&re.nextSibling.dataset,G)var Ke=G.dgst;G=Ke,y=Error(p(419)),y.stack="",y.digest=G,XA({value:y,source:null,stack:null}),s=Id(r,s,h)}else if(Ei||Pi(r,s,h,!1),G=(h&r.childLanes)!==0,Ei||G){if(G=Tn,G!==null&&(y=h&-h,y=(y&42)!==0?1:Oe(y),y=(y&(G.suspendedLanes|h))!==0?0:y,y!==0&&y!==xe.retryLane))throw xe.retryLane=y,ZA(r,y),sa(G,r,y),Qa;re.data==="$?"||qd(),s=Id(r,s,h)}else re.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=xe.treeContext,Mn=ts(re.nextSibling),yi=s,Fr=!0,Ga=null,pa=!1,r!==null&&(Vi[wi++]=Gs,Vi[wi++]=us,Vi[wi++]=Ta,Gs=r.id,us=r.overflow,Ta=s),s=Md(s,y.children),s.flags|=4096);return s}return E?(yA(),E=y.fallback,re=s.mode,xe=r.child,Ke=xe.sibling,y=Ea(xe,{mode:"hidden",children:y.children}),y.subtreeFlags=xe.subtreeFlags&65011712,Ke!==null?E=Ea(Ke,E):(E=sA(E,re,h,null),E.flags|=2),E.return=s,y.return=s,y.sibling=E,s.child=y,y=E,E=s.child,re=r.child.memoizedState,re===null?re=Fd(h):(xe=re.cachePool,xe!==null?(Ke=In._currentValue,xe=xe.parent!==Ke?{parent:Ke,pool:Ke}:xe):xe=rh(),re={baseLanes:re.baseLanes|h,cachePool:xe}),E.memoizedState=re,E.childLanes=Ud(r,G,h),s.memoizedState=$l,y):(el(s),h=r.child,r=h.sibling,h=Ea(h,{mode:"visible",children:y.children}),h.return=s,h.sibling=null,r!==null&&(G=s.deletions,G===null?(s.deletions=[r],s.flags|=16):G.push(r)),s.child=h,s.memoizedState=null,h)}function Md(r,s){return s=gf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function gf(r,s){return r=ji(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Id(r,s,h){return iu(s,r.child,null,h),r=Md(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function og(r,s,h){r.lanes|=s;var y=r.alternate;y!==null&&(y.lanes|=s),_i(r.return,s,h)}function gh(r,s,h,y,E){var M=r.memoizedState;M===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:E}:(M.isBackwards=s,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=h,M.tailMode=E)}function Ag(r,s,h){var y=s.pendingProps,E=y.revealOrder,M=y.tail;if(Ti(r,s,y.children,h),y=kn.current,(y&2)!==0)y=y&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&og(r,h,s);else if(r.tag===19)og(r,h,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}switch(_t(kn,y),E){case"forwards":for(h=s.child,E=null;h!==null;)r=h.alternate,r!==null&&uf(r)===null&&(E=h),h=h.sibling;h=E,h===null?(E=s.child,s.child=null):(E=h.sibling,h.sibling=null),gh(s,!1,E,h,M);break;case"backwards":for(h=null,E=s.child,s.child=null;E!==null;){if(r=E.alternate,r!==null&&uf(r)===null){s.child=E;break}r=E.sibling,E.sibling=h,h=E,E=r}gh(s,!0,h,null,M);break;case"together":gh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Fo(r,s,h){if(r!==null&&(s.dependencies=r.dependencies),sl|=s.lanes,(h&s.childLanes)===0)if(r!==null){if(Pi(r,s,h,!1),(h&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(p(153));if(s.child!==null){for(r=s.child,h=Ea(r,r.pendingProps),s.child=h,h.return=s;r.sibling!==null;)r=r.sibling,h=h.sibling=Ea(r,r.pendingProps),h.return=s;h.sibling=null}return s.child}function Jl(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&ma(r)))}function ty(r,s,h){switch(s.tag){case 3:ir(s,s.stateNode.containerInfo),ga(s,In,r.memoizedState.cache),Ka();break;case 27:case 5:nn(s);break;case 4:ir(s,s.stateNode.containerInfo);break;case 10:ga(s,s.type,s.memoizedProps.value);break;case 13:var y=s.memoizedState;if(y!==null)return y.dehydrated!==null?(el(s),s.flags|=128,null):(h&s.child.childLanes)!==0?sg(r,s,h):(el(s),r=Fo(r,s,h),r!==null?r.sibling:null);el(s);break;case 19:var E=(r.flags&128)!==0;if(y=(h&s.childLanes)!==0,y||(Pi(r,s,h,!1),y=(h&s.childLanes)!==0),E){if(y)return Ag(r,s,h);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),_t(kn,kn.current),y)break;return null;case 22:case 23:return s.lanes=0,ig(r,s,h);case 24:ga(s,In,r.memoizedState.cache)}return Fo(r,s,h)}function Zn(r,s,h){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ei=!0;else{if(!Jl(r,h)&&(s.flags&128)===0)return Ei=!1,ty(r,s,h);Ei=(r.flags&131072)!==0}else Ei=!1,Fr&&(s.flags&1048576)!==0&&po(s,AA,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var y=s.elementType,E=y._init;if(y=E(y._payload),s.type=y,typeof y=="function")qc(y)?(r=tl(y,r),s.tag=1,s=Sd(null,s,y,r,h)):(s.tag=0,s=ph(null,s,y,r,h));else{if(y!=null){if(E=y.$$typeof,E===Re){s.tag=11,s=rg(null,s,y,r,h);break e}else if(E===st){s.tag=14,s=Td(null,s,y,r,h);break e}}throw s=Vt(y)||y,Error(p(306,s,""))}}return s;case 0:return ph(r,s,s.type,s.pendingProps,h);case 1:return y=s.type,E=tl(y,s.pendingProps),Sd(r,s,y,E,h);case 3:e:{if(ir(s,s.stateNode.containerInfo),r===null)throw Error(p(387));y=s.pendingProps;var M=s.memoizedState;E=M.element,hA(r,s),Jt(s,y,null,h);var G=s.memoizedState;if(y=G.cache,ga(s,In,y),y!==M.cache&&yo(s,[In],h,!0),Nt(),y=G.element,M.isDehydrated)if(M={element:y,isDehydrated:!1,cache:G.cache},s.updateQueue.baseState=M,s.memoizedState=M,s.flags&256){s=rl(r,s,y,h);break e}else if(y!==E){E=Ni(Error(p(424)),s),XA(E),s=rl(r,s,y,h);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Mn=ts(r.firstChild),yi=s,Fr=!0,Ga=null,pa=!0,h=wd(s,null,y,h),s.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Ka(),y===E){s=Fo(r,s,h);break e}Ti(r,s,y,h)}s=s.child}return s;case 26:return df(r,s),r===null?(h=B(s.type,null,s.pendingProps,null))?s.memoizedState=h:Fr||(h=s.type,r=s.pendingProps,y=hc(Pt.current).createElement(h),y[qt]=s,y[Ot]=r,fi(y,h,r),Wn(y),s.stateNode=y):s.memoizedState=B(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return nn(s),r===null&&Fr&&(y=s.stateNode=vu(s.type,s.pendingProps,Pt.current),yi=s,pa=!0,E=Mn,FA(s.type)?(Ih=E,Mn=ts(y.firstChild)):Mn=E),Ti(r,s,s.pendingProps.children,h),df(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Fr&&((E=y=Mn)&&(y=Dg(y,s.type,s.pendingProps,pa),y!==null?(s.stateNode=y,yi=s,Mn=ts(y.firstChild),pa=!1,E=!0):E=!1),E||go(s)),nn(s),E=s.type,M=s.pendingProps,G=r!==null?r.memoizedProps:null,y=M.children,ip(E,M)?y=null:G!==null&&ip(E,G)&&(s.flags|=32),s.memoizedState!==null&&(E=Gl(r,s,oh,null,null,h),Dt._currentValue=E),df(r,s),Ti(r,s,y,h),s.child;case 6:return r===null&&Fr&&((r=h=Mn)&&(h=Lg(h,s.pendingProps,pa),h!==null?(s.stateNode=h,yi=s,Mn=null,r=!0):r=!1),r||go(s)),null;case 13:return sg(r,s,h);case 4:return ir(s,s.stateNode.containerInfo),y=s.pendingProps,r===null?s.child=iu(s,null,y,h):Ti(r,s,y,h),s.child;case 11:return rg(r,s,s.type,s.pendingProps,h);case 7:return Ti(r,s,s.pendingProps,h),s.child;case 8:return Ti(r,s,s.pendingProps.children,h),s.child;case 12:return Ti(r,s,s.pendingProps.children,h),s.child;case 10:return y=s.pendingProps,ga(s,s.type,y.value),Ti(r,s,y.children,h),s.child;case 9:return E=s.type._context,y=s.pendingProps.children,_o(s),E=rn(E),y=y(E),s.flags|=1,Ti(r,s,y,h),s.child;case 14:return Td(r,s,s.type,s.pendingProps,h);case 15:return ng(r,s,s.type,s.pendingProps,h);case 19:return Ag(r,s,h);case 31:return y=s.pendingProps,h=s.mode,y={mode:y.mode,children:y.children},r===null?(h=gf(y,h),h.ref=s.ref,s.child=h,h.return=s,s=h):(h=Ea(r.child,y),h.ref=s.ref,s.child=h,h.return=s,s=h),s;case 22:return ig(r,s,h);case 24:return _o(s),y=rn(In),r===null?(E=tu(),E===null&&(E=Tn,M=lA(),E.pooledCache=M,M.refCount++,M!==null&&(E.pooledCacheLanes|=h),E=M),s.memoizedState={parent:y,cache:E},$A(s),ga(s,In,E)):((r.lanes&h)!==0&&(hA(r,s),Jt(s,null,null,h),Nt()),E=r.memoizedState,M=s.memoizedState,E.parent!==y?(E={parent:y,cache:y},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),ga(s,In,y)):(y=M.cache,ga(s,In,y),y!==E.cache&&yo(s,[In],h,!0))),Ti(r,s,s.pendingProps.children,h),s.child;case 29:throw s.pendingProps}throw Error(p(156,s.tag))}function Da(r){r.flags|=4}function Qd(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!ge(s)){if(s=ws.current,s!==null&&((zr&4194048)===zr?bs!==null:(zr&62914560)!==zr&&(zr&536870912)===0||s!==bs))throw Nl=Hl,ru;r.flags|=8192}}function ec(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Fe():536870912,r.lanes|=s,ic|=s)}function nl(r,s){if(!Fr)switch(r.tailMode){case"hidden":s=r.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function En(r){var s=r.alternate!==null&&r.alternate.child===r.child,h=0,y=0;if(s)for(var E=r.child;E!==null;)h|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=r,E=E.sibling;else for(E=r.child;E!==null;)h|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=r,E=E.sibling;return r.subtreeFlags|=y,r.childLanes=h,s}function lg(r,s,h){var y=s.pendingProps;switch(Ol(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(s),null;case 1:return En(s),null;case 3:return h=s.stateNode,y=null,r!==null&&(y=r.memoizedState.cache),s.memoizedState.cache!==y&&(s.flags|=2048),na(In),yr(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(hs(s)?Da(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Ju())),En(s),null;case 26:return h=s.memoizedState,r===null?(Da(s),h!==null?(En(s),Qd(s,h)):(En(s),s.flags&=-16777217)):h?h!==r.memoizedState?(Da(s),En(s),Qd(s,h)):(En(s),s.flags&=-16777217):(r.memoizedProps!==y&&Da(s),En(s),s.flags&=-16777217),null;case 27:Rr(s),h=Pt.current;var E=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==y&&Da(s);else{if(!y){if(s.stateNode===null)throw Error(p(166));return En(s),null}r=xt.current,hs(s)?Yc(s):(r=vu(E,y,h),s.stateNode=r,Da(s))}return En(s),null;case 5:if(Rr(s),h=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==y&&Da(s);else{if(!y){if(s.stateNode===null)throw Error(p(166));return En(s),null}if(r=xt.current,hs(s))Yc(s);else{switch(E=hc(Pt.current),r){case 1:r=E.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:r=E.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":r=E.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":r=E.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":r=E.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof y.is=="string"?E.createElement("select",{is:y.is}):E.createElement("select"),y.multiple?r.multiple=!0:y.size&&(r.size=y.size);break;default:r=typeof y.is=="string"?E.createElement(h,{is:y.is}):E.createElement(h)}}r[qt]=s,r[Ot]=y;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)r.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=r;e:switch(fi(r,h,y),h){case"button":case"input":case"select":case"textarea":r=!!y.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Da(s)}}return En(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==y&&Da(s);else{if(typeof y!="string"&&s.stateNode===null)throw Error(p(166));if(r=Pt.current,hs(s)){if(r=s.stateNode,h=s.memoizedProps,y=null,E=yi,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}r[qt]=s,r=!!(r.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||np(r.nodeValue,h)),r||go(s)}else r=hc(r).createTextNode(y),r[qt]=s,s.stateNode=r}return En(s),null;case 13:if(y=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(E=hs(s),y!==null&&y.dehydrated!==null){if(r===null){if(!E)throw Error(p(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(p(317));E[qt]=s}else Ka(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;En(s),E=!1}else E=Ju(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=E),E=!0;if(!E)return s.flags&256?(So(s),s):(So(s),null)}if(So(s),(s.flags&128)!==0)return s.lanes=h,s;if(h=y!==null,r=r!==null&&r.memoizedState!==null,h){y=s.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool);var M=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(M=y.memoizedState.cachePool.pool),M!==E&&(y.flags|=2048)}return h!==r&&h&&(s.child.flags|=8192),ec(s,s.updateQueue),En(s),null;case 4:return yr(),r===null&&Of(s.stateNode.containerInfo),En(s),null;case 10:return na(s.type),En(s),null;case 19:if(yt(kn),E=s.memoizedState,E===null)return En(s),null;if(y=(s.flags&128)!==0,M=E.rendering,M===null)if(y)nl(E,!1);else{if(ai!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(M=uf(r),M!==null){for(s.flags|=128,nl(E,!1),r=M.updateQueue,s.updateQueue=r,ec(s,r),s.subtreeFlags=0,r=h,h=s.child;h!==null;)qA(h,r),h=h.sibling;return _t(kn,kn.current&1|2),s.child}r=r.sibling}E.tail!==null&&Ar()>fu&&(s.flags|=128,y=!0,nl(E,!1),s.lanes=4194304)}else{if(!y)if(r=uf(M),r!==null){if(s.flags|=128,y=!0,r=r.updateQueue,s.updateQueue=r,ec(s,r),nl(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Fr)return En(s),null}else 2*Ar()-E.renderingStartTime>fu&&h!==536870912&&(s.flags|=128,y=!0,nl(E,!1),s.lanes=4194304);E.isBackwards?(M.sibling=s.child,s.child=M):(r=E.last,r!==null?r.sibling=M:s.child=M,E.last=M)}return E.tail!==null?(s=E.tail,E.rendering=s,E.tail=s.sibling,E.renderingStartTime=Ar(),s.sibling=null,r=kn.current,_t(kn,y?r&1|2:r&1),s):(En(s),null);case 22:case 23:return So(s),ah(),y=s.memoizedState!==null,r!==null?r.memoizedState!==null!==y&&(s.flags|=8192):y&&(s.flags|=8192),y?(h&536870912)!==0&&(s.flags&128)===0&&(En(s),s.subtreeFlags&6&&(s.flags|=8192)):En(s),h=s.updateQueue,h!==null&&ec(s,h.retryQueue),h=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),y=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(y=s.memoizedState.cachePool.pool),y!==h&&(s.flags|=2048),r!==null&&yt(ps),null;case 24:return h=null,r!==null&&(h=r.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),na(In),En(s),null;case 25:return null;case 30:return null}throw Error(p(156,s.tag))}function cg(r,s){switch(Ol(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return na(In),yr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Rr(s),null;case 13:if(So(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ka()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return yt(kn),null;case 4:return yr(),null;case 10:return na(s.type),null;case 22:case 23:return So(s),ah(),r!==null&&yt(ps),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return na(In),null;case 25:return null;default:return null}}function su(r,s){switch(Ol(s),s.tag){case 3:na(In),yr();break;case 26:case 27:case 5:Rr(s);break;case 4:yr();break;case 13:So(s);break;case 19:yt(kn);break;case 10:na(s.type);break;case 22:case 23:So(s),ah(),r!==null&&yt(ps);break;case 24:na(In)}}function tc(r,s){try{var h=s.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var E=y.next;h=E;do{if((h.tag&r)===r){y=void 0;var M=h.create,G=h.inst;y=M(),G.destroy=y}h=h.next}while(h!==E)}}catch(re){Sn(s,s.return,re)}}function Ja(r,s,h){try{var y=s.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var M=E.next;y=M;do{if((y.tag&r)===r){var G=y.inst,re=G.destroy;if(re!==void 0){G.destroy=void 0,E=s;var xe=h,Ke=re;try{Ke()}catch(At){Sn(E,xe,At)}}}y=y.next}while(y!==M)}}catch(At){Sn(s,s.return,At)}}function mh(r){var s=r.updateQueue;if(s!==null){var h=r.stateNode;try{nu(s,h)}catch(y){Sn(r,r.return,y)}}}function rc(r,s,h){h.props=tl(r.type,r.memoizedProps),h.state=r.memoizedState;try{h.componentWillUnmount()}catch(y){Sn(r,s,y)}}function _A(r,s){try{var h=r.ref;if(h!==null){switch(r.tag){case 26:case 27:case 5:var y=r.stateNode;break;case 30:y=r.stateNode;break;default:y=r.stateNode}typeof h=="function"?r.refCleanup=h(y):h.current=y}}catch(E){Sn(r,s,E)}}function Uo(r,s){var h=r.ref,y=r.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(E){Sn(r,s,E)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(E){Sn(r,s,E)}else h.current=null}function Dd(r){var s=r.type,h=r.memoizedProps,y=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(E){Sn(r,r.return,E)}}function vA(r,s,h){try{var y=r.stateNode;Ig(y,r.type,h,s),y[Ot]=s}catch(E){Sn(r,r.return,E)}}function ug(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&FA(r.type)||r.tag===4}function mf(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ug(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&FA(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function nc(r,s,h){var y=r.tag;if(y===5||y===6)r=r.stateNode,s?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(r,s):(s=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,s.appendChild(r),h=h._reactRootContainer,h!=null||s.onclick!==null||(s.onclick=Hf));else if(y!==4&&(y===27&&FA(r.type)&&(h=r.stateNode,s=null),r=r.child,r!==null))for(nc(r,s,h),r=r.sibling;r!==null;)nc(r,s,h),r=r.sibling}function ou(r,s,h){var y=r.tag;if(y===5||y===6)r=r.stateNode,s?h.insertBefore(r,s):h.appendChild(r);else if(y!==4&&(y===27&&FA(r.type)&&(h=r.stateNode),r=r.child,r!==null))for(ou(r,s,h),r=r.sibling;r!==null;)ou(r,s,h),r=r.sibling}function Ld(r){var s=r.stateNode,h=r.memoizedProps;try{for(var y=r.type,E=s.attributes;E.length;)s.removeAttributeNode(E[0]);fi(s,y,h),s[qt]=r,s[Ot]=h}catch(M){Sn(r,r.return,M)}}var Mo=!1,hi=!1,Pd=!1,hg=typeof WeakSet=="function"?WeakSet:Set,Oi=null;function ry(r,s){if(r=r.containerInfo,_u=oa,r=Xu(r),Yu(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var E=y.anchorOffset,M=y.focusNode;y=y.focusOffset;try{h.nodeType,M.nodeType}catch{h=null;break e}var G=0,re=-1,xe=-1,Ke=0,At=0,gt=r,Xe=null;t:for(;;){for(var $e;gt!==h||E!==0&&gt.nodeType!==3||(re=G+E),gt!==M||y!==0&&gt.nodeType!==3||(xe=G+y),gt.nodeType===3&&(G+=gt.nodeValue.length),($e=gt.firstChild)!==null;)Xe=gt,gt=$e;for(;;){if(gt===r)break t;if(Xe===h&&++Ke===E&&(re=G),Xe===M&&++At===y&&(xe=G),($e=gt.nextSibling)!==null)break;gt=Xe,Xe=gt.parentNode}gt=$e}h=re===-1||xe===-1?null:{start:re,end:xe}}else h=null}h=h||{start:0,end:0}}else h=null;for(jf={focusedElem:r,selectionRange:h},oa=!1,Oi=s;Oi!==null;)if(s=Oi,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Oi=r;else for(;Oi!==null;){switch(s=Oi,M=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&M!==null){r=void 0,h=s,E=M.memoizedProps,M=M.memoizedState,y=h.stateNode;try{var dr=tl(h.type,E,h.elementType===h.type);r=y.getSnapshotBeforeUpdate(dr,M),y.__reactInternalSnapshotBeforeUpdate=r}catch(cr){Sn(h,h.return,cr)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,h=r.nodeType,h===9)op(r);else if(h===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":op(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(p(163))}if(r=s.sibling,r!==null){r.return=s.return,Oi=r;break}Oi=s.return}}function yf(r,s,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Cs(r,h),y&4&&tc(5,h);break;case 1:if(Cs(r,h),y&4)if(r=h.stateNode,s===null)try{r.componentDidMount()}catch(G){Sn(h,h.return,G)}else{var E=tl(h.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(E,s,r.__reactInternalSnapshotBeforeUpdate)}catch(G){Sn(h,h.return,G)}}y&64&&mh(h),y&512&&_A(h,h.return);break;case 3:if(Cs(r,h),y&64&&(r=h.updateQueue,r!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{nu(r,s)}catch(G){Sn(h,h.return,G)}}break;case 27:s===null&&y&4&&Ld(h);case 26:case 5:Cs(r,h),s===null&&y&4&&Dd(h),y&512&&_A(h,h.return);break;case 12:Cs(r,h);break;case 13:Cs(r,h),y&4&&zd(r,h),y&64&&(r=h.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(h=wg.bind(null,h),Pg(r,h))));break;case 22:if(y=h.memoizedState!==null||Mo,!y){s=s!==null&&s.memoizedState!==null||hi,E=Mo;var M=hi;Mo=y,(hi=s)&&!M?il(r,h,(h.subtreeFlags&8772)!==0):Cs(r,h),Mo=E,hi=M}break;case 30:break;default:Cs(r,h)}}function Rd(r){var s=r.alternate;s!==null&&(r.alternate=null,Rd(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Bn(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Dn=null,_a=!1;function Ys(r,s,h){for(h=h.child;h!==null;)Od(r,s,h),h=h.sibling}function Od(r,s,h){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(Nn,h)}catch{}switch(h.tag){case 26:hi||Uo(h,s),Ys(r,s,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:hi||Uo(h,s);var y=Dn,E=_a;FA(h.type)&&(Dn=h.stateNode,_a=!1),Ys(r,s,h),dc(h.stateNode),Dn=y,_a=E;break;case 5:hi||Uo(h,s);case 6:if(y=Dn,E=_a,Dn=null,Ys(r,s,h),Dn=y,_a=E,Dn!==null)if(_a)try{(Dn.nodeType===9?Dn.body:Dn.nodeName==="HTML"?Dn.ownerDocument.body:Dn).removeChild(h.stateNode)}catch(M){Sn(h,s,M)}else try{Dn.removeChild(h.stateNode)}catch(M){Sn(h,s,M)}break;case 18:Dn!==null&&(_a?(r=Dn,Vf(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,h.stateNode),wu(r)):Vf(Dn,h.stateNode));break;case 4:y=Dn,E=_a,Dn=h.stateNode.containerInfo,_a=!0,Ys(r,s,h),Dn=y,_a=E;break;case 0:case 11:case 14:case 15:hi||Ja(2,h,s),hi||Ja(4,h,s),Ys(r,s,h);break;case 1:hi||(Uo(h,s),y=h.stateNode,typeof y.componentWillUnmount=="function"&&rc(h,s,y)),Ys(r,s,h);break;case 21:Ys(r,s,h);break;case 22:hi=(y=hi)||h.memoizedState!==null,Ys(r,s,h),hi=y;break;default:Ys(r,s,h)}}function zd(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{wu(r)}catch(h){Sn(s,s.return,h)}}function _f(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new hg),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new hg),s;default:throw Error(p(435,r.tag))}}function vf(r,s){var h=_f(r);s.forEach(function(y){var E=bg.bind(null,r,y);h.has(y)||(h.add(y),y.then(E,E))})}function La(r,s){var h=s.deletions;if(h!==null)for(var y=0;y<h.length;y++){var E=h[y],M=r,G=s,re=G;e:for(;re!==null;){switch(re.tag){case 27:if(FA(re.type)){Dn=re.stateNode,_a=!1;break e}break;case 5:Dn=re.stateNode,_a=!1;break e;case 3:case 4:Dn=re.stateNode.containerInfo,_a=!0;break e}re=re.return}if(Dn===null)throw Error(p(160));Od(M,G,E),Dn=null,_a=!1,M=E.alternate,M!==null&&(M.return=null),E.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Au(s,r),s=s.sibling}var Bs=null;function Au(r,s){var h=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:La(s,r),es(r),y&4&&(Ja(3,r,r.return),tc(3,r),Ja(5,r,r.return));break;case 1:La(s,r),es(r),y&512&&(hi||h===null||Uo(h,h.return)),y&64&&Mo&&(r=r.updateQueue,r!==null&&(y=r.callbacks,y!==null&&(h=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var E=Bs;if(La(s,r),es(r),y&512&&(hi||h===null||Uo(h,h.return)),y&4){var M=h!==null?h.memoizedState:null;if(y=r.memoizedState,h===null)if(y===null)if(r.stateNode===null){e:{y=r.type,h=r.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":M=E.getElementsByTagName("title")[0],(!M||M[sr]||M[qt]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=E.createElement(y),E.head.insertBefore(M,E.querySelector("head > title"))),fi(M,y,h),M[qt]=r,Wn(M),y=M;break e;case"link":var G=de("link","href",E).get(y+(h.href||""));if(G){for(var re=0;re<G.length;re++)if(M=G[re],M.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&M.getAttribute("rel")===(h.rel==null?null:h.rel)&&M.getAttribute("title")===(h.title==null?null:h.title)&&M.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){G.splice(re,1);break t}}M=E.createElement(y),fi(M,y,h),E.head.appendChild(M);break;case"meta":if(G=de("meta","content",E).get(y+(h.content||""))){for(re=0;re<G.length;re++)if(M=G[re],M.getAttribute("content")===(h.content==null?null:""+h.content)&&M.getAttribute("name")===(h.name==null?null:h.name)&&M.getAttribute("property")===(h.property==null?null:h.property)&&M.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&M.getAttribute("charset")===(h.charSet==null?null:h.charSet)){G.splice(re,1);break t}}M=E.createElement(y),fi(M,y,h),E.head.appendChild(M);break;default:throw Error(p(468,y))}M[qt]=r,Wn(M),y=M}r.stateNode=y}else j(E,r.type,r.stateNode);else r.stateNode=Z(E,y,r.memoizedProps);else M!==y?(M===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):M.count--,y===null?j(E,r.type,r.stateNode):Z(E,y,r.memoizedProps)):y===null&&r.stateNode!==null&&vA(r,r.memoizedProps,h.memoizedProps)}break;case 27:La(s,r),es(r),y&512&&(hi||h===null||Uo(h,h.return)),h!==null&&y&4&&vA(r,r.memoizedProps,h.memoizedProps);break;case 5:if(La(s,r),es(r),y&512&&(hi||h===null||Uo(h,h.return)),r.flags&32){E=r.stateNode;try{vi(E,"")}catch($e){Sn(r,r.return,$e)}}y&4&&r.stateNode!=null&&(E=r.memoizedProps,vA(r,E,h!==null?h.memoizedProps:E)),y&1024&&(Pd=!0);break;case 6:if(La(s,r),es(r),y&4){if(r.stateNode===null)throw Error(p(162));y=r.memoizedProps,h=r.stateNode;try{h.nodeValue=y}catch($e){Sn(r,r.return,$e)}}break;case 3:if(Be=null,E=Bs,Bs=pc(s.containerInfo),La(s,r),Bs=E,es(r),y&4&&h!==null&&h.memoizedState.isDehydrated)try{wu(s.containerInfo)}catch($e){Sn(r,r.return,$e)}Pd&&(Pd=!1,xf(r));break;case 4:y=Bs,Bs=pc(r.stateNode.containerInfo),La(s,r),es(r),Bs=y;break;case 12:La(s,r),es(r);break;case 13:La(s,r),es(r),r.child.flags&8192&&r.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Cf=Ar()),y&4&&(y=r.updateQueue,y!==null&&(r.updateQueue=null,vf(r,y)));break;case 22:E=r.memoizedState!==null;var xe=h!==null&&h.memoizedState!==null,Ke=Mo,At=hi;if(Mo=Ke||E,hi=At||xe,La(s,r),hi=At,Mo=Ke,es(r),y&8192)e:for(s=r.stateNode,s._visibility=E?s._visibility&-2:s._visibility|1,E&&(h===null||xe||Mo||hi||xA(r)),h=null,s=r;;){if(s.tag===5||s.tag===26){if(h===null){xe=h=s;try{if(M=xe.stateNode,E)G=M.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{re=xe.stateNode;var gt=xe.memoizedProps.style,Xe=gt!=null&&gt.hasOwnProperty("display")?gt.display:null;re.style.display=Xe==null||typeof Xe=="boolean"?"":(""+Xe).trim()}}catch($e){Sn(xe,xe.return,$e)}}}else if(s.tag===6){if(h===null){xe=s;try{xe.stateNode.nodeValue=E?"":xe.memoizedProps}catch($e){Sn(xe,xe.return,$e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;h===s&&(h=null),s=s.return}h===s&&(h=null),s.sibling.return=s.return,s=s.sibling}y&4&&(y=r.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,vf(r,h))));break;case 19:La(s,r),es(r),y&4&&(y=r.updateQueue,y!==null&&(r.updateQueue=null,vf(r,y)));break;case 30:break;case 21:break;default:La(s,r),es(r)}}function es(r){var s=r.flags;if(s&2){try{for(var h,y=r.return;y!==null;){if(ug(y)){h=y;break}y=y.return}if(h==null)throw Error(p(160));switch(h.tag){case 27:var E=h.stateNode,M=mf(r);ou(r,M,E);break;case 5:var G=h.stateNode;h.flags&32&&(vi(G,""),h.flags&=-33);var re=mf(r);ou(r,re,G);break;case 3:case 4:var xe=h.stateNode.containerInfo,Ke=mf(r);nc(r,Ke,xe);break;default:throw Error(p(161))}}catch(At){Sn(r,r.return,At)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function xf(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;xf(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Cs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)yf(r,s.alternate,s),s=s.sibling}function xA(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Ja(4,s,s.return),xA(s);break;case 1:Uo(s,s.return);var h=s.stateNode;typeof h.componentWillUnmount=="function"&&rc(s,s.return,h),xA(s);break;case 27:dc(s.stateNode);case 26:case 5:Uo(s,s.return),xA(s);break;case 22:s.memoizedState===null&&xA(s);break;case 30:xA(s);break;default:xA(s)}r=r.sibling}}function il(r,s,h){for(h=h&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var y=s.alternate,E=r,M=s,G=M.flags;switch(M.tag){case 0:case 11:case 15:il(E,M,h),tc(4,M);break;case 1:if(il(E,M,h),y=M,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Ke){Sn(y,y.return,Ke)}if(y=M,E=y.updateQueue,E!==null){var re=y.stateNode;try{var xe=E.shared.hiddenCallbacks;if(xe!==null)for(E.shared.hiddenCallbacks=null,E=0;E<xe.length;E++)Vl(xe[E],re)}catch(Ke){Sn(y,y.return,Ke)}}h&&G&64&&mh(M),_A(M,M.return);break;case 27:Ld(M);case 26:case 5:il(E,M,h),h&&y===null&&G&4&&Dd(M),_A(M,M.return);break;case 12:il(E,M,h);break;case 13:il(E,M,h),h&&G&4&&zd(E,M);break;case 22:M.memoizedState===null&&il(E,M,h),_A(M,M.return);break;case 30:break;default:il(E,M,h)}s=s.sibling}}function kd(r,s){var h=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==h&&(r!=null&&r.refCount++,h!=null&&bi(h))}function wf(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&bi(r))}function Ws(r,s,h,y){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fg(r,s,h,y),s=s.sibling}function fg(r,s,h,y){var E=s.flags;switch(s.tag){case 0:case 11:case 15:Ws(r,s,h,y),E&2048&&tc(9,s);break;case 1:Ws(r,s,h,y);break;case 3:Ws(r,s,h,y),E&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&bi(r)));break;case 12:if(E&2048){Ws(r,s,h,y),r=s.stateNode;try{var M=s.memoizedProps,G=M.id,re=M.onPostCommit;typeof re=="function"&&re(G,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(xe){Sn(s,s.return,xe)}}else Ws(r,s,h,y);break;case 13:Ws(r,s,h,y);break;case 23:break;case 22:M=s.stateNode,G=s.alternate,s.memoizedState!==null?M._visibility&2?Ws(r,s,h,y):wA(r,s):M._visibility&2?Ws(r,s,h,y):(M._visibility|=2,lu(r,s,h,y,(s.subtreeFlags&10256)!==0)),E&2048&&kd(G,s);break;case 24:Ws(r,s,h,y),E&2048&&wf(s.alternate,s);break;default:Ws(r,s,h,y)}}function lu(r,s,h,y,E){for(E=E&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var M=r,G=s,re=h,xe=y,Ke=G.flags;switch(G.tag){case 0:case 11:case 15:lu(M,G,re,xe,E),tc(8,G);break;case 23:break;case 22:var At=G.stateNode;G.memoizedState!==null?At._visibility&2?lu(M,G,re,xe,E):wA(M,G):(At._visibility|=2,lu(M,G,re,xe,E)),E&&Ke&2048&&kd(G.alternate,G);break;case 24:lu(M,G,re,xe,E),E&&Ke&2048&&wf(G.alternate,G);break;default:lu(M,G,re,xe,E)}s=s.sibling}}function wA(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var h=r,y=s,E=y.flags;switch(y.tag){case 22:wA(h,y),E&2048&&kd(y.alternate,y);break;case 24:wA(h,y),E&2048&&wf(y.alternate,y);break;default:wA(h,y)}s=s.sibling}}var cu=8192;function uu(r){if(r.subtreeFlags&cu)for(r=r.child;r!==null;)dg(r),r=r.sibling}function dg(r){switch(r.tag){case 26:uu(r),r.flags&cu&&r.memoizedState!==null&&Ze(Bs,r.memoizedState,r.memoizedProps);break;case 5:uu(r);break;case 3:case 4:var s=Bs;Bs=pc(r.stateNode.containerInfo),uu(r),Bs=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=cu,cu=16777216,uu(r),cu=s):uu(r));break;default:uu(r)}}function pg(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function yh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var y=s[h];Oi=y,Hd(y,r)}pg(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)gg(r),r=r.sibling}function gg(r){switch(r.tag){case 0:case 11:case 15:yh(r),r.flags&2048&&Ja(9,r,r.return);break;case 3:yh(r);break;case 12:yh(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,bf(r)):yh(r);break;default:yh(r)}}function bf(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var y=s[h];Oi=y,Hd(y,r)}pg(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Ja(8,s,s.return),bf(s);break;case 22:h=s.stateNode,h._visibility&2&&(h._visibility&=-3,bf(s));break;default:bf(s)}r=r.sibling}}function Hd(r,s){for(;Oi!==null;){var h=Oi;switch(h.tag){case 0:case 11:case 15:Ja(8,h,s);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:bi(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Oi=y;else e:for(h=r;Oi!==null;){y=Oi;var E=y.sibling,M=y.return;if(Rd(y),y===h){Oi=null;break e}if(E!==null){E.return=M,Oi=E;break e}Oi=M}}}var Nd={getCacheForType:function(r){var s=rn(In),h=s.data.get(r);return h===void 0&&(h=r(),s.data.set(r,h)),h}},mg=typeof WeakMap=="function"?WeakMap:Map,An=0,Tn=null,Or=null,zr=0,dn=0,Pa=null,al=!1,hu=!1,jd=!1,Io=0,ai=0,sl=0,$s=0,Bf=0,Ra=0,ic=0,Hn=null,aa=null,Vd=!1,Cf=0,fu=1/0,du=null,ol=null,Ki=0,Al=null,pu=null,ac=0,Zi=0,_h=null,Gd=null,Es=0,gu=null;function qi(){if((An&2)!==0&&zr!==0)return zr&-zr;if(Te.T!==null){var r=Za;return r!==0?r:Lf()}return St()}function sc(){Ra===0&&(Ra=(zr&536870912)===0||Fr?pe():536870912);var r=ws.current;return r!==null&&(r.flags|=32),Ra}function sa(r,s,h){(r===Tn&&(dn===2||dn===9)||r.cancelPendingCommit!==null)&&(oc(r,0),bA(r,zr,Ra,!1)),ze(r,h),((An&2)===0||r!==Tn)&&(r===Tn&&((An&2)===0&&($s|=h),ai===4&&bA(r,zr,Ra,!1)),Qo(r))}function vh(r,s,h){if((An&6)!==0)throw Error(p(327));var y=!h&&(s&124)===0&&(s&r.expiredLanes)===0||te(r,s),E=y?ay(r,s):Sf(r,s,!0),M=y;do{if(E===0){hu&&!y&&bA(r,s,0,!1);break}else{if(h=r.current.alternate,M&&!ny(h)){E=Sf(r,s,!1),M=!1;continue}if(E===2){if(M=s,r.errorRecoveryDisabledLanes&M)var G=0;else G=r.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){s=G;e:{var re=r;E=Hn;var xe=re.current.memoizedState.isDehydrated;if(xe&&(oc(re,G).flags|=256),G=Sf(re,G,!1),G!==2){if(jd&&!xe){re.errorRecoveryDisabledLanes|=M,$s|=M,E=4;break e}M=aa,aa=E,M!==null&&(aa===null?aa=M:aa.push.apply(aa,M))}E=G}if(M=!1,E!==2)continue}}if(E===1){oc(r,0),bA(r,s,0,!0);break}e:{switch(y=r,M=E,M){case 0:case 1:throw Error(p(345));case 4:if((s&4194048)!==s)break;case 6:bA(y,s,Ra,!al);break e;case 2:aa=null;break;case 3:case 5:break;default:throw Error(p(329))}if((s&62914560)===s&&(E=Cf+300-Ar(),10<E)){if(bA(y,s,Ra,!al),J(y,0,!0)!==0)break e;y.timeoutHandle=fc(yg.bind(null,y,h,aa,du,Vd,s,Ra,$s,ic,al,M,2,-0,0),E);break e}yg(y,h,aa,du,Vd,s,Ra,$s,ic,al,M,0,-0,0)}}break}while(!0);Qo(r)}function yg(r,s,h,y,E,M,G,re,xe,Ke,At,gt,Xe,$e){if(r.timeoutHandle=-1,gt=s.subtreeFlags,(gt&8192||(gt&16785408)===16785408)&&(Ve={stylesheets:null,count:0,unsuspend:dt},dg(s),gt=Je(),gt!==null)){r.cancelPendingCommit=gt(Js.bind(null,r,s,M,h,y,E,G,re,xe,At,1,Xe,$e)),bA(r,M,G,!Ke);return}Js(r,s,M,h,y,E,G,re,xe)}function ny(r){for(var s=r;;){var h=s.tag;if((h===0||h===11||h===15)&&s.flags&16384&&(h=s.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var E=h[y],M=E.getSnapshot;E=E.value;try{if(!Hi(M(),E))return!1}catch{return!1}}if(h=s.child,s.subtreeFlags&16384&&h!==null)h.return=s,s=h;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function bA(r,s,h,y){s&=~Bf,s&=~$s,r.suspendedLanes|=s,r.pingedLanes&=~s,y&&(r.warmLanes|=s),y=r.expirationTimes;for(var E=s;0<E;){var M=31-Un(E),G=1<<M;y[M]=-1,E&=~G}h!==0&&tt(r,h,s)}function xh(){return(An&6)===0?(Eh(0),!1):!0}function Kd(){if(Or!==null){if(dn===0)var r=Or.return;else r=Or,fs=mo=null,ql(r),ya=null,Ia=0,r=Or;for(;r!==null;)su(r.alternate,r),r=r.return;Or=null}}function oc(r,s){var h=r.timeoutHandle;h!==-1&&(r.timeoutHandle=-1,zi(h)),h=r.cancelPendingCommit,h!==null&&(r.cancelPendingCommit=null,h()),Kd(),Tn=r,Or=h=Ea(r.current,null),zr=s,dn=0,Pa=null,al=!1,hu=te(r,s),jd=!1,ic=Ra=Bf=$s=sl=ai=0,aa=Hn=null,Vd=!1,(s&8)!==0&&(s|=s&32);var y=r.entangledLanes;if(y!==0)for(r=r.entanglements,y&=s;0<y;){var E=31-Un(y),M=1<<E;s|=r[E],y&=~M}return Io=s,Kc(),h}function Zd(r,s){tr=null,Te.H=xs,s===kl||s===YA?(s=gs(),dn=3):s===ru?(s=gs(),dn=4):dn=s===Qa?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pa=s,Or===null&&(ai=1,hh(r,Ni(s,r.current)))}function Ef(){var r=Te.H;return Te.H=xs,r===null?xs:r}function Tf(){var r=Te.A;return Te.A=Nd,r}function qd(){ai=4,al||(zr&4194048)!==zr&&ws.current!==null||(hu=!0),(sl&134217727)===0&&($s&134217727)===0||Tn===null||bA(Tn,zr,Ra,!1)}function Sf(r,s,h){var y=An;An|=2;var E=Ef(),M=Tf();(Tn!==r||zr!==s)&&(du=null,oc(r,s)),s=!1;var G=ai;e:do try{if(dn!==0&&Or!==null){var re=Or,xe=Pa;switch(dn){case 8:Kd(),G=6;break e;case 3:case 2:case 9:case 6:ws.current===null&&(s=!0);var Ke=dn;if(dn=0,Pa=null,Ac(r,re,xe,Ke),h&&hu){G=0;break e}break;default:Ke=dn,dn=0,Pa=null,Ac(r,re,xe,Ke)}}iy(),G=ai;break}catch(At){Zd(r,At)}while(!0);return s&&r.shellSuspendCounter++,fs=mo=null,An=y,Te.H=E,Te.A=M,Or===null&&(Tn=null,zr=0,Kc()),G}function iy(){for(;Or!==null;)_g(Or)}function ay(r,s){var h=An;An|=2;var y=Ef(),E=Tf();Tn!==r||zr!==s?(du=null,fu=Ar()+500,oc(r,s)):hu=te(r,s);e:do try{if(dn!==0&&Or!==null){s=Or;var M=Pa;t:switch(dn){case 1:dn=0,Pa=null,Ac(r,s,M,1);break;case 2:case 9:if(nh(M)){dn=0,Pa=null,vg(s);break}s=function(){dn!==2&&dn!==9||Tn!==r||(dn=7),Qo(r)},M.then(s,s);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:nh(M)?(dn=0,Pa=null,vg(s)):(dn=0,Pa=null,Ac(r,s,M,7));break;case 5:var G=null;switch(Or.tag){case 26:G=Or.memoizedState;case 5:case 27:var re=Or;if(!G||ge(G)){dn=0,Pa=null;var xe=re.sibling;if(xe!==null)Or=xe;else{var Ke=re.return;Ke!==null?(Or=Ke,wh(Ke)):Or=null}break t}}dn=0,Pa=null,Ac(r,s,M,5);break;case 6:dn=0,Pa=null,Ac(r,s,M,6);break;case 8:Kd(),ai=6;break e;default:throw Error(p(462))}}sy();break}catch(At){Zd(r,At)}while(!0);return fs=mo=null,Te.H=y,Te.A=E,An=h,Or!==null?0:(Tn=null,zr=0,Kc(),ai)}function sy(){for(;Or!==null&&!xr();)_g(Or)}function _g(r){var s=Zn(r.alternate,r,Io);r.memoizedProps=r.pendingProps,s===null?wh(r):Or=s}function vg(r){var s=r,h=s.alternate;switch(s.tag){case 15:case 0:s=pf(h,s,s.pendingProps,s.type,void 0,zr);break;case 11:s=pf(h,s,s.pendingProps,s.type.render,s.ref,zr);break;case 5:ql(s);default:su(h,s),s=Or=qA(s,Io),s=Zn(h,s,Io)}r.memoizedProps=r.pendingProps,s===null?wh(r):Or=s}function Ac(r,s,h,y){fs=mo=null,ql(s),ya=null,Ia=0;var E=s.return;try{if(dh(r,E,s,h,zr)){ai=1,hh(r,Ni(h,r.current)),Or=null;return}}catch(M){if(E!==null)throw Or=E,M;ai=1,hh(r,Ni(h,r.current)),Or=null;return}s.flags&32768?(Fr||y===1?r=!0:hu||(zr&536870912)!==0?r=!1:(al=r=!0,(y===2||y===9||y===3||y===6)&&(y=ws.current,y!==null&&y.tag===13&&(y.flags|=16384))),mu(s,r)):wh(s)}function wh(r){var s=r;do{if((s.flags&32768)!==0){mu(s,al);return}r=s.return;var h=lg(s.alternate,s,Io);if(h!==null){Or=h;return}if(s=s.sibling,s!==null){Or=s;return}Or=s=r}while(s!==null);ai===0&&(ai=5)}function mu(r,s){do{var h=cg(r.alternate,r);if(h!==null){h.flags&=32767,Or=h;return}if(h=r.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!s&&(r=r.sibling,r!==null)){Or=r;return}Or=r=h}while(r!==null);ai=6,Or=null}function Js(r,s,h,y,E,M,G,re,xe){r.cancelPendingCommit=null;do Uf();while(Ki!==0);if((An&6)!==0)throw Error(p(327));if(s!==null){if(s===r.current)throw Error(p(177));if(M=s.lanes|s.childLanes,M|=nA,Qe(r,h,M,G,re,xe),r===Tn&&(Or=Tn=null,zr=0),pu=s,Al=r,ac=h,Zi=M,_h=E,Gd=y,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Wd(Gr,function(){return bh(),null})):(r.callbackNode=null,r.callbackPriority=0),y=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||y){y=Te.T,Te.T=null,E=ut.p,ut.p=2,G=An,An|=4;try{ry(r,s,h)}finally{An=G,ut.p=E,Te.T=y}}Ki=1,BA(),Xd(),Ff()}}function BA(){if(Ki===1){Ki=0;var r=Al,s=pu,h=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||h){h=Te.T,Te.T=null;var y=ut.p;ut.p=2;var E=An;An|=4;try{Au(s,r);var M=jf,G=Xu(r.containerInfo),re=M.focusedElem,xe=M.selectionRange;if(G!==re&&re&&re.ownerDocument&&af(re.ownerDocument.documentElement,re)){if(xe!==null&&Yu(re)){var Ke=xe.start,At=xe.end;if(At===void 0&&(At=Ke),"selectionStart"in re)re.selectionStart=Ke,re.selectionEnd=Math.min(At,re.value.length);else{var gt=re.ownerDocument||document,Xe=gt&&gt.defaultView||window;if(Xe.getSelection){var $e=Xe.getSelection(),dr=re.textContent.length,cr=Math.min(xe.start,dr),br=xe.end===void 0?cr:Math.min(xe.end,dr);!$e.extend&&cr>br&&(G=br,br=cr,cr=G);var Pe=nf(re,cr),Ie=nf(re,br);if(Pe&&Ie&&($e.rangeCount!==1||$e.anchorNode!==Pe.node||$e.anchorOffset!==Pe.offset||$e.focusNode!==Ie.node||$e.focusOffset!==Ie.offset)){var ke=gt.createRange();ke.setStart(Pe.node,Pe.offset),$e.removeAllRanges(),cr>br?($e.addRange(ke),$e.extend(Ie.node,Ie.offset)):(ke.setEnd(Ie.node,Ie.offset),$e.addRange(ke))}}}}for(gt=[],$e=re;$e=$e.parentNode;)$e.nodeType===1&&gt.push({element:$e,left:$e.scrollLeft,top:$e.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<gt.length;re++){var ht=gt[re];ht.element.scrollLeft=ht.left,ht.element.scrollTop=ht.top}}oa=!!_u,jf=_u=null}finally{An=E,ut.p=y,Te.T=h}}r.current=s,Ki=2}}function Xd(){if(Ki===2){Ki=0;var r=Al,s=pu,h=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||h){h=Te.T,Te.T=null;var y=ut.p;ut.p=2;var E=An;An|=4;try{yf(r,s.alternate,s)}finally{An=E,ut.p=y,Te.T=h}}Ki=3}}function Ff(){if(Ki===4||Ki===3){Ki=0,Xr();var r=Al,s=pu,h=ac,y=Gd;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ki=5:(Ki=0,pu=Al=null,xg(r,r.pendingLanes));var E=r.pendingLanes;if(E===0&&(ol=null),ct(h),s=s.stateNode,Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(Nn,s,void 0,(s.current.flags&128)===128)}catch{}if(y!==null){s=Te.T,E=ut.p,ut.p=2,Te.T=null;try{for(var M=r.onRecoverableError,G=0;G<y.length;G++){var re=y[G];M(re.value,{componentStack:re.stack})}}finally{Te.T=s,ut.p=E}}(ac&3)!==0&&Uf(),Qo(r),E=r.pendingLanes,(h&4194090)!==0&&(E&42)!==0?r===gu?Es++:(Es=0,gu=r):Es=0,Eh(0)}}function xg(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,bi(s)))}function Uf(r){return BA(),Xd(),Ff(),bh()}function bh(){if(Ki!==5)return!1;var r=Al,s=Zi;Zi=0;var h=ct(ac),y=Te.T,E=ut.p;try{ut.p=32>h?32:h,Te.T=null,h=_h,_h=null;var M=Al,G=ac;if(Ki=0,pu=Al=null,ac=0,(An&6)!==0)throw Error(p(331));var re=An;if(An|=4,gg(M.current),fg(M,M.current,G,h),An=re,Eh(0,!1),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(Nn,M)}catch{}return!0}finally{ut.p=E,Te.T=y,xg(r,s)}}function Mf(r,s,h){s=Ni(h,s),s=fh(r.stateNode,s,2),r=qa(r,s,2),r!==null&&(ze(r,2),Qo(r))}function Sn(r,s,h){if(r.tag===3)Mf(r,r,h);else for(;s!==null;){if(s.tag===3){Mf(s,r,h);break}else if(s.tag===1){var y=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ol===null||!ol.has(y))){r=Ni(h,r),h=Ed(2),y=qa(s,h,2),y!==null&&(ff(h,y,s,r),ze(y,2),Qo(y));break}}s=s.return}}function Bh(r,s,h){var y=r.pingCache;if(y===null){y=r.pingCache=new mg;var E=new Set;y.set(s,E)}else E=y.get(s),E===void 0&&(E=new Set,y.set(s,E));E.has(h)||(jd=!0,E.add(h),r=Yd.bind(null,r,s,h),s.then(r,r))}function Yd(r,s,h){var y=r.pingCache;y!==null&&y.delete(s),r.pingedLanes|=r.suspendedLanes&h,r.warmLanes&=~h,Tn===r&&(zr&h)===h&&(ai===4||ai===3&&(zr&62914560)===zr&&300>Ar()-Cf?(An&2)===0&&oc(r,0):Bf|=h,ic===zr&&(ic=0)),Qo(r)}function lc(r,s){s===0&&(s=Fe()),r=ZA(r,s),r!==null&&(ze(r,s),Qo(r))}function wg(r){var s=r.memoizedState,h=0;s!==null&&(h=s.retryLane),lc(r,h)}function bg(r,s){var h=0;switch(r.tag){case 13:var y=r.stateNode,E=r.memoizedState;E!==null&&(h=E.retryLane);break;case 19:y=r.stateNode;break;case 22:y=r.stateNode._retryCache;break;default:throw Error(p(314))}y!==null&&y.delete(s),lc(r,h)}function Wd(r,s){return Lt(r,s)}var Ch=null,CA=null,If=!1,Qf=!1,$d=!1,ll=0;function Qo(r){r!==CA&&r.next===null&&(CA===null?Ch=CA=r:CA=CA.next=r),Qf=!0,If||(If=!0,Eg())}function Eh(r,s){if(!$d&&Qf){$d=!0;do for(var h=!1,y=Ch;y!==null;){if(r!==0){var E=y.pendingLanes;if(E===0)var M=0;else{var G=y.suspendedLanes,re=y.pingedLanes;M=(1<<31-Un(42|r)+1)-1,M&=E&~(G&~re),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(h=!0,EA(y,M))}else M=zr,M=J(y,y===Tn?M:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(M&3)===0||te(y,M)||(h=!0,EA(y,M));y=y.next}while(h);$d=!1}}function oy(){Bg()}function Bg(){Qf=If=!1;var r=0;ll!==0&&(Ay()&&(r=ll),ll=0);for(var s=Ar(),h=null,y=Ch;y!==null;){var E=y.next,M=Cg(y,s);M===0?(y.next=null,h===null?Ch=E:h.next=E,E===null&&(CA=h)):(h=y,(r!==0||(M&3)!==0)&&(Qf=!0)),y=E}Eh(r)}function Cg(r,s){for(var h=r.suspendedLanes,y=r.pingedLanes,E=r.expirationTimes,M=r.pendingLanes&-62914561;0<M;){var G=31-Un(M),re=1<<G,xe=E[G];xe===-1?((re&h)===0||(re&y)!==0)&&(E[G]=K(re,s)):xe<=s&&(r.expiredLanes|=re),M&=~re}if(s=Tn,h=zr,h=J(r,r===s?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),y=r.callbackNode,h===0||r===s&&(dn===2||dn===9)||r.cancelPendingCommit!==null)return y!==null&&y!==null&&bt(y),r.callbackNode=null,r.callbackPriority=0;if((h&3)===0||te(r,h)){if(s=h&-h,s===r.callbackPriority)return s;switch(y!==null&&bt(y),ct(h)){case 2:case 8:h=vr;break;case 32:h=Gr;break;case 268435456:h=en;break;default:h=Gr}return y=Df.bind(null,r),h=Lt(h,y),r.callbackPriority=s,r.callbackNode=h,s}return y!==null&&y!==null&&bt(y),r.callbackPriority=2,r.callbackNode=null,2}function Df(r,s){if(Ki!==0&&Ki!==5)return r.callbackNode=null,r.callbackPriority=0,null;var h=r.callbackNode;if(Uf()&&r.callbackNode!==h)return null;var y=zr;return y=J(r,r===Tn?y:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),y===0?null:(vh(r,y,s),Cg(r,Ar()),r.callbackNode!=null&&r.callbackNode===h?Df.bind(null,r):null)}function EA(r,s){if(Uf())return null;vh(r,s,!0)}function Eg(){sp(function(){(An&6)!==0?Lt(Rn,oy):Bg()})}function Lf(){return ll===0&&(ll=pe()),ll}function Jd(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:gi(""+r)}function ep(r,s){var h=s.ownerDocument.createElement("input");return h.name=s.name,h.value=s.value,r.id&&h.setAttribute("form",r.id),s.parentNode.insertBefore(h,s),r=new FormData(r),h.parentNode.removeChild(h),r}function Tg(r,s,h,y,E){if(s==="submit"&&h&&h.stateNode===E){var M=Jd((E[Ot]||null).action),G=y.submitter;G&&(s=(s=G[Ot]||null)?Jd(s.formAction):G.getAttribute("formAction"),s!==null&&(M=s,G=null));var re=new oo("action","action",null,y,E);r.push({event:re,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(ll!==0){var xe=G?ep(E,G):new FormData(E);_s(h,{pending:!0,data:xe,method:E.method,action:M},null,xe)}}else typeof M=="function"&&(re.preventDefault(),xe=G?ep(E,G):new FormData(E),_s(h,{pending:!0,data:xe,method:E.method,action:M},M,xe))},currentTarget:E}]})}}for(var Th=0;Th<Gc.length;Th++){var Pf=Gc[Th],Sh=Pf.toLowerCase(),Sg=Pf[0].toUpperCase()+Pf.slice(1);da(Sh,"on"+Sg)}da(uo,"onAnimationEnd"),da(Ql,"onAnimationIteration"),da(Dl,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(Ll,"onTransitionRun"),da(Vc,"onTransitionStart"),da(of,"onTransitionCancel"),da(eA,"onTransitionEnd"),tn("onMouseEnter",["mouseout","mouseover"]),tn("onMouseLeave",["mouseout","mouseover"]),tn("onPointerEnter",["pointerout","pointerover"]),tn("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function Oa(r,s){s=(s&4)!==0;for(var h=0;h<r.length;h++){var y=r[h],E=y.event;y=y.listeners;e:{var M=void 0;if(s)for(var G=y.length-1;0<=G;G--){var re=y[G],xe=re.instance,Ke=re.currentTarget;if(re=re.listener,xe!==M&&E.isPropagationStopped())break e;M=re,E.currentTarget=Ke;try{M(E)}catch(At){hf(At)}E.currentTarget=null,M=xe}else for(G=0;G<y.length;G++){if(re=y[G],xe=re.instance,Ke=re.currentTarget,re=re.listener,xe!==M&&E.isPropagationStopped())break e;M=re,E.currentTarget=Ke;try{M(E)}catch(At){hf(At)}E.currentTarget=null,M=xe}}}}function Tr(r,s){var h=s[Ur];h===void 0&&(h=s[Ur]=new Set);var y=r+"__bubble";h.has(y)||(tp(s,r,2,!1),h.add(y))}function Rf(r,s,h){var y=0;s&&(y|=4),tp(h,r,y,s)}var Fh="_reactListening"+Math.random().toString(36).slice(2);function Of(r){if(!r[Fh]){r[Fh]=!0,jo.forEach(function(h){h!=="selectionchange"&&(Fg.has(h)||Rf(h,!1,r),Rf(h,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Fh]||(s[Fh]=!0,Rf("selectionchange",!1,s))}}function tp(r,s,h,y){switch(Xi(s)){case 2:var E=va;break;case 8:E=Fi;break;default:E=vn}h=E.bind(null,s,h,r),E=void 0,!an||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),y?E!==void 0?r.addEventListener(s,h,{capture:!0,passive:E}):r.addEventListener(s,h,!0):E!==void 0?r.addEventListener(s,h,{passive:E}):r.addEventListener(s,h,!1)}function zf(r,s,h,y,E){var M=y;if((s&1)===0&&(s&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var re=y.stateNode.containerInfo;if(re===E)break;if(G===4)for(G=y.return;G!==null;){var xe=G.tag;if((xe===3||xe===4)&&G.stateNode.containerInfo===E)return;G=G.return}for(;re!==null;){if(G=Wi(re),G===null)return;if(xe=G.tag,xe===5||xe===6||xe===26||xe===27){y=M=G;continue e}re=re.parentNode}}y=y.return}Ds(function(){var Ke=M,At=$n(h),gt=[];e:{var Xe=tA.get(r);if(Xe!==void 0){var $e=oo,dr=r;switch(r){case"keypress":if(Rs(h)===0)break e;case"keydown":case"keyup":$e=zA;break;case"focusin":dr="focus",$e=fa;break;case"focusout":dr="blur",$e=fa;break;case"beforeblur":case"afterblur":$e=fa;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=Li;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=md;break;case uo:case Ql:case Dl:$e=ku;break;case eA:$e=El;break;case"scroll":case"scrollend":$e=Uc;break;case"wheel":$e=Wh;break;case"copy":case"cut":case"paste":$e=zs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Dc;break;case"toggle":case"beforetoggle":$e=$h}var cr=(s&4)!==0,br=!cr&&(r==="scroll"||r==="scrollend"),Pe=cr?Xe!==null?Xe+"Capture":null:Xe;cr=[];for(var Ie=Ke,ke;Ie!==null;){var ht=Ie;if(ke=ht.stateNode,ht=ht.tag,ht!==5&&ht!==26&&ht!==27||ke===null||Pe===null||(ht=Ls(Ie,Pe),ht!=null&&cr.push(yu(Ie,ht,ke))),br)break;Ie=Ie.return}0<cr.length&&(Xe=new $e(Xe,dr,null,h,At),gt.push({event:Xe,listeners:cr}))}}if((s&7)===0){e:{if(Xe=r==="mouseover"||r==="pointerover",$e=r==="mouseout"||r==="pointerout",Xe&&h!==Di&&(dr=h.relatedTarget||h.fromElement)&&(Wi(dr)||dr[nr]))break e;if(($e||Xe)&&(Xe=At.window===At?At:(Xe=At.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,$e?(dr=h.relatedTarget||h.toElement,$e=Ke,dr=dr?Wi(dr):null,dr!==null&&(br=S(dr),cr=dr.tag,dr!==br||cr!==5&&cr!==27&&cr!==6)&&(dr=null)):($e=null,dr=Ke),$e!==dr)){if(cr=Cl,ht="onMouseLeave",Pe="onMouseEnter",Ie="mouse",(r==="pointerout"||r==="pointerover")&&(cr=Dc,ht="onPointerLeave",Pe="onPointerEnter",Ie="pointer"),br=$e==null?Xe:On($e),ke=dr==null?Xe:On(dr),Xe=new cr(ht,Ie+"leave",$e,h,At),Xe.target=br,Xe.relatedTarget=ke,ht=null,Wi(At)===Ke&&(cr=new cr(Pe,Ie+"enter",dr,h,At),cr.target=ke,cr.relatedTarget=br,ht=cr),br=ht,$e&&dr)t:{for(cr=$e,Pe=dr,Ie=0,ke=cr;ke;ke=uc(ke))Ie++;for(ke=0,ht=Pe;ht;ht=uc(ht))ke++;for(;0<Ie-ke;)cr=uc(cr),Ie--;for(;0<ke-Ie;)Pe=uc(Pe),ke--;for(;Ie--;){if(cr===Pe||Pe!==null&&cr===Pe.alternate)break t;cr=uc(cr),Pe=uc(Pe)}cr=null}else cr=null;$e!==null&&TA(gt,Xe,$e,cr,!1),dr!==null&&br!==null&&TA(gt,br,dr,cr,!0)}}e:{if(Xe=Ke?On(Ke):window,$e=Xe.nodeName&&Xe.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Xe.type==="file")var Ht=zc;else if(VA(Xe))if(kc)Ht=kr;else{Ht=qu;var Hr=Zu}else $e=Xe.nodeName,!$e||$e.toLowerCase()!=="input"||Xe.type!=="checkbox"&&Xe.type!=="radio"?Ke&&ci(Ke.elementType)&&(Ht=zc):Ht=tf;if(Ht&&(Ht=Ht(r,Ke))){ef(gt,Ht,h,At);break e}Hr&&Hr(r,Xe,Ke),r==="focusout"&&Ke&&Xe.type==="number"&&Ke.memoizedProps.value!=null&&os(Xe,"number",Xe.value)}switch(Hr=Ke?On(Ke):window,r){case"focusin":(VA(Hr)||Hr.contentEditable==="true")&&(Ns=Hr,KA=Ke,lo=null);break;case"focusout":lo=KA=Ns=null;break;case"mousedown":Il=!0;break;case"contextmenu":case"mouseup":case"dragend":Il=!1,co(gt,h,At);break;case"selectionchange":if(sf)break;case"keydown":case"keyup":co(gt,h,At)}var ar;if(Vu)e:{switch(r){case"compositionstart":var pr="onCompositionStart";break e;case"compositionend":pr="onCompositionEnd";break e;case"compositionupdate":pr="onCompositionUpdate";break e}pr=void 0}else Wo?Rc(r,h)&&(pr="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(pr="onCompositionStart");pr&&(Gu&&h.locale!=="ko"&&(Wo||pr!=="onCompositionStart"?pr==="onCompositionEnd"&&Wo&&(ar=Mr()):(Cr=At,mr="value"in Cr?Cr.value:Cr.textContent,Wo=!0)),Hr=kf(Ke,pr),0<Hr.length&&(pr=new Xh(pr,r,null,h,At),gt.push({event:pr,listeners:Hr}),ar?pr.data=ar:(ar=Ku(h),ar!==null&&(pr.data=ar)))),(ar=yd?$o(r,h):Oc(r,h))&&(pr=kf(Ke,"onBeforeInput"),0<pr.length&&(Hr=new Xh("onBeforeInput","beforeinput",null,h,At),gt.push({event:Hr,listeners:pr}),Hr.data=ar)),Tg(gt,r,Ke,h,At)}Oa(gt,s)})}function yu(r,s,h){return{instance:r,listener:s,currentTarget:h}}function kf(r,s){for(var h=s+"Capture",y=[];r!==null;){var E=r,M=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||M===null||(E=Ls(r,h),E!=null&&y.unshift(yu(r,E,M)),E=Ls(r,s),E!=null&&y.push(yu(r,E,M))),r.tag===3)return y;r=r.return}return[]}function uc(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function TA(r,s,h,y,E){for(var M=s._reactName,G=[];h!==null&&h!==y;){var re=h,xe=re.alternate,Ke=re.stateNode;if(re=re.tag,xe!==null&&xe===y)break;re!==5&&re!==26&&re!==27||Ke===null||(xe=Ke,E?(Ke=Ls(h,M),Ke!=null&&G.unshift(yu(h,Ke,xe))):E||(Ke=Ls(h,M),Ke!=null&&G.push(yu(h,Ke,xe)))),h=h.return}G.length!==0&&r.push({event:s,listeners:G})}var Ug=/\r\n?/g,Mg=/\u0000|\uFFFD/g;function rp(r){return(typeof r=="string"?r:""+r).replace(Ug,`
`).replace(Mg,"")}function np(r,s){return s=rp(s),rp(r)===s}function Hf(){}function _n(r,s,h,y,E,M){switch(h){case"children":typeof y=="string"?s==="body"||s==="textarea"&&y===""||vi(r,y):(typeof y=="number"||typeof y=="bigint")&&s!=="body"&&vi(r,""+y);break;case"className":vl(r,"class",y);break;case"tabIndex":vl(r,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":vl(r,h,y);break;case"style":Qi(r,y,M);break;case"data":if(s!=="object"){vl(r,"data",y);break}case"src":case"href":if(y===""&&(s!=="a"||h!=="href")){r.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){r.removeAttribute(h);break}y=gi(""+y),r.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){r.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(h==="formAction"?(s!=="input"&&_n(r,s,"name",E.name,E,null),_n(r,s,"formEncType",E.formEncType,E,null),_n(r,s,"formMethod",E.formMethod,E,null),_n(r,s,"formTarget",E.formTarget,E,null)):(_n(r,s,"encType",E.encType,E,null),_n(r,s,"method",E.method,E,null),_n(r,s,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){r.removeAttribute(h);break}y=gi(""+y),r.setAttribute(h,y);break;case"onClick":y!=null&&(r.onclick=Hf);break;case"onScroll":y!=null&&Tr("scroll",r);break;case"onScrollEnd":y!=null&&Tr("scrollend",r);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(p(61));if(h=y.__html,h!=null){if(E.children!=null)throw Error(p(60));r.innerHTML=h}}break;case"multiple":r.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":r.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){r.removeAttribute("xlink:href");break}h=gi(""+y),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?r.setAttribute(h,""+y):r.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?r.setAttribute(h,""):r.removeAttribute(h);break;case"capture":case"download":y===!0?r.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?r.setAttribute(h,y):r.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?r.setAttribute(h,y):r.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?r.removeAttribute(h):r.setAttribute(h,y);break;case"popover":Tr("beforetoggle",r),Tr("toggle",r),Qs(r,"popover",y);break;case"xlinkActuate":ss(r,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ss(r,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ss(r,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ss(r,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ss(r,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ss(r,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ss(r,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ss(r,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ss(r,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Qs(r,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Cn.get(h)||h,Qs(r,h,y))}}function Nf(r,s,h,y,E,M){switch(h){case"style":Qi(r,y,M);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(p(61));if(h=y.__html,h!=null){if(E.children!=null)throw Error(p(60));r.innerHTML=h}}break;case"children":typeof y=="string"?vi(r,y):(typeof y=="number"||typeof y=="bigint")&&vi(r,""+y);break;case"onScroll":y!=null&&Tr("scroll",r);break;case"onScrollEnd":y!=null&&Tr("scrollend",r);break;case"onClick":y!=null&&(r.onclick=Hf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Is.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(E=h.endsWith("Capture"),s=h.slice(2,E?h.length-7:void 0),M=r[Ot]||null,M=M!=null?M[h]:null,typeof M=="function"&&r.removeEventListener(s,M,E),typeof y=="function")){typeof M!="function"&&M!==null&&(h in r?r[h]=null:r.hasAttribute(h)&&r.removeAttribute(h)),r.addEventListener(s,y,E);break e}h in r?r[h]=y:y===!0?r.setAttribute(h,""):Qs(r,h,y)}}}function fi(r,s,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tr("error",r),Tr("load",r);var y=!1,E=!1,M;for(M in h)if(h.hasOwnProperty(M)){var G=h[M];if(G!=null)switch(M){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,s));default:_n(r,s,M,G,h,null)}}E&&_n(r,s,"srcSet",h.srcSet,h,null),y&&_n(r,s,"src",h.src,h,null);return;case"input":Tr("invalid",r);var re=M=G=E=null,xe=null,Ke=null;for(y in h)if(h.hasOwnProperty(y)){var At=h[y];if(At!=null)switch(y){case"name":E=At;break;case"type":G=At;break;case"checked":xe=At;break;case"defaultChecked":Ke=At;break;case"value":M=At;break;case"defaultValue":re=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(p(137,s));break;default:_n(r,s,y,At,h,null)}}ao(r,M,re,xe,Ke,G,E,!1),wl(r);return;case"select":Tr("invalid",r),y=G=M=null;for(E in h)if(h.hasOwnProperty(E)&&(re=h[E],re!=null))switch(E){case"value":M=re;break;case"defaultValue":G=re;break;case"multiple":y=re;default:_n(r,s,E,re,h,null)}s=M,h=G,r.multiple=!!y,s!=null?$i(r,!!y,s,!1):h!=null&&$i(r,!!y,h,!0);return;case"textarea":Tr("invalid",r),M=E=y=null;for(G in h)if(h.hasOwnProperty(G)&&(re=h[G],re!=null))switch(G){case"value":y=re;break;case"defaultValue":E=re;break;case"children":M=re;break;case"dangerouslySetInnerHTML":if(re!=null)throw Error(p(91));break;default:_n(r,s,G,re,h,null)}Qr(r,y,E,M),wl(r);return;case"option":for(xe in h)if(h.hasOwnProperty(xe)&&(y=h[xe],y!=null))switch(xe){case"selected":r.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:_n(r,s,xe,y,h,null)}return;case"dialog":Tr("beforetoggle",r),Tr("toggle",r),Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":Tr("load",r);break;case"video":case"audio":for(y=0;y<cc.length;y++)Tr(cc[y],r);break;case"image":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"embed":case"source":case"link":Tr("error",r),Tr("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in h)if(h.hasOwnProperty(Ke)&&(y=h[Ke],y!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,s));default:_n(r,s,Ke,y,h,null)}return;default:if(ci(s)){for(At in h)h.hasOwnProperty(At)&&(y=h[At],y!==void 0&&Nf(r,s,At,y,h,void 0));return}}for(re in h)h.hasOwnProperty(re)&&(y=h[re],y!=null&&_n(r,s,re,y,h,null))}function Ig(r,s,h,y){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,M=null,G=null,re=null,xe=null,Ke=null,At=null;for($e in h){var gt=h[$e];if(h.hasOwnProperty($e)&&gt!=null)switch($e){case"checked":break;case"value":break;case"defaultValue":xe=gt;default:y.hasOwnProperty($e)||_n(r,s,$e,null,y,gt)}}for(var Xe in y){var $e=y[Xe];if(gt=h[Xe],y.hasOwnProperty(Xe)&&($e!=null||gt!=null))switch(Xe){case"type":M=$e;break;case"name":E=$e;break;case"checked":Ke=$e;break;case"defaultChecked":At=$e;break;case"value":G=$e;break;case"defaultValue":re=$e;break;case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(p(137,s));break;default:$e!==gt&&_n(r,s,Xe,$e,y,gt)}}wr(r,G,re,xe,Ke,At,M,E);return;case"select":$e=G=re=Xe=null;for(M in h)if(xe=h[M],h.hasOwnProperty(M)&&xe!=null)switch(M){case"value":break;case"multiple":$e=xe;default:y.hasOwnProperty(M)||_n(r,s,M,null,y,xe)}for(E in y)if(M=y[E],xe=h[E],y.hasOwnProperty(E)&&(M!=null||xe!=null))switch(E){case"value":Xe=M;break;case"defaultValue":re=M;break;case"multiple":G=M;default:M!==xe&&_n(r,s,E,M,y,xe)}s=re,h=G,y=$e,Xe!=null?$i(r,!!h,Xe,!1):!!y!=!!h&&(s!=null?$i(r,!!h,s,!0):$i(r,!!h,h?[]:"",!1));return;case"textarea":$e=Xe=null;for(re in h)if(E=h[re],h.hasOwnProperty(re)&&E!=null&&!y.hasOwnProperty(re))switch(re){case"value":break;case"children":break;default:_n(r,s,re,null,y,E)}for(G in y)if(E=y[G],M=h[G],y.hasOwnProperty(G)&&(E!=null||M!=null))switch(G){case"value":Xe=E;break;case"defaultValue":$e=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(p(91));break;default:E!==M&&_n(r,s,G,E,y,M)}qo(r,Xe,$e);return;case"option":for(var dr in h)if(Xe=h[dr],h.hasOwnProperty(dr)&&Xe!=null&&!y.hasOwnProperty(dr))switch(dr){case"selected":r.selected=!1;break;default:_n(r,s,dr,null,y,Xe)}for(xe in y)if(Xe=y[xe],$e=h[xe],y.hasOwnProperty(xe)&&Xe!==$e&&(Xe!=null||$e!=null))switch(xe){case"selected":r.selected=Xe&&typeof Xe!="function"&&typeof Xe!="symbol";break;default:_n(r,s,xe,Xe,y,$e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var cr in h)Xe=h[cr],h.hasOwnProperty(cr)&&Xe!=null&&!y.hasOwnProperty(cr)&&_n(r,s,cr,null,y,Xe);for(Ke in y)if(Xe=y[Ke],$e=h[Ke],y.hasOwnProperty(Ke)&&Xe!==$e&&(Xe!=null||$e!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(p(137,s));break;default:_n(r,s,Ke,Xe,y,$e)}return;default:if(ci(s)){for(var br in h)Xe=h[br],h.hasOwnProperty(br)&&Xe!==void 0&&!y.hasOwnProperty(br)&&Nf(r,s,br,void 0,y,Xe);for(At in y)Xe=y[At],$e=h[At],!y.hasOwnProperty(At)||Xe===$e||Xe===void 0&&$e===void 0||Nf(r,s,At,Xe,y,$e);return}}for(var Pe in h)Xe=h[Pe],h.hasOwnProperty(Pe)&&Xe!=null&&!y.hasOwnProperty(Pe)&&_n(r,s,Pe,null,y,Xe);for(gt in y)Xe=y[gt],$e=h[gt],!y.hasOwnProperty(gt)||Xe===$e||Xe==null&&$e==null||_n(r,s,gt,Xe,y,$e)}var _u=null,jf=null;function hc(r){return r.nodeType===9?r:r.ownerDocument}function Uh(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mh(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function ip(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ap=null;function Ay(){var r=window.event;return r&&r.type==="popstate"?r===ap?!1:(ap=r,!0):(ap=null,!1)}var fc=typeof setTimeout=="function"?setTimeout:void 0,zi=typeof clearTimeout=="function"?clearTimeout:void 0,SA=typeof Promise=="function"?Promise:void 0,sp=typeof queueMicrotask=="function"?queueMicrotask:typeof SA<"u"?function(r){return SA.resolve(null).then(r).catch(Qg)}:fc;function Qg(r){setTimeout(function(){throw r})}function FA(r){return r==="head"}function Vf(r,s){var h=s,y=0,E=0;do{var M=h.nextSibling;if(r.removeChild(h),M&&M.nodeType===8)if(h=M.data,h==="/$"){if(0<y&&8>y){h=y;var G=r.ownerDocument;if(h&1&&dc(G.documentElement),h&2&&dc(G.body),h&4)for(h=G.head,dc(h),G=h.firstChild;G;){var re=G.nextSibling,xe=G.nodeName;G[sr]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&G.rel.toLowerCase()==="stylesheet"||h.removeChild(G),G=re}}if(E===0){r.removeChild(M),wu(s);return}E--}else h==="$"||h==="$?"||h==="$!"?E++:y=h.charCodeAt(0)-48;else y=0;h=M}while(h);wu(s)}function op(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var h=s;switch(s=s.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":op(h),Bn(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}r.removeChild(h)}}function Dg(r,s,h,y){for(;r.nodeType===1;){var E=h;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!y&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(y){if(!r[sr])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(M=r.getAttribute("rel"),M==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(M!==E.rel||r.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||r.getAttribute("title")!==(E.title==null?null:E.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(M=r.getAttribute("src"),(M!==(E.src==null?null:E.src)||r.getAttribute("type")!==(E.type==null?null:E.type)||r.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&M&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var M=E.name==null?null:""+E.name;if(E.type==="hidden"&&r.getAttribute("name")===M)return r}else return r;if(r=ts(r.nextSibling),r===null)break}return null}function Lg(r,s,h){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!h||(r=ts(r.nextSibling),r===null))return null;return r}function Ap(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Pg(r,s){var h=r.ownerDocument;if(r.data!=="$?"||h.readyState==="complete")s();else{var y=function(){s(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),r._reactRetry=y}}function ts(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Ih=null;function lp(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"){if(s===0)return r;s--}else h==="/$"&&s++}r=r.previousSibling}return null}function vu(r,s,h){switch(s=hc(h),r){case"html":if(r=s.documentElement,!r)throw Error(p(452));return r;case"head":if(r=s.head,!r)throw Error(p(453));return r;case"body":if(r=s.body,!r)throw Error(p(454));return r;default:throw Error(p(451))}}function dc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Bn(r)}var rs=new Map,Gf=new Set;function pc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ns=ut.d;ut.d={f:cp,r:up,D:i,C:t,L:a,m:l,X:v,S:g,M:x};function cp(){var r=ns.f(),s=xh();return r||s}function up(r){var s=$t(r);s!==null&&s.tag===5&&s.type==="form"?Ya(s):ns.r(r)}var cl=typeof document>"u"?null:document;function Rg(r,s,h){var y=cl;if(y&&typeof s=="string"&&s){var E=Vn(s);E='link[rel="'+r+'"][href="'+E+'"]',typeof h=="string"&&(E+='[crossorigin="'+h+'"]'),Gf.has(E)||(Gf.add(E),r={rel:r,crossOrigin:h,href:s},y.querySelector(E)===null&&(s=y.createElement("link"),fi(s,"link",r),Wn(s),y.head.appendChild(s)))}}function i(r){ns.D(r),Rg("dns-prefetch",r,null)}function t(r,s){ns.C(r,s),Rg("preconnect",r,s)}function a(r,s,h){ns.L(r,s,h);var y=cl;if(y&&r&&s){var E='link[rel="preload"][as="'+Vn(s)+'"]';s==="image"&&h&&h.imageSrcSet?(E+='[imagesrcset="'+Vn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(E+='[imagesizes="'+Vn(h.imageSizes)+'"]')):E+='[href="'+Vn(r)+'"]';var M=E;switch(s){case"style":M=F(r);break;case"script":M=N(r)}rs.has(M)||(r=k({rel:"preload",href:s==="image"&&h&&h.imageSrcSet?void 0:r,as:s},h),rs.set(M,r),y.querySelector(E)!==null||s==="style"&&y.querySelector(I(M))||s==="script"&&y.querySelector(V(M))||(s=y.createElement("link"),fi(s,"link",r),Wn(s),y.head.appendChild(s)))}}function l(r,s){ns.m(r,s);var h=cl;if(h&&r){var y=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+Vn(y)+'"][href="'+Vn(r)+'"]',M=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=N(r)}if(!rs.has(M)&&(r=k({rel:"modulepreload",href:r},s),rs.set(M,r),h.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(V(M)))return}y=h.createElement("link"),fi(y,"link",r),Wn(y),h.head.appendChild(y)}}}function g(r,s,h){ns.S(r,s,h);var y=cl;if(y&&r){var E=Kr(y).hoistableStyles,M=F(r);s=s||"default";var G=E.get(M);if(!G){var re={loading:0,preload:null};if(G=y.querySelector(I(M)))re.loading=5;else{r=k({rel:"stylesheet",href:r,"data-precedence":s},h),(h=rs.get(M))&&ae(r,h);var xe=G=y.createElement("link");Wn(xe),fi(xe,"link",r),xe._p=new Promise(function(Ke,At){xe.onload=Ke,xe.onerror=At}),xe.addEventListener("load",function(){re.loading|=1}),xe.addEventListener("error",function(){re.loading|=2}),re.loading|=4,$(G,s,y)}G={type:"stylesheet",instance:G,count:1,state:re},E.set(M,G)}}}function v(r,s){ns.X(r,s);var h=cl;if(h&&r){var y=Kr(h).hoistableScripts,E=N(r),M=y.get(E);M||(M=h.querySelector(V(E)),M||(r=k({src:r,async:!0},s),(s=rs.get(E))&&ue(r,s),M=h.createElement("script"),Wn(M),fi(M,"link",r),h.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},y.set(E,M))}}function x(r,s){ns.M(r,s);var h=cl;if(h&&r){var y=Kr(h).hoistableScripts,E=N(r),M=y.get(E);M||(M=h.querySelector(V(E)),M||(r=k({src:r,async:!0,type:"module"},s),(s=rs.get(E))&&ue(r,s),M=h.createElement("script"),Wn(M),fi(M,"link",r),h.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},y.set(E,M))}}function B(r,s,h,y){var E=(E=Pt.current)?pc(E):null;if(!E)throw Error(p(446));switch(r){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(s=F(h.href),h=Kr(E).hoistableStyles,y=h.get(s),y||(y={type:"style",instance:null,count:0,state:null},h.set(s,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){r=F(h.href);var M=Kr(E).hoistableStyles,G=M.get(r);if(G||(E=E.ownerDocument||E,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(r,G),(M=E.querySelector(I(r)))&&!M._p&&(G.instance=M,G.state.loading=5),rs.has(r)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},rs.set(r,h),M||P(E,r,h,G.state))),s&&y===null)throw Error(p(528,""));return G}if(s&&y!==null)throw Error(p(529,""));return null;case"script":return s=h.async,h=h.src,typeof h=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=N(h),h=Kr(E).hoistableScripts,y=h.get(s),y||(y={type:"script",instance:null,count:0,state:null},h.set(s,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,r))}}function F(r){return'href="'+Vn(r)+'"'}function I(r){return'link[rel="stylesheet"]['+r+"]"}function L(r){return k({},r,{"data-precedence":r.precedence,precedence:null})}function P(r,s,h,y){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?y.loading=1:(s=r.createElement("link"),y.preload=s,s.addEventListener("load",function(){return y.loading|=1}),s.addEventListener("error",function(){return y.loading|=2}),fi(s,"link",h),Wn(s),r.head.appendChild(s))}function N(r){return'[src="'+Vn(r)+'"]'}function V(r){return"script[async]"+r}function Z(r,s,h){if(s.count++,s.instance===null)switch(s.type){case"style":var y=r.querySelector('style[data-href~="'+Vn(h.href)+'"]');if(y)return s.instance=y,Wn(y),y;var E=k({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(r.ownerDocument||r).createElement("style"),Wn(y),fi(y,"style",E),$(y,h.precedence,r),s.instance=y;case"stylesheet":E=F(h.href);var M=r.querySelector(I(E));if(M)return s.state.loading|=4,s.instance=M,Wn(M),M;y=L(h),(E=rs.get(E))&&ae(y,E),M=(r.ownerDocument||r).createElement("link"),Wn(M);var G=M;return G._p=new Promise(function(re,xe){G.onload=re,G.onerror=xe}),fi(M,"link",y),s.state.loading|=4,$(M,h.precedence,r),s.instance=M;case"script":return M=N(h.src),(E=r.querySelector(V(M)))?(s.instance=E,Wn(E),E):(y=h,(E=rs.get(M))&&(y=k({},h),ue(y,E)),r=r.ownerDocument||r,E=r.createElement("script"),Wn(E),fi(E,"link",y),r.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(p(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(y=s.instance,s.state.loading|=4,$(y,h.precedence,r));return s.instance}function $(r,s,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,M=E,G=0;G<y.length;G++){var re=y[G];if(re.dataset.precedence===s)M=re;else if(M!==E)break}M?M.parentNode.insertBefore(r,M.nextSibling):(s=h.nodeType===9?h.head:h,s.insertBefore(r,s.firstChild))}function ae(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function ue(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Be=null;function de(r,s,h){if(Be===null){var y=new Map,E=Be=new Map;E.set(h,y)}else E=Be,y=E.get(h),y||(y=new Map,E.set(h,y));if(y.has(r))return y;for(y.set(r,null),h=h.getElementsByTagName(r),E=0;E<h.length;E++){var M=h[E];if(!(M[sr]||M[qt]||r==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var G=M.getAttribute(s)||"";G=r+G;var re=y.get(G);re?re.push(M):y.set(G,[M])}}return y}function j(r,s,h){r=r.ownerDocument||r,r.head.insertBefore(h,s==="title"?r.querySelector("head > title"):null)}function ie(r,s,h){if(h===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ge(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Ve=null;function dt(){}function Ze(r,s,h){if(Ve===null)throw Error(p(475));var y=Ve;if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var E=F(h.href),M=r.querySelector(I(E));if(M){r=M._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(y.count++,y=vt.bind(y),r.then(y,y)),s.state.loading|=4,s.instance=M,Wn(M);return}M=r.ownerDocument||r,h=L(h),(E=rs.get(E))&&ae(h,E),M=M.createElement("link"),Wn(M);var G=M;G._p=new Promise(function(re,xe){G.onload=re,G.onerror=xe}),fi(M,"link",h),s.instance=M}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(y.count++,s=vt.bind(y),r.addEventListener("load",s),r.addEventListener("error",s))}}function Je(){if(Ve===null)throw Error(p(475));var r=Ve;return r.stylesheets&&r.count===0&&wt(r,r.stylesheets),0<r.count?function(s){var h=setTimeout(function(){if(r.stylesheets&&wt(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(h)}}:null}function vt(){if(this.count--,this.count===0){if(this.stylesheets)wt(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ft=null;function wt(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ft=new Map,s.forEach(at,r),ft=null,vt.call(r))}function at(r,s){if(!(s.state.loading&4)){var h=ft.get(r);if(h)var y=h.get(null);else{h=new Map,ft.set(r,h);for(var E=r.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<E.length;M++){var G=E[M];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(h.set(G.dataset.precedence,G),y=G)}y&&h.set(null,y)}E=s.instance,G=E.getAttribute("data-precedence"),M=h.get(G)||y,M===y&&h.set(null,E),h.set(G,E),this.count++,y=vt.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),M?M.parentNode.insertBefore(E,M.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(E,r.firstChild)),s.state.loading|=4}}var Dt={$$typeof:De,Provider:null,Consumer:null,_currentValue:Ct,_currentValue2:Ct,_threadCount:0};function rr(r,s,h,y,E,M,G,re){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ce(0),this.hiddenUpdates=Ce(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=M,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function er(r,s,h,y,E,M,G,re,xe,Ke,At,gt){return r=new rr(r,s,h,G,re,xe,Ke,gt),s=1,M===!0&&(s|=24),M=ji(3,null,null,s),r.current=M,M.stateNode=r,s=lA(),s.refCount++,r.pooledCache=s,s.refCount++,M.memoizedState={element:y,isDehydrated:h,cache:s},$A(M),r}function jt(r){return r?(r=Vs,r):Vs}function Sr(r,s,h,y,E,M){E=jt(E),y.context===null?y.context=E:y.pendingContext=E,y=Zs(s),y.payload={element:h},M=M===void 0?null:M,M!==null&&(y.callback=M),h=qa(r,y,s),h!==null&&(sa(h,r,s),jl(h,r,s))}function Ln(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<s?h:s}}function ei(r,s){Ln(r,s),(r=r.alternate)&&Ln(r,s)}function Si(r){if(r.tag===13){var s=ZA(r,67108864);s!==null&&sa(s,r,67108864),ei(r,67108864)}}var oa=!0;function va(r,s,h,y){var E=Te.T;Te.T=null;var M=ut.p;try{ut.p=2,vn(r,s,h,y)}finally{ut.p=M,Te.T=E}}function Fi(r,s,h,y){var E=Te.T;Te.T=null;var M=ut.p;try{ut.p=8,vn(r,s,h,y)}finally{ut.p=M,Te.T=E}}function vn(r,s,h,y){if(oa){var E=si(y);if(E===null)zf(r,s,y,oi,h),Ts(r,y);else if(eo(E,r,s,h,y))y.stopPropagation();else if(Ts(r,y),s&4&&-1<wn.indexOf(r)){for(;E!==null;){var M=$t(E);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var G=Le(M.pendingLanes);if(G!==0){var re=M;for(re.pendingLanes|=2,re.entangledLanes|=2;G;){var xe=1<<31-Un(G);re.entanglements[1]|=xe,G&=~xe}Qo(M),(An&6)===0&&(fu=Ar()+500,Eh(0))}}break;case 13:re=ZA(M,2),re!==null&&sa(re,M,2),xh(),ei(M,2)}if(M=si(y),M===null&&zf(r,s,y,oi,h),M===E)break;E=M}E!==null&&y.stopPropagation()}else zf(r,s,y,null,h)}}function si(r){return r=$n(r),di(r)}var oi=null;function di(r){if(oi=null,r=Wi(r),r!==null){var s=S(r);if(s===null)r=null;else{var h=s.tag;if(h===13){if(r=C(s),r!==null)return r;r=null}else if(h===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return oi=r,null}function Xi(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case Rn:return 2;case vr:return 8;case Gr:case cn:return 32;case en:return 268435456;default:return 32}default:return 32}}var xa=!1,Fn=null,Ai=null,xn=null,qn=new Map,Xn=new Map,pn=[],wn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ts(r,s){switch(r){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":qn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(s.pointerId)}}function Do(r,s,h,y,E,M){return r===null||r.nativeEvent!==M?(r={blockedOn:s,domEventName:h,eventSystemFlags:y,nativeEvent:M,targetContainers:[E]},s!==null&&(s=$t(s),s!==null&&Si(s)),r):(r.eventSystemFlags|=y,s=r.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),r)}function eo(r,s,h,y,E){switch(s){case"focusin":return Fn=Do(Fn,r,s,h,y,E),!0;case"dragenter":return Ai=Do(Ai,r,s,h,y,E),!0;case"mouseover":return xn=Do(xn,r,s,h,y,E),!0;case"pointerover":var M=E.pointerId;return qn.set(M,Do(qn.get(M)||null,r,s,h,y,E)),!0;case"gotpointercapture":return M=E.pointerId,Xn.set(M,Do(Xn.get(M)||null,r,s,h,y,E)),!0}return!1}function Og(r){var s=Wi(r.target);if(s!==null){var h=S(s);if(h!==null){if(s=h.tag,s===13){if(s=C(h),s!==null){r.blockedOn=s,Mt(r.priority,function(){if(h.tag===13){var y=qi();y=Oe(y);var E=ZA(h,y);E!==null&&sa(E,h,y),ei(h,y)}});return}}else if(s===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function UA(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var h=si(r.nativeEvent);if(h===null){h=r.nativeEvent;var y=new h.constructor(h.type,h);Di=y,h.target.dispatchEvent(y),Di=null}else return s=$t(h),s!==null&&Si(s),r.blockedOn=h,!1;s.shift()}return!0}function ul(r,s,h){UA(r)&&h.delete(s)}function xu(){xa=!1,Fn!==null&&UA(Fn)&&(Fn=null),Ai!==null&&UA(Ai)&&(Ai=null),xn!==null&&UA(xn)&&(xn=null),qn.forEach(ul),Xn.forEach(ul)}function MA(r,s){r.blockedOn===s&&(r.blockedOn=null,xa||(xa=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,xu)))}var IA=null;function hp(r){IA!==r&&(IA=r,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){IA===r&&(IA=null);for(var s=0;s<r.length;s+=3){var h=r[s],y=r[s+1],E=r[s+2];if(typeof y!="function"){if(di(y||h)===null)continue;break}var M=$t(h);M!==null&&(r.splice(s,3),s-=3,_s(M,{pending:!0,data:E,method:h.method,action:y},y,E))}}))}function wu(r){function s(xe){return MA(xe,r)}Fn!==null&&MA(Fn,r),Ai!==null&&MA(Ai,r),xn!==null&&MA(xn,r),qn.forEach(s),Xn.forEach(s);for(var h=0;h<pn.length;h++){var y=pn[h];y.blockedOn===r&&(y.blockedOn=null)}for(;0<pn.length&&(h=pn[0],h.blockedOn===null);)Og(h),h.blockedOn===null&&pn.shift();if(h=(r.ownerDocument||r).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var E=h[y],M=h[y+1],G=E[Ot]||null;if(typeof M=="function")G||hp(h);else if(G){var re=null;if(M&&M.hasAttribute("formAction")){if(E=M,G=M[Ot]||null)re=G.formAction;else if(di(E)!==null)continue}else re=G.action;typeof re=="function"?h[y+1]=re:(h.splice(y,3),y-=3),hp(h)}}}function Kf(r){this._internalRoot=r}Qh.prototype.render=Kf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(p(409));var h=s.current,y=qi();Sr(h,y,r,s,null,null)},Qh.prototype.unmount=Kf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Sr(r.current,2,null,r,null,null),xh(),s[nr]=null}};function Qh(r){this._internalRoot=r}Qh.prototype.unstable_scheduleHydration=function(r){if(r){var s=St();r={blockedOn:null,target:r,priority:s};for(var h=0;h<pn.length&&s!==0&&s<pn[h].priority;h++);pn.splice(h,0,r),h===0&&Og(r)}};var Zf=u.version;if(Zf!=="19.1.0")throw Error(p(527,Zf,"19.1.0"));ut.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(p(188)):(r=Object.keys(r).join(","),Error(p(268,r)));return r=D(s),r=r!==null?R(r):null,r=r===null?null:r.stateNode,r};var fp={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ss=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ss.isDisabled&&Ss.supportsFiber)try{Nn=Ss.inject(fp),Nr=Ss}catch{}}return pp.createRoot=function(r,s){if(!w(r))throw Error(p(299));var h=!1,y="",E=eg,M=Bd,G=Cd,re=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(M=s.onCaughtError),s.onRecoverableError!==void 0&&(G=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(re=s.unstable_transitionCallbacks)),s=er(r,1,!1,null,null,h,y,E,M,G,re,null),r[nr]=s.current,Of(r),new Kf(s)},pp.hydrateRoot=function(r,s,h){if(!w(r))throw Error(p(299));var y=!1,E="",M=eg,G=Bd,re=Cd,xe=null,Ke=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onUncaughtError!==void 0&&(M=h.onUncaughtError),h.onCaughtError!==void 0&&(G=h.onCaughtError),h.onRecoverableError!==void 0&&(re=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(xe=h.unstable_transitionCallbacks),h.formState!==void 0&&(Ke=h.formState)),s=er(r,1,!0,s,h??null,y,E,M,G,re,xe,Ke),s.context=jt(null),h=s.current,y=qi(),y=Oe(y),E=Zs(y),E.callback=null,qa(h,E,y),h=y,s.current.lanes=h,ze(s,h),Qo(s),r[nr]=s.current,Of(r),new Qh(s)},pp.version="19.1.0",pp}var W_;function kw(){if(W_)return uy.exports;W_=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(u){console.error(u)}}return o(),uy.exports=zw(),uy.exports}var Hw=kw();const Nw=Vh(Hw);var dm={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.3.0/LICENSE.txt
 */var jw=dm.exports,$_;function Vw(){return $_||($_=1,function(o,u){(function(d,p){o.exports=p()})(jw,function(){var d={},p={};function w(C,A,D){if(p[C]=D,C==="index"){var R="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",k={};return p.shared(k),p.index(d,k),typeof window<"u"&&d.setWorkerUrl(window.URL.createObjectURL(new Blob([R],{type:"text/javascript"}))),d}}w("shared",["exports"],function(C){function A(i,t,a,l){return new(a||(a=Promise))(function(g,v){function x(I){try{F(l.next(I))}catch(L){v(L)}}function B(I){try{F(l.throw(I))}catch(L){v(L)}}function F(I){var L;I.done?g(I.value):(L=I.value,L instanceof a?L:new a(function(P){P(L)})).then(x,B)}F((l=l.apply(i,t||[])).next())})}function D(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var R,k;function q(){if(k)return R;function i(t,a){this.x=t,this.y=a}return k=1,R=i,i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,a){return this.clone()._rotateAround(t,a)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var a=t.x-this.x,l=t.y-this.y;return a*a+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,a){return Math.atan2(this.x*a-this.y*t,this.x*t+this.y*a)},_matMult:function(t){var a=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=a,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var a=Math.cos(t),l=Math.sin(t),g=l*this.x+a*this.y;return this.x=a*this.x-l*this.y,this.y=g,this},_rotateAround:function(t,a){var l=Math.cos(t),g=Math.sin(t),v=a.y+g*(this.x-a.x)+l*(this.y-a.y);return this.x=a.x+l*(this.x-a.x)-g*(this.y-a.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t},R}typeof SuppressedError=="function"&&SuppressedError;var X,W,ne=D(q()),ye=function(){if(W)return X;function i(t,a,l,g){this.cx=3*t,this.bx=3*(l-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(g-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=a,this.p2x=l,this.p2y=g}return W=1,X=i,i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,a){if(a===void 0&&(a=1e-6),t<0)return 0;if(t>1)return 1;for(var l=t,g=0;g<8;g++){var v=this.sampleCurveX(l)-t;if(Math.abs(v)<a)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=v/x}var B=0,F=1;for(l=t,g=0;g<20&&(v=this.sampleCurveX(l),!(Math.abs(v-t)<a));g++)t>v?B=l:F=l,l=.5*(F-B)+B;return l},solve:function(t,a){return this.sampleCurveY(this.solveCurveX(t,a))}},X}(),Se=D(ye);let le,ve;function De(){return le==null&&(le=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),le}function Re(){if(ve==null&&(ve=!1,De())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let l=0;l<5*5;l++){const g=4*l;t.fillStyle=`rgb(${g},${g+1},${g+2})`,t.fillRect(l%5,Math.floor(l/5),1,1)}const a=t.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&a[l]!==l){ve=!0;break}}}return ve||!1}var Me,Ne=1e-6,st=typeof Float32Array<"u"?Float32Array:Array;function mt(){var i=new st(9);return st!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function ot(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Qt(){var i=new st(3);return st!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function He(i,t,a){var l=new st(3);return l[0]=i,l[1]=t,l[2]=a,l}function Zt(i,t,a){var l=t[0],g=t[1],v=t[2],x=t[3];return i[0]=a[0]*l+a[4]*g+a[8]*v+a[12]*x,i[1]=a[1]*l+a[5]*g+a[9]*v+a[13]*x,i[2]=a[2]*l+a[6]*g+a[10]*v+a[14]*x,i[3]=a[3]*l+a[7]*g+a[11]*v+a[15]*x,i}function Ut(){var i=new st(4);return st!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function Vt(){var i=new st(2);return st!=Float32Array&&(i[0]=0,i[1]=0),i}function Wt(i,t){var a=new st(2);return a[0]=i,a[1]=t,a}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)}),Qt(),Me=new st(4),st!=Float32Array&&(Me[0]=0,Me[1]=0,Me[2]=0,Me[3]=0),Qt(),He(1,0,0),He(0,1,0),Ut(),Ut(),mt(),Vt();const Te=8192;function ut(i,t,a){return t*(Te/(i.tileSize*Math.pow(2,a-i.tileID.overscaledZ)))}function Ct(i,t){return(i%t+t)%t}function Rt(i,t,a){return i*(1-a)+t*a}function he(i){if(i<=0)return 0;if(i>=1)return 1;const t=i*i,a=t*i;return 4*(i<.5?a:3*(i-t)+a-.75)}function nt(i,t,a,l){const g=new Se(i,t,a,l);return v=>g.solve(v)}const yt=nt(.25,.1,.25,1);function _t(i,t,a){return Math.min(a,Math.max(t,i))}function xt(i,t,a){const l=a-t,g=((i-t)%l+l)%l+t;return g===t?a:g}function Ft(i,...t){for(const a of t)for(const l in a)i[l]=a[l];return i}let Pt=1;function ur(i,t,a){const l={};for(const g in i)l[g]=t.call(this,i[g],g,i);return l}function ir(i,t,a){const l={};for(const g in i)t.call(this,i[g],g,i)&&(l[g]=i[g]);return l}function yr(i){return Array.isArray(i)?i.map(yr):typeof i=="object"&&i?ur(i,yr):i}const nn={};function Rr(i){nn[i]||(typeof console<"u"&&console.warn(i),nn[i]=!0)}function Ye(i,t,a){return(a.y-i.y)*(t.x-i.x)>(t.y-i.y)*(a.x-i.x)}function Lt(i){return typeof WorkerGlobalScope<"u"&&i!==void 0&&i instanceof WorkerGlobalScope}let bt=null;function xr(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const Xr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ar(i,t,a,l,g){return A(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(i,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const B=x.startsWith("BGR"),F=new Uint8ClampedArray(l*g*4);if(yield v.copyTo(F,function(I,L,P,N,V){const Z=4*Math.max(1,0),$=(Math.max(0,P)-P)*N*4+Z,ae=4*N,ue=Math.max(0,L),Be=Math.max(0,P);return{rect:{x:ue,y:Be,width:Math.min(I.width,L+N)-ue,height:Math.min(I.height,P+V)-Be},layout:[{offset:$,stride:ae}]}}(i,t,a,l,g)),B)for(let I=0;I<F.length;I+=4){const L=F[I];F[I]=F[I+2],F[I+2]=L}return F}finally{v.close()}})}let jr,Rn;function vr(i,t,a,l){return i.addEventListener(t,a,l),{unsubscribe:()=>{i.removeEventListener(t,a,l)}}}function Gr(i){return i/Math.PI*180}const cn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},en={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},fr="AbortError";function or(){return new Error(fr)}const Nn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Nr(i){return Nn.REGISTERED_PROTOCOLS[i.substring(0,i.indexOf("://"))]}const Yr="global-dispatcher";class Un extends Error{constructor(t,a,l,g){super(`AJAXError: ${a} (${t}): ${l}`),this.status=t,this.statusText=a,this.url=l,this.body=g}}const Ii=()=>Lt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,jn=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){const l=Nr(i.url);if(l)return l(i,t);if(Lt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,targetMapId:Yr},t)}if(!(/^file:/.test(a=i.url)||/^file:/.test(Ii())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,g){return A(this,void 0,void 0,function*(){const v=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:Ii(),signal:g.signal});let x,B;l.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{x=yield fetch(v)}catch(I){throw new Un(0,I.message,l.url,new Blob)}if(!x.ok){const I=yield x.blob();throw new Un(x.status,x.statusText,l.url,I)}B=l.type==="arrayBuffer"||l.type==="image"?x.arrayBuffer():l.type==="json"?x.json():x.text();const F=yield B;if(g.signal.aborted)throw or();return{data:F,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(i,t);if(Lt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:i,mustQueue:!0,targetMapId:Yr},t)}var a;return function(l,g){return new Promise((v,x)=>{var B;const F=new XMLHttpRequest;F.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(F.responseType="arraybuffer");for(const I in l.headers)F.setRequestHeader(I,l.headers[I]);l.type==="json"&&(F.responseType="text",!((B=l.headers)===null||B===void 0)&&B.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=l.credentials==="include",F.onerror=()=>{x(new Error(F.statusText))},F.onload=()=>{if(!g.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let I=F.response;if(l.type==="json")try{I=JSON.parse(F.response)}catch(L){return void x(L)}v({data:I,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const I=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});x(new Un(F.status,F.statusText,l.url,I))}},g.signal.addEventListener("abort",()=>{F.abort(),x(or())}),F.send(l.body)})}(i,t)};function as(i){if(!i||i.indexOf("://")<=0||i.indexOf("data:image/")===0||i.indexOf("blob:")===0)return!0;const t=new URL(i),a=window.location;return t.protocol===a.protocol&&t.host===a.host}function No(i,t,a){a[i]&&a[i].indexOf(t)!==-1||(a[i]=a[i]||[],a[i].push(t))}function Ba(i,t,a){if(a&&a[i]){const l=a[i].indexOf(t);l!==-1&&a[i].splice(l,1)}}class Le{constructor(t,a={}){Ft(this,a),this.type=t}}class J extends Le{constructor(t,a={}){super("error",Ft({error:t},a))}}class te{on(t,a){return this._listeners=this._listeners||{},No(t,a,this._listeners),{unsubscribe:()=>{this.off(t,a)}}}off(t,a){return Ba(t,a,this._listeners),Ba(t,a,this._oneTimeListeners),this}once(t,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},No(t,a,this._oneTimeListeners),this):new Promise(l=>this.once(t,l))}fire(t,a){typeof t=="string"&&(t=new Le(t,a||{}));const l=t.type;if(this.listens(l)){t.target=this;const g=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const B of g)B.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const B of v)Ba(l,B,this._oneTimeListeners),B.call(this,t);const x=this._eventedParent;x&&(Ft(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(t))}else t instanceof J&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,a){return this._eventedParent=t,this._eventedParentData=a,this}}var K={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fe(i,t){const a={};for(const l in i)l!=="ref"&&(a[l]=i[l]);return pe.forEach(l=>{l in t&&(a[l]=t[l])}),a}function Ce(i,t){if(Array.isArray(i)){if(!Array.isArray(t)||i.length!==t.length)return!1;for(let a=0;a<i.length;a++)if(!Ce(i[a],t[a]))return!1;return!0}if(typeof i=="object"&&i!==null&&t!==null){if(typeof t!="object"||Object.keys(i).length!==Object.keys(t).length)return!1;for(const a in i)if(!Ce(i[a],t[a]))return!1;return!0}return i===t}function ze(i,t){i.push(t)}function Qe(i,t,a){ze(a,{command:"addSource",args:[i,t[i]]})}function tt(i,t,a){ze(t,{command:"removeSource",args:[i]}),a[i]=!0}function We(i,t,a,l){tt(i,a,l),Qe(i,t,a)}function Oe(i,t,a){let l;for(l in i[a])if(Object.prototype.hasOwnProperty.call(i[a],l)&&l!=="data"&&!Ce(i[a][l],t[a][l]))return!1;for(l in t[a])if(Object.prototype.hasOwnProperty.call(t[a],l)&&l!=="data"&&!Ce(i[a][l],t[a][l]))return!1;return!0}function ct(i,t,a,l,g,v){i=i||{},t=t||{};for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&(Ce(i[x],t[x])||a.push({command:v,args:[l,x,t[x],g]}));for(const x in t)Object.prototype.hasOwnProperty.call(t,x)&&!Object.prototype.hasOwnProperty.call(i,x)&&(Ce(i[x],t[x])||a.push({command:v,args:[l,x,t[x],g]}))}function St(i){return i.id}function Mt(i,t){return i[t.id]=t,i}class qe{constructor(t,a,l,g){this.message=(t?`${t}: `:"")+l,g&&(this.identifier=g),a!=null&&a.__line__&&(this.line=a.__line__)}}function qt(i,...t){for(const a of t)for(const l in a)i[l]=a[l];return i}class Ot extends Error{constructor(t,a){super(a),this.message=a,this.key=t}}class nr{constructor(t,a=[]){this.parent=t,this.bindings={};for(const[l,g]of a)this.bindings[l]=g}concat(t){return new nr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ur={kind:"null"},pt={kind:"number"},zt={kind:"string"},Tt={kind:"boolean"},sr={kind:"color"},Bn={kind:"projectionDefinition"},Wi={kind:"object"},$t={kind:"value"},On={kind:"collator"},Kr={kind:"formatted"},Wn={kind:"padding"},jo={kind:"resolvedImage"},Is={kind:"variableAnchorOffsetCollection"};function ti(i,t){return{kind:"array",itemType:i,N:t}}function tn(i){if(i.kind==="array"){const t=tn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const gd=[Ur,pt,zt,Tt,sr,Bn,Kr,Wi,ti($t),Wn,jo,Is];function Vo(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Vo(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const a of gd)if(!Vo(a,t))return null}}return`Expected ${tn(i)} but found ${tn(t)} instead.`}function Cc(i,t){return t.some(a=>a.kind===i.kind)}function no(i,t){return t.some(a=>a==="null"?i===null:a==="array"?Array.isArray(i):a==="object"?i&&!Array.isArray(i)&&typeof i=="object":a===typeof i)}function Qs(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const vl=.96422,ss=.82521,Ec=4/29,Go=6/29,Ko=3*Go*Go,Ru=Go*Go*Go,Tc=Math.PI/180,xl=180/Math.PI;function Ou(i){return(i%=360)<0&&(i+=360),i}function ua([i,t,a,l]){let g,v;const x=zu((.2225045*(i=io(i))+.7168786*(t=io(t))+.0606169*(a=io(a)))/1);i===t&&t===a?g=v=x:(g=zu((.4360747*i+.3850649*t+.1430804*a)/vl),v=zu((.0139322*i+.0971045*t+.7141733*a)/ss));const B=116*x-16;return[B<0?0:B,500*(g-x),200*(x-v),l]}function io(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function zu(i){return i>Ru?Math.pow(i,1/3):i/Ko+Ec}function wl([i,t,a,l]){let g=(i+16)/116,v=isNaN(t)?g:g+t/500,x=isNaN(a)?g:g-a/200;return g=1*Zo(g),v=vl*Zo(v),x=ss*Zo(x),[Sc(3.1338561*v-1.6168667*g-.4906146*x),Sc(-.9787684*v+1.9161415*g+.033454*x),Sc(.0719453*v-.2289914*g+1.4052427*x),l]}function Sc(i){return(i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055)<0?0:i>1?1:i}function Zo(i){return i>Go?i*i*i:Ko*(i-Ec)}function bl(i){return parseInt(i.padEnd(2,i),16)/255}function Vn(i,t){return wr(t?i/100:i,0,1)}function wr(i,t,a){return Math.min(Math.max(t,i),a)}function ao(i){return!i.some(Number.isNaN)}const os={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function $i(i,t,a){return i+a*(t-i)}function qo(i,t,a){return i.map((l,g)=>$i(l,t[g],a))}class Qr{constructor(t,a,l,g=1,v=!0){this.r=t,this.g=a,this.b=l,this.a=g,v||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[t,a,l,g]))}static parse(t){if(t instanceof Qr)return t;if(typeof t!="string")return;const a=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=os[l];if(g){const[x,B,F]=g;return[x/255,B/255,F/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const x=l.length<6?1:2;let B=1;return[bl(l.slice(B,B+=x)),bl(l.slice(B,B+=x)),bl(l.slice(B,B+=x)),bl(l.slice(B,B+x)||"ff")]}if(l.startsWith("rgb")){const x=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[B,F,I,L,P,N,V,Z,$,ae,ue,Be]=x,de=[L||" ",V||" ",ae].join("");if(de==="  "||de==="  /"||de===",,"||de===",,,"){const j=[I,N,$].join(""),ie=j==="%%%"?100:j===""?255:0;if(ie){const ge=[wr(+F/ie,0,1),wr(+P/ie,0,1),wr(+Z/ie,0,1),ue?Vn(+ue,Be):1];if(ao(ge))return ge}}return}}const v=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,B,F,I,L,P,N,V,Z]=v,$=[F||" ",L||" ",N].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const ae=[+B,wr(+I,0,100),wr(+P,0,100),V?Vn(+V,Z):1];if(ao(ae))return function([ue,Be,de,j]){function ie(ge){const Ve=(ge+ue/30)%12,dt=Be*Math.min(de,1-de);return de-dt*Math.max(-1,Math.min(Ve-3,9-Ve,1))}return ue=Ou(ue),Be/=100,de/=100,[ie(0),ie(8),ie(4),j]}(ae)}}}(t);return a?new Qr(...a,!1):void 0}get rgb(){const{r:t,g:a,b:l,a:g}=this,v=g||1/0;return this.overwriteGetter("rgb",[t/v,a/v,l/v,g])}get hcl(){return this.overwriteGetter("hcl",function(t){const[a,l,g,v]=ua(t),x=Math.sqrt(l*l+g*g);return[Math.round(1e4*x)?Ou(Math.atan2(g,l)*xl):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ua(this.rgb))}overwriteGetter(t,a){return Object.defineProperty(this,t,{value:a}),a}toString(){const[t,a,l,g]=this.rgb;return`rgba(${[t,a,l].map(v=>Math.round(255*v)).join(",")},${g})`}static interpolate(t,a,l,g="rgb"){switch(g){case"rgb":{const[v,x,B,F]=qo(t.rgb,a.rgb,l);return new Qr(v,x,B,F,!1)}case"hcl":{const[v,x,B,F]=t.hcl,[I,L,P,N]=a.hcl;let V,Z;if(isNaN(v)||isNaN(I))isNaN(v)?isNaN(I)?V=NaN:(V=I,B!==1&&B!==0||(Z=L)):(V=v,P!==1&&P!==0||(Z=x));else{let de=I-v;I>v&&de>180?de-=360:I<v&&v-I>180&&(de+=360),V=v+l*de}const[$,ae,ue,Be]=function([de,j,ie,ge]){return de=isNaN(de)?0:de*Tc,wl([ie,Math.cos(de)*j,Math.sin(de)*j,ge])}([V,Z??$i(x,L,l),$i(B,P,l),$i(F,N,l)]);return new Qr($,ae,ue,Be,!1)}case"lab":{const[v,x,B,F]=wl(qo(t.lab,a.lab,l));return new Qr(v,x,B,F,!1)}}}}Qr.black=new Qr(0,0,0,1),Qr.white=new Qr(1,1,1,1),Qr.transparent=new Qr(0,0,0,0),Qr.red=new Qr(1,0,0,1);class vi{constructor(t,a,l){this.sensitivity=t?a?"variant":"case":a?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,a){return this.collator.compare(t,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Bl=["bottom","center","top"];class Xo{constructor(t,a,l,g,v,x){this.text=t,this.image=a,this.scale=l,this.fontStack=g,this.textColor=v,this.verticalAlign=x}}class Qi{constructor(t){this.sections=t}static fromString(t){return new Qi([new Xo(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof Qi?t:Qi.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class ci{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ci)return t;if(typeof t=="number")return new ci([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const a of t)if(typeof a!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new ci(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,a,l){return new ci(qo(t.values,a.values,l))}}class Cn{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Fc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof gi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let a=0;a<t.length;a+=2){const l=t[a],g=t[a+1];if(typeof l!="string"||!Fc.has(l)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new gi(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,a,l){const g=t.values,v=a.values;if(g.length!==v.length)throw new Cn(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${a.toString()}`);const x=[];for(let B=0;B<g.length;B+=2){if(g[B]!==v[B])throw new Cn(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${g[B]}, to[${B}]: ${v[B]}`);x.push(g[B]);const[F,I]=g[B+1],[L,P]=v[B+1];x.push([$i(F,L,l),$i(I,P,l)])}return new gi(x)}}class Di{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Di({name:t,available:!1}):null}}class $n{constructor(t,a,l){this.from=t,this.to=a,this.transition=l}static interpolate(t,a,l){return new $n(t,a,l)}static parse(t){return t instanceof $n?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new $n(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new $n(t.from,t.to,t.transition):typeof t=="string"?new $n(t,t,1):void 0}}function Yo(i,t,a,l){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof a=="number"&&a>=0&&a<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[i,t,a,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[i,t,a,l]:[i,t,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ha(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof $n||i instanceof Qr||i instanceof vi||i instanceof Qi||i instanceof ci||i instanceof gi||i instanceof Di)return!0;if(Array.isArray(i)){for(const t of i)if(!ha(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!ha(i[t]))return!1;return!0}return!1}function mn(i){if(i===null)return Ur;if(typeof i=="string")return zt;if(typeof i=="boolean")return Tt;if(typeof i=="number")return pt;if(i instanceof Qr)return sr;if(i instanceof $n)return Bn;if(i instanceof vi)return On;if(i instanceof Qi)return Kr;if(i instanceof ci)return Wn;if(i instanceof gi)return Is;if(i instanceof Di)return jo;if(Array.isArray(i)){const t=i.length;let a;for(const l of i){const g=mn(l);if(a){if(a===g)continue;a=$t;break}a=g}return ti(a||$t,t)}return Wi}function so(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof Qr||i instanceof $n||i instanceof Qi||i instanceof ci||i instanceof gi||i instanceof Di?i.toString():JSON.stringify(i)}class Ds{constructor(t,a){this.type=t,this.value=a}static parse(t,a){if(t.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ha(t[1]))return a.error("invalid value");const l=t[1];let g=mn(l);const v=a.expectedType;return g.kind!=="array"||g.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(g=v),new Ds(g,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ls={string:zt,number:pt,boolean:Tt,object:Wi};class Gn{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let l,g=1;const v=t[0];if(v==="array"){let B,F;if(t.length>2){const I=t[1];if(typeof I!="string"||!(I in Ls)||I==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);B=Ls[I],g++}else B=$t;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return a.error('The length argument to "array" must be a positive integer literal',2);F=t[2],g++}l=ti(B,F)}else{if(!Ls[v])throw new Error(`Types doesn't contain name = ${v}`);l=Ls[v]}const x=[];for(;g<t.length;g++){const B=a.parse(t[g],g,$t);if(!B)return null;x.push(B)}return new Gn(l,x)}evaluate(t){for(let a=0;a<this.args.length;a++){const l=this.args[a].evaluate(t);if(!Vo(this.type,mn(l)))return l;if(a===this.args.length-1)throw new Cn(`Expected value to be of type ${tn(this.type)}, but found ${tn(mn(l))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const an={"to-boolean":Tt,"to-color":sr,"to-number":pt,"to-string":zt};class Ji{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const l=t[0];if(!an[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&t.length!==2)return a.error("Expected one argument.");const g=an[l],v=[];for(let x=1;x<t.length;x++){const B=a.parse(t[x],x,$t);if(!B)return null;v.push(B)}return new Ji(g,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let a,l;for(const g of this.args){if(a=g.evaluate(t),l=null,a instanceof Qr)return a;if(typeof a=="string"){const v=t.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(l=a.length<3||a.length>4?`Invalid rgba value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Yo(a[0],a[1],a[2],a[3]),!l))return new Qr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Cn(l||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const l of this.args){a=l.evaluate(t);const g=ci.parse(a);if(g)return g}throw new Cn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const l of this.args){a=l.evaluate(t);const g=gi.parse(a);if(g)return g}throw new Cn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const l of this.args){if(a=l.evaluate(t),a===null)return 0;const g=Number(a);if(!isNaN(g))return g}throw new Cn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Qi.fromString(so(this.args[0].evaluate(t)));case"resolvedImage":return Di.fromString(so(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return so(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Cr=["Unknown","Point","LineString","Polygon"];class mr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Cr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let a=this._parseColorCache[t];return a||(a=this._parseColorCache[t]=Qr.parse(t)),a}}class Ps{constructor(t,a,l=[],g,v=new nr,x=[]){this.registry=t,this.path=l,this.key=l.map(B=>`[${B}]`).join(""),this.scope=v,this.errors=x,this.expectedType=g,this._isConstant=a}parse(t,a,l,g,v={}){return a?this.concat(a,l,g)._parse(t,v):this._parse(t,v)}_parse(t,a){function l(g,v,x){return x==="assert"?new Gn(v,[g]):x==="coerce"?new Ji(v,[g]):g}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=t[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[g];if(v){let x=v.parse(t,this);if(!x)return null;if(this.expectedType){const B=this.expectedType,F=x.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||F.kind!=="value")if(B.kind!=="projectionDefinition"||F.kind!=="string"&&F.kind!=="array")if(B.kind!=="color"&&B.kind!=="formatted"&&B.kind!=="resolvedImage"||F.kind!=="value"&&F.kind!=="string")if(B.kind!=="padding"||F.kind!=="value"&&F.kind!=="number"&&F.kind!=="array")if(B.kind!=="variableAnchorOffsetCollection"||F.kind!=="value"&&F.kind!=="array"){if(this.checkSubtype(B,F))return null}else x=l(x,B,a.typeAnnotation||"coerce");else x=l(x,B,a.typeAnnotation||"coerce");else x=l(x,B,a.typeAnnotation||"coerce");else x=l(x,B,a.typeAnnotation||"coerce");else x=l(x,B,a.typeAnnotation||"assert")}if(!(x instanceof Ds)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const B=new mr;try{x=new Ds(x.type,x.evaluate(B))}catch(F){return this.error(F.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,a,l){const g=typeof t=="number"?this.path.concat(t):this.path,v=l?this.scope.concat(l):this.scope;return new Ps(this.registry,this._isConstant,g,a||null,v,this.errors)}error(t,...a){const l=`${this.key}${a.map(g=>`[${g}]`).join("")}`;this.errors.push(new Ot(l,t))}checkSubtype(t,a){const l=Vo(t,a);return l&&this.error(l),l}}class Mr{constructor(t,a){this.type=a.type,this.bindings=[].concat(t),this.result=a}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const a of this.bindings)t(a[1]);t(this.result)}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let v=1;v<t.length-1;v+=2){const x=t[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const B=a.parse(t[v+1],v+1);if(!B)return null;l.push([x,B])}const g=a.parse(t[t.length-1],t.length-1,a.expectedType,l);return g?new Mr(l,g):null}outputDefined(){return this.result.outputDefined()}}class Rs{constructor(t,a){this.type=a.type,this.name=t,this.boundExpression=a}static parse(t,a){if(t.length!==2||typeof t[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const l=t[1];return a.scope.has(l)?new Rs(l,a.scope.get(l)):a.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class ea{constructor(t,a,l){this.type=t,this.index=a,this.input=l}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=a.parse(t[1],1,pt),g=a.parse(t[2],2,ti(a.expectedType||$t));return l&&g?new ea(g.type.itemType,l,g):null}evaluate(t){const a=this.index.evaluate(t),l=this.input.evaluate(t);if(a<0)throw new Cn(`Array index out of bounds: ${a} < 0.`);if(a>=l.length)throw new Cn(`Array index out of bounds: ${a} > ${l.length-1}.`);if(a!==Math.floor(a))throw new Cn(`Array index must be an integer, but found ${a} instead.`);return l[a]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class RA{constructor(t,a){this.type=Tt,this.needle=t,this.haystack=a}static parse(t,a){if(t.length!==3)return a.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=a.parse(t[1],1,$t),g=a.parse(t[2],2,$t);return l&&g?Cc(l.type,[Tt,zt,pt,Ur,$t])?new RA(l,g):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${tn(l.type)} instead`):null}evaluate(t){const a=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!l)return!1;if(!no(a,["boolean","string","number","null"]))throw new Cn(`Expected first argument to be of type boolean, string, number or null, but found ${tn(mn(a))} instead.`);if(!no(l,["string","array"]))throw new Cn(`Expected second argument to be of type array or string, but found ${tn(mn(l))} instead.`);return l.indexOf(a)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class mi{constructor(t,a,l){this.type=pt,this.needle=t,this.haystack=a,this.fromIndex=l}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=a.parse(t[1],1,$t),g=a.parse(t[2],2,$t);if(!l||!g)return null;if(!Cc(l.type,[Tt,zt,pt,Ur,$t]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${tn(l.type)} instead`);if(t.length===4){const v=a.parse(t[3],3,pt);return v?new mi(l,g,v):null}return new mi(l,g)}evaluate(t){const a=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!no(a,["boolean","string","number","null"]))throw new Cn(`Expected first argument to be of type boolean, string, number or null, but found ${tn(mn(a))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(t)),no(l,["string"])){const v=l.indexOf(a,g);return v===-1?-1:[...l.slice(0,v)].length}if(no(l,["array"]))return l.indexOf(a,g);throw new Cn(`Expected second argument to be of type array or string, but found ${tn(mn(l))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class As{constructor(t,a,l,g,v,x){this.inputType=t,this.type=a,this.input=l,this.cases=g,this.outputs=v,this.otherwise=x}static parse(t,a){if(t.length<5)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return a.error("Expected an even number of arguments.");let l,g;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);const v={},x=[];for(let I=2;I<t.length-1;I+=2){let L=t[I];const P=t[I+1];Array.isArray(L)||(L=[L]);const N=a.concat(I);if(L.length===0)return N.error("Expected at least one branch label.");for(const Z of L){if(typeof Z!="number"&&typeof Z!="string")return N.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return N.error("Numeric branch labels must be integer values.");if(l){if(N.checkSubtype(l,mn(Z)))return null}else l=mn(Z);if(v[String(Z)]!==void 0)return N.error("Branch labels must be unique.");v[String(Z)]=x.length}const V=a.parse(P,I,g);if(!V)return null;g=g||V.type,x.push(V)}const B=a.parse(t[1],1,$t);if(!B)return null;const F=a.parse(t[t.length-1],t.length-1,g);return F?B.type.kind!=="value"&&a.concat(1).checkSubtype(l,B.type)?null:new As(l,g,B,v,x,F):null}evaluate(t){const a=this.input.evaluate(t);return(mn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class oo{constructor(t,a,l){this.type=t,this.branches=a,this.otherwise=l}static parse(t,a){if(t.length<4)return a.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return a.error("Expected an odd number of arguments.");let l;a.expectedType&&a.expectedType.kind!=="value"&&(l=a.expectedType);const g=[];for(let x=1;x<t.length-1;x+=2){const B=a.parse(t[x],x,Tt);if(!B)return null;const F=a.parse(t[x+1],x+1,l);if(!F)return null;g.push([B,F]),l=l||F.type}const v=a.parse(t[t.length-1],t.length-1,l);if(!v)return null;if(!l)throw new Error("Can't infer output type");return new oo(l,g,v)}evaluate(t){for(const[a,l]of this.branches)if(a.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[a,l]of this.branches)t(a),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Os{constructor(t,a,l,g){this.type=t,this.input=a,this.beginIndex=l,this.endIndex=g}static parse(t,a){if(t.length<=2||t.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=a.parse(t[1],1,$t),g=a.parse(t[2],2,pt);if(!l||!g)return null;if(!Cc(l.type,[ti($t),zt,$t]))return a.error(`Expected first argument to be of type array or string, but found ${tn(l.type)} instead`);if(t.length===4){const v=a.parse(t[3],3,pt);return v?new Os(l.type,l,g,v):null}return new Os(l.type,l,g)}evaluate(t){const a=this.input.evaluate(t),l=this.beginIndex.evaluate(t);let g;if(this.endIndex&&(g=this.endIndex.evaluate(t)),no(a,["string"]))return[...a].slice(l,g).join("");if(no(a,["array"]))return a.slice(l,g);throw new Cn(`Expected first argument to be of type array or string, but found ${tn(mn(a))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Uc(i,t){const a=i.length-1;let l,g,v=0,x=a,B=0;for(;v<=x;)if(B=Math.floor((v+x)/2),l=i[B],g=i[B+1],l<=t){if(B===a||t<g)return B;v=B+1}else{if(!(l>t))throw new Cn("Input is not a number.");x=B-1}return 0}class Ao{constructor(t,a,l){this.type=t,this.input=a,this.labels=[],this.outputs=[];for(const[g,v]of l)this.labels.push(g),this.outputs.push(v)}static parse(t,a){if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");const l=a.parse(t[1],1,pt);if(!l)return null;const g=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<t.length;x+=2){const B=x===1?-1/0:t[x],F=t[x+1],I=x,L=x+1;if(typeof B!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(g.length&&g[g.length-1][0]>=B)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const P=a.parse(F,L,v);if(!P)return null;v=v||P.type,g.push([B,P])}return new Ao(v,l,g)}evaluate(t){const a=this.labels,l=this.outputs;if(a.length===1)return l[0].evaluate(t);const g=this.input.evaluate(t);if(g<=a[0])return l[0].evaluate(t);const v=a.length;return g>=a[v-1]?l[v-1].evaluate(t):l[Uc(a,g)].evaluate(t)}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Mc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Na,ri,Cl=function(){if(ri)return Na;function i(t,a,l,g){this.cx=3*t,this.bx=3*(l-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(g-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=a,this.p2x=l,this.p2y=g}return ri=1,Na=i,i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,a){if(a===void 0&&(a=1e-6),t<0)return 0;if(t>1)return 1;for(var l=t,g=0;g<8;g++){var v=this.sampleCurveX(l)-t;if(Math.abs(v)<a)return l;var x=this.sampleCurveDerivativeX(l);if(Math.abs(x)<1e-6)break;l-=v/x}var B=0,F=1;for(l=t,g=0;g<20&&(v=this.sampleCurveX(l),!(Math.abs(v-t)<a));g++)t>v?B=l:F=l,l=.5*(F-B)+B;return l},solve:function(t,a){return this.sampleCurveY(this.solveCurveX(t,a))}},Na}(),Zh=Mc(Cl);class Li{constructor(t,a,l,g,v){this.type=t,this.operator=a,this.interpolation=l,this.input=g,this.labels=[],this.outputs=[];for(const[x,B]of v)this.labels.push(x),this.outputs.push(B)}static interpolationFactor(t,a,l,g){let v=0;if(t.name==="exponential")v=ni(a,t.base,l,g);else if(t.name==="linear")v=ni(a,1,l,g);else if(t.name==="cubic-bezier"){const x=t.controlPoints;v=new Zh(x[0],x[1],x[2],x[3]).solve(ni(a,1,l,g))}return v}static parse(t,a){let[l,g,v,...x]=t;if(!Array.isArray(g)||g.length===0)return a.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const I=g[1];if(typeof I!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:I}}else{if(g[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const I=g.slice(1);if(I.length!==4||I.some(L=>typeof L!="number"||L<0||L>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:I}}}if(t.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,pt),!v)return null;const B=[];let F=null;l==="interpolate-hcl"||l==="interpolate-lab"?F=sr:a.expectedType&&a.expectedType.kind!=="value"&&(F=a.expectedType);for(let I=0;I<x.length;I+=2){const L=x[I],P=x[I+1],N=I+3,V=I+4;if(typeof L!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(B.length&&B[B.length-1][0]>=L)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const Z=a.parse(P,V,F);if(!Z)return null;F=F||Z.type,B.push([L,Z])}return Qs(F,pt)||Qs(F,Bn)||Qs(F,sr)||Qs(F,Wn)||Qs(F,Is)||Qs(F,ti(pt))?new Li(F,l,g,v,B):a.error(`Type ${tn(F)} is not interpolatable.`)}evaluate(t){const a=this.labels,l=this.outputs;if(a.length===1)return l[0].evaluate(t);const g=this.input.evaluate(t);if(g<=a[0])return l[0].evaluate(t);const v=a.length;if(g>=a[v-1])return l[v-1].evaluate(t);const x=Uc(a,g),B=Li.interpolationFactor(this.interpolation,g,a[x],a[x+1]),F=l[x].evaluate(t),I=l[x+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return $i(F,I,B);case"color":return Qr.interpolate(F,I,B);case"padding":return ci.interpolate(F,I,B);case"variableAnchorOffsetCollection":return gi.interpolate(F,I,B);case"array":return qo(F,I,B);case"projectionDefinition":return $n.interpolate(F,I,B)}case"interpolate-hcl":return Qr.interpolate(F,I,B,"hcl");case"interpolate-lab":return Qr.interpolate(F,I,B,"lab")}}eachChild(t){t(this.input);for(const a of this.outputs)t(a)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function ni(i,t,a,l){const g=l-a,v=i-a;return g===0?0:t===1?v/g:(Math.pow(t,v)-1)/(Math.pow(t,g)-1)}const fa={color:Qr.interpolate,number:$i,padding:ci.interpolate,variableAnchorOffsetCollection:gi.interpolate,array:qo};class OA{constructor(t,a){this.type=t,this.args=a}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");let l=null;const g=a.expectedType;g&&g.kind!=="value"&&(l=g);const v=[];for(const B of t.slice(1)){const F=a.parse(B,1+v.length,l,void 0,{typeAnnotation:"omit"});if(!F)return null;l=l||F.type,v.push(F)}if(!l)throw new Error("No output type");const x=g&&v.some(B=>Vo(g,B.type));return new OA(x?$t:l,v)}evaluate(t){let a,l=null,g=0;for(const v of this.args)if(g++,l=v.evaluate(t),l&&l instanceof Di&&!l.available&&(a||(a=l.name),l=null,g===this.args.length&&(l=a)),l!==null)break;return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function ku(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function qh(i,t,a,l){return l.compare(t,a)===0}function zs(i,t,a){const l=i!=="=="&&i!=="!=";return class kv{constructor(v,x,B){this.type=Tt,this.lhs=v,this.rhs=x,this.collator=B,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const B=v[0];let F=x.parse(v[1],1,$t);if(!F)return null;if(!ku(B,F.type))return x.concat(1).error(`"${B}" comparisons are not supported for type '${tn(F.type)}'.`);let I=x.parse(v[2],2,$t);if(!I)return null;if(!ku(B,I.type))return x.concat(2).error(`"${B}" comparisons are not supported for type '${tn(I.type)}'.`);if(F.type.kind!==I.type.kind&&F.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${tn(F.type)}' and '${tn(I.type)}'.`);l&&(F.type.kind==="value"&&I.type.kind!=="value"?F=new Gn(I.type,[F]):F.type.kind!=="value"&&I.type.kind==="value"&&(I=new Gn(F.type,[I])));let L=null;if(v.length===4){if(F.type.kind!=="string"&&I.type.kind!=="string"&&F.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(v[3],3,On),!L)return null}return new kv(F,I,L)}evaluate(v){const x=this.lhs.evaluate(v),B=this.rhs.evaluate(v);if(l&&this.hasUntypedArgument){const F=mn(x),I=mn(B);if(F.kind!==I.kind||F.kind!=="string"&&F.kind!=="number")throw new Cn(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${F.kind}, ${I.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const F=mn(x),I=mn(B);if(F.kind!=="string"||I.kind!=="string")return t(v,x,B)}return this.collator?a(v,x,B,this.collator.evaluate(v)):t(v,x,B)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Hu=zs("==",function(i,t,a){return t===a},qh),Xh=zs("!=",function(i,t,a){return t!==a},function(i,t,a,l){return!qh(0,t,a,l)}),Ic=zs("<",function(i,t,a){return t<a},function(i,t,a,l){return l.compare(t,a)<0}),Qc=zs(">",function(i,t,a){return t>a},function(i,t,a,l){return l.compare(t,a)>0}),ja=zs("<=",function(i,t,a){return t<=a},function(i,t,a,l){return l.compare(t,a)<=0}),Yh=zs(">=",function(i,t,a){return t>=a},function(i,t,a,l){return l.compare(t,a)>=0});class ks{constructor(t,a,l){this.type=On,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=a}static parse(t,a){if(t.length!==2)return a.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return a.error("Collator options argument must be an object.");const g=a.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Tt);if(!g)return null;const v=a.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Tt);if(!v)return null;let x=null;return l.locale&&(x=a.parse(l.locale,1,zt),!x)?null:new ks(g,v,x)}evaluate(t){return new vi(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Nu{constructor(t,a,l,g,v){this.type=zt,this.number=t,this.locale=a,this.currency=l,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(t,a){if(t.length!==3)return a.error("Expected two arguments.");const l=a.parse(t[1],1,pt);if(!l)return null;const g=t[2];if(typeof g!="object"||Array.isArray(g))return a.error("NumberFormat options argument must be an object.");let v=null;if(g.locale&&(v=a.parse(g.locale,1,zt),!v))return null;let x=null;if(g.currency&&(x=a.parse(g.currency,1,zt),!x))return null;let B=null;if(g["min-fraction-digits"]&&(B=a.parse(g["min-fraction-digits"],1,pt),!B))return null;let F=null;return g["max-fraction-digits"]&&(F=a.parse(g["max-fraction-digits"],1,pt),!F)?null:new Nu(l,v,x,B,F)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class zA{constructor(t){this.type=Kr,this.sections=t}static parse(t,a){if(t.length<2)return a.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return a.error("First argument must be an image or text section.");const g=[];let v=!1;for(let x=1;x<=t.length-1;++x){const B=t[x];if(v&&typeof B=="object"&&!Array.isArray(B)){v=!1;let F=null;if(B["font-scale"]&&(F=a.parse(B["font-scale"],1,pt),!F))return null;let I=null;if(B["text-font"]&&(I=a.parse(B["text-font"],1,ti(zt)),!I))return null;let L=null;if(B["text-color"]&&(L=a.parse(B["text-color"],1,sr),!L))return null;let P=null;if(B["vertical-align"]){if(typeof B["vertical-align"]=="string"&&!Bl.includes(B["vertical-align"]))return a.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${B["vertical-align"]}' instead.`);if(P=a.parse(B["vertical-align"],1,zt),!P)return null}const N=g[g.length-1];N.scale=F,N.font=I,N.textColor=L,N.verticalAlign=P}else{const F=a.parse(t[x],1,$t);if(!F)return null;const I=F.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,g.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new zA(g)}evaluate(t){return new Qi(this.sections.map(a=>{const l=a.content.evaluate(t);return mn(l)===jo?new Xo("",l,null,null,null,a.verticalAlign?a.verticalAlign.evaluate(t):null):new Xo(so(l),null,a.scale?a.scale.evaluate(t):null,a.font?a.font.evaluate(t).join(","):null,a.textColor?a.textColor.evaluate(t):null,a.verticalAlign?a.verticalAlign.evaluate(t):null)}))}eachChild(t){for(const a of this.sections)t(a.content),a.scale&&t(a.scale),a.font&&t(a.font),a.textColor&&t(a.textColor),a.verticalAlign&&t(a.verticalAlign)}outputDefined(){return!1}}class ju{constructor(t){this.type=jo,this.input=t}static parse(t,a){if(t.length!==2)return a.error("Expected two arguments.");const l=a.parse(t[1],1,zt);return l?new ju(l):a.error("No image name provided.")}evaluate(t){const a=this.input.evaluate(t),l=Di.fromString(a);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(a)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}}class Dc{constructor(t){this.type=pt,this.input=t}static parse(t,a){if(t.length!==2)return a.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=a.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${tn(l.type)} instead.`):new Dc(l):null}evaluate(t){const a=this.input.evaluate(t);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new Cn(`Expected value to be of type string or array, but found ${tn(mn(a))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ls=8192;function md(i,t){const a=(180+i[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,g=Math.pow(2,t.z);return[Math.round(a*g*ls),Math.round(l*g*ls)]}function kA(i,t){const a=Math.pow(2,t.z);return[(g=(i[0]/ls+t.x)/a,360*g-180),(l=(i[1]/ls+t.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,g}function El(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function HA(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function Wh(i,t,a){const l=i[0]-t[0],g=i[1]-t[1],v=i[0]-a[0],x=i[1]-a[1];return l*x-v*g==0&&l*v<=0&&g*x<=0}function Lc(i,t,a,l){return(g=[l[0]-a[0],l[1]-a[1]])[0]*(v=[t[0]-i[0],t[1]-i[1]])[1]-g[1]*v[0]!=0&&!(!Gu(i,t,a,l)||!Gu(a,l,i,t));var g,v}function $h(i,t,a){for(const l of a)for(let g=0;g<l.length-1;++g)if(Lc(i,t,l[g],l[g+1]))return!0;return!1}function NA(i,t,a=!1){let l=!1;for(const B of t)for(let F=0;F<B.length-1;F++){if(Wh(i,B[F],B[F+1]))return a;(v=B[F])[1]>(g=i)[1]!=(x=B[F+1])[1]>g[1]&&g[0]<(x[0]-v[0])*(g[1]-v[1])/(x[1]-v[1])+v[0]&&(l=!l)}var g,v,x;return l}function Vu(i,t){for(const a of t)if(NA(i,a))return!0;return!1}function jA(i,t){for(const a of i)if(!NA(a,t))return!1;for(let a=0;a<i.length-1;++a)if($h(i[a],i[a+1],t))return!1;return!0}function yd(i,t){for(const a of t)if(jA(i,a))return!0;return!1}function Gu(i,t,a,l){const g=l[0]-a[0],v=l[1]-a[1],x=(i[0]-a[0])*v-g*(i[1]-a[1]),B=(t[0]-a[0])*v-g*(t[1]-a[1]);return x>0&&B<0||x<0&&B>0}function Tl(i,t,a){const l=[];for(let g=0;g<i.length;g++){const v=[];for(let x=0;x<i[g].length;x++){const B=md(i[g][x],a);El(t,B),v.push(B)}l.push(v)}return l}function Pc(i,t,a){const l=[];for(let g=0;g<i.length;g++){const v=Tl(i[g],t,a);l.push(v)}return l}function Rc(i,t,a,l){if(i[0]<a[0]||i[0]>a[2]){const g=.5*l;let v=i[0]-a[0]>g?-l:a[0]-i[0]>g?l:0;v===0&&(v=i[0]-a[2]>g?-l:a[2]-i[0]>g?l:0),i[0]+=v}El(t,i)}function Ku(i,t,a,l){const g=Math.pow(2,l.z)*ls,v=[l.x*ls,l.y*ls],x=[];for(const B of i)for(const F of B){const I=[F.x+v[0],F.y+v[1]];Rc(I,t,a,g),x.push(I)}return x}function Wo(i,t,a,l){const g=Math.pow(2,l.z)*ls,v=[l.x*ls,l.y*ls],x=[];for(const F of i){const I=[];for(const L of F){const P=[L.x+v[0],L.y+v[1]];El(t,P),I.push(P)}x.push(I)}if(t[2]-t[0]<=g/2){(B=t)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const F of x)for(const I of F)Rc(I,t,a,g)}var B;return x}class $o{constructor(t,a){this.type=Tt,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ha(t[1])){const l=t[1];if(l.type==="FeatureCollection"){const g=[];for(const v of l.features){const{type:x,coordinates:B}=v.geometry;x==="Polygon"&&g.push(B),x==="MultiPolygon"&&g.push(...B)}if(g.length)return new $o(l,{type:"MultiPolygon",coordinates:g})}else if(l.type==="Feature"){const g=l.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new $o(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new $o(l,l)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,l){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(l.type==="Polygon"){const B=Tl(l.coordinates,v,x),F=Ku(a.geometry(),g,v,x);if(!HA(g,v))return!1;for(const I of F)if(!NA(I,B))return!1}if(l.type==="MultiPolygon"){const B=Pc(l.coordinates,v,x),F=Ku(a.geometry(),g,v,x);if(!HA(g,v))return!1;for(const I of F)if(!Vu(I,B))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,l){const g=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(l.type==="Polygon"){const B=Tl(l.coordinates,v,x),F=Wo(a.geometry(),g,v,x);if(!HA(g,v))return!1;for(const I of F)if(!jA(I,B))return!1}if(l.type==="MultiPolygon"){const B=Pc(l.coordinates,v,x),F=Wo(a.geometry(),g,v,x);if(!HA(g,v))return!1;for(const I of F)if(!yd(I,B))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Oc=class{constructor(i=[],t=(a,l)=>a<l?-1:a>l?1:0){if(this.data=i,this.length=this.data.length,this.compare=t,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:t,compare:a}=this,l=t[i];for(;i>0;){const g=i-1>>1,v=t[g];if(a(l,v)>=0)break;t[i]=v,i=g}t[i]=l}_down(i){const{data:t,compare:a}=this,l=this.length>>1,g=t[i];for(;i<l;){let v=1+(i<<1);const x=v+1;if(x<this.length&&a(t[x],t[v])<0&&(v=x),a(t[v],g)>=0)break;t[i]=t[v],i=v}t[i]=g}};function Jh(i,t,a=0,l=i.length-1,g=ef){for(;l>a;){if(l-a>600){const F=l-a+1,I=t-a+1,L=Math.log(F),P=.5*Math.exp(2*L/3),N=.5*Math.sqrt(L*P*(F-P)/F)*(I-F/2<0?-1:1);Jh(i,t,Math.max(a,Math.floor(t-I*P/F+N)),Math.min(l,Math.floor(t+(F-I)*P/F+N)),g)}const v=i[t];let x=a,B=l;for(VA(i,a,t),g(i[l],v)>0&&VA(i,a,l);x<B;){for(VA(i,x,B),x++,B--;g(i[x],v)<0;)x++;for(;g(i[B],v)>0;)B--}g(i[a],v)===0?VA(i,a,B):(B++,VA(i,B,l)),B<=t&&(a=B+1),t<=B&&(l=B-1)}}function VA(i,t,a){const l=i[t];i[t]=i[a],i[a]=l}function ef(i,t){return i<t?-1:i>t?1:0}function Hs(i,t){if(i.length<=1)return[i];const a=[];let l,g;for(const v of i){const x=_d(v);x!==0&&(v.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(l&&a.push(l),l=[v]):l.push(v))}if(l&&a.push(l),t>1)for(let v=0;v<a.length;v++)a[v].length<=t||(Jh(a[v],t,1,a[v].length-1,GA),a[v]=a[v].slice(0,t));return a}function GA(i,t){return t.area-i.area}function _d(i){let t=0;for(let a,l,g=0,v=i.length,x=v-1;g<v;x=g++)a=i[g],l=i[x],t+=(l.x-a.x)*(a.y+l.y);return t}const Sl=1/298.257223563,zc=Sl*(2-Sl),kc=Math.PI/180;class Fl{constructor(t){const a=6378.137*kc*1e3,l=Math.cos(t*kc),g=1/(1-zc*(1-l*l)),v=Math.sqrt(g);this.kx=a*v*l,this.ky=a*v*g*(1-zc)}distance(t,a){const l=this.wrap(t[0]-a[0])*this.kx,g=(t[1]-a[1])*this.ky;return Math.sqrt(l*l+g*g)}pointOnLine(t,a){let l,g,v,x,B=1/0;for(let F=0;F<t.length-1;F++){let I=t[F][0],L=t[F][1],P=this.wrap(t[F+1][0]-I)*this.kx,N=(t[F+1][1]-L)*this.ky,V=0;P===0&&N===0||(V=(this.wrap(a[0]-I)*this.kx*P+(a[1]-L)*this.ky*N)/(P*P+N*N),V>1?(I=t[F+1][0],L=t[F+1][1]):V>0&&(I+=P/this.kx*V,L+=N/this.ky*V)),P=this.wrap(a[0]-I)*this.kx,N=(a[1]-L)*this.ky;const Z=P*P+N*N;Z<B&&(B=Z,l=I,g=L,v=F,x=V)}return{point:[l,g],index:v,t:Math.max(0,Math.min(1,x))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Hc(i,t){return t[0]-i[0]}function Ul(i){return i[1]-i[0]+1}function Va(i,t){return i[1]>=i[0]&&i[1]<t}function Nc(i,t){if(i[0]>i[1])return[null,null];const a=Ul(i);if(t){if(a===2)return[i,null];const g=Math.floor(a/2);return[[i[0],i[0]+g],[i[0]+g,i[1]]]}if(a===1)return[i,null];const l=Math.floor(a/2)-1;return[[i[0],i[0]+l],[i[0]+l+1,i[1]]]}function Zu(i,t){if(!Va(t,i.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let l=t[0];l<=t[1];++l)El(a,i[l]);return a}function qu(i){const t=[1/0,1/0,-1/0,-1/0];for(const a of i)for(const l of a)El(t,l);return t}function tf(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function kr(i,t,a){if(!tf(i)||!tf(t))return NaN;let l=0,g=0;return i[2]<t[0]&&(l=t[0]-i[2]),i[0]>t[2]&&(l=i[0]-t[2]),i[1]>t[3]&&(g=i[1]-t[3]),i[3]<t[1]&&(g=t[1]-i[3]),a.distance([0,0],[l,g])}function Jo(i,t,a){const l=a.pointOnLine(t,i);return a.distance(i,l.point)}function Hi(i,t,a,l,g){const v=Math.min(Jo(i,[a,l],g),Jo(t,[a,l],g)),x=Math.min(Jo(a,[i,t],g),Jo(l,[i,t],g));return Math.min(v,x)}function Ml(i,t,a,l,g){if(!Va(t,i.length)||!Va(l,a.length))return 1/0;let v=1/0;for(let x=t[0];x<t[1];++x){const B=i[x],F=i[x+1];for(let I=l[0];I<l[1];++I){const L=a[I],P=a[I+1];if(Lc(B,F,L,P))return 0;v=Math.min(v,Hi(B,F,L,P,g))}}return v}function rf(i,t,a,l,g){if(!Va(t,i.length)||!Va(l,a.length))return NaN;let v=1/0;for(let x=t[0];x<=t[1];++x)for(let B=l[0];B<=l[1];++B)if(v=Math.min(v,g.distance(i[x],a[B])),v===0)return v;return v}function nf(i,t,a){if(NA(i,t,!0))return 0;let l=1/0;for(const g of t){const v=g[0],x=g[g.length-1];if(v!==x&&(l=Math.min(l,Jo(i,[x,v],a)),l===0))return l;const B=a.pointOnLine(g,i);if(l=Math.min(l,a.distance(i,B.point)),l===0)return l}return l}function af(i,t,a,l){if(!Va(t,i.length))return NaN;for(let v=t[0];v<=t[1];++v)if(NA(i[v],a,!0))return 0;let g=1/0;for(let v=t[0];v<t[1];++v){const x=i[v],B=i[v+1];for(const F of a)for(let I=0,L=F.length,P=L-1;I<L;P=I++){const N=F[P],V=F[I];if(Lc(x,B,N,V))return 0;g=Math.min(g,Hi(x,B,N,V,l))}}return g}function Xu(i,t){for(const a of i)for(const l of a)if(NA(l,t,!0))return!0;return!1}function Yu(i,t,a,l=1/0){const g=qu(i),v=qu(t);if(l!==1/0&&kr(g,v,a)>=l)return l;if(HA(g,v)){if(Xu(i,t))return 0}else if(Xu(t,i))return 0;let x=1/0;for(const B of i)for(let F=0,I=B.length,L=I-1;F<I;L=F++){const P=B[L],N=B[F];for(const V of t)for(let Z=0,$=V.length,ae=$-1;Z<$;ae=Z++){const ue=V[ae],Be=V[Z];if(Lc(P,N,ue,Be))return 0;x=Math.min(x,Hi(P,N,ue,Be,a))}}return x}function sf(i,t,a,l,g,v){if(!v)return;const x=kr(Zu(l,v),g,a);x<t&&i.push([x,v,[0,0]])}function Ns(i,t,a,l,g,v,x){if(!v||!x)return;const B=kr(Zu(l,v),Zu(g,x),a);B<t&&i.push([B,v,x])}function KA(i,t,a,l,g=1/0){let v=Math.min(l.distance(i[0],a[0][0]),g);if(v===0)return v;const x=new Oc([[0,[0,i.length-1],[0,0]]],Hc),B=qu(a);for(;x.length>0;){const F=x.pop();if(F[0]>=v)continue;const I=F[1],L=t?50:100;if(Ul(I)<=L){if(!Va(I,i.length))return NaN;if(t){const P=af(i,I,a,l);if(isNaN(P)||P===0)return P;v=Math.min(v,P)}else for(let P=I[0];P<=I[1];++P){const N=nf(i[P],a,l);if(v=Math.min(v,N),v===0)return 0}}else{const P=Nc(I,t);sf(x,v,l,i,B,P[0]),sf(x,v,l,i,B,P[1])}}return v}function lo(i,t,a,l,g,v=1/0){let x=Math.min(v,g.distance(i[0],a[0]));if(x===0)return x;const B=new Oc([[0,[0,i.length-1],[0,a.length-1]]],Hc);for(;B.length>0;){const F=B.pop();if(F[0]>=x)continue;const I=F[1],L=F[2],P=t?50:100,N=l?50:100;if(Ul(I)<=P&&Ul(L)<=N){if(!Va(I,i.length)&&Va(L,a.length))return NaN;let V;if(t&&l)V=Ml(i,I,a,L,g),x=Math.min(x,V);else if(t&&!l){const Z=i.slice(I[0],I[1]+1);for(let $=L[0];$<=L[1];++$)if(V=Jo(a[$],Z,g),x=Math.min(x,V),x===0)return x}else if(!t&&l){const Z=a.slice(L[0],L[1]+1);for(let $=I[0];$<=I[1];++$)if(V=Jo(i[$],Z,g),x=Math.min(x,V),x===0)return x}else V=rf(i,I,a,L,g),x=Math.min(x,V)}else{const V=Nc(I,t),Z=Nc(L,l);Ns(B,x,g,i,a,V[0],Z[0]),Ns(B,x,g,i,a,V[0],Z[1]),Ns(B,x,g,i,a,V[1],Z[0]),Ns(B,x,g,i,a,V[1],Z[1])}}return x}function Il(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class co{constructor(t,a){this.type=pt,this.geojson=t,this.geometries=a}static parse(t,a){if(t.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ha(t[1])){const l=t[1];if(l.type==="FeatureCollection")return new co(l,l.features.map(g=>Il(g.geometry)).flat());if(l.type==="Feature")return new co(l,Il(l.geometry));if("type"in l&&"coordinates"in l)return new co(l,Il(l))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(a,l){const g=a.geometry(),v=g.flat().map(F=>kA([F.x,F.y],a.canonical));if(g.length===0)return NaN;const x=new Fl(v[0][1]);let B=1/0;for(const F of l){switch(F.type){case"Point":B=Math.min(B,lo(v,!1,[F.coordinates],!1,x,B));break;case"LineString":B=Math.min(B,lo(v,!1,F.coordinates,!0,x,B));break;case"Polygon":B=Math.min(B,KA(v,!1,F.coordinates,x,B))}if(B===0)return B}return B}(t,this.geometries);if(t.geometryType()==="LineString")return function(a,l){const g=a.geometry(),v=g.flat().map(F=>kA([F.x,F.y],a.canonical));if(g.length===0)return NaN;const x=new Fl(v[0][1]);let B=1/0;for(const F of l){switch(F.type){case"Point":B=Math.min(B,lo(v,!0,[F.coordinates],!1,x,B));break;case"LineString":B=Math.min(B,lo(v,!0,F.coordinates,!0,x,B));break;case"Polygon":B=Math.min(B,KA(v,!0,F.coordinates,x,B))}if(B===0)return B}return B}(t,this.geometries);if(t.geometryType()==="Polygon")return function(a,l){const g=a.geometry();if(g.length===0||g[0].length===0)return NaN;const v=Hs(g,0).map(F=>F.map(I=>I.map(L=>kA([L.x,L.y],a.canonical)))),x=new Fl(v[0][0][0][1]);let B=1/0;for(const F of l)for(const I of v){switch(F.type){case"Point":B=Math.min(B,KA([F.coordinates],!1,I,x,B));break;case"LineString":B=Math.min(B,KA(F.coordinates,!0,I,x,B));break;case"Polygon":B=Math.min(B,Yu(I,F.coordinates,x,B))}if(B===0)return B}return B}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ca={"==":Hu,"!=":Xh,">":Qc,"<":Ic,">=":Yh,"<=":ja,array:Gn,at:ea,boolean:Gn,case:oo,coalesce:OA,collator:ks,format:zA,image:ju,in:RA,"index-of":mi,interpolate:Li,"interpolate-hcl":Li,"interpolate-lab":Li,length:Dc,let:Mr,literal:Ds,match:As,number:Gn,"number-format":Nu,object:Gn,slice:Os,step:Ao,string:Gn,"to-boolean":Ji,"to-color":Ji,"to-number":Ji,"to-string":Ji,var:Rs,within:$o,distance:co};class xi{constructor(t,a,l,g){this.name=t,this.type=a,this._evaluate=l,this.args=g}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,a){const l=t[0],g=xi.definitions[l];if(!g)return a.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,B=x.filter(([I])=>!Array.isArray(I)||I.length===t.length-1);let F=null;for(const[I,L]of B){F=new Ps(a.registry,Ql,a.path,null,a.scope);const P=[];let N=!1;for(let V=1;V<t.length;V++){const Z=t[V],$=Array.isArray(I)?I[V-1]:I.type,ae=F.parse(Z,1+P.length,$);if(!ae){N=!0;break}P.push(ae)}if(!N)if(Array.isArray(I)&&I.length!==P.length)F.error(`Expected ${I.length} arguments, but found ${P.length} instead.`);else{for(let V=0;V<P.length;V++){const Z=Array.isArray(I)?I[V]:I.type,$=P[V];F.concat(V+1).checkSubtype(Z,$.type)}if(F.errors.length===0)return new xi(l,v,L,P)}}if(B.length===1)a.errors.push(...F.errors);else{const I=(B.length?B:x).map(([P])=>{return N=P,Array.isArray(N)?`(${N.map(tn).join(", ")})`:`(${tn(N.type)}...)`;var N}).join(" | "),L=[];for(let P=1;P<t.length;P++){const N=a.parse(t[P],1+L.length);if(!N)return null;L.push(tn(N.type))}a.error(`Expected arguments of type ${I}, but found (${L.join(", ")}) instead.`)}return null}static register(t,a){xi.definitions=a;for(const l in a)t[l]=xi}}function jc(i,[t,a,l,g]){t=t.evaluate(i),a=a.evaluate(i),l=l.evaluate(i);const v=g?g.evaluate(i):1,x=Yo(t,a,l,v);if(x)throw new Cn(x);return new Qr(t/255,a/255,l/255,v,!1)}function Wu(i,t){return i in t}function js(i,t){const a=t[i];return a===void 0?null:a}function uo(i){return{type:i}}function Ql(i){if(i instanceof Rs)return Ql(i.boundExpression);if(i instanceof xi&&i.name==="error"||i instanceof ks||i instanceof $o||i instanceof co)return!1;const t=i instanceof Ji||i instanceof Gn;let a=!0;return i.eachChild(l=>{a=t?a&&Ql(l):a&&l instanceof Ds}),!!a&&Dl(i)&&Vc(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Dl(i){if(i instanceof xi&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof $o||i instanceof co)return!1;let t=!0;return i.eachChild(a=>{t&&!Dl(a)&&(t=!1)}),t}function Ll(i){if(i instanceof xi&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(a=>{t&&!Ll(a)&&(t=!1)}),t}function Vc(i,t){if(i instanceof xi&&t.indexOf(i.name)>=0)return!1;let a=!0;return i.eachChild(l=>{a&&!Vc(l,t)&&(a=!1)}),a}function of(i){return{result:"success",value:i}}function eA(i){return{result:"error",value:i}}function tA(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Gc(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function da(i){return!!i.expression&&i.expression.interpolated}function Pr(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Ni(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function ta(i){return i}function rA(i,t){const a=t.type==="color",l=i.stops&&typeof i.stops[0][0]=="object",g=l||!(l||i.property!==void 0),v=i.type||(da(t)?"exponential":"interval");if(a||t.type==="padding"){const L=a?Qr.parse:ci.parse;(i=qt({},i)).stops&&(i.stops=i.stops.map(P=>[P[0],L(P[1])])),i.default=L(i.default?i.default:t.default)}if(i.colorSpace&&(x=i.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${i.colorSpace}"`);var x;let B,F,I;if(v==="exponential")B=Zc;else if(v==="interval")B=Pl;else if(v==="categorical"){B=Kc,F=Object.create(null);for(const L of i.stops)F[L[0]]=L[1];I=typeof i.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);B=ZA}if(l){const L={},P=[];for(let Z=0;Z<i.stops.length;Z++){const $=i.stops[Z],ae=$[0].zoom;L[ae]===void 0&&(L[ae]={zoom:ae,type:i.type,property:i.property,default:i.default,stops:[]},P.push(ae)),L[ae].stops.push([$[0].value,$[1]])}const N=[];for(const Z of P)N.push([L[Z].zoom,rA(L[Z],t)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:Li.interpolationFactor.bind(void 0,V),zoomStops:N.map(Z=>Z[0]),evaluate:({zoom:Z},$)=>Zc({stops:N,base:i.base},t,Z).evaluate(Z,$)}}if(g){const L=v==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Li.interpolationFactor.bind(void 0,L),zoomStops:i.stops.map(P=>P[0]),evaluate:({zoom:P})=>B(i,t,P,F,I)}}return{kind:"source",evaluate(L,P){const N=P&&P.properties?P.properties[i.property]:void 0;return N===void 0?nA(i.default,t.default):B(i,t,N,F,I)}}}function nA(i,t,a){return i!==void 0?i:t!==void 0?t:a!==void 0?a:void 0}function Kc(i,t,a,l,g){return nA(typeof a===g?l[a]:void 0,i.default,t.default)}function Pl(i,t,a){if(Pr(a)!=="number")return nA(i.default,t.default);const l=i.stops.length;if(l===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[l-1][0])return i.stops[l-1][1];const g=Uc(i.stops.map(v=>v[0]),a);return i.stops[g][1]}function Zc(i,t,a){const l=i.base!==void 0?i.base:1;if(Pr(a)!=="number")return nA(i.default,t.default);const g=i.stops.length;if(g===1||a<=i.stops[0][0])return i.stops[0][1];if(a>=i.stops[g-1][0])return i.stops[g-1][1];const v=Uc(i.stops.map(L=>L[0]),a),x=function(L,P,N,V){const Z=V-N,$=L-N;return Z===0?0:P===1?$/Z:(Math.pow(P,$)-1)/(Math.pow(P,Z)-1)}(a,l,i.stops[v][0],i.stops[v+1][0]),B=i.stops[v][1],F=i.stops[v+1][1],I=fa[t.type]||ta;return typeof B.evaluate=="function"?{evaluate(...L){const P=B.evaluate.apply(void 0,L),N=F.evaluate.apply(void 0,L);if(P!==void 0&&N!==void 0)return I(P,N,x,i.colorSpace)}}:I(B,F,x,i.colorSpace)}function ZA(i,t,a){switch(t.type){case"color":a=Qr.parse(a);break;case"formatted":a=Qi.fromString(a.toString());break;case"resolvedImage":a=Di.fromString(a.toString());break;case"padding":a=ci.parse(a);break;default:Pr(a)===t.type||t.type==="enum"&&t.values[a]||(a=void 0)}return nA(a,i.default,t.default)}xi.register(Ca,{error:[{kind:"error"},[zt],(i,[t])=>{throw new Cn(t.evaluate(i))}],typeof:[zt,[$t],(i,[t])=>tn(mn(t.evaluate(i)))],"to-rgba":[ti(pt,4),[sr],(i,[t])=>{const[a,l,g,v]=t.evaluate(i).rgb;return[255*a,255*l,255*g,v]}],rgb:[sr,[pt,pt,pt],jc],rgba:[sr,[pt,pt,pt,pt],jc],has:{type:Tt,overloads:[[[zt],(i,[t])=>Wu(t.evaluate(i),i.properties())],[[zt,Wi],(i,[t,a])=>Wu(t.evaluate(i),a.evaluate(i))]]},get:{type:$t,overloads:[[[zt],(i,[t])=>js(t.evaluate(i),i.properties())],[[zt,Wi],(i,[t,a])=>js(t.evaluate(i),a.evaluate(i))]]},"feature-state":[$t,[zt],(i,[t])=>js(t.evaluate(i),i.featureState||{})],properties:[Wi,[],i=>i.properties()],"geometry-type":[zt,[],i=>i.geometryType()],id:[$t,[],i=>i.id()],zoom:[pt,[],i=>i.globals.zoom],"heatmap-density":[pt,[],i=>i.globals.heatmapDensity||0],"line-progress":[pt,[],i=>i.globals.lineProgress||0],accumulated:[$t,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[pt,uo(pt),(i,t)=>{let a=0;for(const l of t)a+=l.evaluate(i);return a}],"*":[pt,uo(pt),(i,t)=>{let a=1;for(const l of t)a*=l.evaluate(i);return a}],"-":{type:pt,overloads:[[[pt,pt],(i,[t,a])=>t.evaluate(i)-a.evaluate(i)],[[pt],(i,[t])=>-t.evaluate(i)]]},"/":[pt,[pt,pt],(i,[t,a])=>t.evaluate(i)/a.evaluate(i)],"%":[pt,[pt,pt],(i,[t,a])=>t.evaluate(i)%a.evaluate(i)],ln2:[pt,[],()=>Math.LN2],pi:[pt,[],()=>Math.PI],e:[pt,[],()=>Math.E],"^":[pt,[pt,pt],(i,[t,a])=>Math.pow(t.evaluate(i),a.evaluate(i))],sqrt:[pt,[pt],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[pt,[pt],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[pt,[pt],(i,[t])=>Math.log(t.evaluate(i))],log2:[pt,[pt],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[pt,[pt],(i,[t])=>Math.sin(t.evaluate(i))],cos:[pt,[pt],(i,[t])=>Math.cos(t.evaluate(i))],tan:[pt,[pt],(i,[t])=>Math.tan(t.evaluate(i))],asin:[pt,[pt],(i,[t])=>Math.asin(t.evaluate(i))],acos:[pt,[pt],(i,[t])=>Math.acos(t.evaluate(i))],atan:[pt,[pt],(i,[t])=>Math.atan(t.evaluate(i))],min:[pt,uo(pt),(i,t)=>Math.min(...t.map(a=>a.evaluate(i)))],max:[pt,uo(pt),(i,t)=>Math.max(...t.map(a=>a.evaluate(i)))],abs:[pt,[pt],(i,[t])=>Math.abs(t.evaluate(i))],round:[pt,[pt],(i,[t])=>{const a=t.evaluate(i);return a<0?-Math.round(-a):Math.round(a)}],floor:[pt,[pt],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[pt,[pt],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[Tt,[zt,$t],(i,[t,a])=>i.properties()[t.value]===a.value],"filter-id-==":[Tt,[$t],(i,[t])=>i.id()===t.value],"filter-type-==":[Tt,[zt],(i,[t])=>i.geometryType()===t.value],"filter-<":[Tt,[zt,$t],(i,[t,a])=>{const l=i.properties()[t.value],g=a.value;return typeof l==typeof g&&l<g}],"filter-id-<":[Tt,[$t],(i,[t])=>{const a=i.id(),l=t.value;return typeof a==typeof l&&a<l}],"filter->":[Tt,[zt,$t],(i,[t,a])=>{const l=i.properties()[t.value],g=a.value;return typeof l==typeof g&&l>g}],"filter-id->":[Tt,[$t],(i,[t])=>{const a=i.id(),l=t.value;return typeof a==typeof l&&a>l}],"filter-<=":[Tt,[zt,$t],(i,[t,a])=>{const l=i.properties()[t.value],g=a.value;return typeof l==typeof g&&l<=g}],"filter-id-<=":[Tt,[$t],(i,[t])=>{const a=i.id(),l=t.value;return typeof a==typeof l&&a<=l}],"filter->=":[Tt,[zt,$t],(i,[t,a])=>{const l=i.properties()[t.value],g=a.value;return typeof l==typeof g&&l>=g}],"filter-id->=":[Tt,[$t],(i,[t])=>{const a=i.id(),l=t.value;return typeof a==typeof l&&a>=l}],"filter-has":[Tt,[$t],(i,[t])=>t.value in i.properties()],"filter-has-id":[Tt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Tt,[ti(zt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[Tt,[ti($t)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[Tt,[zt,ti($t)],(i,[t,a])=>a.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[Tt,[zt,ti($t)],(i,[t,a])=>function(l,g,v,x){for(;v<=x;){const B=v+x>>1;if(g[B]===l)return!0;g[B]>l?x=B-1:v=B+1}return!1}(i.properties()[t.value],a.value,0,a.value.length-1)],all:{type:Tt,overloads:[[[Tt,Tt],(i,[t,a])=>t.evaluate(i)&&a.evaluate(i)],[uo(Tt),(i,t)=>{for(const a of t)if(!a.evaluate(i))return!1;return!0}]]},any:{type:Tt,overloads:[[[Tt,Tt],(i,[t,a])=>t.evaluate(i)||a.evaluate(i)],[uo(Tt),(i,t)=>{for(const a of t)if(a.evaluate(i))return!0;return!1}]]},"!":[Tt,[Tt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[Tt,[zt],(i,[t])=>{const a=i.globals&&i.globals.isSupportedScript;return!a||a(t.evaluate(i))}],upcase:[zt,[zt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[zt,[zt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[zt,uo($t),(i,t)=>t.map(a=>so(a.evaluate(i))).join("")],"resolved-locale":[zt,[On],(i,[t])=>t.evaluate(i).resolvedLocale()]});class iA{constructor(t,a){var l;this.expression=t,this._warningHistory={},this._evaluator=new mr,this._defaultValue=a?(l=a).type==="color"&&Ni(l.default)?new Qr(0,0,0,0):l.type==="color"?Qr.parse(l.default)||null:l.type==="padding"?ci.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?gi.parse(l.default)||null:l.type==="projectionDefinition"?$n.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(t,a,l,g,v,x){return this._evaluator.globals=t,this._evaluator.feature=a,this._evaluator.featureState=l,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(t,a,l,g,v,x){this._evaluator.globals=t,this._evaluator.feature=a||null,this._evaluator.featureState=l||null,this._evaluator.canonical=g,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new Cn(`Expected value to be one of ${Object.keys(this._enumValues).map(F=>JSON.stringify(F)).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function ho(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Ca}function Vs(i,t){const a=new Ps(Ca,Ql,[],t?function(g){const v={color:sr,string:zt,number:pt,enum:zt,boolean:Tt,formatted:Kr,padding:Wn,projectionDefinition:Bn,resolvedImage:jo,variableAnchorOffsetCollection:Is};return g.type==="array"?ti(v[g.value]||$t,g.length):v[g.type]}(t):void 0),l=a.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?of(new iA(l,t)):eA(a.errors)}class $u{constructor(t,a){this.kind=t,this._styleExpression=a,this.isStateDependent=t!=="constant"&&!Ll(a.expression)}evaluateWithoutErrorHandling(t,a,l,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(t,a,l,g,v,x)}evaluate(t,a,l,g,v,x){return this._styleExpression.evaluate(t,a,l,g,v,x)}}class ji{constructor(t,a,l,g){this.kind=t,this.zoomStops=l,this._styleExpression=a,this.isStateDependent=t!=="camera"&&!Ll(a.expression),this.interpolationType=g}evaluateWithoutErrorHandling(t,a,l,g,v,x){return this._styleExpression.evaluateWithoutErrorHandling(t,a,l,g,v,x)}evaluate(t,a,l,g,v,x){return this._styleExpression.evaluate(t,a,l,g,v,x)}interpolationFactor(t,a,l){return this.interpolationType?Li.interpolationFactor(this.interpolationType,t,a,l):0}}function qc(i,t){const a=Vs(i,t);if(a.result==="error")return a;const l=a.value.expression,g=Dl(l);if(!g&&!tA(t))return eA([new Ot("","data expressions not supported")]);const v=Vc(l,["zoom"]);if(!v&&!Gc(t))return eA([new Ot("","zoom expressions not supported")]);const x=qA(l);return x||v?x instanceof Ot?eA([x]):x instanceof Li&&!da(t)?eA([new Ot("",'"interpolate" expressions cannot be used with this property')]):of(x?new ji(g?"camera":"composite",a.value,x.labels,x instanceof Li?x.interpolation:void 0):new $u(g?"constant":"source",a.value)):eA([new Ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ea{constructor(t,a){this._parameters=t,this._specification=a,qt(this,rA(this._parameters,this._specification))}static deserialize(t){return new Ea(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function qA(i){let t=null;if(i instanceof Mr)t=qA(i.result);else if(i instanceof OA){for(const a of i.args)if(t=qA(a),t)break}else(i instanceof Ao||i instanceof Li)&&i.input instanceof xi&&i.input.name==="zoom"&&(t=i);return t instanceof Ot||i.eachChild(a=>{const l=qA(a);l instanceof Ot?t=l:!t&&l?t=new Ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new Ot("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function aA(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!aA(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const sA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Rl(i){if(i==null)return{filter:()=>!0,needGeometry:!1};aA(i)||(i=cs(i));const t=Vs(i,sA);if(t.result==="error")throw new Error(t.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,l,g)=>t.value.evaluate(a,l,{},g),needGeometry:fo(i)}}function Xc(i,t){return i<t?-1:i>t?1:0}function fo(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(fo(i[t]))return!0;return!1}function cs(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?oA(i[1],i[2],"=="):t==="!="?wi(oA(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?oA(i[1],i[2],t):t==="any"?(a=i.slice(1),["any"].concat(a.map(cs))):t==="all"?["all"].concat(i.slice(1).map(cs)):t==="none"?["all"].concat(i.slice(1).map(cs).map(wi)):t==="in"?AA(i[1],i.slice(2)):t==="!in"?wi(AA(i[1],i.slice(2))):t==="has"?Vi(i[1]):t!=="!has"||wi(Vi(i[1]));var a}function oA(i,t,a){switch(i){case"$type":return[`filter-type-${a}`,t];case"$id":return[`filter-id-${a}`,t];default:return[`filter-${a}`,i,t]}}function AA(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(a=>typeof a!=typeof t[0])?["filter-in-large",i,["literal",t.sort(Xc)]]:["filter-in-small",i,["literal",t]]}}function Vi(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function wi(i){return["!",i]}function Ta(i){const t=typeof i;if(t==="number"||t==="boolean"||t==="string"||i==null)return JSON.stringify(i);if(Array.isArray(i)){let g="[";for(const v of i)g+=`${Ta(v)},`;return`${g}]`}const a=Object.keys(i).sort();let l="{";for(let g=0;g<a.length;g++)l+=`${JSON.stringify(a[g])}:${Ta(i[a[g]])},`;return`${l}}`}function Gs(i){let t="";for(const a of pe)t+=`/${Ta(i[a])}`;return t}function us(i){const t=i.value;return t?[new qe(i.key,t,"constants have been deprecated as of v8")]:[]}function sn(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function po(i){if(Array.isArray(i))return i.map(po);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const a in i)t[a]=po(i[a]);return t}return sn(i)}function ra(i){const t=i.key,a=i.value,l=i.valueSpec||{},g=i.objectElementValidators||{},v=i.style,x=i.styleSpec,B=i.validateSpec;let F=[];const I=Pr(a);if(I!=="object")return[new qe(t,a,`object expected, ${I} found`)];for(const L in a){const P=L.split(".")[0],N=l[P]||l["*"];let V;if(g[P])V=g[P];else if(l[P])V=B;else if(g["*"])V=g["*"];else{if(!l["*"]){F.push(new qe(t,a[L],`unknown property "${L}"`));continue}V=B}F=F.concat(V({key:(t&&`${t}.`)+L,value:a[L],valueSpec:N,style:v,styleSpec:x,object:a,objectKey:L,validateSpec:B},a))}for(const L in l)g[L]||l[L].required&&l[L].default===void 0&&a[L]===void 0&&F.push(new qe(t,a,`missing required property "${L}"`));return F}function Ol(i){const t=i.value,a=i.valueSpec,l=i.style,g=i.styleSpec,v=i.key,x=i.arrayElementValidator||i.validateSpec;if(Pr(t)!=="array")return[new qe(v,t,`array expected, ${Pr(t)} found`)];if(a.length&&t.length!==a.length)return[new qe(v,t,`array length ${a.length} expected, length ${t.length} found`)];if(a["min-length"]&&t.length<a["min-length"])return[new qe(v,t,`array length at least ${a["min-length"]} expected, length ${t.length} found`)];let B={type:a.value,values:a.values};g.$version<7&&(B.function=a.function),Pr(a.value)==="object"&&(B=a.value);let F=[];for(let I=0;I<t.length;I++)F=F.concat(x({array:t,arrayIndex:I,value:t[I],valueSpec:B,validateSpec:i.validateSpec,style:l,styleSpec:g,key:`${v}[${I}]`}));return F}function yi(i){const t=i.key,a=i.value,l=i.valueSpec;let g=Pr(a);return g==="number"&&a!=a&&(g="NaN"),g!=="number"?[new qe(t,a,`number expected, ${g} found`)]:"minimum"in l&&a<l.minimum?[new qe(t,a,`${a} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&a>l.maximum?[new qe(t,a,`${a} is greater than the maximum value ${l.maximum}`)]:[]}function Mn(i){const t=i.valueSpec,a=sn(i.value.type);let l,g,v,x={};const B=a!=="categorical"&&i.value.property===void 0,F=!B,I=Pr(i.value.stops)==="array"&&Pr(i.value.stops[0])==="array"&&Pr(i.value.stops[0][0])==="object",L=ra({key:i.key,value:i.value,valueSpec:i.styleSpec.function,validateSpec:i.validateSpec,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(V){if(a==="identity")return[new qe(V.key,V.value,'identity function may not have a "stops" property')];let Z=[];const $=V.value;return Z=Z.concat(Ol({key:V.key,value:$,valueSpec:V.valueSpec,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:P})),Pr($)==="array"&&$.length===0&&Z.push(new qe(V.key,$,"array must have at least one stop")),Z},default:function(V){return V.validateSpec({key:V.key,value:V.value,valueSpec:t,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec})}}});return a==="identity"&&B&&L.push(new qe(i.key,i.value,'missing required property "property"')),a==="identity"||i.value.stops||L.push(new qe(i.key,i.value,'missing required property "stops"')),a==="exponential"&&i.valueSpec.expression&&!da(i.valueSpec)&&L.push(new qe(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(F&&!tA(i.valueSpec)?L.push(new qe(i.key,i.value,"property functions not supported")):B&&!Gc(i.valueSpec)&&L.push(new qe(i.key,i.value,"zoom functions not supported"))),a!=="categorical"&&!I||i.value.property!==void 0||L.push(new qe(i.key,i.value,'"property" property is required')),L;function P(V){let Z=[];const $=V.value,ae=V.key;if(Pr($)!=="array")return[new qe(ae,$,`array expected, ${Pr($)} found`)];if($.length!==2)return[new qe(ae,$,`array length 2 expected, length ${$.length} found`)];if(I){if(Pr($[0])!=="object")return[new qe(ae,$,`object expected, ${Pr($[0])} found`)];if($[0].zoom===void 0)return[new qe(ae,$,"object stop key must have zoom")];if($[0].value===void 0)return[new qe(ae,$,"object stop key must have value")];if(v&&v>sn($[0].zoom))return[new qe(ae,$[0].zoom,"stop zoom values must appear in ascending order")];sn($[0].zoom)!==v&&(v=sn($[0].zoom),g=void 0,x={}),Z=Z.concat(ra({key:`${ae}[0]`,value:$[0],valueSpec:{zoom:{}},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:yi,value:N}}))}else Z=Z.concat(N({key:`${ae}[0]`,value:$[0],validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec},$));return ho(po($[1]))?Z.concat([new qe(`${ae}[1]`,$[1],"expressions are not allowed in function stops.")]):Z.concat(V.validateSpec({key:`${ae}[1]`,value:$[1],valueSpec:t,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec}))}function N(V,Z){const $=Pr(V.value),ae=sn(V.value),ue=V.value!==null?V.value:Z;if(l){if($!==l)return[new qe(V.key,ue,`${$} stop domain type must match previous stop domain type ${l}`)]}else l=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new qe(V.key,ue,"stop domain value must be a number, string, or boolean")];if($!=="number"&&a!=="categorical"){let Be=`number expected, ${$} found`;return tA(t)&&a===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(V.key,ue,Be)]}return a!=="categorical"||$!=="number"||isFinite(ae)&&Math.floor(ae)===ae?a!=="categorical"&&$==="number"&&g!==void 0&&ae<g?[new qe(V.key,ue,"stop domain values must appear in ascending order")]:(g=ae,a==="categorical"&&ae in x?[new qe(V.key,ue,"stop domain values must be unique")]:(x[ae]=!0,[])):[new qe(V.key,ue,`integer expected, found ${ae}`)]}}function Fr(i){const t=(i.expressionContext==="property"?qc:Vs)(po(i.value),i.valueSpec);if(t.result==="error")return t.value.map(l=>new qe(`${i.key}${l.key}`,i.value,l.message));const a=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!a.outputDefined())return[new qe(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!Ll(a))return[new qe(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!Ll(a))return[new qe(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!Vc(a,["zoom","feature-state"]))return[new qe(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Dl(a))return[new qe(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ga(i){const t=i.key,a=i.value,l=i.valueSpec,g=[];return Array.isArray(l.values)?l.values.indexOf(sn(a))===-1&&g.push(new qe(t,a,`expected one of [${l.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(l.values).indexOf(sn(a))===-1&&g.push(new qe(t,a,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(a)} found`)),g}function pa(i){return aA(po(i.value))?Fr(qt({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zl(i)}function zl(i){const t=i.value,a=i.key;if(Pr(t)!=="array")return[new qe(a,t,`array expected, ${Pr(t)} found`)];const l=i.styleSpec;let g,v=[];if(t.length<1)return[new qe(a,t,"filter array must have at least 1 element")];switch(v=v.concat(Ga({key:`${a}[0]`,value:t[0],valueSpec:l.filter_operator,style:i.style,styleSpec:i.styleSpec})),sn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&sn(t[1])==="$type"&&v.push(new qe(a,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new qe(a,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(g=Pr(t[1]),g!=="string"&&v.push(new qe(`${a}[1]`,t[1],`string expected, ${g} found`)));for(let x=2;x<t.length;x++)g=Pr(t[x]),sn(t[1])==="$type"?v=v.concat(Ga({key:`${a}[${x}]`,value:t[x],valueSpec:l.geometry_type,style:i.style,styleSpec:i.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&v.push(new qe(`${a}[${x}]`,t[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<t.length;x++)v=v.concat(zl({key:`${a}[${x}]`,value:t[x],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":g=Pr(t[1]),t.length!==2?v.push(new qe(a,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="string"&&v.push(new qe(`${a}[1]`,t[1],`string expected, ${g} found`))}return v}function go(i,t){const a=i.key,l=i.validateSpec,g=i.style,v=i.styleSpec,x=i.value,B=i.objectKey,F=v[`${t}_${i.layerType}`];if(!F)return[];const I=B.match(/^(.*)-transition$/);if(t==="paint"&&I&&F[I[1]]&&F[I[1]].transition)return l({key:a,value:x,valueSpec:v.transition,style:g,styleSpec:v});const L=i.valueSpec||F[B];if(!L)return[new qe(a,x,`unknown property "${B}"`)];let P;if(Pr(x)==="string"&&tA(L)&&!L.tokens&&(P=/^{([^}]+)}$/.exec(x)))return[new qe(a,x,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const N=[];return i.layerType==="symbol"&&(B==="text-field"&&g&&!g.glyphs&&N.push(new qe(a,x,'use of "text-field" requires a style "glyphs" property')),B==="text-font"&&Ni(po(x))&&sn(x.type)==="identity"&&N.push(new qe(a,x,'"text-font" does not support identity functions'))),N.concat(l({key:i.key,value:x,valueSpec:L,style:g,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:B}))}function Yc(i){return go(i,"paint")}function Wc(i){return go(i,"layout")}function hs(i){let t=[];const a=i.value,l=i.key,g=i.style,v=i.styleSpec;a.type||a.ref||t.push(new qe(l,a,'either "type" or "ref" is required'));let x=sn(a.type);const B=sn(a.ref);if(a.id){const F=sn(a.id);for(let I=0;I<i.arrayIndex;I++){const L=g.layers[I];sn(L.id)===F&&t.push(new qe(l,a.id,`duplicate layer id "${a.id}", previously used at line ${L.id.__line__}`))}}if("ref"in a){let F;["type","source","source-layer","filter","layout"].forEach(I=>{I in a&&t.push(new qe(l,a[I],`"${I}" is prohibited for ref layers`))}),g.layers.forEach(I=>{sn(I.id)===B&&(F=I)}),F?F.ref?t.push(new qe(l,a.ref,"ref cannot reference another ref layer")):x=sn(F.type):t.push(new qe(l,a.ref,`ref layer "${B}" not found`))}else if(x!=="background")if(a.source){const F=g.sources&&g.sources[a.source],I=F&&sn(F.type);F?I==="vector"&&x==="raster"?t.push(new qe(l,a.source,`layer "${a.id}" requires a raster source`)):I!=="raster-dem"&&x==="hillshade"?t.push(new qe(l,a.source,`layer "${a.id}" requires a raster-dem source`)):I==="raster"&&x!=="raster"?t.push(new qe(l,a.source,`layer "${a.id}" requires a vector source`)):I!=="vector"||a["source-layer"]?I==="raster-dem"&&x!=="hillshade"?t.push(new qe(l,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||I==="geojson"&&F.lineMetrics||t.push(new qe(l,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new qe(l,a,`layer "${a.id}" must specify a "source-layer"`)):t.push(new qe(l,a.source,`source "${a.source}" not found`))}else t.push(new qe(l,a,'missing required property "source"'));return t=t.concat(ra({key:l,value:a,valueSpec:v.layer,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,objectElementValidators:{"*":()=>[],type:()=>i.validateSpec({key:`${l}.type`,value:a.type,valueSpec:v.layer.type,style:i.style,styleSpec:i.styleSpec,validateSpec:i.validateSpec,object:a,objectKey:"type"}),filter:pa,layout:F=>ra({layer:a,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":I=>Wc(qt({layerType:x},I))}}),paint:F=>ra({layer:a,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":I=>Yc(qt({layerType:x},I))}})}})),t}function Ka(i){const t=i.value,a=i.key,l=Pr(t);return l!=="string"?[new qe(a,t,`string expected, ${l} found`)]:[]}const Ju={promoteId:function({key:i,value:t}){if(Pr(t)==="string")return Ka({key:i,value:t});{const a=[];for(const l in t)a.push(...Ka({key:`${i}.${l}`,value:t[l]}));return a}}};function XA(i){const t=i.value,a=i.key,l=i.styleSpec,g=i.style,v=i.validateSpec;if(!t.type)return[new qe(a,t,'"type" is required')];const x=sn(t.type);let B;switch(x){case"vector":case"raster":return B=ra({key:a,value:t,valueSpec:l[`source_${x.replace("-","_")}`],style:i.style,styleSpec:l,objectElementValidators:Ju,validateSpec:v}),B;case"raster-dem":return B=function(F){var I;const L=(I=F.sourceName)!==null&&I!==void 0?I:"",P=F.value,N=F.styleSpec,V=N.source_raster_dem,Z=F.style;let $=[];const ae=Pr(P);if(P===void 0)return $;if(ae!=="object")return $.push(new qe("source_raster_dem",P,`object expected, ${ae} found`)),$;const ue=sn(P.encoding)==="custom",Be=["redFactor","greenFactor","blueFactor","baseShift"],de=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const j in P)!ue&&Be.includes(j)?$.push(new qe(j,P[j],`In "${L}": "${j}" is only valid when "encoding" is set to "custom". ${de} encoding found`)):V[j]?$=$.concat(F.validateSpec({key:j,value:P[j],valueSpec:V[j],validateSpec:F.validateSpec,style:Z,styleSpec:N})):$.push(new qe(j,P[j],`unknown property "${j}"`));return $}({sourceName:a,value:t,style:i.style,styleSpec:l,validateSpec:v}),B;case"geojson":if(B=ra({key:a,value:t,valueSpec:l.source_geojson,style:g,styleSpec:l,validateSpec:v,objectElementValidators:Ju}),t.cluster)for(const F in t.clusterProperties){const[I,L]=t.clusterProperties[F],P=typeof I=="string"?[I,["accumulated"],["get",F]]:I;B.push(...Fr({key:`${a}.${F}.map`,value:L,expressionContext:"cluster-map"})),B.push(...Fr({key:`${a}.${F}.reduce`,value:P,expressionContext:"cluster-reduce"}))}return B;case"video":return ra({key:a,value:t,valueSpec:l.source_video,style:g,validateSpec:v,styleSpec:l});case"image":return ra({key:a,value:t,valueSpec:l.source_image,style:g,validateSpec:v,styleSpec:l});case"canvas":return[new qe(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ga({key:`${a}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function $c(i){const t=i.value,a=i.styleSpec,l=a.light,g=i.style;let v=[];const x=Pr(t);if(t===void 0)return v;if(x!=="object")return v=v.concat([new qe("light",t,`object expected, ${x} found`)]),v;for(const B in t){const F=B.match(/^(.*)-transition$/);v=v.concat(F&&l[F[1]]&&l[F[1]].transition?i.validateSpec({key:B,value:t[B],valueSpec:a.transition,validateSpec:i.validateSpec,style:g,styleSpec:a}):l[B]?i.validateSpec({key:B,value:t[B],valueSpec:l[B],validateSpec:i.validateSpec,style:g,styleSpec:a}):[new qe(B,t[B],`unknown property "${B}"`)])}return v}function mo(i){const t=i.value,a=i.styleSpec,l=a.sky,g=i.style,v=Pr(t);if(t===void 0)return[];if(v!=="object")return[new qe("sky",t,`object expected, ${v} found`)];let x=[];for(const B in t)x=x.concat(l[B]?i.validateSpec({key:B,value:t[B],valueSpec:l[B],style:g,styleSpec:a}):[new qe(B,t[B],`unknown property "${B}"`)]);return x}function fs(i){const t=i.value,a=i.styleSpec,l=a.terrain,g=i.style;let v=[];const x=Pr(t);if(t===void 0)return v;if(x!=="object")return v=v.concat([new qe("terrain",t,`object expected, ${x} found`)]),v;for(const B in t)v=v.concat(l[B]?i.validateSpec({key:B,value:t[B],valueSpec:l[B],validateSpec:i.validateSpec,style:g,styleSpec:a}):[new qe(B,t[B],`unknown property "${B}"`)]);return v}function ga(i){let t=[];const a=i.value,l=i.key;if(Array.isArray(a)){const g=[],v=[];for(const x in a)a[x].id&&g.includes(a[x].id)&&t.push(new qe(l,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),g.push(a[x].id),a[x].url&&v.includes(a[x].url)&&t.push(new qe(l,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),t=t.concat(ra({key:`${l}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:i.validateSpec}));return t}return Ka({key:l,value:a})}const na={"*":()=>[],array:Ol,boolean:function(i){const t=i.value,a=i.key,l=Pr(t);return l!=="boolean"?[new qe(a,t,`boolean expected, ${l} found`)]:[]},number:yi,color:function(i){const t=i.key,a=i.value,l=Pr(a);return l!=="string"?[new qe(t,a,`color expected, ${l} found`)]:Qr.parse(String(a))?[]:[new qe(t,a,`color expected, "${a}" found`)]},constants:us,enum:Ga,filter:pa,function:Mn,layer:hs,object:ra,source:XA,light:$c,sky:mo,terrain:fs,projection:function(i){const t=i.value,a=i.styleSpec,l=a.projection,g=i.style,v=Pr(t);if(t===void 0)return[];if(v!=="object")return[new qe("projection",t,`object expected, ${v} found`)];let x=[];for(const B in t)x=x.concat(l[B]?i.validateSpec({key:B,value:t[B],valueSpec:l[B],style:g,styleSpec:a}):[new qe(B,t[B],`unknown property "${B}"`)]);return x},projectionDefinition:function(i){const t=i.key;let a=i.value;a=a instanceof String?a.valueOf():a;const l=Pr(a);return l!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(a)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(a)?["array","string"].includes(l)?[]:[new qe(t,a,`projection expected, invalid type "${l}" found`)]:[new qe(t,a,`projection expected, invalid array ${JSON.stringify(a)} found`)]},string:Ka,formatted:function(i){return Ka(i).length===0?[]:Fr(i)},resolvedImage:function(i){return Ka(i).length===0?[]:Fr(i)},padding:function(i){const t=i.key,a=i.value;if(Pr(a)==="array"){if(a.length<1||a.length>4)return[new qe(t,a,`padding requires 1 to 4 values; ${a.length} values found`)];const l={type:"number"};let g=[];for(let v=0;v<a.length;v++)g=g.concat(i.validateSpec({key:`${t}[${v}]`,value:a[v],validateSpec:i.validateSpec,valueSpec:l}));return g}return yi({key:t,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(i){const t=i.key,a=i.value,l=Pr(a),g=i.styleSpec;if(l!=="array"||a.length<1||a.length%2!=0)return[new qe(t,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(Ga({key:`${t}[${x}]`,value:a[x],valueSpec:g.layout_symbol["text-anchor"]})),v=v.concat(Ol({key:`${t}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:i.validateSpec,style:i.style,styleSpec:g}));return v},sprite:ga};function _i(i){const t=i.value,a=i.valueSpec,l=i.styleSpec;return i.validateSpec=_i,a.expression&&Ni(sn(t))?Mn(i):a.expression&&ho(po(t))?Fr(i):a.type&&na[a.type]?na[a.type](i):ra(qt({},i,{valueSpec:a.type?l[a.type]:a}))}function yo(i){const t=i.value,a=i.key,l=Ka(i);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new qe(a,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new qe(a,t,'"glyphs" url must include a "{range}" token'))),l}function Pi(i,t=K){let a=[];return a=a.concat(_i({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,validateSpec:_i,objectElementValidators:{glyphs:yo,"*":()=>[]}})),i.constants&&(a=a.concat(us({key:"constants",value:i.constants}))),_o(a)}function ma(i){return function(t){return i({...t,validateSpec:_i})}}function _o(i){return[].concat(i).sort((t,a)=>t.line-a.line)}function rn(i){return function(...t){return _o(i.apply(this,t))}}Pi.source=rn(ma(XA)),Pi.sprite=rn(ma(ga)),Pi.glyphs=rn(ma(yo)),Pi.light=rn(ma($c)),Pi.sky=rn(ma(mo)),Pi.terrain=rn(ma(fs)),Pi.layer=rn(ma(hs)),Pi.filter=rn(ma(pa)),Pi.paintProperty=rn(ma(Yc)),Pi.layoutProperty=rn(ma(Wc));const ds=Pi,Jc=ds.light,vd=ds.sky,eh=ds.paintProperty,xd=ds.layoutProperty;function In(i,t){let a=!1;if(t&&t.length)for(const l of t)i.fire(new J(new Error(l.message))),a=!0;return a}class lA{constructor(t,a,l){const g=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const x=new Int32Array(this.arrayBuffer);t=x[0],this.d=(a=x[1])+2*(l=x[2]);for(let F=0;F<this.d*this.d;F++){const I=x[3+F],L=x[3+F+1];g.push(I===L?null:x.subarray(I,L))}const B=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],B),this.bboxes=x.subarray(B),this.insert=this._insertReadonly}else{this.d=a+2*l;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=t,this.padding=l,this.scale=a/t,this.uid=0;const v=l/a*t;this.min=-v,this.max=t+v}insert(t,a,l,g,v){this._forEachCell(a,l,g,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(a),this.bboxes.push(l),this.bboxes.push(g),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,a,l,g,v,x){this.cells[v].push(x)}query(t,a,l,g,v){const x=this.min,B=this.max;if(t<=x&&a<=x&&B<=l&&B<=g&&!v)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(t,a,l,g,this._queryCell,F,{},v),F}}_queryCell(t,a,l,g,v,x,B,F){const I=this.cells[v];if(I!==null){const L=this.keys,P=this.bboxes;for(let N=0;N<I.length;N++){const V=I[N];if(B[V]===void 0){const Z=4*V;(F?F(P[Z+0],P[Z+1],P[Z+2],P[Z+3]):t<=P[Z+2]&&a<=P[Z+3]&&l>=P[Z+0]&&g>=P[Z+1])?(B[V]=!0,x.push(L[V])):B[V]=!1}}}}_forEachCell(t,a,l,g,v,x,B,F){const I=this._convertToCellCoord(t),L=this._convertToCellCoord(a),P=this._convertToCellCoord(l),N=this._convertToCellCoord(g);for(let V=I;V<=P;V++)for(let Z=L;Z<=N;Z++){const $=this.d*Z+V;if((!F||F(this._convertFromCellCoord(V),this._convertFromCellCoord(Z),this._convertFromCellCoord(V+1),this._convertFromCellCoord(Z+1)))&&v.call(this,t,a,l,g,$,x,B,F))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,a=3+this.cells.length+1+1;let l=0;for(let x=0;x<this.cells.length;x++)l+=this.cells[x].length;const g=new Int32Array(a+l+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let v=a;for(let x=0;x<t.length;x++){const B=t[x];g[3+x]=v,g.set(B,v),v+=B.length}return g[3+t.length]=v,g.set(this.keys,v),v+=this.keys.length,g[3+t.length+1]=v,g.set(this.bboxes,v),v+=this.bboxes.length,g.buffer}static serialize(t,a){const l=t.toArrayBuffer();return a&&a.push(l),{buffer:l}}static deserialize(t){return new lA(t.buffer)}}const bi={};function It(i,t,a={}){if(bi[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),bi[i]={klass:t,omit:a.omit||[],shallow:a.shallow||[]}}It("Object",Object),It("TransferableGridIndex",lA),It("Color",Qr),It("Error",Error),It("AJAXError",Un),It("ResolvedImage",Di),It("StylePropertyFunction",Ea),It("StyleExpression",iA,{omit:["_evaluator"]}),It("ZoomDependentExpression",ji),It("ZoomConstantExpression",$u),It("CompoundExpression",xi,{omit:["_evaluate"]});for(const i in Ca)Ca[i]._classRegistryKey||It(`Expression_${i}`,Ca[i]);function eu(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Za(i){return i.$name||i.constructor._classRegistryKey}function cA(i){return!function(t){if(t===null||typeof t!="object")return!1;const a=Za(t);return!(!a||a==="Object")}(i)&&(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||i instanceof Error||eu(i)||xr(i)||ArrayBuffer.isView(i)||i instanceof ImageData)}function uA(i,t){if(cA(i))return(eu(i)||xr(i))&&t&&t.push(i),ArrayBuffer.isView(i)&&t&&t.push(i.buffer),i instanceof ImageData&&t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const v=[];for(const x of i)v.push(uA(x,t));return v}if(typeof i!="object")throw new Error("can't serialize object of type "+typeof i);const a=Za(i);if(!a)throw new Error(`can't serialize object of unregistered class ${i.constructor.name}`);if(!bi[a])throw new Error(`${a} is not registered.`);const{klass:l}=bi[a],g=l.serialize?l.serialize(i,t):{};if(l.serialize){if(t&&g===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in i){if(!i.hasOwnProperty(v)||bi[a].omit.indexOf(v)>=0)continue;const x=i[v];g[v]=bi[a].shallow.indexOf(v)>=0?x:uA(x,t)}i instanceof Error&&(g.message=i.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(g.$name=a),g}function Ks(i){if(cA(i))return i;if(Array.isArray(i))return i.map(Ks);if(typeof i!="object")throw new Error("can't deserialize object of type "+typeof i);const t=Za(i)||"Object";if(!bi[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:a}=bi[t];if(!a)throw new Error(`can't deserialize unregistered class ${t}`);if(a.deserialize)return a.deserialize(i);const l=Object.create(a.prototype);for(const g of Object.keys(i)){if(g==="$name")continue;const v=i[g];l[g]=bi[t].shallow.indexOf(g)>=0?v:Ks(v)}return l}class th{constructor(){this.first=!0}update(t,a){const l=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=a),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=l,!0))}}const Er={"Latin-1 Supplement":i=>i>=128&&i<=255,"Hangul Jamo":i=>i>=4352&&i<=4607,Khmer:i=>i>=6016&&i<=6143,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Kanbun:i=>i>=12688&&i<=12703,"CJK Strokes":i=>i>=12736&&i<=12783,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Hangul Syllables":i=>i>=44032&&i<=55215,"Private Use Area":i=>i>=57344&&i<=63743,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function ps(i){for(const t of i)if(YA(t.charCodeAt(0)))return!0;return!1}function tu(i){for(const t of i)if(!kl(t.charCodeAt(0)))return!1;return!0}function vo(i){const t=i.map(a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}}).filter(a=>a);return new RegExp(t.join("|"),"u")}const rh=vo(["Arab","Dupl","Mong","Ougr","Syrc"]);function kl(i){return!rh.test(String.fromCodePoint(i))}const ru=vo(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function YA(i){return!(i!==746&&i!==747&&(i<4352||!(Er["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Er["CJK Compatibility"](i)||Er["CJK Strokes"](i)||!(!Er["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Er["Enclosed CJK Letters and Months"](i)||Er["Ideographic Description Characters"](i)||Er.Kanbun(i)||Er.Katakana(i)&&i!==12540||!(!Er["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Er["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Er["Vertical Forms"](i)||Er["Yijing Hexagram Symbols"](i)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(i))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(i))||ru.test(String.fromCodePoint(i)))))}function Hl(i){return!(YA(i)||function(t){return!!(Er["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Er["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Er["Letterlike Symbols"](t)||Er["Number Forms"](t)||Er["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Er["Control Pictures"](t)&&t!==9251||Er["Optical Character Recognition"](t)||Er["Enclosed Alphanumerics"](t)||Er["Geometric Shapes"](t)||Er["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Er["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Er["CJK Symbols and Punctuation"](t)||Er.Katakana(t)||Er["Private Use Area"](t)||Er["CJK Compatibility Forms"](t)||Er["Small Form Variants"](t)||Er["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}const nh=vo(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function WA(i){return nh.test(String.fromCodePoint(i))}function Af(i,t){return!(!t&&WA(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Er.Khmer(i))}function Nl(i){for(const t of i)if(WA(t.charCodeAt(0)))return!0;return!1}const gs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(i){this.pluginStatus=i.pluginStatus,this.pluginURL=i.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(i){if(gs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=i.applyArabicShaping,this.processBidirectionalText=i.processBidirectionalText,this.processStyledBidirectionalText=i.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(i,t){return A(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(i.pluginStatus!=="loading")return this.setState(i),i;const a=i.pluginURL,l=new Promise(v=>{this.loadScriptResolve=v});t(a);const g=new Promise(v=>setTimeout(()=>v(),this.TIMEOUT));if(yield Promise.race([l,g]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:a};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${a}`)})}};class un{constructor(t,a){this.zoom=t,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new th,this.transition={})}isSupportedScript(t){return function(a,l){for(const g of a)if(!Af(g.charCodeAt(0),l))return!1;return!0}(t,gs.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,a=t-Math.floor(t),l=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*a}}}class Sa{constructor(t,a){this.property=t,this.value=a,this.expression=function(l,g){if(Ni(l))return new Ea(l,g);if(ho(l)){const v=qc(l,g);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=l;return g.type==="color"&&typeof l=="string"?v=Qr.parse(l):g.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(l)?v=gi.parse(l):g.type==="projectionDefinition"&&typeof l=="string"&&(v=$n.parse(l)):v=ci.parse(l),{kind:"constant",evaluate:()=>v}}}(a===void 0?t.specification.default:a,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,a,l){return this.property.possiblyEvaluate(this,t,a,l)}}class $A{constructor(t){this.property=t,this.value=new Sa(t,void 0)}transitioned(t,a){return new Zs(this.property,this.value,a,Ft({},t.transition,this.transition),t.now)}untransitioned(){return new Zs(this.property,this.value,null,{},0)}}class hA{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return yr(this._values[t].value.value)}setValue(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new $A(this._values[t].property)),this._values[t].value=new Sa(this._values[t].property,a===null?void 0:yr(a))}getTransition(t){return yr(this._values[t].transition)}setTransition(t,a){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new $A(this._values[t].property)),this._values[t].transition=yr(a)||void 0}serialize(){const t={};for(const a of Object.keys(this._values)){const l=this.getValue(a);l!==void 0&&(t[a]=l);const g=this.getTransition(a);g!==void 0&&(t[`${a}-transition`]=g)}return t}transitioned(t,a){const l=new qa(this._properties);for(const g of Object.keys(this._values))l._values[g]=this._values[g].transitioned(t,a._values[g]);return l}untransitioned(){const t=new qa(this._properties);for(const a of Object.keys(this._values))t._values[a]=this._values[a].untransitioned();return t}}class Zs{constructor(t,a,l,g,v){this.property=t,this.value=a,this.begin=v+g.delay||0,this.end=this.begin+g.duration||0,t.specification.transition&&(g.delay||g.duration)&&(this.prior=l)}possiblyEvaluate(t,a,l){const g=t.now||0,v=this.value.possiblyEvaluate(t,a,l),x=this.prior;if(x){if(g>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(g<this.begin)return x.possiblyEvaluate(t,a,l);{const B=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(t,a,l),v,he(B))}}return v}}class qa{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,a,l){const g=new fA(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(t,a,l);return g}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class jl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return yr(this._values[t].value)}setValue(t,a){this._values[t]=new Sa(this._values[t].property,a===null?void 0:yr(a))}serialize(){const t={};for(const a of Object.keys(this._values)){const l=this.getValue(a);l!==void 0&&(t[a]=l)}return t}possiblyEvaluate(t,a,l){const g=new fA(this._properties);for(const v of Object.keys(this._values))g._values[v]=this._values[v].possiblyEvaluate(t,a,l);return g}}class Fa{constructor(t,a,l){this.property=t,this.value=a,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,a,l,g){return this.property.evaluate(this.value,this.parameters,t,a,l,g)}}class fA{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Nt{constructor(t){this.specification=t}possiblyEvaluate(t,a){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(a)}interpolate(t,a,l){const g=fa[this.specification.type];return g?g(t,a,l):t}}class Jt{constructor(t,a){this.specification=t,this.overrides=a}possiblyEvaluate(t,a,l,g){return new Fa(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(a,null,{},l,g)}:t.expression,a)}interpolate(t,a,l){if(t.value.kind!=="constant"||a.value.kind!=="constant")return t;if(t.value.value===void 0||a.value.value===void 0)return new Fa(this,{kind:"constant",value:void 0},t.parameters);const g=fa[this.specification.type];if(g){const v=g(t.value.value,a.value.value,l);return new Fa(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,a,l,g,v,x){return t.kind==="constant"?t.value:t.evaluate(a,l,g,v,x)}}class Vl extends Jt{possiblyEvaluate(t,a,l,g){if(t.value===void 0)return new Fa(this,{kind:"constant",value:void 0},a);if(t.expression.kind==="constant"){const v=t.expression.evaluate(a,null,{},l,g),x=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,B=this._calculate(x,x,x,a);return new Fa(this,{kind:"constant",value:B},a)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:a.zoom-1}),t.expression.evaluate({zoom:a.zoom}),t.expression.evaluate({zoom:a.zoom+1}),a);return new Fa(this,{kind:"constant",value:v},a)}return new Fa(this,t.expression,a)}evaluate(t,a,l,g,v,x){if(t.kind==="source"){const B=t.evaluate(a,l,g,v,x);return this._calculate(B,B,B,a)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(a.zoom)-1},l,g),t.evaluate({zoom:Math.floor(a.zoom)},l,g),t.evaluate({zoom:Math.floor(a.zoom)+1},l,g),a):t.value}_calculate(t,a,l,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:l,to:a}}interpolate(t){return t}}class nu{constructor(t){this.specification=t}possiblyEvaluate(t,a,l,g){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(a,null,{},l,g);return this._calculate(v,v,v,a)}return this._calculate(t.expression.evaluate(new un(Math.floor(a.zoom-1),a)),t.expression.evaluate(new un(Math.floor(a.zoom),a)),t.expression.evaluate(new un(Math.floor(a.zoom+1),a)),a)}}_calculate(t,a,l,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:a}:{from:l,to:a}}interpolate(t){return t}}class xo{constructor(t){this.specification=t}possiblyEvaluate(t,a,l,g){return!!t.expression.evaluate(a,null,{},l,g)}interpolate(){return!1}}class Bi{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in t){const l=t[a];l.specification.overridable&&this.overridableProperties.push(a);const g=this.defaultPropertyValues[a]=new Sa(l,void 0),v=this.defaultTransitionablePropertyValues[a]=new $A(l);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=g.possiblyEvaluate({})}}}It("DataDrivenProperty",Jt),It("DataConstantProperty",Nt),It("CrossFadedDataDrivenProperty",Vl),It("CrossFadedProperty",nu),It("ColorRampProperty",xo);const ih="-transition";class Ci extends te{constructor(t,a){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),a.layout&&(this._unevaluatedLayout=new jl(a.layout)),a.paint)){this._transitionablePaint=new hA(a.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fA(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,a,l={}){a!=null&&this._validate(xd,`layers.${this.id}.layout.${t}`,t,a,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,a):this.visibility=a)}getPaintProperty(t){return t.endsWith(ih)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,a,l={}){if(a!=null&&this._validate(eh,`layers.${this.id}.paint.${t}`,t,a,l))return!1;if(t.endsWith(ih))return this._transitionablePaint.setTransition(t.slice(0,-11),a||void 0),!1;{const g=this._transitionablePaint._values[t],v=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),B=g.value;this._transitionablePaint.setValue(t,a),this._handleSpecialPaintPropertyUpdate(t);const F=this._transitionablePaint._values[t].value;return F.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(t,B,F)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,a,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,a){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,a)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ir(t,(a,l)=>!(a===void 0||l==="layout"&&!Object.keys(a).length||l==="paint"&&!Object.keys(a).length))}_validate(t,a,l,g,v={}){return(!v||v.validate!==!1)&&In(this,t.call(ds,{key:a,layerType:this.type,objectKey:l,value:g,styleSpec:K,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const a=this.paint.get(t);if(a instanceof Fa&&tA(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const ah={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ua{constructor(t,a){this._structArray=t,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class tr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,a){return t._trim(),a&&(t.isTransferred=!0,a.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const a=Object.create(this.prototype);return a.arrayBuffer=t.arrayBuffer,a.length=t.length,a.capacity=t.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function lr(i,t=1){let a=0,l=0;return{members:i.map(g=>{const v=ah[g.type].BYTES_PER_ELEMENT,x=a=Jn(a,Math.max(t,v)),B=g.components||1;return l=Math.max(l,v),a+=v*B,{name:g.name,type:g.type,components:B,offset:x}}),size:Jn(a,Math.max(l,t)),alignment:t}}function Jn(i,t){return Math.ceil(i/t)*t}class wo extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a){const l=this.length;return this.resize(l+1),this.emplace(l,t,a)}emplace(t,a,l){const g=2*t;return this.int16[g+0]=a,this.int16[g+1]=l,t}}wo.prototype.bytesPerElement=4,It("StructArrayLayout2i4",wo);class Gi extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,l)}emplace(t,a,l,g){const v=3*t;return this.int16[v+0]=a,this.int16[v+1]=l,this.int16[v+2]=g,t}}Gi.prototype.bytesPerElement=6,It("StructArrayLayout3i6",Gi);class ms extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l,g){const v=this.length;return this.resize(v+1),this.emplace(v,t,a,l,g)}emplace(t,a,l,g,v){const x=4*t;return this.int16[x+0]=a,this.int16[x+1]=l,this.int16[x+2]=g,this.int16[x+3]=v,t}}ms.prototype.bytesPerElement=8,It("StructArrayLayout4i8",ms);class bo extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x){const B=this.length;return this.resize(B+1),this.emplace(B,t,a,l,g,v,x)}emplace(t,a,l,g,v,x,B){const F=6*t;return this.int16[F+0]=a,this.int16[F+1]=l,this.int16[F+2]=g,this.int16[F+3]=v,this.int16[F+4]=x,this.int16[F+5]=B,t}}bo.prototype.bytesPerElement=12,It("StructArrayLayout2i4i12",bo);class Bo extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x){const B=this.length;return this.resize(B+1),this.emplace(B,t,a,l,g,v,x)}emplace(t,a,l,g,v,x,B){const F=4*t,I=8*t;return this.int16[F+0]=a,this.int16[F+1]=l,this.uint8[I+4]=g,this.uint8[I+5]=v,this.uint8[I+6]=x,this.uint8[I+7]=B,t}}Bo.prototype.bytesPerElement=8,It("StructArrayLayout2i4ub8",Bo);class Ma extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a){const l=this.length;return this.resize(l+1),this.emplace(l,t,a)}emplace(t,a,l){const g=2*t;return this.float32[g+0]=a,this.float32[g+1]=l,t}}Ma.prototype.bytesPerElement=8,It("StructArrayLayout2f8",Ma);class sh extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x,B,F,I,L){const P=this.length;return this.resize(P+1),this.emplace(P,t,a,l,g,v,x,B,F,I,L)}emplace(t,a,l,g,v,x,B,F,I,L,P){const N=10*t;return this.uint16[N+0]=a,this.uint16[N+1]=l,this.uint16[N+2]=g,this.uint16[N+3]=v,this.uint16[N+4]=x,this.uint16[N+5]=B,this.uint16[N+6]=F,this.uint16[N+7]=I,this.uint16[N+8]=L,this.uint16[N+9]=P,t}}sh.prototype.bytesPerElement=20,It("StructArrayLayout10ui20",sh);class yn extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x,B,F,I,L,P,N){const V=this.length;return this.resize(V+1),this.emplace(V,t,a,l,g,v,x,B,F,I,L,P,N)}emplace(t,a,l,g,v,x,B,F,I,L,P,N,V){const Z=12*t;return this.int16[Z+0]=a,this.int16[Z+1]=l,this.int16[Z+2]=g,this.int16[Z+3]=v,this.uint16[Z+4]=x,this.uint16[Z+5]=B,this.uint16[Z+6]=F,this.uint16[Z+7]=I,this.int16[Z+8]=L,this.int16[Z+9]=P,this.int16[Z+10]=N,this.int16[Z+11]=V,t}}yn.prototype.bytesPerElement=24,It("StructArrayLayout4i4ui4i24",yn);class qs extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,l){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,l)}emplace(t,a,l,g){const v=3*t;return this.float32[v+0]=a,this.float32[v+1]=l,this.float32[v+2]=g,t}}qs.prototype.bytesPerElement=12,It("StructArrayLayout3f12",qs);class Gl extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint32[1*t+0]=a,t}}Gl.prototype.bytesPerElement=4,It("StructArrayLayout1ul4",Gl);class Kl extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x,B,F,I){const L=this.length;return this.resize(L+1),this.emplace(L,t,a,l,g,v,x,B,F,I)}emplace(t,a,l,g,v,x,B,F,I,L){const P=10*t,N=5*t;return this.int16[P+0]=a,this.int16[P+1]=l,this.int16[P+2]=g,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=B,this.uint32[N+3]=F,this.uint16[P+8]=I,this.uint16[P+9]=L,t}}Kl.prototype.bytesPerElement=20,It("StructArrayLayout6i1ul2ui20",Kl);class Co extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x){const B=this.length;return this.resize(B+1),this.emplace(B,t,a,l,g,v,x)}emplace(t,a,l,g,v,x,B){const F=6*t;return this.int16[F+0]=a,this.int16[F+1]=l,this.int16[F+2]=g,this.int16[F+3]=v,this.int16[F+4]=x,this.int16[F+5]=B,t}}Co.prototype.bytesPerElement=12,It("StructArrayLayout2i2i2i12",Co);class oh extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,t,a,l,g,v)}emplace(t,a,l,g,v,x){const B=4*t,F=8*t;return this.float32[B+0]=a,this.float32[B+1]=l,this.float32[B+2]=g,this.int16[F+6]=v,this.int16[F+7]=x,t}}oh.prototype.bytesPerElement=16,It("StructArrayLayout2f1f2i16",oh);class Zl extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x){const B=this.length;return this.resize(B+1),this.emplace(B,t,a,l,g,v,x)}emplace(t,a,l,g,v,x,B){const F=16*t,I=4*t,L=8*t;return this.uint8[F+0]=a,this.uint8[F+1]=l,this.float32[I+1]=g,this.float32[I+2]=v,this.int16[L+6]=x,this.int16[L+7]=B,t}}Zl.prototype.bytesPerElement=16,It("StructArrayLayout2ub2f2i16",Zl);class dA extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,l){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,l)}emplace(t,a,l,g){const v=3*t;return this.uint16[v+0]=a,this.uint16[v+1]=l,this.uint16[v+2]=g,t}}dA.prototype.bytesPerElement=6,It("StructArrayLayout3ui6",dA);class ql extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue){const Be=this.length;return this.resize(Be+1),this.emplace(Be,t,a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue)}emplace(t,a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue,Be){const de=24*t,j=12*t,ie=48*t;return this.int16[de+0]=a,this.int16[de+1]=l,this.uint16[de+2]=g,this.uint16[de+3]=v,this.uint32[j+2]=x,this.uint32[j+3]=B,this.uint32[j+4]=F,this.uint16[de+10]=I,this.uint16[de+11]=L,this.uint16[de+12]=P,this.float32[j+7]=N,this.float32[j+8]=V,this.uint8[ie+36]=Z,this.uint8[ie+37]=$,this.uint8[ie+38]=ae,this.uint32[j+10]=ue,this.int16[de+22]=Be,t}}ql.prototype.bytesPerElement=48,It("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ql);class m extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue,Be,de,j,ie,ge,Ve,dt,Ze,Je,vt,ft){const wt=this.length;return this.resize(wt+1),this.emplace(wt,t,a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue,Be,de,j,ie,ge,Ve,dt,Ze,Je,vt,ft)}emplace(t,a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue,Be,de,j,ie,ge,Ve,dt,Ze,Je,vt,ft,wt){const at=32*t,Dt=16*t;return this.int16[at+0]=a,this.int16[at+1]=l,this.int16[at+2]=g,this.int16[at+3]=v,this.int16[at+4]=x,this.int16[at+5]=B,this.int16[at+6]=F,this.int16[at+7]=I,this.uint16[at+8]=L,this.uint16[at+9]=P,this.uint16[at+10]=N,this.uint16[at+11]=V,this.uint16[at+12]=Z,this.uint16[at+13]=$,this.uint16[at+14]=ae,this.uint16[at+15]=ue,this.uint16[at+16]=Be,this.uint16[at+17]=de,this.uint16[at+18]=j,this.uint16[at+19]=ie,this.uint16[at+20]=ge,this.uint16[at+21]=Ve,this.uint16[at+22]=dt,this.uint32[Dt+12]=Ze,this.float32[Dt+13]=Je,this.float32[Dt+14]=vt,this.uint16[at+30]=ft,this.uint16[at+31]=wt,t}}m.prototype.bytesPerElement=64,It("StructArrayLayout8i15ui1ul2f2ui64",m);class e extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.float32[1*t+0]=a,t}}e.prototype.bytesPerElement=4,It("StructArrayLayout1f4",e);class n extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,l){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,l)}emplace(t,a,l,g){const v=3*t;return this.uint16[6*t+0]=a,this.float32[v+1]=l,this.float32[v+2]=g,t}}n.prototype.bytesPerElement=12,It("StructArrayLayout1ui2f12",n);class c extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a,l){const g=this.length;return this.resize(g+1),this.emplace(g,t,a,l)}emplace(t,a,l,g){const v=4*t;return this.uint32[2*t+0]=a,this.uint16[v+2]=l,this.uint16[v+3]=g,t}}c.prototype.bytesPerElement=8,It("StructArrayLayout1ul2ui8",c);class f extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,a){const l=this.length;return this.resize(l+1),this.emplace(l,t,a)}emplace(t,a,l){const g=2*t;return this.uint16[g+0]=a,this.uint16[g+1]=l,t}}f.prototype.bytesPerElement=4,It("StructArrayLayout2ui4",f);class _ extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const a=this.length;return this.resize(a+1),this.emplace(a,t)}emplace(t,a){return this.uint16[1*t+0]=a,t}}_.prototype.bytesPerElement=2,It("StructArrayLayout1ui2",_);class b extends tr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,a,l,g){const v=this.length;return this.resize(v+1),this.emplace(v,t,a,l,g)}emplace(t,a,l,g,v){const x=4*t;return this.float32[x+0]=a,this.float32[x+1]=l,this.float32[x+2]=g,this.float32[x+3]=v,t}}b.prototype.bytesPerElement=16,It("StructArrayLayout4f16",b);class T extends Ua{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ne(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class U extends Kl{get(t){return new T(this,t)}}It("CollisionBoxArray",U);class Q extends Ua{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Q.prototype.size=48;class O extends ql{get(t){return new Q(this,t)}}It("PlacedSymbolArray",O);class H extends Ua{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}H.prototype.size=64;class z extends m{get(t){return new H(this,t)}}It("SymbolInstanceArray",z);class Y extends e{getoffsetX(t){return this.float32[1*t+0]}}It("GlyphOffsetArray",Y);class ee extends Gi{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}It("SymbolLineVertexArray",ee);class Ae extends Ua{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ae.prototype.size=12;class oe extends n{get(t){return new Ae(this,t)}}It("TextAnchorOffsetArray",oe);class ce extends Ua{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ce.prototype.size=8;class fe extends c{get(t){return new ce(this,t)}}It("FeatureIndexArray",fe);class me extends wo{}class _e extends wo{}class we extends wo{}class Ue extends bo{}class Ee extends Bo{}class Ge extends Ma{}class je extends sh{}class rt extends yn{}class it extends qs{}class et extends Gl{}class Et extends Co{}class Bt extends Zl{}class lt extends dA{}class kt extends f{}const hr=lr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dr}=hr;class _r{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,a,l,g){const v=this.segments[this.segments.length-1];return t>_r.MAX_VERTEX_ARRAY_LENGTH&&Rr(`Max vertices per segment is ${_r.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${_r.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>_r.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==g?this.createNewSegment(a,l,g):v}createNewSegment(t,a,l){const g={vertexOffset:t.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0,vaos:{}};return l!==void 0&&(g.sortKey=l),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(t,a,l){return this.prepareSegment(0,t,a,l)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const a in t.vaos)t.vaos[a].destroy()}static simpleSegment(t,a,l,g){return new _r([{vertexOffset:t,primitiveOffset:a,vertexLength:l,primitiveLength:g,vaos:{},sortKey:0}])}}function Wr(i,t){return 256*(i=_t(Math.floor(i),0,255))+_t(Math.floor(t),0,255)}_r.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,It("SegmentVector",_r);const on=lr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var hn,Zr,$r,zn={exports:{}},ii={exports:{}},ui={exports:{}},Ri=function(){if($r)return zn.exports;$r=1;var i=(hn||(hn=1,ii.exports=function(a,l){var g,v,x,B,F,I,L,P;for(v=a.length-(g=3&a.length),x=l,F=3432918353,I=461845907,P=0;P<v;)L=255&a.charCodeAt(P)|(255&a.charCodeAt(++P))<<8|(255&a.charCodeAt(++P))<<16|(255&a.charCodeAt(++P))<<24,++P,x=27492+(65535&(B=5*(65535&(x=(x^=L=(65535&(L=(L=(65535&L)*F+(((L>>>16)*F&65535)<<16)&4294967295)<<15|L>>>17))*I+(((L>>>16)*I&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(L=0,g){case 3:L^=(255&a.charCodeAt(P+2))<<16;case 2:L^=(255&a.charCodeAt(P+1))<<8;case 1:x^=L=(65535&(L=(L=(65535&(L^=255&a.charCodeAt(P)))*F+(((L>>>16)*F&65535)<<16)&4294967295)<<15|L>>>17))*I+(((L>>>16)*I&65535)<<16)&4294967295}return x^=a.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),ii.exports),t=(Zr||(Zr=1,ui.exports=function(a,l){for(var g,v=a.length,x=l^v,B=0;v>=4;)g=1540483477*(65535&(g=255&a.charCodeAt(B)|(255&a.charCodeAt(++B))<<8|(255&a.charCodeAt(++B))<<16|(255&a.charCodeAt(++B))<<24))+((1540483477*(g>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),v-=4,++B;switch(v){case 3:x^=(255&a.charCodeAt(B+2))<<16;case 2:x^=(255&a.charCodeAt(B+1))<<8;case 1:x=1540483477*(65535&(x^=255&a.charCodeAt(B)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),ui.exports);return zn.exports=i,zn.exports.murmur3=i,zn.exports.murmur2=t,zn.exports}(),ys=D(Ri);class Xa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,a,l,g){this.ids.push(Eo(t)),this.positions.push(a,l,g)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Eo(t);let l=0,g=this.ids.length-1;for(;l<g;){const x=l+g>>1;this.ids[x]>=a?g=x:l=x+1}const v=[];for(;this.ids[l]===a;)v.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return v}static serialize(t,a){const l=new Float64Array(t.ids),g=new Uint32Array(t.positions);return _s(l,g,0,l.length-1),a&&a.push(l.buffer,g.buffer),{ids:l,positions:g}}static deserialize(t){const a=new Xa;return a.ids=t.ids,a.positions=t.positions,a.indexed=!0,a}}function Eo(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ys(String(i))}function _s(i,t,a,l){for(;a<l;){const g=i[a+l>>1];let v=a-1,x=l+1;for(;;){do v++;while(i[v]<g);do x--;while(i[x]>g);if(v>=x)break;To(i,v,x),To(t,3*v,3*x),To(t,3*v+1,3*x+1),To(t,3*v+2,3*x+2)}x-a<l-x?(_s(i,t,a,x),a=x+1):(_s(i,t,x+1,l),l=x)}}function To(i,t,a){const l=i[t];i[t]=i[a],i[a]=l}It("FeaturePositionMap",Xa);class Ya{constructor(t,a){this.gl=t.gl,this.location=a}}class Wa extends Ya{constructor(t,a){super(t,a),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ia extends Ya{constructor(t,a){super(t,a),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class vs extends Ya{constructor(t,a){super(t,a),this.current=Qr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const pA=new Float32Array(16);function gA(i){return[Wr(255*i.r,255*i.g),Wr(255*i.b,255*i.a)]}class Qn{constructor(t,a,l){this.value=t,this.uniformNames=a.map(g=>`u_${g}`),this.type=l}setUniform(t,a,l){t.set(l.constantOr(this.value))}getBinding(t,a,l){return this.type==="color"?new vs(t,a):new Wa(t,a)}}class fn{constructor(t,a){this.uniformNames=a.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=t.tlbr}setUniform(t,a,l,g){const v=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&t.set(v)}getBinding(t,a,l){return l.substr(0,9)==="u_pattern"?new ia(t,a):new Wa(t,a)}}class Kn{constructor(t,a,l,g){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,a,l,g,v){const x=this.paintVertexArray.length,B=this.expression.evaluate(new un(0),a,{},g,[],v);this.paintVertexArray.resize(t),this._setPaintValue(x,t,B)}updatePaintArray(t,a,l,g){const v=this.expression.evaluate({zoom:0},l,g);this._setPaintValue(t,a,v)}_setPaintValue(t,a,l){if(this.type==="color"){const g=gA(l);for(let v=t;v<a;v++)this.paintVertexArray.emplace(v,g[0],g[1])}else{for(let g=t;g<a;g++)this.paintVertexArray.emplace(g,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qr{constructor(t,a,l,g,v,x){this.expression=t,this.uniformNames=a.map(B=>`u_${B}_t`),this.type=l,this.useIntegerZoom=g,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(B=>({name:`a_${B}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(t,a,l,g,v){const x=this.expression.evaluate(new un(this.zoom),a,{},g,[],v),B=this.expression.evaluate(new un(this.zoom+1),a,{},g,[],v),F=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(F,t,x,B)}updatePaintArray(t,a,l,g){const v=this.expression.evaluate({zoom:this.zoom},l,g),x=this.expression.evaluate({zoom:this.zoom+1},l,g);this._setPaintValue(t,a,v,x)}_setPaintValue(t,a,l,g){if(this.type==="color"){const v=gA(l),x=gA(g);for(let B=t;B<a;B++)this.paintVertexArray.emplace(B,v[0],v[1],x[0],x[1])}else{for(let v=t;v<a;v++)this.paintVertexArray.emplace(v,l,g);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(g))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,a){const l=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,g=_t(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);t.set(g)}getBinding(t,a,l){return new Wa(t,a)}}class Xs{constructor(t,a,l,g,v,x){this.expression=t,this.type=a,this.useIntegerZoom=l,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,a,l){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(g,t,a.patterns&&a.patterns[this.layerId],l)}updatePaintArray(t,a,l,g,v){this._setPaintValues(t,a,l.patterns&&l.patterns[this.layerId],v)}_setPaintValues(t,a,l,g){if(!g||!l)return;const{min:v,mid:x,max:B}=l,F=g[v],I=g[x],L=g[B];if(F&&I&&L)for(let P=t;P<a;P++)this.zoomInPaintVertexArray.emplace(P,I.tl[0],I.tl[1],I.br[0],I.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],I.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(P,I.tl[0],I.tl[1],I.br[0],I.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],I.pixelRatio,L.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,on.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,on.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ah{constructor(t,a,l){this.binders={},this._buffers=[];const g=[];for(const v in t.paint._values){if(!l(v))continue;const x=t.paint.get(v);if(!(x instanceof Fa&&tA(x.property.specification)))continue;const B=lf(v,t.type),F=x.value,I=x.property.specification.type,L=x.property.useIntegerZoom,P=x.property.specification["property-type"],N=P==="cross-faded"||P==="cross-faded-data-driven";if(F.kind==="constant")this.binders[v]=N?new fn(F.value,B):new Qn(F.value,B,I),g.push(`/u_${v}`);else if(F.kind==="source"||N){const V=lh(v,I,"source");this.binders[v]=N?new Xs(F,I,L,a,V,t.id):new Kn(F,B,I,V),g.push(`/a_${v}`)}else{const V=lh(v,I,"composite");this.binders[v]=new qr(F,B,I,L,a,V),g.push(`/z_${v}`)}}this.cacheKey=g.sort().join("")}getMaxValue(t){const a=this.binders[t];return a instanceof Kn||a instanceof qr?a.maxValue:0}populatePaintArrays(t,a,l,g,v){for(const x in this.binders){const B=this.binders[x];(B instanceof Kn||B instanceof qr||B instanceof Xs)&&B.populatePaintArray(t,a,l,g,v)}}setConstantPatternPositions(t,a){for(const l in this.binders){const g=this.binders[l];g instanceof fn&&g.setConstantPatternPositions(t,a)}}updatePaintArrays(t,a,l,g,v){let x=!1;for(const B in t){const F=a.getPositions(B);for(const I of F){const L=l.feature(I.index);for(const P in this.binders){const N=this.binders[P];if((N instanceof Kn||N instanceof qr||N instanceof Xs)&&N.expression.isStateDependent===!0){const V=g.paint.get(P);N.expression=V.value,N.updatePaintArray(I.start,I.end,L,t[B],v),x=!0}}}}return x}defines(){const t=[];for(const a in this.binders){const l=this.binders[a];(l instanceof Qn||l instanceof fn)&&t.push(...l.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return t}getBinderAttributes(){const t=[];for(const a in this.binders){const l=this.binders[a];if(l instanceof Kn||l instanceof qr)for(let g=0;g<l.paintVertexAttributes.length;g++)t.push(l.paintVertexAttributes[g].name);else if(l instanceof Xs)for(let g=0;g<on.members.length;g++)t.push(on.members[g].name)}return t}getBinderUniforms(){const t=[];for(const a in this.binders){const l=this.binders[a];if(l instanceof Qn||l instanceof fn||l instanceof qr)for(const g of l.uniformNames)t.push(g)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,a){const l=[];for(const g in this.binders){const v=this.binders[g];if(v instanceof Qn||v instanceof fn||v instanceof qr){for(const x of v.uniformNames)if(a[x]){const B=v.getBinding(t,a[x],x);l.push({name:x,property:g,binding:B})}}}return l}setUniforms(t,a,l,g){for(const{name:v,property:x,binding:B}of a)this.binders[x].setUniform(B,g,l.get(x),v)}updatePaintBuffers(t){this._buffers=[];for(const a in this.binders){const l=this.binders[a];if(t&&l instanceof Xs){const g=t.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(l instanceof Kn||l instanceof qr)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(t){for(const a in this.binders){const l=this.binders[a];(l instanceof Kn||l instanceof qr||l instanceof Xs)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const a=this.binders[t];(a instanceof Kn||a instanceof qr||a instanceof Xs)&&a.destroy()}}}class xs{constructor(t,a,l=()=>!0){this.programConfigurations={};for(const g of t)this.programConfigurations[g.id]=new Ah(g,a,l);this.needsUpload=!1,this._featureMap=new Xa,this._bufferOffset=0}populatePaintArrays(t,a,l,g,v,x){for(const B in this.programConfigurations)this.programConfigurations[B].populatePaintArrays(t,a,g,v,x);a.id!==void 0&&this._featureMap.add(a.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,a,l,g){for(const v of l)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,a,v,g)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function lf(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function lh(i,t,a){const l={color:{source:Ma,composite:b},number:{source:e,composite:Ma}},g=function(v){return{"line-pattern":{source:je,composite:je},"fill-pattern":{source:je,composite:je},"fill-extrusion-pattern":{source:je,composite:je}}[v]}(i);return g&&g[a]||l[t][a]}It("ConstantBinder",Qn),It("CrossFadedConstantBinder",fn),It("SourceExpressionBinder",Kn),It("CrossFadedCompositeBinder",Xs),It("CompositeExpressionBinder",qr),It("ProgramConfiguration",Ah,{omit:["_buffers"]}),It("ProgramConfigurationSet",xs);const ch=Math.pow(2,14)-1,ya=-ch-1;function Ia(i){const t=Te/i.extent,a=i.loadGeometry();for(let l=0;l<a.length;l++){const g=a[l];for(let v=0;v<g.length;v++){const x=g[v],B=Math.round(x.x*t),F=Math.round(x.y*t);x.x=_t(B,ya,ch),x.y=_t(F,ya,ch),(B<x.x||B>x.x+1||F<x.y||F>x.y+1)&&Rr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function $a(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?Ia(i):[]}}const mA=-32768;function JA(i,t,a,l,g){i.emplaceBack(mA+8*t+l,mA+8*a+g)}class Xl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new _e,this.indexArray=new lt,this.segments=new _r,this.programConfigurations=new xs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,l){const g=this.layers[0],v=[];let x=null,B=!1,F=g.type==="heatmap";if(g.type==="circle"){const L=g;x=L.layout.get("circle-sort-key"),B=!x.isConstant(),F=F||L.paint.get("circle-pitch-alignment")==="map"}const I=F?a.subdivisionGranularity.circle:1;for(const{feature:L,id:P,index:N,sourceLayerIndex:V}of t){const Z=this.layers[0]._featureFilter.needGeometry,$=$a(L,Z);if(!this.layers[0]._featureFilter.filter(new un(this.zoom),$,l))continue;const ae=B?x.evaluate($,{},l):void 0,ue={id:P,properties:L.properties,type:L.type,sourceLayerIndex:V,index:N,geometry:Z?$.geometry:Ia(L),patterns:{},sortKey:ae};v.push(ue)}B&&v.sort((L,P)=>L.sortKey-P.sortKey);for(const L of v){const{geometry:P,index:N,sourceLayerIndex:V}=L,Z=t[N].feature;this.addFeature(L,P,N,l,I),a.featureIndex.insert(Z,P,N,V,this.index)}}update(t,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Dr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,a,l,g,v=1){let x;switch(v){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const B=x.length;for(const F of a)for(const I of F){const L=I.x,P=I.y;if(L<0||L>=Te||P<0||P>=Te)continue;const N=this.segments.prepareSegment(B*B,this.layoutVertexArray,this.indexArray,t.sortKey),V=N.vertexLength;for(let Z=0;Z<B;Z++)for(let $=0;$<B;$++)JA(this.layoutVertexArray,L,P,x[$],x[Z]);for(let Z=0;Z<B-1;Z++)for(let $=0;$<B-1;$++){const ae=V+Z*B+$,ue=V+(Z+1)*B+$;this.indexArray.emplaceBack(ae,ue+1,ae+1),this.indexArray.emplaceBack(ae,ue,ue+1)}N.vertexLength+=B*B,N.primitiveLength+=(B-1)*(B-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},g)}}function Yl(i,t){for(let a=0;a<i.length;a++)if(kn(t,i[a]))return!0;for(let a=0;a<t.length;a++)if(kn(i,t[a]))return!0;return!!bs(i,t)}function iu(i,t,a){return!!kn(i,t)||!!cf(t,i,a)}function wd(i,t){if(i.length===1)return So(t,i[0]);for(let a=0;a<t.length;a++){const l=t[a];for(let g=0;g<l.length;g++)if(kn(i,l[g]))return!0}for(let a=0;a<i.length;a++)if(So(t,i[a]))return!0;for(let a=0;a<t.length;a++)if(bs(i,t[a]))return!0;return!1}function ws(i,t,a){if(i.length>1){if(bs(i,t))return!0;for(let l=0;l<t.length;l++)if(cf(t[l],i,a))return!0}for(let l=0;l<i.length;l++)if(cf(i[l],t,a))return!0;return!1}function bs(i,t){if(i.length===0||t.length===0)return!1;for(let a=0;a<i.length-1;a++){const l=i[a],g=i[a+1];for(let v=0;v<t.length-1;v++)if(el(l,g,t[v],t[v+1]))return!0}return!1}function el(i,t,a,l){return Ye(i,a,l)!==Ye(t,a,l)&&Ye(i,t,a)!==Ye(i,t,l)}function cf(i,t,a){const l=a*a;if(t.length===1)return i.distSqr(t[0])<l;for(let g=1;g<t.length;g++)if(yA(i,t[g-1],t[g])<l)return!0;return!1}function yA(i,t,a){const l=t.distSqr(a);if(l===0)return i.distSqr(t);const g=((i.x-t.x)*(a.x-t.x)+(i.y-t.y)*(a.y-t.y))/l;return i.distSqr(g<0?t:g>1?a:a.sub(t)._mult(g)._add(t))}function So(i,t){for(let a=0;a<i.length;a++)if(kn(i[a],t))return!0;return!1}function kn(i,t){let a=!1;for(let l=0,g=i.length-1;l<i.length;g=l++){const v=i[l],x=i[g];v.y>t.y!=x.y>t.y&&t.x<(x.x-v.x)*(t.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function uf(i,t,a){const l=a[0],g=a[2];if(i.x<l.x&&t.x<l.x||i.x>g.x&&t.x>g.x||i.y<l.y&&t.y<l.y||i.y>g.y&&t.y>g.y)return!1;const v=Ye(i,t,a[0]);return v!==Ye(i,t,a[1])||v!==Ye(i,t,a[2])||v!==Ye(i,t,a[3])}function Wl(i,t,a){const l=t.paint.get(i).value;return l.kind==="constant"?l.value:a.programConfigurations.get(t.id).getMaxValue(i)}function au(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function uh(i,t,a,l,g){if(!t[0]&&!t[1])return i;const v=ne.convert(t)._mult(g);a==="viewport"&&v._rotate(-l);const x=[];for(let B=0;B<i.length;B++)x.push(i[B].sub(v));return x}let bd,tl;It("CircleBucket",Xl,{omit:["layers"]});var hf={get paint(){return tl=tl||new Bi({"circle-radius":new Jt(K.paint_circle["circle-radius"]),"circle-color":new Jt(K.paint_circle["circle-color"]),"circle-blur":new Jt(K.paint_circle["circle-blur"]),"circle-opacity":new Jt(K.paint_circle["circle-opacity"]),"circle-translate":new Nt(K.paint_circle["circle-translate"]),"circle-translate-anchor":new Nt(K.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Nt(K.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Nt(K.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jt(K.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jt(K.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jt(K.paint_circle["circle-stroke-opacity"])})},get layout(){return bd=bd||new Bi({"circle-sort-key":new Jt(K.layout_circle["circle-sort-key"])})}};class eg extends Ci{constructor(t){super(t,hf)}createBucket(t){return new Xl(t)}queryRadius(t){const a=t;return Wl("circle-radius",this,a)+Wl("circle-stroke-width",this,a)+au(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:a,featureState:l,geometry:g,transform:v,pixelsToTileUnits:x,unwrappedTileID:B,getElevation:F}){const I=uh(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,x),L=this.paint.get("circle-radius").evaluate(a,l)+this.paint.get("circle-stroke-width").evaluate(a,l),P=this.paint.get("circle-pitch-alignment")==="map",N=P?I:function(Z,$,ae,ue){return Z.map(Be=>Bd(Be,$,ae,ue))}(I,v,B,F),V=P?L*x:L;for(const Z of g)for(const $ of Z){const ae=P?$:Bd($,v,B,F);let ue=V;const Be=v.projectTileCoordinates($.x,$.y,B,F).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=Be/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=v.cameraToCenterDistance/Be),iu(N,ae,ue))return!0}return!1}}function Bd(i,t,a,l){const g=t.projectTileCoordinates(i.x,i.y,a,l).point;return new ne((.5*g.x+.5)*t.width,(.5*-g.y+.5)*t.height)}class Cd extends Xl{}let hh;It("HeatmapBucket",Cd,{omit:["layers"]});var tg={get paint(){return hh=hh||new Bi({"heatmap-radius":new Jt(K.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jt(K.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Nt(K.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xo(K.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Nt(K.paint_heatmap["heatmap-opacity"])})}};function fh(i,{width:t,height:a},l,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==t*a*l)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${t*a*l}`)}else g=new Uint8Array(t*a*l);return i.width=t,i.height=a,i.data=g,i}function Ed(i,{width:t,height:a},l){if(t===i.width&&a===i.height)return;const g=fh({},{width:t,height:a},l);ff(i,g,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,a)},l),i.width=t,i.height=a,i.data=g.data}function ff(i,t,a,l,g,v){if(g.width===0||g.height===0)return t;if(g.width>i.width||g.height>i.height||a.x>i.width-g.width||a.y>i.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>t.width||g.height>t.height||l.x>t.width-g.width||l.y>t.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=i.data,B=t.data;if(x===B)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<g.height;F++){const I=((a.y+F)*i.width+a.x)*v,L=((l.y+F)*t.width+l.x)*v;for(let P=0;P<g.width*v;P++)B[L+P]=x[I+P]}return t}class dh{constructor(t,a){fh(this,t,1,a)}resize(t){Ed(this,t,1)}clone(){return new dh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,l,g,v){ff(t,a,l,g,v,1)}}class Qa{constructor(t,a){fh(this,t,4,a)}resize(t){Ed(this,t,4)}replace(t,a){a?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Qa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,a,l,g,v){ff(t,a,l,g,v,4)}}function Ei(i){const t={},a=i.resolution||256,l=i.clips?i.clips.length:1,g=i.image||new Qa({width:a,height:l});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,B,F)=>{t[i.evaluationKey]=F;const I=i.expression.evaluate(t);g.data[x+B+0]=Math.floor(255*I.r/I.a),g.data[x+B+1]=Math.floor(255*I.g/I.a),g.data[x+B+2]=Math.floor(255*I.b/I.a),g.data[x+B+3]=Math.floor(255*I.a)};if(i.clips)for(let x=0,B=0;x<l;++x,B+=4*a)for(let F=0,I=0;F<a;F++,I+=4){const L=F/(a-1),{start:P,end:N}=i.clips[x];v(B,I,P*(1-L)+N*L)}else for(let x=0,B=0;x<a;x++,B+=4)v(0,B,x/(a-1));return g}It("AlphaImage",dh),It("RGBAImage",Qa);const Ti="big-fb";class rg extends Ci{createBucket(t){return new Cd(t)}constructor(t){super(t,tg),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ei({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ti)&&this.heatmapFbos.delete(Ti)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Td;var ng={get paint(){return Td=Td||new Bi({"hillshade-illumination-direction":new Nt(K.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Nt(K.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Nt(K.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Nt(K.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Nt(K.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Nt(K.paint_hillshade["hillshade-accent-color"])})}};class ig extends Ci{constructor(t){super(t,ng)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const ag=lr([{name:"a_pos",components:2,type:"Int16"}],4),{members:df}=ag;function ph(i,t,a){const l=a.patternDependencies;let g=!1;for(const v of t){const x=v.paint.get(`${i}-pattern`);x.isConstant()||(g=!0);const B=x.constantOr(null);B&&(g=!0,l[B.to]=!0,l[B.from]=!0)}return g}function pf(i,t,a,l,g){const v=g.patternDependencies;for(const x of t){const B=x.paint.get(`${i}-pattern`).value;if(B.kind!=="constant"){let F=B.evaluate({zoom:l-1},a,{},g.availableImages),I=B.evaluate({zoom:l},a,{},g.availableImages),L=B.evaluate({zoom:l+1},a,{},g.availableImages);F=F&&F.name?F.name:F,I=I&&I.name?I.name:I,L=L&&L.name?L.name:L,v[F]=!0,v[I]=!0,v[L]=!0,a.patterns[x.id]={min:F,mid:I,max:L}}}return a}function Sd(i,t,a,l,g){let v;if(g===function(x,B,F,I){let L=0;for(let P=B,N=F-I;P<F;P+=I)L+=(x[N]-x[P])*(x[P+1]+x[N+1]),N=P;return L}(i,t,a,l)>0)for(let x=t;x<a;x+=l)v=cg(x/l|0,i[x],i[x+1],v);else for(let x=a-l;x>=t;x-=l)v=cg(x/l|0,i[x],i[x+1],v);return v&&Da(v,v.next)&&(su(v),v=v.next),v}function rl(i,t){if(!i)return i;t||(t=i);let a,l=i;do if(a=!1,l.steiner||!Da(l,l.next)&&Zn(l.prev,l,l.next)!==0)l=l.next;else{if(su(l),l=t=l.prev,l===l.next)break;a=!0}while(a||l!==t);return t}function $l(i,t,a,l,g,v,x){if(!i)return;!x&&v&&function(F,I,L,P){let N=F;do N.z===0&&(N.z=gh(N.x,N.y,I,L,P)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==F);N.prevZ.nextZ=null,N.prevZ=null,function(V){let Z,$=1;do{let ae,ue=V;V=null;let Be=null;for(Z=0;ue;){Z++;let de=ue,j=0;for(let ge=0;ge<$&&(j++,de=de.nextZ,de);ge++);let ie=$;for(;j>0||ie>0&&de;)j!==0&&(ie===0||!de||ue.z<=de.z)?(ae=ue,ue=ue.nextZ,j--):(ae=de,de=de.nextZ,ie--),Be?Be.nextZ=ae:V=ae,ae.prevZ=Be,Be=ae;ue=de}Be.nextZ=null,$*=2}while(Z>1)}(N)}(i,l,g,v);let B=i;for(;i.prev!==i.next;){const F=i.prev,I=i.next;if(v?Ud(i,l,g,v):Fd(i))t.push(F.i,i.i,I.i),su(i),i=I.next,B=I.next;else if((i=I)===B){x?x===1?$l(i=sg(rl(i),t),t,a,l,g,v,2):x===2&&Md(i,t,a,l,g,v):$l(rl(i),t,a,l,g,v,1);break}}}function Fd(i){const t=i.prev,a=i,l=i.next;if(Zn(t,a,l)>=0)return!1;const g=t.x,v=a.x,x=l.x,B=t.y,F=a.y,I=l.y,L=Math.min(g,v,x),P=Math.min(B,F,I),N=Math.max(g,v,x),V=Math.max(B,F,I);let Z=l.next;for(;Z!==t;){if(Z.x>=L&&Z.x<=N&&Z.y>=P&&Z.y<=V&&Jl(g,B,v,F,x,I,Z.x,Z.y)&&Zn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function Ud(i,t,a,l){const g=i.prev,v=i,x=i.next;if(Zn(g,v,x)>=0)return!1;const B=g.x,F=v.x,I=x.x,L=g.y,P=v.y,N=x.y,V=Math.min(B,F,I),Z=Math.min(L,P,N),$=Math.max(B,F,I),ae=Math.max(L,P,N),ue=gh(V,Z,t,a,l),Be=gh($,ae,t,a,l);let de=i.prevZ,j=i.nextZ;for(;de&&de.z>=ue&&j&&j.z<=Be;){if(de.x>=V&&de.x<=$&&de.y>=Z&&de.y<=ae&&de!==g&&de!==x&&Jl(B,L,F,P,I,N,de.x,de.y)&&Zn(de.prev,de,de.next)>=0||(de=de.prevZ,j.x>=V&&j.x<=$&&j.y>=Z&&j.y<=ae&&j!==g&&j!==x&&Jl(B,L,F,P,I,N,j.x,j.y)&&Zn(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;de&&de.z>=ue;){if(de.x>=V&&de.x<=$&&de.y>=Z&&de.y<=ae&&de!==g&&de!==x&&Jl(B,L,F,P,I,N,de.x,de.y)&&Zn(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;j&&j.z<=Be;){if(j.x>=V&&j.x<=$&&j.y>=Z&&j.y<=ae&&j!==g&&j!==x&&Jl(B,L,F,P,I,N,j.x,j.y)&&Zn(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function sg(i,t){let a=i;do{const l=a.prev,g=a.next.next;!Da(l,g)&&Qd(l,a,a.next,g)&&En(l,g)&&En(g,l)&&(t.push(l.i,a.i,g.i),su(a),su(a.next),a=i=g),a=a.next}while(a!==i);return rl(a)}function Md(i,t,a,l,g,v){let x=i;do{let B=x.next.next;for(;B!==x.prev;){if(x.i!==B.i&&ty(x,B)){let F=lg(x,B);return x=rl(x,x.next),F=rl(F,F.next),$l(x,t,a,l,g,v,0),void $l(F,t,a,l,g,v,0)}B=B.next}x=x.next}while(x!==i)}function gf(i,t){let a=i.x-t.x;return a===0&&(a=i.y-t.y,a===0)&&(a=(i.next.y-i.y)/(i.next.x-i.x)-(t.next.y-t.y)/(t.next.x-t.x)),a}function Id(i,t){const a=function(g,v){let x=v;const B=g.x,F=g.y;let I,L=-1/0;if(Da(g,x))return x;do{if(Da(g,x.next))return x.next;if(F<=x.y&&F>=x.next.y&&x.next.y!==x.y){const $=x.x+(F-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if($<=B&&$>L&&(L=$,I=x.x<x.next.x?x:x.next,$===B))return I}x=x.next}while(x!==v);if(!I)return null;const P=I,N=I.x,V=I.y;let Z=1/0;x=I;do{if(B>=x.x&&x.x>=N&&B!==x.x&&Fo(F<V?B:L,F,N,V,F<V?L:B,F,x.x,x.y)){const $=Math.abs(F-x.y)/(B-x.x);En(x,g)&&($<Z||$===Z&&(x.x>I.x||x.x===I.x&&og(I,x)))&&(I=x,Z=$)}x=x.next}while(x!==P);return I}(i,t);if(!a)return t;const l=lg(a,i);return rl(l,l.next),rl(a,a.next)}function og(i,t){return Zn(i.prev,i,t.prev)<0&&Zn(t.next,i,i.next)<0}function gh(i,t,a,l,g){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-a)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*g|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ag(i){let t=i,a=i;do(t.x<a.x||t.x===a.x&&t.y<a.y)&&(a=t),t=t.next;while(t!==i);return a}function Fo(i,t,a,l,g,v,x,B){return(g-x)*(t-B)>=(i-x)*(v-B)&&(i-x)*(l-B)>=(a-x)*(t-B)&&(a-x)*(v-B)>=(g-x)*(l-B)}function Jl(i,t,a,l,g,v,x,B){return!(i===x&&t===B)&&Fo(i,t,a,l,g,v,x,B)}function ty(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(a,l){let g=a;do{if(g.i!==a.i&&g.next.i!==a.i&&g.i!==l.i&&g.next.i!==l.i&&Qd(g,g.next,a,l))return!0;g=g.next}while(g!==a);return!1}(i,t)&&(En(i,t)&&En(t,i)&&function(a,l){let g=a,v=!1;const x=(a.x+l.x)/2,B=(a.y+l.y)/2;do g.y>B!=g.next.y>B&&g.next.y!==g.y&&x<(g.next.x-g.x)*(B-g.y)/(g.next.y-g.y)+g.x&&(v=!v),g=g.next;while(g!==a);return v}(i,t)&&(Zn(i.prev,i,t.prev)||Zn(i,t.prev,t))||Da(i,t)&&Zn(i.prev,i,i.next)>0&&Zn(t.prev,t,t.next)>0)}function Zn(i,t,a){return(t.y-i.y)*(a.x-t.x)-(t.x-i.x)*(a.y-t.y)}function Da(i,t){return i.x===t.x&&i.y===t.y}function Qd(i,t,a,l){const g=nl(Zn(i,t,a)),v=nl(Zn(i,t,l)),x=nl(Zn(a,l,i)),B=nl(Zn(a,l,t));return g!==v&&x!==B||!(g!==0||!ec(i,a,t))||!(v!==0||!ec(i,l,t))||!(x!==0||!ec(a,i,l))||!(B!==0||!ec(a,t,l))}function ec(i,t,a){return t.x<=Math.max(i.x,a.x)&&t.x>=Math.min(i.x,a.x)&&t.y<=Math.max(i.y,a.y)&&t.y>=Math.min(i.y,a.y)}function nl(i){return i>0?1:i<0?-1:0}function En(i,t){return Zn(i.prev,i,i.next)<0?Zn(i,t,i.next)>=0&&Zn(i,i.prev,t)>=0:Zn(i,t,i.prev)<0||Zn(i,i.next,t)<0}function lg(i,t){const a=tc(i.i,i.x,i.y),l=tc(t.i,t.x,t.y),g=i.next,v=t.prev;return i.next=t,t.prev=i,a.next=g,g.prev=a,l.next=a,a.prev=l,v.next=l,l.prev=v,l}function cg(i,t,a,l){const g=tc(i,t,a);return l?(g.next=l.next,g.prev=l,l.next.prev=g,l.next=g):(g.prev=g,g.next=g),g}function su(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function tc(i,t,a){return{i,x:t,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ja{constructor(t,a){if(a>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=a}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class mh{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}mh.noSubdivision=new mh({fill:new Ja(0,0),line:new Ja(0,0),tile:new Ja(0,0),stencil:new Ja(0,0),circle:1}),It("SubdivisionGranularityExpression",Ja),It("SubdivisionGranularitySetting",mh);const rc=-32768,_A=32767;class Uo{constructor(t,a){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Te/t,this._canonical=a}_getKey(t,a){return(t+=32768)<<16|(a+=32768)<<0}_vertexToIndex(t,a){if(t<-32768||a<-32768||t>32767||a>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const l=0|Math.round(t),g=0|Math.round(a),v=this._getKey(l,g);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,x),this._vertexBuffer.push(l,g),x}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(g,v){const x=[];for(let B=0;B<v.length;B+=3){const F=v[B],I=v[B+1],L=v[B+2],P=g[2*F],N=g[2*F+1];(g[2*I]-P)*(g[2*L+1]-N)-(g[2*I+1]-N)*(g[2*L]-P)>0?(x.push(F),x.push(L),x.push(I)):(x.push(F),x.push(I),x.push(L))}return x}(this._vertexBuffer,t);const a=[],l=t.length;for(let g=0;g<l;g+=3){const v=[t[g+0],t[g+1],t[g+2]],x=[this._vertexBuffer[2*t[g+0]+0],this._vertexBuffer[2*t[g+0]+1],this._vertexBuffer[2*t[g+1]+0],this._vertexBuffer[2*t[g+1]+1],this._vertexBuffer[2*t[g+2]+0],this._vertexBuffer[2*t[g+2]+1]];let B=1/0,F=1/0,I=-1/0,L=-1/0;for(let $=0;$<3;$++){const ae=x[2*$],ue=x[2*$+1];B=Math.min(B,ae),I=Math.max(I,ae),F=Math.min(F,ue),L=Math.max(L,ue)}if(B===I||F===L)continue;const P=Math.floor(B/this._granularityCellSize),N=Math.ceil(I/this._granularityCellSize),V=Math.floor(F/this._granularityCellSize),Z=Math.ceil(L/this._granularityCellSize);if(P!==N||V!==Z)for(let $=V;$<Z;$++){const ae=this._scanlineGenerateVertexRingForCellRow($,x,v);ug(this._vertexBuffer,ae,a)}else a.push(...v)}return a}_scanlineGenerateVertexRingForCellRow(t,a,l){const g=t*this._granularityCellSize,v=g+this._granularityCellSize,x=[];for(let B=0;B<3;B++){const F=a[2*B],I=a[2*B+1],L=a[2*(B+1)%6],P=a[(2*(B+1)+1)%6],N=a[2*(B+2)%6],V=a[(2*(B+2)+1)%6],Z=L-F,$=P-I,ae=Z===0,ue=$===0,Be=(g-I)/$,de=(v-I)/$,j=Math.min(Be,de),ie=Math.max(Be,de);if(!ue&&(j>=1||ie<=0)||ue&&(I<g||I>v)){P>=g&&P<=v&&x.push(l[(B+1)%3]);continue}!ue&&j>0&&x.push(this._vertexToIndex(F+Z*j,I+$*j));const ge=F+Z*Math.max(j,0),Ve=F+Z*Math.min(ie,1);ae||this._generateIntraEdgeVertices(x,F,I,L,P,ge,Ve),!ue&&ie<1&&x.push(this._vertexToIndex(F+Z*ie,I+$*ie)),(ue||P>=g&&P<=v)&&x.push(l[(B+1)%3]),!ue&&(P<=g||P>=v)&&this._generateInterEdgeVertices(x,F,I,L,P,N,V,Ve,g,v)}return x}_generateIntraEdgeVertices(t,a,l,g,v,x,B){const F=g-a,I=v-l,L=I===0,P=L?Math.min(a,g):Math.min(x,B),N=L?Math.max(a,g):Math.max(x,B),V=Math.floor(P/this._granularityCellSize)+1,Z=Math.ceil(N/this._granularityCellSize)-1;if(L?a<g:x<B)for(let $=V;$<=Z;$++){const ae=$*this._granularityCellSize;t.push(this._vertexToIndex(ae,l+I*(ae-a)/F))}else for(let $=Z;$>=V;$--){const ae=$*this._granularityCellSize;t.push(this._vertexToIndex(ae,l+I*(ae-a)/F))}}_generateInterEdgeVertices(t,a,l,g,v,x,B,F,I,L){const P=v-l,N=x-g,V=B-v,Z=(I-v)/V,$=(L-v)/V,ae=Math.min(Z,$),ue=Math.max(Z,$),Be=g+N*ae;let de=Math.floor(Math.min(Be,F)/this._granularityCellSize)+1,j=Math.ceil(Math.max(Be,F)/this._granularityCellSize)-1,ie=F<Be;const ge=V===0;if(ge&&(B===I||B===L))return;if(ge||ae>=1||ue<=0){const dt=l-B,Ze=x+(a-x)*Math.min((I-B)/dt,(L-B)/dt);de=Math.floor(Math.min(Ze,F)/this._granularityCellSize)+1,j=Math.ceil(Math.max(Ze,F)/this._granularityCellSize)-1,ie=F<Ze}const Ve=P>0?L:I;if(ie)for(let dt=de;dt<=j;dt++)t.push(this._vertexToIndex(dt*this._granularityCellSize,Ve));else for(let dt=j;dt>=de;dt--)t.push(this._vertexToIndex(dt*this._granularityCellSize,Ve))}_generateOutline(t){const a=[];for(const l of t){const g=vA(l,this._granularity,!0),v=this._pointArrayToIndices(g),x=[];for(let B=1;B<v.length;B++)x.push(v[B-1]),x.push(v[B]);a.push(x)}return a}_handlePoles(t){let a=!1,l=!1;this._canonical&&(this._canonical.y===0&&(a=!0),this._canonical.y===(1<<this._canonical.z)-1&&(l=!0)),(a||l)&&this._fillPoles(t,a,l)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let a=0;a<t.length;a+=2){const l=t[a+1];l===rc&&(t[a+1]=-32767),l===_A&&(t[a+1]=32766)}}_generatePoleQuad(t,a,l,g,v,x){g>v!=(x===rc)?(t.push(a),t.push(l),t.push(this._vertexToIndex(g,x)),t.push(l),t.push(this._vertexToIndex(v,x)),t.push(this._vertexToIndex(g,x))):(t.push(l),t.push(a),t.push(this._vertexToIndex(g,x)),t.push(this._vertexToIndex(v,x)),t.push(l),t.push(this._vertexToIndex(g,x)))}_fillPoles(t,a,l){const g=this._vertexBuffer,v=Te,x=t.length;for(let B=2;B<x;B+=3){const F=t[B-2],I=t[B-1],L=t[B],P=g[2*F],N=g[2*F+1],V=g[2*I],Z=g[2*I+1],$=g[2*L],ae=g[2*L+1];a&&(N===0&&Z===0&&this._generatePoleQuad(t,F,I,P,V,rc),Z===0&&ae===0&&this._generatePoleQuad(t,I,L,V,$,rc),ae===0&&N===0&&this._generatePoleQuad(t,L,F,$,P,rc)),l&&(N===v&&Z===v&&this._generatePoleQuad(t,F,I,P,V,_A),Z===v&&ae===v&&this._generatePoleQuad(t,I,L,V,$,_A),ae===v&&N===v&&this._generatePoleQuad(t,L,F,$,P,_A))}}_initializeVertices(t){for(let a=0;a<t.length;a+=2)this._vertexToIndex(t[a],t[a+1])}subdividePolygonInternal(t,a){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:l,holeIndices:g}=function(B){const F=[],I=[];for(const L of B)if(L.length!==0){L!==B[0]&&F.push(I.length/2);for(let P=0;P<L.length;P++)I.push(L[P].x),I.push(L[P].y)}return{flattened:I,holeIndices:F}}(t);let v;this._initializeVertices(l);try{const B=function(I,L,P=2){const N=L&&L.length,V=N?L[0]*P:I.length;let Z=Sd(I,0,V,P,!0);const $=[];if(!Z||Z.next===Z.prev)return $;let ae,ue,Be;if(N&&(Z=function(de,j,ie,ge){const Ve=[];for(let dt=0,Ze=j.length;dt<Ze;dt++){const Je=Sd(de,j[dt]*ge,dt<Ze-1?j[dt+1]*ge:de.length,ge,!1);Je===Je.next&&(Je.steiner=!0),Ve.push(Ag(Je))}Ve.sort(gf);for(let dt=0;dt<Ve.length;dt++)ie=Id(Ve[dt],ie);return ie}(I,L,Z,P)),I.length>80*P){ae=1/0,ue=1/0;let de=-1/0,j=-1/0;for(let ie=P;ie<V;ie+=P){const ge=I[ie],Ve=I[ie+1];ge<ae&&(ae=ge),Ve<ue&&(ue=Ve),ge>de&&(de=ge),Ve>j&&(j=Ve)}Be=Math.max(de-ae,j-ue),Be=Be!==0?32767/Be:0}return $l(Z,$,P,ae,ue,Be,0),$}(l,g),F=this._convertIndices(l,B);v=this._subdivideTrianglesScanline(F)}catch(B){console.error(B)}let x=[];return a&&(x=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:x}}_convertIndices(t,a){const l=[];for(let g=0;g<a.length;g++)l.push(this._vertexToIndex(t[2*a[g]],t[2*a[g]+1]));return l}_pointArrayToIndices(t){const a=[];for(let l=0;l<t.length;l++){const g=t[l];a.push(this._vertexToIndex(g.x,g.y))}return a}}function Dd(i,t,a,l=!0){return new Uo(a,t).subdividePolygonInternal(i,l)}function vA(i,t,a=!1){if(!i||i.length<1)return[];if(i.length<2)return[];const l=i[0],g=i[i.length-1],v=a&&(l.x!==g.x||l.y!==g.y);if(t<2)return v?[...i,i[0]]:[...i];const x=Math.floor(Te/t),B=[];B.push(new ne(i[0].x,i[0].y));const F=i.length,I=v?F:F-1;for(let L=0;L<I;L++){const P=i[L],N=L<F-1?i[L+1]:i[0],V=P.x,Z=P.y,$=N.x,ae=N.y,ue=V!==$,Be=Z!==ae;if(!ue&&!Be)continue;const de=$-V,j=ae-Z,ie=Math.abs(de),ge=Math.abs(j);let Ve=V,dt=Z;for(;;){const Je=de>0?(Math.floor(Ve/x)+1)*x:(Math.ceil(Ve/x)-1)*x,vt=j>0?(Math.floor(dt/x)+1)*x:(Math.ceil(dt/x)-1)*x,ft=Math.abs(Ve-Je),wt=Math.abs(dt-vt),at=Math.abs(Ve-$),Dt=Math.abs(dt-ae),rr=ue?ft/ie:Number.POSITIVE_INFINITY,er=Be?wt/ge:Number.POSITIVE_INFINITY;if((at<=ft||!ue)&&(Dt<=wt||!Be))break;if(rr<er&&ue||!Be){Ve=Je,dt+=j*rr;const jt=new ne(Ve,Math.round(dt));B[B.length-1].x===jt.x&&B[B.length-1].y===jt.y||B.push(jt)}else{Ve+=de*er,dt=vt;const jt=new ne(Math.round(Ve),dt);B[B.length-1].x===jt.x&&B[B.length-1].y===jt.y||B.push(jt)}}const Ze=new ne($,ae);B[B.length-1].x===Ze.x&&B[B.length-1].y===Ze.y||B.push(Ze)}return B}function ug(i,t,a){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let l=0,g=i[2*t[0]];for(let F=1;F<t.length;F++){const I=i[2*t[F]];I<g&&(g=I,l=F)}const v=t.length;let x=l,B=(x+1)%v;for(;;){const F=x-1>=0?x-1:v-1,I=(B+1)%v,L=i[2*t[F]],P=i[2*t[I]],N=i[2*t[x]],V=i[2*t[x]+1],Z=i[2*t[B]+1];let $=!1;if(L<P)$=!0;else if(L>P)$=!1;else{const ae=Z-V,ue=-(i[2*t[B]]-N),Be=V<Z?1:-1;((L-N)*ae+(i[2*t[F]+1]-V)*ue)*Be>((P-N)*ae+(i[2*t[I]+1]-V)*ue)*Be&&($=!0)}if($){const ae=t[F],ue=t[x],Be=t[B];ae!==ue&&ae!==Be&&ue!==Be&&a.push(Be,ue,ae),x--,x<0&&(x=v-1)}else{const ae=t[I],ue=t[x],Be=t[B];ae!==ue&&ae!==Be&&ue!==Be&&a.push(Be,ue,ae),B++,B>=v&&(B=0)}if(F===I)break}}function mf(i,t,a,l,g,v,x,B,F){const I=g.length/2,L=x&&B&&F;if(I<_r.MAX_VERTEX_ARRAY_LENGTH){const P=t.prepareSegment(I,a,l),N=P.vertexLength;for(let $=0;$<v.length;$+=3)l.emplaceBack(N+v[$],N+v[$+1],N+v[$+2]);let V,Z;P.vertexLength+=I,P.primitiveLength+=v.length/3,L&&(Z=x.prepareSegment(I,a,B),V=Z.vertexLength,Z.vertexLength+=I);for(let $=0;$<g.length;$+=2)i(g[$],g[$+1]);if(L)for(let $=0;$<F.length;$++){const ae=F[$];for(let ue=1;ue<ae.length;ue+=2)B.emplaceBack(V+ae[ue-1],V+ae[ue]);Z.primitiveLength+=ae.length/2}}else(function(P,N,V,Z,$,ae){const ue=[];for(let ge=0;ge<Z.length/2;ge++)ue.push(-1);const Be={count:0};let de=0,j=P.getOrCreateLatestSegment(N,V),ie=j.vertexLength;for(let ge=2;ge<$.length;ge+=3){const Ve=$[ge-2],dt=$[ge-1],Ze=$[ge];let Je=ue[Ve]<de,vt=ue[dt]<de,ft=ue[Ze]<de;j.vertexLength+((Je?1:0)+(vt?1:0)+(ft?1:0))>_r.MAX_VERTEX_ARRAY_LENGTH&&(j=P.createNewSegment(N,V),de=Be.count,Je=!0,vt=!0,ft=!0,ie=0);const wt=nc(ue,Z,ae,Be,Ve,Je,j),at=nc(ue,Z,ae,Be,dt,vt,j),Dt=nc(ue,Z,ae,Be,Ze,ft,j);V.emplaceBack(ie+wt-de,ie+at-de,ie+Dt-de),j.primitiveLength++}})(t,a,l,g,v,i),L&&function(P,N,V,Z,$,ae){const ue=[];for(let ge=0;ge<Z.length/2;ge++)ue.push(-1);const Be={count:0};let de=0,j=P.getOrCreateLatestSegment(N,V),ie=j.vertexLength;for(let ge=0;ge<$.length;ge++){const Ve=$[ge];for(let dt=1;dt<$[ge].length;dt+=2){const Ze=Ve[dt-1],Je=Ve[dt];let vt=ue[Ze]<de,ft=ue[Je]<de;j.vertexLength+((vt?1:0)+(ft?1:0))>_r.MAX_VERTEX_ARRAY_LENGTH&&(j=P.createNewSegment(N,V),de=Be.count,vt=!0,ft=!0,ie=0);const wt=nc(ue,Z,ae,Be,Ze,vt,j),at=nc(ue,Z,ae,Be,Je,ft,j);V.emplaceBack(ie+wt-de,ie+at-de),j.primitiveLength++}}}(x,a,B,g,F,i),t.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function nc(i,t,a,l,g,v,x){if(v){const B=l.count;return a(t[2*g],t[2*g+1]),i[g]=l.count,l.count++,x.vertexLength++,B}return i[g]}class ou{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new we,this.indexArray=new lt,this.indexArray2=new kt,this.programConfigurations=new xs(t.layers,t.zoom),this.segments=new _r,this.segments2=new _r,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,l){this.hasPattern=ph("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),v=!g.isConstant(),x=[];for(const{feature:B,id:F,index:I,sourceLayerIndex:L}of t){const P=this.layers[0]._featureFilter.needGeometry,N=$a(B,P);if(!this.layers[0]._featureFilter.filter(new un(this.zoom),N,l))continue;const V=v?g.evaluate(N,{},l,a.availableImages):void 0,Z={id:F,properties:B.properties,type:B.type,sourceLayerIndex:L,index:I,geometry:P?N.geometry:Ia(B),patterns:{},sortKey:V};x.push(Z)}v&&x.sort((B,F)=>B.sortKey-F.sortKey);for(const B of x){const{geometry:F,index:I,sourceLayerIndex:L}=B;if(this.hasPattern){const P=pf("fill",this.layers,B,this.zoom,a);this.patternFeatures.push(P)}else this.addFeature(B,F,I,l,{},a.subdivisionGranularity);a.featureIndex.insert(t[I].feature,F,I,L,this.index)}}update(t,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,l)}addFeatures(t,a,l){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,l,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,df),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,a,l,g,v,x){for(const B of Hs(a,500)){const F=Dd(B,g,x.fill.getGranularityForZoomLevel(g.z)),I=this.layoutVertexArray;mf((L,P)=>{I.emplaceBack(L,P)},this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,v,g)}}let Ld,Mo;It("FillBucket",ou,{omit:["layers","patternFeatures"]});var hi={get paint(){return Mo=Mo||new Bi({"fill-antialias":new Nt(K.paint_fill["fill-antialias"]),"fill-opacity":new Jt(K.paint_fill["fill-opacity"]),"fill-color":new Jt(K.paint_fill["fill-color"]),"fill-outline-color":new Jt(K.paint_fill["fill-outline-color"]),"fill-translate":new Nt(K.paint_fill["fill-translate"]),"fill-translate-anchor":new Nt(K.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vl(K.paint_fill["fill-pattern"])})},get layout(){return Ld=Ld||new Bi({"fill-sort-key":new Jt(K.layout_fill["fill-sort-key"])})}};class Pd extends Ci{constructor(t){super(t,hi)}recalculate(t,a){super.recalculate(t,a);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new ou(t)}queryRadius(){return au(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:a,transform:l,pixelsToTileUnits:g}){return wd(uh(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-l.bearingInRadians,g),a)}isTileClipped(){return!0}}const hg=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Oi=lr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ry}=hg;var yf,Rd,Dn,_a,Ys,Od,zd,_f={};function vf(){if(Rd)return yf;Rd=1;var i=q();function t(g,v,x,B,F){this.properties={},this.extent=x,this.type=0,this._pbf=g,this._geometry=-1,this._keys=B,this._values=F,g.readFields(a,this,v)}function a(g,v,x){g==1?v.id=x.readVarint():g==2?function(B,F){for(var I=B.readVarint()+B.pos;B.pos<I;){var L=F._keys[B.readVarint()],P=F._values[B.readVarint()];F.properties[L]=P}}(x,v):g==3?v.type=x.readVarint():g==4&&(v._geometry=x.pos)}function l(g){for(var v,x,B=0,F=0,I=g.length,L=I-1;F<I;L=F++)B+=((x=g[L]).x-(v=g[F]).x)*(v.y+x.y);return B}return yf=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var v,x=g.readVarint()+g.pos,B=1,F=0,I=0,L=0,P=[];g.pos<x;){if(F<=0){var N=g.readVarint();B=7&N,F=N>>3}if(F--,B===1||B===2)I+=g.readSVarint(),L+=g.readSVarint(),B===1&&(v&&P.push(v),v=[]),v.push(new i(I,L));else{if(B!==7)throw new Error("unknown command "+B);v&&v.push(v[0].clone())}}return v&&P.push(v),P},t.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var v=g.readVarint()+g.pos,x=1,B=0,F=0,I=0,L=1/0,P=-1/0,N=1/0,V=-1/0;g.pos<v;){if(B<=0){var Z=g.readVarint();x=7&Z,B=Z>>3}if(B--,x===1||x===2)(F+=g.readSVarint())<L&&(L=F),F>P&&(P=F),(I+=g.readSVarint())<N&&(N=I),I>V&&(V=I);else if(x!==7)throw new Error("unknown command "+x)}return[L,N,P,V]},t.prototype.toGeoJSON=function(g,v,x){var B,F,I=this.extent*Math.pow(2,x),L=this.extent*g,P=this.extent*v,N=this.loadGeometry(),V=t.types[this.type];function Z(ue){for(var Be=0;Be<ue.length;Be++){var de=ue[Be];ue[Be]=[360*(de.x+L)/I-180,360/Math.PI*Math.atan(Math.exp((180-360*(de.y+P)/I)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(B=0;B<N.length;B++)$[B]=N[B][0];Z(N=$);break;case 2:for(B=0;B<N.length;B++)Z(N[B]);break;case 3:for(N=function(ue){var Be=ue.length;if(Be<=1)return[ue];for(var de,j,ie=[],ge=0;ge<Be;ge++){var Ve=l(ue[ge]);Ve!==0&&(j===void 0&&(j=Ve<0),j===Ve<0?(de&&ie.push(de),de=[ue[ge]]):de.push(ue[ge]))}return de&&ie.push(de),ie}(N),B=0;B<N.length;B++)for(F=0;F<N[B].length;F++)Z(N[B][F])}N.length===1?N=N[0]:V="Multi"+V;var ae={type:"Feature",geometry:{type:V,coordinates:N},properties:this.properties};return"id"in this&&(ae.id=this.id),ae},yf}function La(){if(_a)return Dn;_a=1;var i=vf();function t(l,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(a,this,g),this.length=this._features.length}function a(l,g,v){l===15?g.version=v.readVarint():l===1?g.name=v.readString():l===5?g.extent=v.readVarint():l===2?g._features.push(v.pos):l===3?g._keys.push(v.readString()):l===4&&g._values.push(function(x){for(var B=null,F=x.readVarint()+x.pos;x.pos<F;){var I=x.readVarint()>>3;B=I===1?x.readString():I===2?x.readFloat():I===3?x.readDouble():I===4?x.readVarint64():I===5?x.readVarint():I===6?x.readSVarint():I===7?x.readBoolean():null}return B}(v))}return Dn=t,t.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var g=this._pbf.readVarint()+this._pbf.pos;return new i(this._pbf,g,this.extent,this._keys,this._values)},Dn}function Bs(){return zd||(zd=1,_f.VectorTile=function(){if(Od)return Ys;Od=1;var i=La();function t(a,l,g){if(a===3){var v=new i(g,g.readVarint()+g.pos);v.length&&(l[v.name]=v)}}return Ys=function(a,l){this.layers=a.readFields(t,{},l)},Ys}(),_f.VectorTileFeature=vf(),_f.VectorTileLayer=La()),_f}var Au=D(Bs());const es=Au.VectorTileFeature.types,xf=Math.pow(2,13);function Cs(i,t,a,l,g,v,x,B){i.emplaceBack(t,a,2*Math.floor(l*xf)+x,g*xf*2,v*xf*2,Math.round(B))}class xA{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ue,this.centroidVertexArray=new me,this.indexArray=new lt,this.programConfigurations=new xs(t.layers,t.zoom),this.segments=new _r,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,l){this.features=[],this.hasPattern=ph("fill-extrusion",this.layers,a);for(const{feature:g,id:v,index:x,sourceLayerIndex:B}of t){const F=this.layers[0]._featureFilter.needGeometry,I=$a(g,F);if(!this.layers[0]._featureFilter.filter(new un(this.zoom),I,l))continue;const L={id:v,sourceLayerIndex:B,index:x,geometry:F?I.geometry:Ia(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(pf("fill-extrusion",this.layers,L,this.zoom,a)):this.addFeature(L,L.geometry,x,l,{},a.subdivisionGranularity),a.featureIndex.insert(g,L.geometry,x,B,this.index,!0)}}addFeatures(t,a,l){for(const g of this.features){const{geometry:v}=g;this.addFeature(g,v,g.index,a,l,t.subdivisionGranularity)}}update(t,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ry),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Oi.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,a,l,g,v,x){for(const B of Hs(a,500)){const F={x:0,y:0,sampleCount:0},I=this.layoutVertexArray.length;this.processPolygon(F,g,t,B,x);const L=this.layoutVertexArray.length-I,P=Math.floor(F.x/F.sampleCount),N=Math.floor(F.y/F.sampleCount);for(let V=0;V<L;V++)this.centroidVertexArray.emplaceBack(P,N)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,v,g)}processPolygon(t,a,l,g,v){if(g.length<1||wf(g[0]))return;for(const P of g)P.length!==0&&il(t,P);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},B=v.fill.getGranularityForZoomLevel(a.z),F=es[l.type]==="Polygon";for(const P of g){if(P.length===0||wf(P))continue;const N=vA(P,B,F);this._generateSideFaces(N,x)}if(!F)return;const I=Dd(g,a,B,!1),L=this.layoutVertexArray;mf((P,N)=>{Cs(L,P,N,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,I.verticesFlattened,I.indicesTriangles)}_generateSideFaces(t,a){let l=0;for(let g=1;g<t.length;g++){const v=t[g],x=t[g-1];if(kd(v,x))continue;a.segment.vertexLength+4>_r.MAX_VERTEX_ARRAY_LENGTH&&(a.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const B=v.sub(x)._perp()._unit(),F=x.dist(v);l+F>32768&&(l=0),Cs(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,0,l),Cs(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,1,l),l+=F,Cs(this.layoutVertexArray,x.x,x.y,B.x,B.y,0,0,l),Cs(this.layoutVertexArray,x.x,x.y,B.x,B.y,0,1,l);const I=a.segment.vertexLength;this.indexArray.emplaceBack(I,I+2,I+1),this.indexArray.emplaceBack(I+1,I+2,I+3),a.segment.vertexLength+=4,a.segment.primitiveLength+=2}}}function il(i,t){for(let a=0;a<t.length;a++){const l=t[a];a===t.length-1&&t[0].x===l.x&&t[0].y===l.y||(i.x+=l.x,i.y+=l.y,i.sampleCount++)}}function kd(i,t){return i.x===t.x&&(i.x<0||i.x>Te)||i.y===t.y&&(i.y<0||i.y>Te)}function wf(i){return i.every(t=>t.x<0)||i.every(t=>t.x>Te)||i.every(t=>t.y<0)||i.every(t=>t.y>Te)}let Ws;It("FillExtrusionBucket",xA,{omit:["layers","features"]});var fg={get paint(){return Ws=Ws||new Bi({"fill-extrusion-opacity":new Nt(K["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jt(K["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Nt(K["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Nt(K["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vl(K["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jt(K["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jt(K["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Nt(K["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class lu extends Ci{constructor(t){super(t,fg)}createBucket(t){return new xA(t)}queryRadius(){return au(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:a,featureState:l,geometry:g,transform:v,pixelsToTileUnits:x,pixelPosMatrix:B}){const F=uh(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,x),I=this.paint.get("fill-extrusion-height").evaluate(a,l),L=this.paint.get("fill-extrusion-base").evaluate(a,l),P=function(V,Z,$){const ae=[];for(const ue of V){const Be=[ue.x,ue.y,0,1];Zt(Be,Be,Z),ae.push(new ne(Be[0]/Be[3],Be[1]/Be[3]))}return ae}(F,B),N=function(V,Z,$,ae){const ue=[],Be=[],de=ae[8]*Z,j=ae[9]*Z,ie=ae[10]*Z,ge=ae[11]*Z,Ve=ae[8]*$,dt=ae[9]*$,Ze=ae[10]*$,Je=ae[11]*$;for(const vt of V){const ft=[],wt=[];for(const at of vt){const Dt=at.x,rr=at.y,er=ae[0]*Dt+ae[4]*rr+ae[12],jt=ae[1]*Dt+ae[5]*rr+ae[13],Sr=ae[2]*Dt+ae[6]*rr+ae[14],Ln=ae[3]*Dt+ae[7]*rr+ae[15],ei=Sr+ie,Si=Ln+ge,oa=er+Ve,va=jt+dt,Fi=Sr+Ze,vn=Ln+Je,si=new ne((er+de)/Si,(jt+j)/Si);si.z=ei/Si,ft.push(si);const oi=new ne(oa/vn,va/vn);oi.z=Fi/vn,wt.push(oi)}ue.push(ft),Be.push(wt)}return[ue,Be]}(g,L,I,B);return function(V,Z,$){let ae=1/0;wd($,Z)&&(ae=cu($,Z[0]));for(let ue=0;ue<Z.length;ue++){const Be=Z[ue],de=V[ue];for(let j=0;j<Be.length-1;j++){const ie=Be[j],ge=[ie,Be[j+1],de[j+1],de[j],ie];Yl($,ge)&&(ae=Math.min(ae,cu($,ge)))}}return ae!==1/0&&ae}(N[0],N[1],P)}}function wA(i,t){return i.x*t.x+i.y*t.y}function cu(i,t){if(i.length===1){let a=0;const l=t[a++];let g;for(;!g||l.equals(g);)if(g=t[a++],!g)return 1/0;for(;a<t.length;a++){const v=t[a],x=i[0],B=g.sub(l),F=v.sub(l),I=x.sub(l),L=wA(B,B),P=wA(B,F),N=wA(F,F),V=wA(I,B),Z=wA(I,F),$=L*N-P*P,ae=(N*V-P*Z)/$,ue=(L*Z-P*V)/$,Be=l.z*(1-ae-ue)+g.z*ae+v.z*ue;if(isFinite(Be))return Be}return 1/0}{let a=1/0;for(const l of t)a=Math.min(a,l.z);return a}}const uu=lr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:dg}=uu,pg=lr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:yh}=pg,gg=Au.VectorTileFeature.types,bf=Math.cos(Math.PI/180*37.5),Hd=Math.pow(2,14)/.5;class Nd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(a=>a.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Ee,this.layoutVertexArray2=new Ge,this.indexArray=new lt,this.programConfigurations=new xs(t.layers,t.zoom),this.segments=new _r,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(t,a,l){this.hasPattern=ph("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),v=!g.isConstant(),x=[];for(const{feature:B,id:F,index:I,sourceLayerIndex:L}of t){const P=this.layers[0]._featureFilter.needGeometry,N=$a(B,P);if(!this.layers[0]._featureFilter.filter(new un(this.zoom),N,l))continue;const V=v?g.evaluate(N,{},l):void 0,Z={id:F,properties:B.properties,type:B.type,sourceLayerIndex:L,index:I,geometry:P?N.geometry:Ia(B),patterns:{},sortKey:V};x.push(Z)}v&&x.sort((B,F)=>B.sortKey-F.sortKey);for(const B of x){const{geometry:F,index:I,sourceLayerIndex:L}=B;if(this.hasPattern){const P=pf("line",this.layers,B,this.zoom,a);this.patternFeatures.push(P)}else this.addFeature(B,F,I,l,{},a.subdivisionGranularity);a.featureIndex.insert(t[I].feature,F,I,L,this.index)}}update(t,a,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,a,this.stateDependentLayers,l)}addFeatures(t,a,l){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,a,l,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,yh)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,dg),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,a,l,g,v,x){const B=this.layers[0].layout,F=B.get("line-join").evaluate(t,{}),I=B.get("line-cap"),L=B.get("line-miter-limit"),P=B.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const N of a)this.addLine(N,t,F,I,L,P,g,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,v,g)}addLine(t,a,l,g,v,x,B,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=vA(t,B?F.line.getGranularityForZoomLevel(B.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<t.length-1;de++)this.totalDistance+=t[de].dist(t[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=gg[a.type]==="Polygon";let L=t.length;for(;L>=2&&t[L-1].equals(t[L-2]);)L--;let P=0;for(;P<L-1&&t[P].equals(t[P+1]);)P++;if(L<(I?3:2))return;l==="bevel"&&(v=1.05);const N=this.overscaling<=16?15*Te/(512*this.overscaling):0,V=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let Z,$,ae,ue,Be;this.e1=this.e2=-1,I&&(Z=t[L-2],Be=t[P].sub(Z)._unit()._perp());for(let de=P;de<L;de++){if(ae=de===L-1?I?t[P+1]:void 0:t[de+1],ae&&t[de].equals(ae))continue;Be&&(ue=Be),Z&&($=Z),Z=t[de],Be=ae?ae.sub(Z)._unit()._perp():ue,ue=ue||Be;let j=ue.add(Be);j.x===0&&j.y===0||j._unit();const ie=ue.x*Be.x+ue.y*Be.y,ge=j.x*Be.x+j.y*Be.y,Ve=ge!==0?1/ge:1/0,dt=2*Math.sqrt(2-2*ge),Ze=ge<bf&&$&&ae,Je=ue.x*Be.y-ue.y*Be.x>0;if(Ze&&de>P){const wt=Z.dist($);if(wt>2*N){const at=Z.sub(Z.sub($)._mult(N/wt)._round());this.updateDistance($,at),this.addCurrentVertex(at,ue,0,0,V),$=at}}const vt=$&&ae;let ft=vt?l:I?"butt":g;if(vt&&ft==="round"&&(Ve<x?ft="miter":Ve<=2&&(ft="fakeround")),ft==="miter"&&Ve>v&&(ft="bevel"),ft==="bevel"&&(Ve>2&&(ft="flipbevel"),Ve<v&&(ft="miter")),$&&this.updateDistance($,Z),ft==="miter")j._mult(Ve),this.addCurrentVertex(Z,j,0,0,V);else if(ft==="flipbevel"){if(Ve>100)j=Be.mult(-1);else{const wt=Ve*ue.add(Be).mag()/ue.sub(Be).mag();j._perp()._mult(wt*(Je?-1:1))}this.addCurrentVertex(Z,j,0,0,V),this.addCurrentVertex(Z,j.mult(-1),0,0,V)}else if(ft==="bevel"||ft==="fakeround"){const wt=-Math.sqrt(Ve*Ve-1),at=Je?wt:0,Dt=Je?0:wt;if($&&this.addCurrentVertex(Z,ue,at,Dt,V),ft==="fakeround"){const rr=Math.round(180*dt/Math.PI/20);for(let er=1;er<rr;er++){let jt=er/rr;if(jt!==.5){const Ln=jt-.5;jt+=jt*Ln*(jt-1)*((1.0904+ie*(ie*(3.55645-1.43519*ie)-3.2452))*Ln*Ln+(.848013+ie*(.215638*ie-1.06021)))}const Sr=Be.sub(ue)._mult(jt)._add(ue)._unit()._mult(Je?-1:1);this.addHalfVertex(Z,Sr.x,Sr.y,!1,Je,0,V)}}ae&&this.addCurrentVertex(Z,Be,-at,-Dt,V)}else if(ft==="butt")this.addCurrentVertex(Z,j,0,0,V);else if(ft==="square"){const wt=$?1:-1;this.addCurrentVertex(Z,j,wt,wt,V)}else ft==="round"&&($&&(this.addCurrentVertex(Z,ue,0,0,V),this.addCurrentVertex(Z,ue,1,1,V,!0)),ae&&(this.addCurrentVertex(Z,Be,-1,-1,V,!0),this.addCurrentVertex(Z,Be,0,0,V)));if(Ze&&de<L-1){const wt=Z.dist(ae);if(wt>2*N){const at=Z.add(ae.sub(Z)._mult(N/wt)._round());this.updateDistance(Z,at),this.addCurrentVertex(at,Be,0,0,V),Z=at}}}}addCurrentVertex(t,a,l,g,v,x=!1){const B=a.y*g-a.x,F=-a.y-a.x*g;this.addHalfVertex(t,a.x+a.y*l,a.y-a.x*l,x,!1,l,v),this.addHalfVertex(t,B,F,x,!0,-g,v),this.distance>Hd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,a,l,g,v,x))}addHalfVertex({x:t,y:a},l,g,v,x,B,F){const I=.5*(this.lineClips?this.scaledDistance*(Hd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*l)+128,Math.round(63*g)+128,1+(B===0?0:B<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,L,this.e2),F.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,a){this.distance+=t.dist(a),this.updateScaledDistance()}}let mg,An;It("LineBucket",Nd,{omit:["layers","patternFeatures"]});var Tn={get paint(){return An=An||new Bi({"line-opacity":new Jt(K.paint_line["line-opacity"]),"line-color":new Jt(K.paint_line["line-color"]),"line-translate":new Nt(K.paint_line["line-translate"]),"line-translate-anchor":new Nt(K.paint_line["line-translate-anchor"]),"line-width":new Jt(K.paint_line["line-width"]),"line-gap-width":new Jt(K.paint_line["line-gap-width"]),"line-offset":new Jt(K.paint_line["line-offset"]),"line-blur":new Jt(K.paint_line["line-blur"]),"line-dasharray":new nu(K.paint_line["line-dasharray"]),"line-pattern":new Vl(K.paint_line["line-pattern"]),"line-gradient":new xo(K.paint_line["line-gradient"])})},get layout(){return mg=mg||new Bi({"line-cap":new Nt(K.layout_line["line-cap"]),"line-join":new Jt(K.layout_line["line-join"]),"line-miter-limit":new Nt(K.layout_line["line-miter-limit"]),"line-round-limit":new Nt(K.layout_line["line-round-limit"]),"line-sort-key":new Jt(K.layout_line["line-sort-key"])})}};class Or extends Jt{possiblyEvaluate(t,a){return a=new un(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(t,a)}evaluate(t,a,l,g){return a=Ft({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(t,a,l,g)}}let zr;class dn extends Ci{constructor(t){super(t,Tn),this.gradientVersion=0,zr||(zr=new Or(Tn.paint.properties["line-width"].specification),zr.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Ao,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,a){super.recalculate(t,a),this.paint._values["line-floorwidth"]=zr.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Nd(t)}queryRadius(t){const a=t,l=Pa(Wl("line-width",this,a),Wl("line-gap-width",this,a)),g=Wl("line-offset",this,a);return l/2+Math.abs(g)+au(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:a,featureState:l,geometry:g,transform:v,pixelsToTileUnits:x}){const B=uh(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,x),F=x/2*Pa(this.paint.get("line-width").evaluate(a,l),this.paint.get("line-gap-width").evaluate(a,l)),I=this.paint.get("line-offset").evaluate(a,l);return I&&(g=function(L,P){const N=[];for(let V=0;V<L.length;V++){const Z=L[V],$=[];for(let ae=0;ae<Z.length;ae++){const ue=Z[ae-1],Be=Z[ae],de=Z[ae+1],j=ae===0?new ne(0,0):Be.sub(ue)._unit()._perp(),ie=ae===Z.length-1?new ne(0,0):de.sub(Be)._unit()._perp(),ge=j._add(ie)._unit(),Ve=ge.x*ie.x+ge.y*ie.y;Ve!==0&&ge._mult(1/Ve),$.push(ge._mult(P)._add(Be))}N.push($)}return N}(g,I*x)),function(L,P,N){for(let V=0;V<P.length;V++){const Z=P[V];if(L.length>=3){for(let $=0;$<Z.length;$++)if(kn(L,Z[$]))return!0}if(ws(L,Z,N))return!0}return!1}(B,g,F)}isTileClipped(){return!0}}function Pa(i,t){return t>0?t+2*i:i}const al=lr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hu=lr([{name:"a_projected_pos",components:3,type:"Float32"}],4);lr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jd=lr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);lr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Io=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ai=lr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sl(i,t,a){return i.sections.forEach(l=>{l.text=function(g,v,x){const B=v.layout.get("text-transform").evaluate(x,{});return B==="uppercase"?g=g.toLocaleUpperCase():B==="lowercase"&&(g=g.toLocaleLowerCase()),gs.applyArabicShaping&&(g=gs.applyArabicShaping(g)),g}(l.text,t,a)}),i}lr([{name:"triangle",components:3,type:"Uint16"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),lr([{type:"Float32",name:"offsetX"}]),lr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),lr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const $s={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Bf,Ra,ic,Hn=24,aa={};function Vd(){return Bf||(Bf=1,aa.read=function(i,t,a,l,g){var v,x,B=8*g-l-1,F=(1<<B)-1,I=F>>1,L=-7,P=a?g-1:0,N=a?-1:1,V=i[t+P];for(P+=N,v=V&(1<<-L)-1,V>>=-L,L+=B;L>0;v=256*v+i[t+P],P+=N,L-=8);for(x=v&(1<<-L)-1,v>>=-L,L+=l;L>0;x=256*x+i[t+P],P+=N,L-=8);if(v===0)v=1-I;else{if(v===F)return x?NaN:1/0*(V?-1:1);x+=Math.pow(2,l),v-=I}return(V?-1:1)*x*Math.pow(2,v-l)},aa.write=function(i,t,a,l,g,v){var x,B,F,I=8*v-g-1,L=(1<<I)-1,P=L>>1,N=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=l?0:v-1,Z=l?1:-1,$=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(B=isNaN(t)?1:0,x=L):(x=Math.floor(Math.log(t)/Math.LN2),t*(F=Math.pow(2,-x))<1&&(x--,F*=2),(t+=x+P>=1?N/F:N*Math.pow(2,1-P))*F>=2&&(x++,F/=2),x+P>=L?(B=0,x=L):x+P>=1?(B=(t*F-1)*Math.pow(2,g),x+=P):(B=t*Math.pow(2,P-1)*Math.pow(2,g),x=0));g>=8;i[a+V]=255&B,V+=Z,B/=256,g-=8);for(x=x<<g|B,I+=g;I>0;i[a+V]=255&x,V+=Z,x/=256,I-=8);i[a+V-Z]|=128*$}),aa}function Cf(){if(ic)return Ra;ic=1,Ra=t;var i=Vd();function t(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var a=4294967296,l=1/a,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function v(j){return j.type===t.Bytes?j.readVarint()+j.pos:j.pos+1}function x(j,ie,ge){return ge?4294967296*ie+(j>>>0):4294967296*(ie>>>0)+(j>>>0)}function B(j,ie,ge){var Ve=ie<=16383?1:ie<=2097151?2:ie<=268435455?3:Math.floor(Math.log(ie)/(7*Math.LN2));ge.realloc(Ve);for(var dt=ge.pos-1;dt>=j;dt--)ge.buf[dt+Ve]=ge.buf[dt]}function F(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeVarint(j[ge])}function I(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeSVarint(j[ge])}function L(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeFloat(j[ge])}function P(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeDouble(j[ge])}function N(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeBoolean(j[ge])}function V(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeFixed32(j[ge])}function Z(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeSFixed32(j[ge])}function $(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeFixed64(j[ge])}function ae(j,ie){for(var ge=0;ge<j.length;ge++)ie.writeSFixed64(j[ge])}function ue(j,ie){return(j[ie]|j[ie+1]<<8|j[ie+2]<<16)+16777216*j[ie+3]}function Be(j,ie,ge){j[ge]=ie,j[ge+1]=ie>>>8,j[ge+2]=ie>>>16,j[ge+3]=ie>>>24}function de(j,ie){return(j[ie]|j[ie+1]<<8|j[ie+2]<<16)+(j[ie+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(j,ie,ge){for(ge=ge||this.length;this.pos<ge;){var Ve=this.readVarint(),dt=Ve>>3,Ze=this.pos;this.type=7&Ve,j(dt,ie,this),this.pos===Ze&&this.skip(Ve)}return ie},readMessage:function(j,ie){return this.readFields(j,ie,this.readVarint()+this.pos)},readFixed32:function(){var j=ue(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=de(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=ue(this.buf,this.pos)+ue(this.buf,this.pos+4)*a;return this.pos+=8,j},readSFixed64:function(){var j=ue(this.buf,this.pos)+de(this.buf,this.pos+4)*a;return this.pos+=8,j},readFloat:function(){var j=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var ie,ge,Ve=this.buf;return ie=127&(ge=Ve[this.pos++]),ge<128?ie:(ie|=(127&(ge=Ve[this.pos++]))<<7,ge<128?ie:(ie|=(127&(ge=Ve[this.pos++]))<<14,ge<128?ie:(ie|=(127&(ge=Ve[this.pos++]))<<21,ge<128?ie:function(dt,Ze,Je){var vt,ft,wt=Je.buf;if(vt=(112&(ft=wt[Je.pos++]))>>4,ft<128||(vt|=(127&(ft=wt[Je.pos++]))<<3,ft<128)||(vt|=(127&(ft=wt[Je.pos++]))<<10,ft<128)||(vt|=(127&(ft=wt[Je.pos++]))<<17,ft<128)||(vt|=(127&(ft=wt[Je.pos++]))<<24,ft<128)||(vt|=(1&(ft=wt[Je.pos++]))<<31,ft<128))return x(dt,vt,Ze);throw new Error("Expected varint not more than 10 bytes")}(ie|=(15&(ge=Ve[this.pos]))<<28,j,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2==1?(j+1)/-2:j/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var j=this.readVarint()+this.pos,ie=this.pos;return this.pos=j,j-ie>=12&&g?function(ge,Ve,dt){return g.decode(ge.subarray(Ve,dt))}(this.buf,ie,j):function(ge,Ve,dt){for(var Ze="",Je=Ve;Je<dt;){var vt,ft,wt,at=ge[Je],Dt=null,rr=at>239?4:at>223?3:at>191?2:1;if(Je+rr>dt)break;rr===1?at<128&&(Dt=at):rr===2?(192&(vt=ge[Je+1]))==128&&(Dt=(31&at)<<6|63&vt)<=127&&(Dt=null):rr===3?(ft=ge[Je+2],(192&(vt=ge[Je+1]))==128&&(192&ft)==128&&((Dt=(15&at)<<12|(63&vt)<<6|63&ft)<=2047||Dt>=55296&&Dt<=57343)&&(Dt=null)):rr===4&&(ft=ge[Je+2],wt=ge[Je+3],(192&(vt=ge[Je+1]))==128&&(192&ft)==128&&(192&wt)==128&&((Dt=(15&at)<<18|(63&vt)<<12|(63&ft)<<6|63&wt)<=65535||Dt>=1114112)&&(Dt=null)),Dt===null?(Dt=65533,rr=1):Dt>65535&&(Dt-=65536,Ze+=String.fromCharCode(Dt>>>10&1023|55296),Dt=56320|1023&Dt),Ze+=String.fromCharCode(Dt),Je+=rr}return Ze}(this.buf,ie,j)},readBytes:function(){var j=this.readVarint()+this.pos,ie=this.buf.subarray(this.pos,j);return this.pos=j,ie},readPackedVarint:function(j,ie){if(this.type!==t.Bytes)return j.push(this.readVarint(ie));var ge=v(this);for(j=j||[];this.pos<ge;)j.push(this.readVarint(ie));return j},readPackedSVarint:function(j){if(this.type!==t.Bytes)return j.push(this.readSVarint());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==t.Bytes)return j.push(this.readBoolean());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==t.Bytes)return j.push(this.readFloat());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==t.Bytes)return j.push(this.readDouble());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==t.Bytes)return j.push(this.readFixed32());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==t.Bytes)return j.push(this.readSFixed32());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==t.Bytes)return j.push(this.readFixed64());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==t.Bytes)return j.push(this.readSFixed64());var ie=v(this);for(j=j||[];this.pos<ie;)j.push(this.readSFixed64());return j},skip:function(j){var ie=7&j;if(ie===t.Varint)for(;this.buf[this.pos++]>127;);else if(ie===t.Bytes)this.pos=this.readVarint()+this.pos;else if(ie===t.Fixed32)this.pos+=4;else{if(ie!==t.Fixed64)throw new Error("Unimplemented type: "+ie);this.pos+=8}},writeTag:function(j,ie){this.writeVarint(j<<3|ie)},realloc:function(j){for(var ie=this.length||16;ie<this.pos+j;)ie*=2;if(ie!==this.length){var ge=new Uint8Array(ie);ge.set(this.buf),this.buf=ge,this.length=ie}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),Be(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),Be(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),Be(this.buf,-1&j,this.pos),Be(this.buf,Math.floor(j*l),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),Be(this.buf,-1&j,this.pos),Be(this.buf,Math.floor(j*l),this.pos+4),this.pos+=8},writeVarint:function(j){(j=+j||0)>268435455||j<0?function(ie,ge){var Ve,dt;if(ie>=0?(Ve=ie%4294967296|0,dt=ie/4294967296|0):(dt=~(-ie/4294967296),4294967295^(Ve=~(-ie%4294967296))?Ve=Ve+1|0:(Ve=0,dt=dt+1|0)),ie>=18446744073709552e3||ie<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ge.realloc(10),function(Ze,Je,vt){vt.buf[vt.pos++]=127&Ze|128,Ze>>>=7,vt.buf[vt.pos++]=127&Ze|128,Ze>>>=7,vt.buf[vt.pos++]=127&Ze|128,Ze>>>=7,vt.buf[vt.pos++]=127&Ze|128,vt.buf[vt.pos]=127&(Ze>>>=7)}(Ve,0,ge),function(Ze,Je){var vt=(7&Ze)<<4;Je.buf[Je.pos++]|=vt|((Ze>>>=3)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(Je.buf[Je.pos++]=127&Ze)))))}(dt,ge)}(j,this):(this.realloc(4),this.buf[this.pos++]=127&j|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=j>>>7&127))))},writeSVarint:function(j){this.writeVarint(j<0?2*-j-1:2*j)},writeBoolean:function(j){this.writeVarint(!!j)},writeString:function(j){j=String(j),this.realloc(4*j.length),this.pos++;var ie=this.pos;this.pos=function(Ve,dt,Ze){for(var Je,vt,ft=0;ft<dt.length;ft++){if((Je=dt.charCodeAt(ft))>55295&&Je<57344){if(!vt){Je>56319||ft+1===dt.length?(Ve[Ze++]=239,Ve[Ze++]=191,Ve[Ze++]=189):vt=Je;continue}if(Je<56320){Ve[Ze++]=239,Ve[Ze++]=191,Ve[Ze++]=189,vt=Je;continue}Je=vt-55296<<10|Je-56320|65536,vt=null}else vt&&(Ve[Ze++]=239,Ve[Ze++]=191,Ve[Ze++]=189,vt=null);Je<128?Ve[Ze++]=Je:(Je<2048?Ve[Ze++]=Je>>6|192:(Je<65536?Ve[Ze++]=Je>>12|224:(Ve[Ze++]=Je>>18|240,Ve[Ze++]=Je>>12&63|128),Ve[Ze++]=Je>>6&63|128),Ve[Ze++]=63&Je|128)}return Ze}(this.buf,j,this.pos);var ge=this.pos-ie;ge>=128&&B(ie,ge,this),this.pos=ie-1,this.writeVarint(ge),this.pos+=ge},writeFloat:function(j){this.realloc(4),i.write(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),i.write(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var ie=j.length;this.writeVarint(ie),this.realloc(ie);for(var ge=0;ge<ie;ge++)this.buf[this.pos++]=j[ge]},writeRawMessage:function(j,ie){this.pos++;var ge=this.pos;j(ie,this);var Ve=this.pos-ge;Ve>=128&&B(ge,Ve,this),this.pos=ge-1,this.writeVarint(Ve),this.pos+=Ve},writeMessage:function(j,ie,ge){this.writeTag(j,t.Bytes),this.writeRawMessage(ie,ge)},writePackedVarint:function(j,ie){ie.length&&this.writeMessage(j,F,ie)},writePackedSVarint:function(j,ie){ie.length&&this.writeMessage(j,I,ie)},writePackedBoolean:function(j,ie){ie.length&&this.writeMessage(j,N,ie)},writePackedFloat:function(j,ie){ie.length&&this.writeMessage(j,L,ie)},writePackedDouble:function(j,ie){ie.length&&this.writeMessage(j,P,ie)},writePackedFixed32:function(j,ie){ie.length&&this.writeMessage(j,V,ie)},writePackedSFixed32:function(j,ie){ie.length&&this.writeMessage(j,Z,ie)},writePackedFixed64:function(j,ie){ie.length&&this.writeMessage(j,$,ie)},writePackedSFixed64:function(j,ie){ie.length&&this.writeMessage(j,ae,ie)},writeBytesField:function(j,ie){this.writeTag(j,t.Bytes),this.writeBytes(ie)},writeFixed32Field:function(j,ie){this.writeTag(j,t.Fixed32),this.writeFixed32(ie)},writeSFixed32Field:function(j,ie){this.writeTag(j,t.Fixed32),this.writeSFixed32(ie)},writeFixed64Field:function(j,ie){this.writeTag(j,t.Fixed64),this.writeFixed64(ie)},writeSFixed64Field:function(j,ie){this.writeTag(j,t.Fixed64),this.writeSFixed64(ie)},writeVarintField:function(j,ie){this.writeTag(j,t.Varint),this.writeVarint(ie)},writeSVarintField:function(j,ie){this.writeTag(j,t.Varint),this.writeSVarint(ie)},writeStringField:function(j,ie){this.writeTag(j,t.Bytes),this.writeString(ie)},writeFloatField:function(j,ie){this.writeTag(j,t.Fixed32),this.writeFloat(ie)},writeDoubleField:function(j,ie){this.writeTag(j,t.Fixed64),this.writeDouble(ie)},writeBooleanField:function(j,ie){this.writeVarintField(j,!!ie)}},Ra}var fu=D(Cf());const du=3;function ol(i,t,a){i===1&&a.readMessage(Ki,t)}function Ki(i,t,a){if(i===3){const{id:l,bitmap:g,width:v,height:x,left:B,top:F,advance:I}=a.readMessage(Al,{});t.push({id:l,bitmap:new dh({width:v+2*du,height:x+2*du},g),metrics:{width:v,height:x,left:B,top:F,advance:I}})}}function Al(i,t,a){i===1?t.id=a.readVarint():i===2?t.bitmap=a.readBytes():i===3?t.width=a.readVarint():i===4?t.height=a.readVarint():i===5?t.left=a.readSVarint():i===6?t.top=a.readSVarint():i===7&&(t.advance=a.readVarint())}const pu=du;function ac(i){let t=0,a=0;for(const x of i)t+=x.w*x.h,a=Math.max(a,x.w);i.sort((x,B)=>B.h-x.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),a),h:1/0}];let g=0,v=0;for(const x of i)for(let B=l.length-1;B>=0;B--){const F=l[B];if(!(x.w>F.w||x.h>F.h)){if(x.x=F.x,x.y=F.y,v=Math.max(v,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===F.w&&x.h===F.h){const I=l.pop();B<l.length&&(l[B]=I)}else x.h===F.h?(F.x+=x.w,F.w-=x.w):x.w===F.w?(F.y+=x.h,F.h-=x.h):(l.push({x:F.x+x.w,y:F.y,w:F.w-x.w,h:x.h}),F.y+=x.h,F.h-=x.h);break}}return{w:g,h:v,fill:t/(g*v)||0}}const Zi=1;class _h{constructor(t,{pixelRatio:a,version:l,stretchX:g,stretchY:v,content:x,textFitWidth:B,textFitHeight:F}){this.paddedRect=t,this.pixelRatio=a,this.stretchX=g,this.stretchY=v,this.content=x,this.version=l,this.textFitWidth=B,this.textFitHeight=F}get tl(){return[this.paddedRect.x+Zi,this.paddedRect.y+Zi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zi,this.paddedRect.y+this.paddedRect.h-Zi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zi)/this.pixelRatio,(this.paddedRect.h-2*Zi)/this.pixelRatio]}}class Gd{constructor(t,a){const l={},g={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,l,v),this.addImages(a,g,v);const{w:x,h:B}=ac(v),F=new Qa({width:x||1,height:B||1});for(const I in t){const L=t[I],P=l[I].paddedRect;Qa.copy(L.data,F,{x:0,y:0},{x:P.x+Zi,y:P.y+Zi},L.data)}for(const I in a){const L=a[I],P=g[I].paddedRect,N=P.x+Zi,V=P.y+Zi,Z=L.data.width,$=L.data.height;Qa.copy(L.data,F,{x:0,y:0},{x:N,y:V},L.data),Qa.copy(L.data,F,{x:0,y:$-1},{x:N,y:V-1},{width:Z,height:1}),Qa.copy(L.data,F,{x:0,y:0},{x:N,y:V+$},{width:Z,height:1}),Qa.copy(L.data,F,{x:Z-1,y:0},{x:N-1,y:V},{width:1,height:$}),Qa.copy(L.data,F,{x:0,y:0},{x:N+Z,y:V},{width:1,height:$})}this.image=F,this.iconPositions=l,this.patternPositions=g}addImages(t,a,l){for(const g in t){const v=t[g],x={x:0,y:0,w:v.data.width+2*Zi,h:v.data.height+2*Zi};l.push(x),a[g]=new _h(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(t,a){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),a),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),a)}patchUpdatedImage(t,a,l){if(!t||!a||t.version===a.version)return;t.version=a.version;const[g,v]=t.tl;l.update(a.data,void 0,{x:g,y:v})}}var Es;It("ImagePosition",_h),It("ImageAtlas",Gd),C.ah=void 0,(Es=C.ah||(C.ah={}))[Es.none=0]="none",Es[Es.horizontal=1]="horizontal",Es[Es.vertical=2]="vertical",Es[Es.horizontalOnly=3]="horizontalOnly";const gu=-17;class qi{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,a,l){const g=new qi;return g.scale=t||1,g.fontStack=a,g.verticalAlign=l||"bottom",g}static forImage(t,a){const l=new qi;return l.imageName=t,l.verticalAlign=a||"bottom",l}}class sc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,a){const l=new sc;for(let g=0;g<t.sections.length;g++){const v=t.sections[g];v.image?l.addImageSection(v):l.addTextSection(v,a)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let a="";for(let l=0;l<t.length;l++){const g=t.charCodeAt(l+1)||null,v=t.charCodeAt(l-1)||null;a+=g&&Hl(g)&&!$s[t[l+1]]||v&&Hl(v)&&!$s[t[l-1]]||!$s[t[l]]?t[l]:$s[t[l]]}return a}(this.text)}trim(){let t=0;for(let l=0;l<this.text.length&&vh[this.text.charCodeAt(l)];l++)t++;let a=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&vh[this.text.charCodeAt(l)];l--)a--;this.text=this.text.substring(t,a),this.sectionIndex=this.sectionIndex.slice(t,a)}substring(t,a){const l=new sc;return l.text=this.text.substring(t,a),l.sectionIndex=this.sectionIndex.slice(t,a),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,a)=>Math.max(t,this.sections[a].scale),0)}getMaxImageSize(t){let a=0,l=0;for(let g=0;g<this.length();g++){const v=this.getSection(g);if(v.imageName){const x=t[v.imageName];if(!x)continue;const B=x.displaySize;a=Math.max(a,B[0]),l=Math.max(l,B[1])}}return{maxImageWidth:a,maxImageHeight:l}}addTextSection(t,a){this.text+=t.text,this.sections.push(qi.forText(t.scale,t.fontStack||a,t.verticalAlign));const l=this.sections.length-1;for(let g=0;g<t.text.length;++g)this.sectionIndex.push(l)}addImageSection(t){const a=t.image?t.image.name:"";if(a.length===0)return void Rr("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(qi.forImage(a,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Rr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sa(i,t,a,l,g,v,x,B,F,I,L,P,N,V,Z){const $=sc.fromFeature(i,g);let ae;P===C.ah.vertical&&$.verticalizePunctuation();const{processBidirectionalText:ue,processStyledBidirectionalText:Be}=gs;if(ue&&$.sections.length===1){ae=[];const ie=ue($.toString(),Ef($,I,v,t,l,V));for(const ge of ie){const Ve=new sc;Ve.text=ge,Ve.sections=$.sections;for(let dt=0;dt<ge.length;dt++)Ve.sectionIndex.push(0);ae.push(Ve)}}else if(Be){ae=[];const ie=Be($.text,$.sectionIndex,Ef($,I,v,t,l,V));for(const ge of ie){const Ve=new sc;Ve.text=ge[0],Ve.sectionIndex=ge[1],Ve.sections=$.sections,ae.push(Ve)}}else ae=function(ie,ge){const Ve=[],dt=ie.text;let Ze=0;for(const Je of ge)Ve.push(ie.substring(Ze,Je)),Ze=Je;return Ze<dt.length&&Ve.push(ie.substring(Ze,dt.length)),Ve}($,Ef($,I,v,t,l,V));const de=[],j={positionedLines:de,text:$.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:P,iconsInText:!1,verticalizable:!1};return function(ie,ge,Ve,dt,Ze,Je,vt,ft,wt,at,Dt,rr){let er=0,jt=0,Sr=0,Ln=0;const ei=ft==="right"?1:ft==="left"?0:.5,Si=Hn/rr;let oa=0;for(const vn of Ze){vn.trim();const si=vn.getMaxScale(),oi={positionedGlyphs:[],lineOffset:0};ie.positionedLines[oa]=oi;const di=oi.positionedGlyphs;let Xi=0;if(!vn.length()){jt+=Je,++oa;continue}const xa=qd(dt,vn,Si);for(let Ai=0;Ai<vn.length();Ai++){const xn=vn.getSection(Ai),qn=vn.getSectionIndex(Ai),Xn=vn.getCharCode(Ai),pn=iy(wt,Dt,Xn);let wn;if(xn.imageName){if(ie.iconsInText=!0,xn.scale=xn.scale*Si,wn=sy(xn,pn,si,xa,dt),!wn)continue;Xi=Math.max(Xi,wn.imageOffset)}else if(wn=ay(xn,Xn,pn,xa,ge,Ve),!wn)continue;const{rect:Ts,metrics:Do,baselineOffset:eo}=wn;di.push({glyph:Xn,imageName:xn.imageName,x:er,y:jt+eo+gu,vertical:pn,scale:xn.scale,fontStack:xn.fontStack,sectionIndex:qn,metrics:Do,rect:Ts}),pn?(ie.verticalizable=!0,er+=(xn.imageName?Do.advance:Hn)*xn.scale+at):er+=Do.advance*xn.scale+at}di.length!==0&&(Sr=Math.max(er-at,Sr),_g(di,0,di.length-1,ei)),er=0,oi.lineOffset=Math.max(Xi,(si-1)*Hn);const Fn=Je*si+Xi;jt+=Fn,Ln=Math.max(Fn,Ln),++oa}const{horizontalAlign:va,verticalAlign:Fi}=Tf(vt);(function(vn,si,oi,di,Xi,xa,Fn,Ai,xn){const qn=(si-oi)*Xi;let Xn=0;Xn=xa!==Fn?-Ai*di-gu:-di*xn*Fn+.5*Fn;for(const pn of vn)for(const wn of pn.positionedGlyphs)wn.x+=qn,wn.y+=Xn})(ie.positionedLines,ei,va,Fi,Sr,Ln,Je,jt,Ze.length),ie.top+=-Fi*jt,ie.bottom=ie.top+jt,ie.left+=-va*Sr,ie.right=ie.left+Sr}(j,t,a,l,ae,x,B,F,P,I,N,Z),!function(ie){for(const ge of ie)if(ge.positionedGlyphs.length!==0)return!1;return!0}(de)&&j}const vh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yg={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ny={40:!0};function bA(i,t,a,l,g,v){if(t.imageName){const x=l[t.imageName];return x?x.displaySize[0]*t.scale*Hn/v+g:0}{const x=a[t.fontStack],B=x&&x[i];return B?B.metrics.advance*t.scale+g:0}}function xh(i,t,a,l){const g=Math.pow(i-t,2);return l?i<t?g/2:2*g:g+Math.abs(a)*a}function Kd(i,t,a){let l=0;return i===10&&(l-=1e4),a&&(l+=150),i!==40&&i!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function oc(i,t,a,l,g,v){let x=null,B=xh(t,a,g,v);for(const F of l){const I=xh(t-F.x,a,g,v)+F.badness;I<=B&&(x=F,B=I)}return{index:i,x:t,priorBreak:x,badness:B}}function Zd(i){return i?Zd(i.priorBreak).concat(i.index):[]}function Ef(i,t,a,l,g,v){if(!i)return[];const x=[],B=function(P,N,V,Z,$,ae){let ue=0;for(let Be=0;Be<P.length();Be++){const de=P.getSection(Be);ue+=bA(P.getCharCode(Be),de,Z,$,N,ae)}return ue/Math.max(1,Math.ceil(ue/V))}(i,t,a,l,g,v),F=i.text.indexOf("")>=0;let I=0;for(let P=0;P<i.length();P++){const N=i.getSection(P),V=i.getCharCode(P);if(vh[V]||(I+=bA(V,N,l,g,t,v)),P<i.length()-1){const Z=!((L=V)<11904)&&(!!Er["CJK Compatibility Forms"](L)||!!Er["CJK Compatibility"](L)||!!Er["CJK Strokes"](L)||!!Er["CJK Symbols and Punctuation"](L)||!!Er["Enclosed CJK Letters and Months"](L)||!!Er["Halfwidth and Fullwidth Forms"](L)||!!Er["Ideographic Description Characters"](L)||!!Er["Vertical Forms"](L)||ru.test(String.fromCodePoint(L)));(yg[V]||Z||N.imageName||P!==i.length()-2&&ny[i.getCharCode(P+1)])&&x.push(oc(P+1,I,B,x,Kd(V,i.getCharCode(P+1),Z&&F),!1))}}var L;return Zd(oc(i.length(),I,B,x,0,!0))}function Tf(i){let t=.5,a=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:t,verticalAlign:a}}function qd(i,t,a){const l=t.getMaxScale()*Hn,{maxImageWidth:g,maxImageHeight:v}=t.getMaxImageSize(i),x=Math.max(l,v*a);return{verticalLineContentWidth:Math.max(l,g*a),horizontalLineContentHeight:x}}function Sf(i){switch(i){case"top":return 0;case"center":return .5;default:return 1}}function iy(i,t,a){return!(i===C.ah.horizontal||!t&&!YA(a)||t&&(vh[a]||(l=a,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(l)))));var l}function ay(i,t,a,l,g,v){const x=v[i.fontStack],B=function(I,L,P,N){if(I&&I.rect)return I;const V=L[P.fontStack],Z=V&&V[N];return Z?{rect:null,metrics:Z.metrics}:null}(x&&x[t],g,i,t);if(B===null)return null;let F;if(a)F=l.verticalLineContentWidth-i.scale*Hn;else{const I=Sf(i.verticalAlign);F=(l.horizontalLineContentHeight-i.scale*Hn)*I}return{rect:B.rect,metrics:B.metrics,baselineOffset:F}}function sy(i,t,a,l,g){const v=g[i.imageName];if(!v)return null;const x=v.paddedRect,B=v.displaySize,F={width:B[0],height:B[1],left:Zi,top:-3,advance:t?B[1]:B[0]};let I;if(t)I=l.verticalLineContentWidth-B[1]*i.scale;else{const L=Sf(i.verticalAlign);I=(l.horizontalLineContentHeight-B[1]*i.scale)*L}return{rect:x,metrics:F,baselineOffset:I,imageOffset:(t?B[0]:B[1])*i.scale-Hn*a}}function _g(i,t,a,l){if(l===0)return;const g=i[a],v=(i[a].x+g.metrics.advance*g.scale)*l;for(let x=t;x<=a;x++)i[x].x-=v}function vg(i,t,a){const{horizontalAlign:l,verticalAlign:g}=Tf(a),v=t[0]-i.displaySize[0]*l,x=t[1]-i.displaySize[1]*g;return{image:i,top:x,bottom:x+i.displaySize[1],left:v,right:v+i.displaySize[0]}}function Ac(i){var t,a;let l=i.left,g=i.top,v=i.right-l,x=i.bottom-g;const B=(t=i.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",F=(a=i.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",I=(i.image.content[2]-i.image.content[0])/(i.image.content[3]-i.image.content[1]);if(F==="proportional"){if(B==="stretchOnly"&&v/x<I||B==="proportional"){const L=Math.ceil(x*I);l*=L/v,v=L}}else if(B==="proportional"&&F==="stretchOnly"&&I!==0&&v/x>I){const L=Math.ceil(v/I);g*=L/x,x=L}return{x1:l,y1:g,x2:l+v,y2:g+x}}function wh(i,t,a,l,g,v){const x=i.image;let B;if(x.content){const ae=x.content,ue=x.pixelRatio||1;B=[ae[0]/ue,ae[1]/ue,x.displaySize[0]-ae[2]/ue,x.displaySize[1]-ae[3]/ue]}const F=t.left*v,I=t.right*v;let L,P,N,V;a==="width"||a==="both"?(V=g[0]+F-l[3],P=g[0]+I+l[1]):(V=g[0]+(F+I-x.displaySize[0])/2,P=V+x.displaySize[0]);const Z=t.top*v,$=t.bottom*v;return a==="height"||a==="both"?(L=g[1]+Z-l[0],N=g[1]+$+l[2]):(L=g[1]+(Z+$-x.displaySize[1])/2,N=L+x.displaySize[1]),{image:x,top:L,right:P,bottom:N,left:V,collisionPadding:B}}const mu=255,Js=128,BA=mu*Js;function Xd(i,t){const{expression:a}=t;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new un(i+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:g}=a;let v=0;for(;v<l.length&&l[v]<=i;)v++;v=Math.max(0,v-1);let x=v;for(;x<l.length&&l[x]<i+1;)x++;x=Math.min(l.length-1,x);const B=l[v],F=l[x];return a.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:F,interpolationType:g}:{kind:"camera",minZoom:B,maxZoom:F,minSize:a.evaluate(new un(B)),maxSize:a.evaluate(new un(F)),interpolationType:g}}}function Ff(i,t,a){let l="never";const g=i.get(t);return g?l=g:i.get(a)&&(l="always"),l}const xg=Au.VectorTileFeature.types,Uf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bh(i,t,a,l,g,v,x,B,F,I,L,P,N){const V=B?Math.min(BA,Math.round(B[0])):0,Z=B?Math.min(BA,Math.round(B[1])):0;i.emplaceBack(t,a,Math.round(32*l),Math.round(32*g),v,x,(V<<1)+(F?1:0),Z,16*I,16*L,256*P,256*N)}function Mf(i,t,a){i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a),i.emplaceBack(t.x,t.y,a)}function Sn(i){for(const t of i.sections)if(Nl(t.text))return!0;return!1}class Bh{constructor(t){this.layoutVertexArray=new rt,this.indexArray=new lt,this.programConfigurations=t,this.segments=new _r,this.dynamicLayoutVertexArray=new it,this.opacityVertexArray=new et,this.hasVisibleVertices=!1,this.placedSymbolArray=new O}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,a,l,g){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,al.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,hu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Uf,!0),this.opacityVertexBuffer.itemSize=1),(l||g)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}It("SymbolBuffers",Bh);class Yd{constructor(t,a,l){this.layoutVertexArray=new t,this.layoutAttributes=a,this.indexArray=new l,this.segments=new _r,this.collisionVertexArray=new Bt}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,jd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}It("CollisionBuffers",Yd);class lc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(x=>x.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xd(this.zoom,a["text-size"]),this.iconSizeData=Xd(this.zoom,a["icon-size"]);const l=this.layers[0].layout,g=l.get("symbol-sort-key"),v=l.get("symbol-z-order");this.canOverlap=Ff(l,"text-overlap","text-allow-overlap")!=="never"||Ff(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(x=>C.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=t.sourceID}createArrays(){this.text=new Bh(new xs(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Bh(new xs(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Y,this.lineVertexArray=new ee,this.symbolInstances=new z,this.textAnchorOffsets=new oe}calculateGlyphDependencies(t,a,l,g,v){for(let x=0;x<t.length;x++)if(a[t.charCodeAt(x)]=!0,(l||g)&&v){const B=$s[t.charAt(x)];B&&(a[B.charCodeAt(0)]=!0)}}populate(t,a,l){const g=this.layers[0],v=g.layout,x=v.get("text-font"),B=v.get("text-field"),F=v.get("icon-image"),I=(B.value.kind!=="constant"||B.value.value instanceof Qi&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,P=v.get("symbol-sort-key");if(this.features=[],!I&&!L)return;const N=a.iconDependencies,V=a.glyphDependencies,Z=a.availableImages,$=new un(this.zoom);for(const{feature:ae,id:ue,index:Be,sourceLayerIndex:de}of t){const j=g._featureFilter.needGeometry,ie=$a(ae,j);if(!g._featureFilter.filter($,ie,l))continue;let ge,Ve;if(j||(ie.geometry=Ia(ae)),I){const Ze=g.getValueAndResolveTokens("text-field",ie,l,Z),Je=Qi.factory(Ze),vt=this.hasRTLText=this.hasRTLText||Sn(Je);(!vt||gs.getRTLTextPluginStatus()==="unavailable"||vt&&gs.isParsed())&&(ge=sl(Je,g,ie))}if(L){const Ze=g.getValueAndResolveTokens("icon-image",ie,l,Z);Ve=Ze instanceof Di?Ze:Di.fromString(Ze)}if(!ge&&!Ve)continue;const dt=this.sortFeaturesByKey?P.evaluate(ie,{},l):void 0;if(this.features.push({id:ue,text:ge,icon:Ve,index:Be,sourceLayerIndex:de,geometry:ie.geometry,properties:ae.properties,type:xg[ae.type],sortKey:dt}),Ve&&(N[Ve.name]=!0),ge){const Ze=x.evaluate(ie,{},l).join(","),Je=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(C.ah.vertical)>=0;for(const vt of ge.sections)if(vt.image)N[vt.image.name]=!0;else{const ft=ps(ge.toString()),wt=vt.fontStack||Ze,at=V[wt]=V[wt]||{};this.calculateGlyphDependencies(vt.text,at,Je,this.allowVerticalPlacement,ft)}}}v.get("symbol-placement")==="line"&&(this.features=function(ae){const ue={},Be={},de=[];let j=0;function ie(Ze){de.push(ae[Ze]),j++}function ge(Ze,Je,vt){const ft=Be[Ze];return delete Be[Ze],Be[Je]=ft,de[ft].geometry[0].pop(),de[ft].geometry[0]=de[ft].geometry[0].concat(vt[0]),ft}function Ve(Ze,Je,vt){const ft=ue[Je];return delete ue[Je],ue[Ze]=ft,de[ft].geometry[0].shift(),de[ft].geometry[0]=vt[0].concat(de[ft].geometry[0]),ft}function dt(Ze,Je,vt){const ft=vt?Je[0][Je[0].length-1]:Je[0][0];return`${Ze}:${ft.x}:${ft.y}`}for(let Ze=0;Ze<ae.length;Ze++){const Je=ae[Ze],vt=Je.geometry,ft=Je.text?Je.text.toString():null;if(!ft){ie(Ze);continue}const wt=dt(ft,vt),at=dt(ft,vt,!0);if(wt in Be&&at in ue&&Be[wt]!==ue[at]){const Dt=Ve(wt,at,vt),rr=ge(wt,at,de[Dt].geometry);delete ue[wt],delete Be[at],Be[dt(ft,de[rr].geometry,!0)]=rr,de[Dt].geometry=null}else wt in Be?ge(wt,at,vt):at in ue?Ve(wt,at,vt):(ie(Ze),ue[wt]=j-1,Be[at]=j-1)}return de.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ae,ue)=>ae.sortKey-ue.sortKey)}update(t,a,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,a,this.layers,l),this.icon.programConfigurations.updatePaintArrays(t,a,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,a){const l=this.lineVertexArray.length;if(t.segment!==void 0){let g=t.dist(a[t.segment+1]),v=t.dist(a[t.segment]);const x={};for(let B=t.segment+1;B<a.length;B++)x[B]={x:a[B].x,y:a[B].y,tileUnitDistanceFromAnchor:g},B<a.length-1&&(g+=a[B+1].dist(a[B]));for(let B=t.segment||0;B>=0;B--)x[B]={x:a[B].x,y:a[B].y,tileUnitDistanceFromAnchor:v},B>0&&(v+=a[B-1].dist(a[B]));for(let B=0;B<a.length;B++){const F=x[B];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,a,l,g,v,x,B,F,I,L,P,N){const V=t.indexArray,Z=t.layoutVertexArray,$=t.segments.prepareSegment(4*a.length,Z,V,this.canOverlap?x.sortKey:void 0),ae=this.glyphOffsetArray.length,ue=$.vertexLength,Be=this.allowVerticalPlacement&&B===C.ah.vertical?Math.PI/2:0,de=x.text&&x.text.sections;for(let j=0;j<a.length;j++){const{tl:ie,tr:ge,bl:Ve,br:dt,tex:Ze,pixelOffsetTL:Je,pixelOffsetBR:vt,minFontScaleX:ft,minFontScaleY:wt,glyphOffset:at,isSDF:Dt,sectionIndex:rr}=a[j],er=$.vertexLength,jt=at[1];bh(Z,F.x,F.y,ie.x,jt+ie.y,Ze.x,Ze.y,l,Dt,Je.x,Je.y,ft,wt),bh(Z,F.x,F.y,ge.x,jt+ge.y,Ze.x+Ze.w,Ze.y,l,Dt,vt.x,Je.y,ft,wt),bh(Z,F.x,F.y,Ve.x,jt+Ve.y,Ze.x,Ze.y+Ze.h,l,Dt,Je.x,vt.y,ft,wt),bh(Z,F.x,F.y,dt.x,jt+dt.y,Ze.x+Ze.w,Ze.y+Ze.h,l,Dt,vt.x,vt.y,ft,wt),Mf(t.dynamicLayoutVertexArray,F,Be),V.emplaceBack(er,er+2,er+1),V.emplaceBack(er+1,er+2,er+3),$.vertexLength+=4,$.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(at[0]),j!==a.length-1&&rr===a[j+1].sectionIndex||t.programConfigurations.populatePaintArrays(Z.length,x,x.index,{},N,de&&de[rr])}t.placedSymbolArray.emplaceBack(F.x,F.y,ae,this.glyphOffsetArray.length-ae,ue,I,L,F.segment,l?l[0]:0,l?l[1]:0,g[0],g[1],B,0,!1,0,P)}_addCollisionDebugVertex(t,a,l,g,v,x){return a.emplaceBack(0,0),t.emplaceBack(l.x,l.y,g,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(t,a,l,g,v,x,B){const F=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=F.vertexLength,L=v.layoutVertexArray,P=v.collisionVertexArray,N=B.anchorX,V=B.anchorY;this._addCollisionDebugVertex(L,P,x,N,V,new ne(t,a)),this._addCollisionDebugVertex(L,P,x,N,V,new ne(l,a)),this._addCollisionDebugVertex(L,P,x,N,V,new ne(l,g)),this._addCollisionDebugVertex(L,P,x,N,V,new ne(t,g)),F.vertexLength+=4;const Z=v.indexArray;Z.emplaceBack(I,I+1),Z.emplaceBack(I+1,I+2),Z.emplaceBack(I+2,I+3),Z.emplaceBack(I+3,I),F.primitiveLength+=4}addDebugCollisionBoxes(t,a,l,g){for(let v=t;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Yd(Et,Io.members,kt),this.iconCollisionBox=new Yd(Et,Io.members,kt);for(let t=0;t<this.symbolInstances.length;t++){const a=this.symbolInstances.get(t);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(t,a,l,g,v,x,B,F,I){const L={};for(let P=a;P<l;P++){const N=t.get(P);L.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.textFeatureIndex=N.featureIndex;break}for(let P=g;P<v;P++){const N=t.get(P);L.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.verticalTextFeatureIndex=N.featureIndex;break}for(let P=x;P<B;P++){const N=t.get(P);L.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.iconFeatureIndex=N.featureIndex;break}for(let P=F;P<I;P++){const N=t.get(P);L.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.verticalIconFeatureIndex=N.featureIndex;break}return L}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const l=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,a){const l=t.placedSymbolArray.get(a),g=l.vertexStartIndex+4*l.numGlyphs;for(let v=l.vertexStartIndex;v<g;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(t),l=Math.cos(t),g=[],v=[],x=[];for(let B=0;B<this.symbolInstances.length;++B){x.push(B);const F=this.symbolInstances.get(B);g.push(0|Math.round(a*F.anchorX+l*F.anchorY)),v.push(F.featureIndex)}return x.sort((B,F)=>g[B]-g[F]||v[F]-v[B]),x}addToSortKeyRanges(t,a){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===a?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const l=this.symbolInstances.get(a);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((g,v,x)=>{g>=0&&x.indexOf(g)===v&&this.addIndicesForPlacedSymbol(this.text,g)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let wg,bg;It("SymbolBucket",lc,{omit:["layers","collisionBoxArray","features","compareText"]}),lc.MAX_GLYPHS=65535,lc.addDynamicAttributes=Mf;var Wd={get paint(){return bg=bg||new Bi({"icon-opacity":new Jt(K.paint_symbol["icon-opacity"]),"icon-color":new Jt(K.paint_symbol["icon-color"]),"icon-halo-color":new Jt(K.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jt(K.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jt(K.paint_symbol["icon-halo-blur"]),"icon-translate":new Nt(K.paint_symbol["icon-translate"]),"icon-translate-anchor":new Nt(K.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jt(K.paint_symbol["text-opacity"]),"text-color":new Jt(K.paint_symbol["text-color"],{runtimeType:sr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Jt(K.paint_symbol["text-halo-color"]),"text-halo-width":new Jt(K.paint_symbol["text-halo-width"]),"text-halo-blur":new Jt(K.paint_symbol["text-halo-blur"]),"text-translate":new Nt(K.paint_symbol["text-translate"]),"text-translate-anchor":new Nt(K.paint_symbol["text-translate-anchor"])})},get layout(){return wg=wg||new Bi({"symbol-placement":new Nt(K.layout_symbol["symbol-placement"]),"symbol-spacing":new Nt(K.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Nt(K.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jt(K.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Nt(K.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Nt(K.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Nt(K.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Nt(K.layout_symbol["icon-ignore-placement"]),"icon-optional":new Nt(K.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Nt(K.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jt(K.layout_symbol["icon-size"]),"icon-text-fit":new Nt(K.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Nt(K.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jt(K.layout_symbol["icon-image"]),"icon-rotate":new Jt(K.layout_symbol["icon-rotate"]),"icon-padding":new Jt(K.layout_symbol["icon-padding"]),"icon-keep-upright":new Nt(K.layout_symbol["icon-keep-upright"]),"icon-offset":new Jt(K.layout_symbol["icon-offset"]),"icon-anchor":new Jt(K.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Nt(K.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Nt(K.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Nt(K.layout_symbol["text-rotation-alignment"]),"text-field":new Jt(K.layout_symbol["text-field"]),"text-font":new Jt(K.layout_symbol["text-font"]),"text-size":new Jt(K.layout_symbol["text-size"]),"text-max-width":new Jt(K.layout_symbol["text-max-width"]),"text-line-height":new Nt(K.layout_symbol["text-line-height"]),"text-letter-spacing":new Jt(K.layout_symbol["text-letter-spacing"]),"text-justify":new Jt(K.layout_symbol["text-justify"]),"text-radial-offset":new Jt(K.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Nt(K.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Jt(K.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Jt(K.layout_symbol["text-anchor"]),"text-max-angle":new Nt(K.layout_symbol["text-max-angle"]),"text-writing-mode":new Nt(K.layout_symbol["text-writing-mode"]),"text-rotate":new Jt(K.layout_symbol["text-rotate"]),"text-padding":new Nt(K.layout_symbol["text-padding"]),"text-keep-upright":new Nt(K.layout_symbol["text-keep-upright"]),"text-transform":new Jt(K.layout_symbol["text-transform"]),"text-offset":new Jt(K.layout_symbol["text-offset"]),"text-allow-overlap":new Nt(K.layout_symbol["text-allow-overlap"]),"text-overlap":new Nt(K.layout_symbol["text-overlap"]),"text-ignore-placement":new Nt(K.layout_symbol["text-ignore-placement"]),"text-optional":new Nt(K.layout_symbol["text-optional"])})}};class Ch{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Ur,this.defaultValue=t}evaluate(t){if(t.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(t.formattedSection))return a.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}It("FormatSectionOverride",Ch,{omit:["defaultValue"]});class CA extends Ci{constructor(t){super(t,Wd)}recalculate(t,a){if(super.recalculate(t,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const g=[];for(const v of l)g.indexOf(v)<0&&g.push(v);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,a,l,g){const v=this.layout.get(t).evaluate(a,{},l,g),x=this._unevaluatedLayout._values[t];return x.isDataDriven()||ho(x.value)||!v?v:function(B,F){return F.replace(/{([^{}]+)}/g,(I,L)=>B&&L in B?String(B[L]):"")}(a.properties,v)}createBucket(t){return new lc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Wd.paint.overridableProperties){if(!CA.hasPaintOverride(this.layout,t))continue;const a=this.paint.get(t),l=new Ch(a),g=new iA(l,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new $u("source",g):new ji("composite",g,a.value.zoomStops),this.paint._values[t]=new Fa(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(t,a,l){return!(!this.layout||a.isDataDriven()||l.isDataDriven())&&CA.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,a){const l=t.get("text-field"),g=Wd.paint.properties[a];let v=!1;const x=B=>{for(const F of B)if(g.overrides&&g.overrides.hasOverride(F))return void(v=!0)};if(l.value.kind==="constant"&&l.value.value instanceof Qi)x(l.value.value.sections);else if(l.value.kind==="source"){const B=I=>{v||(I instanceof Ds&&mn(I.value)===Kr?x(I.value.sections):I instanceof zA?x(I.sections):I.eachChild(B))},F=l.value;F._styleExpression&&B(F._styleExpression.expression)}return v}}let If;var Qf={get paint(){return If=If||new Bi({"background-color":new Nt(K.paint_background["background-color"]),"background-pattern":new nu(K.paint_background["background-pattern"]),"background-opacity":new Nt(K.paint_background["background-opacity"])})}};class $d extends Ci{constructor(t){super(t,Qf)}}let ll;var Qo={get paint(){return ll=ll||new Bi({"raster-opacity":new Nt(K.paint_raster["raster-opacity"]),"raster-hue-rotate":new Nt(K.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Nt(K.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Nt(K.paint_raster["raster-brightness-max"]),"raster-saturation":new Nt(K.paint_raster["raster-saturation"]),"raster-contrast":new Nt(K.paint_raster["raster-contrast"]),"raster-resampling":new Nt(K.paint_raster["raster-resampling"]),"raster-fade-duration":new Nt(K.paint_raster["raster-fade-duration"])})}};class Eh extends Ci{constructor(t){super(t,Qo)}}class oy extends Ci{constructor(t){super(t,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Bg{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Cg={once:!0},Df=63710088e-1;class EA{constructor(t,a){if(isNaN(t)||isNaN(a))throw new Error(`Invalid LngLat object: (${t}, ${a})`);if(this.lng=+t,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new EA(xt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const a=Math.PI/180,l=this.lat*a,g=t.lat*a,v=Math.sin(l)*Math.sin(g)+Math.cos(l)*Math.cos(g)*Math.cos((t.lng-this.lng)*a);return Df*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof EA)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new EA(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new EA(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Eg=2*Math.PI*Df;function Lf(i){return Eg*Math.cos(i*Math.PI/180)}function Jd(i){return(180+i)/360}function ep(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Tg(i,t){return i/Lf(t)}function Th(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function Pf(i,t){return i*Lf(Th(t))}class Sh{constructor(t,a,l=0){this.x=+t,this.y=+a,this.z=+l}static fromLngLat(t,a=0){const l=EA.convert(t);return new Sh(Jd(l.lng),ep(l.lat),Tg(a,l.lat))}toLngLat(){return new EA(360*this.x-180,Th(this.y))}toAltitude(){return Pf(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Eg*(t=Th(this.y),1/Math.cos(t*Math.PI/180));var t}}function Sg(i,t,a){var l=2*Math.PI*6378137/256/Math.pow(2,a);return[i*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class cc{constructor(t,a,l){if(!function(g,v,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||v<0||v>=Math.pow(2,g))}(t,a,l))throw new Error(`x=${a}, y=${l}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=a,this.y=l,this.key=Tr(0,t,t,a,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,a,l){const g=(x=this.y,B=this.z,F=Sg(256*(v=this.x),256*(x=Math.pow(2,B)-x-1),B),I=Sg(256*(v+1),256*(x+1),B),F[0]+","+F[1]+","+I[0]+","+I[1]);var v,x,B,F,I;const L=function(P,N,V){let Z,$="";for(let ae=P;ae>0;ae--)Z=1<<ae-1,$+=(N&Z?1:0)+(V&Z?2:0);return $}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,g)}isChildOf(t){const a=this.z-t.z;return a>0&&t.x===this.x>>a&&t.y===this.y>>a}getTilePoint(t){const a=Math.pow(2,this.z);return new ne((t.x*a-this.x)*Te,(t.y*a-this.y)*Te)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Fg{constructor(t,a){this.wrap=t,this.canonical=a,this.key=Tr(t,a.z,a.z,a.x,a.y)}}class Oa{constructor(t,a,l,g,v){if(this.terrainRttPosMatrix32f=null,t<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${l}`);this.overscaledZ=t,this.wrap=a,this.canonical=new cc(l,+g,+v),this.key=Tr(a,t,l,g,v)}clone(){return new Oa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-t;return t>this.canonical.z?new Oa(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oa(t,this.wrap,t,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(t,a){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-t;return t>this.canonical.z?Tr(this.wrap*+a,t,this.canonical.z,this.canonical.x,this.canonical.y):Tr(this.wrap*+a,t,t,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const a=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>a&&t.canonical.y===this.canonical.y>>a}children(t){if(this.overscaledZ>=t)return[new Oa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,l=2*this.canonical.x,g=2*this.canonical.y;return[new Oa(a,this.wrap,a,l,g),new Oa(a,this.wrap,a,l+1,g),new Oa(a,this.wrap,a,l,g+1),new Oa(a,this.wrap,a,l+1,g+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Oa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Oa(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Fg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Sh(t.x-this.wrap,t.y))}}function Tr(i,t,a,l,g){(i*=2)<0&&(i=-1*i-1);const v=1<<a;return(v*v*i+v*g+l).toString(36)+a.toString(36)+t.toString(36)}It("CanonicalTileID",cc),It("OverscaledTileID",Oa,{omit:["terrainRttPosMatrix32f"]});class Rf{constructor(t,a,l,g=1,v=1,x=1,B=0){if(this.uid=t,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void Rr(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const F=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=v,this.blueFactor=x,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<F;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(F,I)]=this.data[this._idx(F-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,F)]=this.data[this._idx(I,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<F;I++)for(let L=0;L<F;L++){const P=this.get(I,L);P>this.max&&(this.max=P),P<this.min&&(this.min=P)}}get(t,a){const l=new Uint8Array(this.data.buffer),g=4*this._idx(t,a);return this.unpack(l[g],l[g+1],l[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,a){if(t<-1||t>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(t+1)}unpack(t,a,l){return t*this.redFactor+a*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new Qa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,a,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let g=a*this.dim,v=a*this.dim+this.dim,x=l*this.dim,B=l*this.dim+this.dim;switch(a){case-1:g=v-1;break;case 1:v=g+1}switch(l){case-1:x=B-1;break;case 1:B=x+1}const F=-a*this.dim,I=-l*this.dim;for(let L=x;L<B;L++)for(let P=g;P<v;P++)this.data[this._idx(P,L)]=t.data[this._idx(P+F,L+I)]}}It("DEMData",Rf);class Fh{constructor(t){this._stringToNumber={},this._numberToString=[];for(let a=0;a<t.length;a++){const l=t[a];this._stringToNumber[l]=a,this._numberToString[a]=l}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Of{constructor(t,a,l,g,v){this.type="Feature",this._vectorTileFeature=t,t._z=a,t._x=l,t._y=g,this.properties=t.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(t[a]=this[a]);return t}}class tp{constructor(t,a){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new lA(Te,16,0),this.grid3D=new lA(Te,16,0),this.featureIndexArray=new fe,this.promoteId=a}insert(t,a,l,g,v,x){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,g,v);const F=x?this.grid3D:this.grid;for(let I=0;I<a.length;I++){const L=a[I],P=[1/0,1/0,-1/0,-1/0];for(let N=0;N<L.length;N++){const V=L[N];P[0]=Math.min(P[0],V.x),P[1]=Math.min(P[1],V.y),P[2]=Math.max(P[2],V.x),P[3]=Math.max(P[3],V.y)}P[0]<Te&&P[1]<Te&&P[2]>=0&&P[3]>=0&&F.insert(B,P[0],P[1],P[2],P[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Au.VectorTile(new fu(this.rawTileData)).layers,this.sourceLayerCoder=new Fh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,a,l,g){this.loadVTLayers();const v=t.params,x=Te/t.tileSize/t.scale,B=Rl(v.filter),F=t.queryGeometry,I=t.queryPadding*x,L=yu(F),P=this.grid.query(L.minX-I,L.minY-I,L.maxX+I,L.maxY+I),N=yu(t.cameraQueryGeometry),V=this.grid3D.query(N.minX-I,N.minY-I,N.maxX+I,N.maxY+I,(ae,ue,Be,de)=>function(j,ie,ge,Ve,dt){for(const Je of j)if(ie<=Je.x&&ge<=Je.y&&Ve>=Je.x&&dt>=Je.y)return!0;const Ze=[new ne(ie,ge),new ne(ie,dt),new ne(Ve,dt),new ne(Ve,ge)];if(j.length>2){for(const Je of Ze)if(kn(j,Je))return!0}for(let Je=0;Je<j.length-1;Je++)if(uf(j[Je],j[Je+1],Ze))return!0;return!1}(t.cameraQueryGeometry,ae-I,ue-I,Be+I,de+I));for(const ae of V)P.push(ae);P.sort(kf);const Z={};let $;for(let ae=0;ae<P.length;ae++){const ue=P[ae];if(ue===$)continue;$=ue;const Be=this.featureIndexArray.get(ue);let de=null;this.loadMatchingFeature(Z,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,B,v.layers,v.availableImages,a,l,g,(j,ie,ge)=>(de||(de=Ia(j)),ie.queryIntersectsFeature({queryGeometry:F,feature:j,featureState:ge,geometry:de,zoom:this.z,transform:t.transform,pixelsToTileUnits:x,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return Z}loadMatchingFeature(t,a,l,g,v,x,B,F,I,L,P){const N=this.bucketLayerIDs[a];if(x&&!N.some(ae=>x.has(ae)))return;const V=this.sourceLayerCoder.decode(l),Z=this.vtLayers[V].feature(g);if(v.needGeometry){const ae=$a(Z,!0);if(!v.filter(new un(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!v.filter(new un(this.tileID.overscaledZ),Z))return;const $=this.getId(Z,V);for(let ae=0;ae<N.length;ae++){const ue=N[ae];if(x&&!x.has(ue))continue;const Be=F[ue];if(!Be)continue;let de={};$&&L&&(de=L.getState(Be.sourceLayer||"_geojsonTileLayer",$));const j=Ft({},I[ue]);j.paint=zf(j.paint,Be.paint,Z,de,B),j.layout=zf(j.layout,Be.layout,Z,de,B);const ie=!P||P(Z,Be,de);if(!ie)continue;const ge=new Of(Z,this.z,this.x,this.y,$);ge.layer=j;let Ve=t[ue];Ve===void 0&&(Ve=t[ue]=[]),Ve.push({featureIndex:g,feature:ge,intersectionZ:ie})}}lookupSymbolFeatures(t,a,l,g,v,x,B,F){const I={};this.loadVTLayers();const L=Rl(v);for(const P of t)this.loadMatchingFeature(I,l,g,P,L,x,B,F,a);return I}hasLayer(t){for(const a of this.bucketLayerIDs)for(const l of a)if(t===l)return!0;return!1}getId(t,a){var l;let g=t.id;return this.promoteId&&(g=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((l=t.properties)===null||l===void 0)&&l.cluster)&&this.promoteId&&(g=Number(t.properties.cluster_id))),g}}function zf(i,t,a,l,g){return ur(i,(v,x)=>{const B=t instanceof fA?t.get(x):null;return B&&B.evaluate?B.evaluate(a,l,g):B})}function yu(i){let t=1/0,a=1/0,l=-1/0,g=-1/0;for(const v of i)t=Math.min(t,v.x),a=Math.min(a,v.y),l=Math.max(l,v.x),g=Math.max(g,v.y);return{minX:t,minY:a,maxX:l,maxY:g}}function kf(i,t){return t-i}function uc(i,t,a,l,g){const v=[];for(let x=0;x<i.length;x++){const B=i[x];let F;for(let I=0;I<B.length-1;I++){let L=B[I],P=B[I+1];L.x<t&&P.x<t||(L.x<t?L=new ne(t,L.y+(t-L.x)/(P.x-L.x)*(P.y-L.y))._round():P.x<t&&(P=new ne(t,L.y+(t-L.x)/(P.x-L.x)*(P.y-L.y))._round()),L.y<a&&P.y<a||(L.y<a?L=new ne(L.x+(a-L.y)/(P.y-L.y)*(P.x-L.x),a)._round():P.y<a&&(P=new ne(L.x+(a-L.y)/(P.y-L.y)*(P.x-L.x),a)._round()),L.x>=l&&P.x>=l||(L.x>=l?L=new ne(l,L.y+(l-L.x)/(P.x-L.x)*(P.y-L.y))._round():P.x>=l&&(P=new ne(l,L.y+(l-L.x)/(P.x-L.x)*(P.y-L.y))._round()),L.y>=g&&P.y>=g||(L.y>=g?L=new ne(L.x+(g-L.y)/(P.y-L.y)*(P.x-L.x),g)._round():P.y>=g&&(P=new ne(L.x+(g-L.y)/(P.y-L.y)*(P.x-L.x),g)._round()),F&&L.equals(F[F.length-1])||(F=[L],v.push(F)),F.push(P)))))}}return v}It("FeatureIndex",tp,{omit:["rawTileData","sourceLayerCoder"]});class TA extends ne{constructor(t,a,l,g){super(t,a),this.angle=l,g!==void 0&&(this.segment=g)}clone(){return new TA(this.x,this.y,this.angle,this.segment)}}function Ug(i,t,a,l,g){if(t.segment===void 0||a===0)return!0;let v=t,x=t.segment+1,B=0;for(;B>-a/2;){if(x--,x<0)return!1;B-=i[x].dist(v),v=i[x]}B+=i[x].dist(i[x+1]),x++;const F=[];let I=0;for(;B<a/2;){const L=i[x],P=i[x+1];if(!P)return!1;let N=i[x-1].angleTo(L)-L.angleTo(P);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:B,angleDelta:N}),I+=N;B-F[0].distance>l;)I-=F.shift().angleDelta;if(I>g)return!1;x++,B+=L.dist(P)}return!0}function Mg(i){let t=0;for(let a=0;a<i.length-1;a++)t+=i[a].dist(i[a+1]);return t}function rp(i,t,a){return i?.6*t*a:0}function np(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Hf(i,t,a,l,g,v){const x=rp(a,g,v),B=np(a,l)*v;let F=0;const I=Mg(i)/2;for(let L=0;L<i.length-1;L++){const P=i[L],N=i[L+1],V=P.dist(N);if(F+V>I){const Z=(I-F)/V,$=fa.number(P.x,N.x,Z),ae=fa.number(P.y,N.y,Z),ue=new TA($,ae,N.angleTo(P),L);return ue._round(),!x||Ug(i,ue,B,x,t)?ue:void 0}F+=V}}function _n(i,t,a,l,g,v,x,B,F){const I=rp(l,v,x),L=np(l,g),P=L*x,N=i[0].x===0||i[0].x===F||i[0].y===0||i[0].y===F;return t-P<t/4&&(t=P+t/4),Nf(i,N?t/2*B%t:(L/2+2*v)*x*B%t,t,I,a,P,N,!1,F)}function Nf(i,t,a,l,g,v,x,B,F){const I=v/2,L=Mg(i);let P=0,N=t-a,V=[];for(let Z=0;Z<i.length-1;Z++){const $=i[Z],ae=i[Z+1],ue=$.dist(ae),Be=ae.angleTo($);for(;N+a<P+ue;){N+=a;const de=(N-P)/ue,j=fa.number($.x,ae.x,de),ie=fa.number($.y,ae.y,de);if(j>=0&&j<F&&ie>=0&&ie<F&&N-I>=0&&N+I<=L){const ge=new TA(j,ie,Be,Z);ge._round(),l&&!Ug(i,ge,v,l,g)||V.push(ge)}}P+=ue}return B||V.length||x||(V=Nf(i,P/2,a,l,g,v,x,!0,F)),V}It("Anchor",TA);const fi=Zi;function Ig(i,t,a,l){const g=[],v=i.image,x=v.pixelRatio,B=v.paddedRect.w-2*fi,F=v.paddedRect.h-2*fi;let I={x1:i.left,y1:i.top,x2:i.right,y2:i.bottom};const L=v.stretchX||[[0,B]],P=v.stretchY||[[0,F]],N=(at,Dt)=>at+Dt[1]-Dt[0],V=L.reduce(N,0),Z=P.reduce(N,0),$=B-V,ae=F-Z;let ue=0,Be=V,de=0,j=Z,ie=0,ge=$,Ve=0,dt=ae;if(v.content&&l){const at=v.content,Dt=at[2]-at[0],rr=at[3]-at[1];(v.textFitWidth||v.textFitHeight)&&(I=Ac(i)),ue=_u(L,0,at[0]),de=_u(P,0,at[1]),Be=_u(L,at[0],at[2]),j=_u(P,at[1],at[3]),ie=at[0]-ue,Ve=at[1]-de,ge=Dt-Be,dt=rr-j}const Ze=I.x1,Je=I.y1,vt=I.x2-Ze,ft=I.y2-Je,wt=(at,Dt,rr,er)=>{const jt=hc(at.stretch-ue,Be,vt,Ze),Sr=Uh(at.fixed-ie,ge,at.stretch,V),Ln=hc(Dt.stretch-de,j,ft,Je),ei=Uh(Dt.fixed-Ve,dt,Dt.stretch,Z),Si=hc(rr.stretch-ue,Be,vt,Ze),oa=Uh(rr.fixed-ie,ge,rr.stretch,V),va=hc(er.stretch-de,j,ft,Je),Fi=Uh(er.fixed-Ve,dt,er.stretch,Z),vn=new ne(jt,Ln),si=new ne(Si,Ln),oi=new ne(Si,va),di=new ne(jt,va),Xi=new ne(Sr/x,ei/x),xa=new ne(oa/x,Fi/x),Fn=t*Math.PI/180;if(Fn){const qn=Math.sin(Fn),Xn=Math.cos(Fn),pn=[Xn,-qn,qn,Xn];vn._matMult(pn),si._matMult(pn),di._matMult(pn),oi._matMult(pn)}const Ai=at.stretch+at.fixed,xn=Dt.stretch+Dt.fixed;return{tl:vn,tr:si,bl:di,br:oi,tex:{x:v.paddedRect.x+fi+Ai,y:v.paddedRect.y+fi+xn,w:rr.stretch+rr.fixed-Ai,h:er.stretch+er.fixed-xn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Xi,pixelOffsetBR:xa,minFontScaleX:ge/x/vt,minFontScaleY:dt/x/ft,isSDF:a}};if(l&&(v.stretchX||v.stretchY)){const at=jf(L,$,V),Dt=jf(P,ae,Z);for(let rr=0;rr<at.length-1;rr++){const er=at[rr],jt=at[rr+1];for(let Sr=0;Sr<Dt.length-1;Sr++)g.push(wt(er,Dt[Sr],jt,Dt[Sr+1]))}}else g.push(wt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:F+1}));return g}function _u(i,t,a){let l=0;for(const g of i)l+=Math.max(t,Math.min(a,g[1]))-Math.max(t,Math.min(a,g[0]));return l}function jf(i,t,a){const l=[{fixed:-1,stretch:0}];for(const[g,v]of i){const x=l[l.length-1];l.push({fixed:g-x.stretch,stretch:x.stretch}),l.push({fixed:g-x.stretch,stretch:x.stretch+(v-g)})}return l.push({fixed:t+fi,stretch:a}),l}function hc(i,t,a,l){return i/t*a+l}function Uh(i,t,a,l){return i-t*a/l}class Mh{constructor(t,a,l,g,v,x,B,F,I,L){var P;if(this.boxStartIndex=t.length,I){let N=x.top,V=x.bottom;const Z=x.collisionPadding;Z&&(N-=Z[1],V+=Z[3]);let $=V-N;$>0&&($=Math.max(10,$),this.circleDiameter=$)}else{const N=!((P=x.image)===null||P===void 0)&&P.content&&(x.image.textFitWidth||x.image.textFitHeight)?Ac(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};N.y1=N.y1*B-F[0],N.y2=N.y2*B+F[2],N.x1=N.x1*B-F[3],N.x2=N.x2*B+F[1];const V=x.collisionPadding;if(V&&(N.x1-=V[0]*B,N.y1-=V[1]*B,N.x2+=V[2]*B,N.y2+=V[3]*B),L){const Z=new ne(N.x1,N.y1),$=new ne(N.x2,N.y1),ae=new ne(N.x1,N.y2),ue=new ne(N.x2,N.y2),Be=L*Math.PI/180;Z._rotate(Be),$._rotate(Be),ae._rotate(Be),ue._rotate(Be),N.x1=Math.min(Z.x,$.x,ae.x,ue.x),N.x2=Math.max(Z.x,$.x,ae.x,ue.x),N.y1=Math.min(Z.y,$.y,ae.y,ue.y),N.y2=Math.max(Z.y,$.y,ae.y,ue.y)}t.emplaceBack(a.x,a.y,N.x1,N.y1,N.x2,N.y2,l,g,v)}this.boxEndIndex=t.length}}class ip{constructor(t=[],a=(l,g)=>l<g?-1:l>g?1:0){if(this.data=t,this.length=this.data.length,this.compare=a,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:a,compare:l}=this,g=a[t];for(;t>0;){const v=t-1>>1,x=a[v];if(l(g,x)>=0)break;a[t]=x,t=v}a[t]=g}_down(t){const{data:a,compare:l}=this,g=this.length>>1,v=a[t];for(;t<g;){let x=1+(t<<1);const B=x+1;if(B<this.length&&l(a[B],a[x])<0&&(x=B),l(a[x],v)>=0)break;a[t]=a[x],t=x}a[t]=v}}function ap(i,t=1,a=!1){let l=1/0,g=1/0,v=-1/0,x=-1/0;const B=i[0];for(let V=0;V<B.length;V++){const Z=B[V];(!V||Z.x<l)&&(l=Z.x),(!V||Z.y<g)&&(g=Z.y),(!V||Z.x>v)&&(v=Z.x),(!V||Z.y>x)&&(x=Z.y)}const F=Math.min(v-l,x-g);let I=F/2;const L=new ip([],Ay);if(F===0)return new ne(l,g);for(let V=l;V<v;V+=F)for(let Z=g;Z<x;Z+=F)L.push(new fc(V+I,Z+I,I,i));let P=function(V){let Z=0,$=0,ae=0;const ue=V[0];for(let Be=0,de=ue.length,j=de-1;Be<de;j=Be++){const ie=ue[Be],ge=ue[j],Ve=ie.x*ge.y-ge.x*ie.y;$+=(ie.x+ge.x)*Ve,ae+=(ie.y+ge.y)*Ve,Z+=3*Ve}return new fc($/Z,ae/Z,0,V)}(i),N=L.length;for(;L.length;){const V=L.pop();(V.d>P.d||!P.d)&&(P=V,a&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,N)),V.max-P.d<=t||(I=V.h/2,L.push(new fc(V.p.x-I,V.p.y-I,I,i)),L.push(new fc(V.p.x+I,V.p.y-I,I,i)),L.push(new fc(V.p.x-I,V.p.y+I,I,i)),L.push(new fc(V.p.x+I,V.p.y+I,I,i)),N+=4)}return a&&(console.log(`num probes: ${N}`),console.log(`best distance: ${P.d}`)),P.p}function Ay(i,t){return t.max-i.max}function fc(i,t,a,l){this.p=new ne(i,t),this.h=a,this.d=function(g,v){let x=!1,B=1/0;for(let F=0;F<v.length;F++){const I=v[F];for(let L=0,P=I.length,N=P-1;L<P;N=L++){const V=I[L],Z=I[N];V.y>g.y!=Z.y>g.y&&g.x<(Z.x-V.x)*(g.y-V.y)/(Z.y-V.y)+V.x&&(x=!x),B=Math.min(B,yA(g,V,Z))}}return(x?1:-1)*Math.sqrt(B)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var zi;C.ay=void 0,(zi=C.ay||(C.ay={}))[zi.center=1]="center",zi[zi.left=2]="left",zi[zi.right=3]="right",zi[zi.top=4]="top",zi[zi.bottom=5]="bottom",zi[zi["top-left"]=6]="top-left",zi[zi["top-right"]=7]="top-right",zi[zi["bottom-left"]=8]="bottom-left",zi[zi["bottom-right"]=9]="bottom-right";const SA=7,sp=Number.POSITIVE_INFINITY;function Qg(i,t){return t[1]!==sp?function(a,l,g){let v=0,x=0;switch(l=Math.abs(l),g=Math.abs(g),a){case"top-right":case"top-left":case"top":x=g-SA;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+SA}switch(a){case"top-right":case"bottom-right":case"right":v=-l;break;case"top-left":case"bottom-left":case"left":v=l}return[v,x]}(i,t[0],t[1]):function(a,l){let g=0,v=0;l<0&&(l=0);const x=l/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-SA;break;case"bottom-right":case"bottom-left":v=-x+SA;break;case"bottom":v=-l+SA;break;case"top":v=l-SA}switch(a){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=l;break;case"right":g=-l}return[g,v]}(i,t[0])}function FA(i,t,a){var l;const g=i.layout,v=(l=g.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(t,{},a);if(v){const B=v.values,F=[];for(let I=0;I<B.length;I+=2){const L=F[I]=B[I],P=B[I+1].map(N=>N*Hn);L.startsWith("top")?P[1]-=SA:L.startsWith("bottom")&&(P[1]+=SA),F[I+1]=P}return new gi(F)}const x=g.get("text-variable-anchor");if(x){let B;B=i._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(t,{},a)*Hn,sp]:g.get("text-offset").evaluate(t,{},a).map(I=>I*Hn);const F=[];for(const I of x)F.push(I,Qg(I,B));return new gi(F)}return null}function Vf(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function op(i,t,a,l,g,v,x,B,F,I,L,P){let N=v.textMaxSize.evaluate(t,{});N===void 0&&(N=x);const V=i.layers[0].layout,Z=V.get("icon-offset").evaluate(t,{},L),$=Lg(a.horizontal),ae=x/24,ue=i.tilePixelRatio*ae,Be=i.tilePixelRatio*N/24,de=i.tilePixelRatio*B,j=i.tilePixelRatio*V.get("symbol-spacing"),ie=V.get("text-padding")*i.tilePixelRatio,ge=function(rr,er,jt,Sr=1){const Ln=rr.get("icon-padding").evaluate(er,{},jt),ei=Ln&&Ln.values;return[ei[0]*Sr,ei[1]*Sr,ei[2]*Sr,ei[3]*Sr]}(V,t,L,i.tilePixelRatio),Ve=V.get("text-max-angle")/180*Math.PI,dt=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point",Ze=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Je=V.get("symbol-placement"),vt=j/2,ft=V.get("icon-text-fit");let wt;l&&ft!=="none"&&(i.allowVerticalPlacement&&a.vertical&&(wt=wh(l,a.vertical,ft,V.get("icon-text-fit-padding"),Z,ae)),$&&(l=wh(l,$,ft,V.get("icon-text-fit-padding"),Z,ae)));const at=L?P.line.getGranularityForZoomLevel(L.z):1,Dt=(rr,er)=>{er.x<0||er.x>=Te||er.y<0||er.y>=Te||function(jt,Sr,Ln,ei,Si,oa,va,Fi,vn,si,oi,di,Xi,xa,Fn,Ai,xn,qn,Xn,pn,wn,Ts,Do,eo,Og){const UA=jt.addToLineVertexArray(Sr,Ln);let ul,xu,MA,IA,hp=0,wu=0,Kf=0,Qh=0,Zf=-1,fp=-1;const Ss={};let r=ys("");if(jt.allowVerticalPlacement&&ei.vertical){const br=Fi.layout.get("text-rotate").evaluate(wn,{},eo)+90;MA=new Mh(vn,Sr,si,oi,di,ei.vertical,Xi,xa,Fn,br),va&&(IA=new Mh(vn,Sr,si,oi,di,va,xn,qn,Fn,br))}if(Si){const br=Fi.layout.get("icon-rotate").evaluate(wn,{}),Pe=Fi.layout.get("icon-text-fit")!=="none",Ie=Ig(Si,br,Do,Pe),ke=va?Ig(va,br,Do,Pe):void 0;xu=new Mh(vn,Sr,si,oi,di,Si,xn,qn,!1,br),hp=4*Ie.length;const ht=jt.iconSizeData;let Ht=null;ht.kind==="source"?(Ht=[Js*Fi.layout.get("icon-size").evaluate(wn,{})],Ht[0]>BA&&Rr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${mu}. Reduce your "icon-size".`)):ht.kind==="composite"&&(Ht=[Js*Ts.compositeIconSizes[0].evaluate(wn,{},eo),Js*Ts.compositeIconSizes[1].evaluate(wn,{},eo)],(Ht[0]>BA||Ht[1]>BA)&&Rr(`${jt.layerIds[0]}: Value for "icon-size" is >= ${mu}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Ie,Ht,pn,Xn,wn,C.ah.none,Sr,UA.lineStartIndex,UA.lineLength,-1,eo),Zf=jt.icon.placedSymbolArray.length-1,ke&&(wu=4*ke.length,jt.addSymbols(jt.icon,ke,Ht,pn,Xn,wn,C.ah.vertical,Sr,UA.lineStartIndex,UA.lineLength,-1,eo),fp=jt.icon.placedSymbolArray.length-1)}const s=Object.keys(ei.horizontal);for(const br of s){const Pe=ei.horizontal[br];if(!ul){r=ys(Pe.text);const ke=Fi.layout.get("text-rotate").evaluate(wn,{},eo);ul=new Mh(vn,Sr,si,oi,di,Pe,Xi,xa,Fn,ke)}const Ie=Pe.positionedLines.length===1;if(Kf+=Dg(jt,Sr,Pe,oa,Fi,Fn,wn,Ai,UA,ei.vertical?C.ah.horizontal:C.ah.horizontalOnly,Ie?s:[br],Ss,Zf,Ts,eo),Ie)break}ei.vertical&&(Qh+=Dg(jt,Sr,ei.vertical,oa,Fi,Fn,wn,Ai,UA,C.ah.vertical,["vertical"],Ss,fp,Ts,eo));const h=ul?ul.boxStartIndex:jt.collisionBoxArray.length,y=ul?ul.boxEndIndex:jt.collisionBoxArray.length,E=MA?MA.boxStartIndex:jt.collisionBoxArray.length,M=MA?MA.boxEndIndex:jt.collisionBoxArray.length,G=xu?xu.boxStartIndex:jt.collisionBoxArray.length,re=xu?xu.boxEndIndex:jt.collisionBoxArray.length,xe=IA?IA.boxStartIndex:jt.collisionBoxArray.length,Ke=IA?IA.boxEndIndex:jt.collisionBoxArray.length;let At=-1;const gt=(br,Pe)=>br&&br.circleDiameter?Math.max(br.circleDiameter,Pe):Pe;At=gt(ul,At),At=gt(MA,At),At=gt(xu,At),At=gt(IA,At);const Xe=At>-1?1:0;Xe&&(At*=Og/Hn),jt.glyphOffsetArray.length>=lc.MAX_GLYPHS&&Rr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),wn.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,wn.sortKey);const $e=FA(Fi,wn,eo),[dr,cr]=function(br,Pe){const Ie=br.length,ke=Pe==null?void 0:Pe.values;if((ke==null?void 0:ke.length)>0)for(let ht=0;ht<ke.length;ht+=2){const Ht=ke[ht+1];br.emplaceBack(C.ay[ke[ht]],Ht[0],Ht[1])}return[Ie,br.length]}(jt.textAnchorOffsets,$e);jt.symbolInstances.emplaceBack(Sr.x,Sr.y,Ss.right>=0?Ss.right:-1,Ss.center>=0?Ss.center:-1,Ss.left>=0?Ss.left:-1,Ss.vertical||-1,Zf,fp,r,h,y,E,M,G,re,xe,Ke,si,Kf,Qh,hp,wu,Xe,0,Xi,At,dr,cr)}(i,er,rr,a,l,g,wt,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,ue,[ie,ie,ie,ie],dt,F,de,ge,Ze,Z,t,v,I,L,x)};if(Je==="line")for(const rr of uc(t.geometry,0,0,Te,Te)){const er=vA(rr,at),jt=_n(er,j,Ve,a.vertical||$,l,24,Be,i.overscaling,Te);for(const Sr of jt)$&&Ap(i,$.text,vt,Sr)||Dt(er,Sr)}else if(Je==="line-center"){for(const rr of t.geometry)if(rr.length>1){const er=vA(rr,at),jt=Hf(er,Ve,a.vertical||$,l,24,Be);jt&&Dt(er,jt)}}else if(t.type==="Polygon")for(const rr of Hs(t.geometry,0)){const er=ap(rr,16);Dt(vA(rr[0],at,!0),new TA(er.x,er.y,0))}else if(t.type==="LineString")for(const rr of t.geometry){const er=vA(rr,at);Dt(er,new TA(er[0].x,er[0].y,0))}else if(t.type==="Point")for(const rr of t.geometry)for(const er of rr)Dt([er],new TA(er.x,er.y,0))}function Dg(i,t,a,l,g,v,x,B,F,I,L,P,N,V,Z){const $=function(Be,de,j,ie,ge,Ve,dt,Ze){const Je=ie.layout.get("text-rotate").evaluate(Ve,{})*Math.PI/180,vt=[];for(const ft of de.positionedLines)for(const wt of ft.positionedGlyphs){if(!wt.rect)continue;const at=wt.rect||{};let Dt=pu+1,rr=!0,er=1,jt=0;const Sr=(ge||Ze)&&wt.vertical,Ln=wt.metrics.advance*wt.scale/2;if(Ze&&de.verticalizable&&(jt=ft.lineOffset/2-(wt.imageName?-(Hn-wt.metrics.width*wt.scale)/2:(wt.scale-1)*Hn)),wt.imageName){const qn=dt[wt.imageName];rr=qn.sdf,er=qn.pixelRatio,Dt=Zi/er}const ei=ge?[wt.x+Ln,wt.y]:[0,0];let Si=ge?[0,0]:[wt.x+Ln+j[0],wt.y+j[1]-jt],oa=[0,0];Sr&&(oa=Si,Si=[0,0]);const va=wt.metrics.isDoubleResolution?2:1,Fi=(wt.metrics.left-Dt)*wt.scale-Ln+Si[0],vn=(-wt.metrics.top-Dt)*wt.scale+Si[1],si=Fi+at.w/va*wt.scale/er,oi=vn+at.h/va*wt.scale/er,di=new ne(Fi,vn),Xi=new ne(si,vn),xa=new ne(Fi,oi),Fn=new ne(si,oi);if(Sr){const qn=new ne(-Ln,Ln-gu),Xn=-Math.PI/2,pn=Hn/2-Ln,wn=new ne(5-gu-pn,-(wt.imageName?pn:0)),Ts=new ne(...oa);di._rotateAround(Xn,qn)._add(wn)._add(Ts),Xi._rotateAround(Xn,qn)._add(wn)._add(Ts),xa._rotateAround(Xn,qn)._add(wn)._add(Ts),Fn._rotateAround(Xn,qn)._add(wn)._add(Ts)}if(Je){const qn=Math.sin(Je),Xn=Math.cos(Je),pn=[Xn,-qn,qn,Xn];di._matMult(pn),Xi._matMult(pn),xa._matMult(pn),Fn._matMult(pn)}const Ai=new ne(0,0),xn=new ne(0,0);vt.push({tl:di,tr:Xi,bl:xa,br:Fn,tex:at,writingMode:de.writingMode,glyphOffset:ei,sectionIndex:wt.sectionIndex,isSDF:rr,pixelOffsetTL:Ai,pixelOffsetBR:xn,minFontScaleX:0,minFontScaleY:0})}return vt}(0,a,B,g,v,x,l,i.allowVerticalPlacement),ae=i.textSizeData;let ue=null;ae.kind==="source"?(ue=[Js*g.layout.get("text-size").evaluate(x,{})],ue[0]>BA&&Rr(`${i.layerIds[0]}: Value for "text-size" is >= ${mu}. Reduce your "text-size".`)):ae.kind==="composite"&&(ue=[Js*V.compositeTextSizes[0].evaluate(x,{},Z),Js*V.compositeTextSizes[1].evaluate(x,{},Z)],(ue[0]>BA||ue[1]>BA)&&Rr(`${i.layerIds[0]}: Value for "text-size" is >= ${mu}. Reduce your "text-size".`)),i.addSymbols(i.text,$,ue,B,v,x,I,t,F.lineStartIndex,F.lineLength,N,Z);for(const Be of L)P[Be]=i.text.placedSymbolArray.length-1;return 4*$.length}function Lg(i){for(const t in i)return i[t];return null}function Ap(i,t,a,l){const g=i.compareText;if(t in g){const v=g[t];for(let x=v.length-1;x>=0;x--)if(l.dist(v[x])<a)return!0}else g[t]=[];return g[t].push(l),!1}const Pg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class ts{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,l]=new Uint8Array(t,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=l>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const v=Pg[15&l];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(t,2,1),[B]=new Uint32Array(t,4,1);return new ts(B,x,v,t)}constructor(t,a=64,l=Float64Array,g){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=l,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=Pg.indexOf(this.ArrayType),x=2*t*this.ArrayType.BYTES_PER_ELEMENT,B=t*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-B%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${l}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+x+B+F),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=t)}add(t,a){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=t,this.coords[this._pos++]=a,l}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Ih(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,a,l,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:B}=this,F=[0,v.length-1,0],I=[];for(;F.length;){const L=F.pop()||0,P=F.pop()||0,N=F.pop()||0;if(P-N<=B){for(let ae=N;ae<=P;ae++){const ue=x[2*ae],Be=x[2*ae+1];ue>=t&&ue<=l&&Be>=a&&Be<=g&&I.push(v[ae])}continue}const V=N+P>>1,Z=x[2*V],$=x[2*V+1];Z>=t&&Z<=l&&$>=a&&$<=g&&I.push(v[V]),(L===0?t<=Z:a<=$)&&(F.push(N),F.push(V-1),F.push(1-L)),(L===0?l>=Z:g>=$)&&(F.push(V+1),F.push(P),F.push(1-L))}return I}within(t,a,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:x}=this,B=[0,g.length-1,0],F=[],I=l*l;for(;B.length;){const L=B.pop()||0,P=B.pop()||0,N=B.pop()||0;if(P-N<=x){for(let ae=N;ae<=P;ae++)rs(v[2*ae],v[2*ae+1],t,a)<=I&&F.push(g[ae]);continue}const V=N+P>>1,Z=v[2*V],$=v[2*V+1];rs(Z,$,t,a)<=I&&F.push(g[V]),(L===0?t-l<=Z:a-l<=$)&&(B.push(N),B.push(V-1),B.push(1-L)),(L===0?t+l>=Z:a+l>=$)&&(B.push(V+1),B.push(P),B.push(1-L))}return F}}function Ih(i,t,a,l,g,v){if(g-l<=a)return;const x=l+g>>1;lp(i,t,x,l,g,v),Ih(i,t,a,l,x-1,1-v),Ih(i,t,a,x+1,g,1-v)}function lp(i,t,a,l,g,v){for(;g>l;){if(g-l>600){const I=g-l+1,L=a-l+1,P=Math.log(I),N=.5*Math.exp(2*P/3),V=.5*Math.sqrt(P*N*(I-N)/I)*(L-I/2<0?-1:1);lp(i,t,a,Math.max(l,Math.floor(a-L*N/I+V)),Math.min(g,Math.floor(a+(I-L)*N/I+V)),v)}const x=t[2*a+v];let B=l,F=g;for(vu(i,t,l,a),t[2*g+v]>x&&vu(i,t,l,g);B<F;){for(vu(i,t,B,F),B++,F--;t[2*B+v]<x;)B++;for(;t[2*F+v]>x;)F--}t[2*l+v]===x?vu(i,t,l,F):(F++,vu(i,t,F,g)),F<=a&&(l=F+1),a<=F&&(g=F-1)}}function vu(i,t,a,l){dc(i,a,l),dc(t,2*a,2*l),dc(t,2*a+1,2*l+1)}function dc(i,t,a){const l=i[t];i[t]=i[a],i[a]=l}function rs(i,t,a,l){const g=i-a,v=t-l;return g*g+v*v}var Gf;C.ck=void 0,(Gf=C.ck||(C.ck={})).create="create",Gf.load="load",Gf.fullLoad="fullLoad";let pc=null,ns=[];const cp=1e3/60,up="loadTime",cl="fullLoadTime",Rg={mark(i){performance.mark(i)},frame(i){const t=i;pc!=null&&ns.push(t-pc),pc=t},clearMetrics(){pc=null,ns=[],performance.clearMeasures(up),performance.clearMeasures(cl);for(const i in C.ck)performance.clearMarks(C.ck[i])},getPerformanceMetrics(){performance.measure(up,C.ck.create,C.ck.load),performance.measure(cl,C.ck.create,C.ck.fullLoad);const i=performance.getEntriesByName(up)[0].duration,t=performance.getEntriesByName(cl)[0].duration,a=ns.length,l=1/(ns.reduce((v,x)=>v+x,0)/a/1e3),g=ns.filter(v=>v>cp).reduce((v,x)=>v+(x-cp)/cp,0);return{loadTime:i,fullLoadTime:t,fps:l,percentDroppedFrames:g/(a+g)*100,totalFrames:a}}};C.$=Sh,C.A=st,C.B=fa,C.C=un,C.D=Nt,C.E=te,C.F=vd,C.G=function(i){if(bt==null){const t=i.navigator?i.navigator.userAgent:null;bt=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return bt},C.H=class{constructor(i,t){this.target=i,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Bg(()=>this.process()),this.subscription=vr(this.target,"message",a=>this.receive(a),!1),this.globalScope=Lt(self)?i:window}registerMessageHandler(i,t){this.messageHandlers[i]=t}sendAsync(i,t){return new Promise((a,l)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?vr(t.signal,"abort",()=>{v==null||v.unsubscribe(),delete this.resolveRejects[g];const F={id:g,type:"<cancel>",origin:location.origin,targetMapId:i.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)},Cg):null;this.resolveRejects[g]={resolve:F=>{v==null||v.unsubscribe(),a(F)},reject:F=>{v==null||v.unsubscribe(),l(F)}};const x=[],B=Object.assign(Object.assign({},i),{id:g,sourceMapId:this.mapId,origin:location.origin,data:uA(i.data,x)});this.target.postMessage(B,{transfer:x})})}receive(i){const t=i.data,a=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[a];const l=this.abortControllers[a];return delete this.abortControllers[a],void(l&&l.abort())}if(Lt(self)||t.mustQueue)return this.tasks[a]=t,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,t)}}process(){if(this.taskQueue.length===0)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){return A(this,void 0,void 0,function*(){if(t.type==="<response>"){const g=this.resolveRejects[i];return delete this.resolveRejects[i],g?void(t.error?g.reject(Ks(t.error)):g.resolve(Ks(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(i,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=Ks(t.data),l=new AbortController;this.abortControllers[i]=l;try{const g=yield this.messageHandlers[t.type](t.sourceMapId,a,l);this.completeTask(i,null,g)}catch(g){this.completeTask(i,g)}})}completeTask(i,t,a){const l=[];delete this.abortControllers[i];const g={id:i,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?uA(t):null,data:uA(a,l)};this.target.postMessage(g,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},C.I=_h,C.J=Yr,C.K=function(){var i=new st(16);return st!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},C.L=function(i,t,a){var l,g,v,x,B,F,I,L,P,N,V,Z,$=a[0],ae=a[1],ue=a[2];return t===i?(i[12]=t[0]*$+t[4]*ae+t[8]*ue+t[12],i[13]=t[1]*$+t[5]*ae+t[9]*ue+t[13],i[14]=t[2]*$+t[6]*ae+t[10]*ue+t[14],i[15]=t[3]*$+t[7]*ae+t[11]*ue+t[15]):(g=t[1],v=t[2],x=t[3],B=t[4],F=t[5],I=t[6],L=t[7],P=t[8],N=t[9],V=t[10],Z=t[11],i[0]=l=t[0],i[1]=g,i[2]=v,i[3]=x,i[4]=B,i[5]=F,i[6]=I,i[7]=L,i[8]=P,i[9]=N,i[10]=V,i[11]=Z,i[12]=l*$+B*ae+P*ue+t[12],i[13]=g*$+F*ae+N*ue+t[13],i[14]=v*$+I*ae+V*ue+t[14],i[15]=x*$+L*ae+Z*ue+t[15]),i},C.M=function(i,t,a){var l=a[0],g=a[1],v=a[2];return i[0]=t[0]*l,i[1]=t[1]*l,i[2]=t[2]*l,i[3]=t[3]*l,i[4]=t[4]*g,i[5]=t[5]*g,i[6]=t[6]*g,i[7]=t[7]*g,i[8]=t[8]*v,i[9]=t[9]*v,i[10]=t[10]*v,i[11]=t[11]*v,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},C.N=function(i,t,a){var l=t[0],g=t[1],v=t[2],x=t[3],B=t[4],F=t[5],I=t[6],L=t[7],P=t[8],N=t[9],V=t[10],Z=t[11],$=t[12],ae=t[13],ue=t[14],Be=t[15],de=a[0],j=a[1],ie=a[2],ge=a[3];return i[0]=de*l+j*B+ie*P+ge*$,i[1]=de*g+j*F+ie*N+ge*ae,i[2]=de*v+j*I+ie*V+ge*ue,i[3]=de*x+j*L+ie*Z+ge*Be,i[4]=(de=a[4])*l+(j=a[5])*B+(ie=a[6])*P+(ge=a[7])*$,i[5]=de*g+j*F+ie*N+ge*ae,i[6]=de*v+j*I+ie*V+ge*ue,i[7]=de*x+j*L+ie*Z+ge*Be,i[8]=(de=a[8])*l+(j=a[9])*B+(ie=a[10])*P+(ge=a[11])*$,i[9]=de*g+j*F+ie*N+ge*ae,i[10]=de*v+j*I+ie*V+ge*ue,i[11]=de*x+j*L+ie*Z+ge*Be,i[12]=(de=a[12])*l+(j=a[13])*B+(ie=a[14])*P+(ge=a[15])*$,i[13]=de*g+j*F+ie*N+ge*ae,i[14]=de*v+j*I+ie*V+ge*ue,i[15]=de*x+j*L+ie*Z+ge*Be,i},C.O=function(i,t){const a={};for(let l=0;l<t.length;l++){const g=t[l];g in i&&(a[g]=i[g])}return a},C.P=ne,C.Q=EA,C.R=Qa,C.S=ep,C.T=hA,C.U=Jd,C.V=De,C.W=Re,C.X=Ar,C.Y=Oa,C.Z=Te,C._=A,C.a=Nn,C.a$=function(i,t,a){var l=Math.sin(a),g=Math.cos(a),v=t[4],x=t[5],B=t[6],F=t[7],I=t[8],L=t[9],P=t[10],N=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=v*g+I*l,i[5]=x*g+L*l,i[6]=B*g+P*l,i[7]=F*g+N*l,i[8]=I*g-v*l,i[9]=L*g-x*l,i[10]=P*g-B*l,i[11]=N*g-F*l,i},C.a0=25,C.a1=cc,C.a2=i=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(a=>{t.onloadstart=()=>{a(t)};for(const l of i){const g=window.document.createElement("source");as(l)||(t.crossOrigin="Anonymous"),g.src=l,t.appendChild(g)}})},C.a3=qe,C.a4=function(){return Pt++},C.a5=U,C.a6=lc,C.a7=Rl,C.a8=$a,C.a9=Of,C.aA=Vf,C.aB=Tf,C.aC=ts,C.aD=lr,C.aE=mh,C.aF=me,C.aG=_r,C.aH=lt,C.aI=function(i){return Math.pow(2,i)},C.aJ=85.051129,C.aK=Tg,C.aL=xt,C.aM=Gr,C.aN=Pf,C.aO=function(i,t,a){return i[0]=t[0]*a,i[1]=t[1]*a,i[2]=t[2]*a,i},C.aP=function(i,t,a){return i[0]=t[0]+a[0],i[1]=t[1]+a[1],i[2]=t[2]+a[2],i},C.aQ=function(i){var t=new st(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},C.aR=function(i,t,a){return i[0]=t[0]*a[0],i[1]=t[1]*a[1],i[2]=t[2]*a[2],i[3]=t[3]*a[3],i},C.aS=function(i,t,a){return i[0]=t[0]-a[0],i[1]=t[1]-a[1],i[2]=t[2]-a[2],i},C.aT=function(i,t){var a=t[0],l=t[1],g=t[2],v=a*a+l*l+g*g;return v>0&&(v=1/Math.sqrt(v)),i[0]=t[0]*v,i[1]=t[1]*v,i[2]=t[2]*v,i},C.aU=function(i,t,a){var l=t[0],g=t[1],v=t[2],x=a[0],B=a[1],F=a[2];return i[0]=g*F-v*B,i[1]=v*x-l*F,i[2]=l*B-g*x,i},C.aV=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]},C.aW=Fg,C.aX=Tr,C.aY=function(i,t,a,l,g){var v,x=1/Math.tan(t/2);return i[0]=x/a,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,g!=null&&g!==1/0?(i[10]=(g+l)*(v=1/(l-g)),i[14]=2*g*l*v):(i[10]=-1,i[14]=-2*l),i},C.aZ=function(i){var t=new st(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},C.a_=function(i,t,a){var l=Math.sin(a),g=Math.cos(a),v=t[0],x=t[1],B=t[2],F=t[3],I=t[4],L=t[5],P=t[6],N=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=v*g+I*l,i[1]=x*g+L*l,i[2]=B*g+P*l,i[3]=F*g+N*l,i[4]=I*g-v*l,i[5]=L*g-x*l,i[6]=P*g-B*l,i[7]=N*g-F*l,i},C.aa=function(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,l,g,v)=>{const x=g||v;return t[l]=!x||x.toLowerCase(),""}),t["max-age"]){const a=parseInt(t["max-age"],10);isNaN(a)?delete t["max-age"]:t["max-age"]=a}return t},C.ab=function(i){return Math.log(i)/Math.LN2},C.ac=function(i){var t=i[0],a=i[1];return t*t+a*a},C.ad=function(i){return i*Math.PI/180},C.ae=_t,C.af=function(i,t){const a=[];for(const l in i)l in t||a.push(l);return a},C.ag=function(i,t){let a=0,l=0;if(i.kind==="constant")l=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:g,minZoom:v,maxZoom:x}=i,B=g?_t(Li.interpolationFactor(g,t,v,x),0,1):0;i.kind==="camera"?l=fa.number(i.minSize,i.maxSize,B):a=B}return{uSizeT:a,uSize:l}},C.ai=function(i,{uSize:t,uSizeT:a},{lowerSize:l,upperSize:g}){return i.kind==="source"?l/Js:i.kind==="composite"?fa.number(l/Js,g/Js,a):t},C.aj=function(i,t){var a=t[0],l=t[1],g=t[2],v=t[3],x=t[4],B=t[5],F=t[6],I=t[7],L=t[8],P=t[9],N=t[10],V=t[11],Z=t[12],$=t[13],ae=t[14],ue=t[15],Be=a*B-l*x,de=a*F-g*x,j=a*I-v*x,ie=l*F-g*B,ge=l*I-v*B,Ve=g*I-v*F,dt=L*$-P*Z,Ze=L*ae-N*Z,Je=L*ue-V*Z,vt=P*ae-N*$,ft=P*ue-V*$,wt=N*ue-V*ae,at=Be*wt-de*ft+j*vt+ie*Je-ge*Ze+Ve*dt;return at?(i[0]=(B*wt-F*ft+I*vt)*(at=1/at),i[1]=(g*ft-l*wt-v*vt)*at,i[2]=($*Ve-ae*ge+ue*ie)*at,i[3]=(N*ge-P*Ve-V*ie)*at,i[4]=(F*Je-x*wt-I*Ze)*at,i[5]=(a*wt-g*Je+v*Ze)*at,i[6]=(ae*j-Z*Ve-ue*de)*at,i[7]=(L*Ve-N*j+V*de)*at,i[8]=(x*ft-B*Je+I*dt)*at,i[9]=(l*Je-a*ft-v*dt)*at,i[10]=(Z*ge-$*j+ue*Be)*at,i[11]=(P*j-L*ge-V*Be)*at,i[12]=(B*Ze-x*vt-F*dt)*at,i[13]=(a*vt-l*Ze+g*dt)*at,i[14]=($*de-Z*ie-ae*Be)*at,i[15]=(L*ie-P*de+N*Be)*at,i):null},C.ak=Vt,C.al=function(i){return Math.hypot(i[0],i[1])},C.am=function(i){return i[0]=0,i[1]=0,i},C.an=function(i,t,a){return i[0]=t[0]*a,i[1]=t[1]*a,i},C.ao=Mf,C.ap=Zt,C.aq=function(i,t,a,l){const g=t.y-i.y,v=t.x-i.x,x=l.y-a.y,B=l.x-a.x,F=x*v-B*g;if(F===0)return null;const I=(B*(i.y-a.y)-x*(i.x-a.x))/F;return new ne(i.x+I*v,i.y+I*g)},C.ar=uc,C.as=Yl,C.at=ot,C.au=function(i){let t=1/0,a=1/0,l=-1/0,g=-1/0;for(const v of i)t=Math.min(t,v.x),a=Math.min(a,v.y),l=Math.max(l,v.x),g=Math.max(g,v.y);return[t,a,l,g]},C.av=Hn,C.aw=ut,C.ax=function(i,t,a,l,g=!1){if(!a[0]&&!a[1])return[0,0];const v=g?l==="map"?-i.bearingInRadians:0:l==="viewport"?i.bearingInRadians:0;if(v){const x=Math.sin(v),B=Math.cos(v);a=[a[0]*B-a[1]*x,a[0]*x+a[1]*B]}return[g?a[0]:ut(t,a[0],i.zoom),g?a[1]:ut(t,a[1],i.zoom)]},C.az=Ff,C.b=xr,C.b$=i=>i.type==="symbol",C.b0=function(){const i=new Float32Array(16);return ot(i),i},C.b1=function(){const i=new Float64Array(16);return ot(i),i},C.b2=function(){return new Float64Array(16)},C.b3=function(i,t,a){const l=new Float64Array(4);return function(g,v,x,B){var F=.5*Math.PI/180;v*=F,x*=F,B*=F;var I=Math.sin(v),L=Math.cos(v),P=Math.sin(x),N=Math.cos(x),V=Math.sin(B),Z=Math.cos(B);g[0]=I*N*Z-L*P*V,g[1]=L*P*Z+I*N*V,g[2]=L*N*V-I*P*Z,g[3]=L*N*Z+I*P*V}(l,i,t-90,a),l},C.b4=function(i,t,a,l){var g,v,x,B,F,I=t[0],L=t[1],P=t[2],N=t[3],V=a[0],Z=a[1],$=a[2],ae=a[3];return(v=I*V+L*Z+P*$+N*ae)<0&&(v=-v,V=-V,Z=-Z,$=-$,ae=-ae),1-v>Ne?(g=Math.acos(v),x=Math.sin(g),B=Math.sin((1-l)*g)/x,F=Math.sin(l*g)/x):(B=1-l,F=l),i[0]=B*I+F*V,i[1]=B*L+F*Z,i[2]=B*P+F*$,i[3]=B*N+F*ae,i},C.b5=function(i){const t=new Float64Array(9);var a,l,g,v,x,B,F,I,L,P,N,V,Z,$,ae,ue,Be,de;P=(g=(l=i)[0])*(F=g+g),N=(v=l[1])*F,Z=(x=l[2])*F,$=x*(I=v+v),ue=(B=l[3])*F,Be=B*I,de=B*(L=x+x),(a=t)[0]=1-(V=v*I)-(ae=x*L),a[3]=N-de,a[6]=Z+Be,a[1]=N+de,a[4]=1-P-ae,a[7]=$-ue,a[2]=Z-Be,a[5]=$+ue,a[8]=1-P-V;const j=Gr(-Math.asin(_t(t[2],-1,1)));let ie,ge;return Math.hypot(t[5],t[8])<.001?(ie=0,ge=-Gr(Math.atan2(t[3],t[4]))):(ie=Gr(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),ge=Gr(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:ie,pitch:j+90,bearing:ge}},C.b6=function(i,t){return i.roll==t.roll&&i.pitch==t.pitch&&i.bearing==t.bearing},C.b7=Qr,C.b8=Wa,C.b9=rc,C.bA=function(i,t){if(!i)return[{command:"setStyle",args:[t]}];let a=[];try{if(!Ce(i.version,t.version))return[{command:"setStyle",args:[t]}];Ce(i.center,t.center)||a.push({command:"setCenter",args:[t.center]}),Ce(i.centerAltitude,t.centerAltitude)||a.push({command:"setCenterAltitude",args:[t.centerAltitude]}),Ce(i.zoom,t.zoom)||a.push({command:"setZoom",args:[t.zoom]}),Ce(i.bearing,t.bearing)||a.push({command:"setBearing",args:[t.bearing]}),Ce(i.pitch,t.pitch)||a.push({command:"setPitch",args:[t.pitch]}),Ce(i.roll,t.roll)||a.push({command:"setRoll",args:[t.roll]}),Ce(i.sprite,t.sprite)||a.push({command:"setSprite",args:[t.sprite]}),Ce(i.glyphs,t.glyphs)||a.push({command:"setGlyphs",args:[t.glyphs]}),Ce(i.transition,t.transition)||a.push({command:"setTransition",args:[t.transition]}),Ce(i.light,t.light)||a.push({command:"setLight",args:[t.light]}),Ce(i.terrain,t.terrain)||a.push({command:"setTerrain",args:[t.terrain]}),Ce(i.sky,t.sky)||a.push({command:"setSky",args:[t.sky]}),Ce(i.projection,t.projection)||a.push({command:"setProjection",args:[t.projection]});const l={},g=[];(function(x,B,F,I){let L;for(L in B=B||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(B,L)||tt(L,F,I));for(L in B)Object.prototype.hasOwnProperty.call(B,L)&&(Object.prototype.hasOwnProperty.call(x,L)?Ce(x[L],B[L])||(x[L].type==="geojson"&&B[L].type==="geojson"&&Oe(x,B,L)?ze(F,{command:"setGeoJSONSourceData",args:[L,B[L].data]}):We(L,B,F,I)):Qe(L,B,F))})(i.sources,t.sources,g,l);const v=[];i.layers&&i.layers.forEach(x=>{"source"in x&&l[x.source]?a.push({command:"removeLayer",args:[x.id]}):v.push(x)}),a=a.concat(g),function(x,B,F){B=B||[];const I=(x=x||[]).map(St),L=B.map(St),P=x.reduce(Mt,{}),N=B.reduce(Mt,{}),V=I.slice(),Z=Object.create(null);let $,ae,ue,Be,de;for(let j=0,ie=0;j<I.length;j++)$=I[j],Object.prototype.hasOwnProperty.call(N,$)?ie++:(ze(F,{command:"removeLayer",args:[$]}),V.splice(V.indexOf($,ie),1));for(let j=0,ie=0;j<L.length;j++)$=L[L.length-1-j],V[V.length-1-j]!==$&&(Object.prototype.hasOwnProperty.call(P,$)?(ze(F,{command:"removeLayer",args:[$]}),V.splice(V.lastIndexOf($,V.length-ie),1)):ie++,Be=V[V.length-j],ze(F,{command:"addLayer",args:[N[$],Be]}),V.splice(V.length-j,0,$),Z[$]=!0);for(let j=0;j<L.length;j++)if($=L[j],ae=P[$],ue=N[$],!Z[$]&&!Ce(ae,ue))if(Ce(ae.source,ue.source)&&Ce(ae["source-layer"],ue["source-layer"])&&Ce(ae.type,ue.type)){for(de in ct(ae.layout,ue.layout,F,$,null,"setLayoutProperty"),ct(ae.paint,ue.paint,F,$,null,"setPaintProperty"),Ce(ae.filter,ue.filter)||ze(F,{command:"setFilter",args:[$,ue.filter]}),Ce(ae.minzoom,ue.minzoom)&&Ce(ae.maxzoom,ue.maxzoom)||ze(F,{command:"setLayerZoomRange",args:[$,ue.minzoom,ue.maxzoom]}),ae)Object.prototype.hasOwnProperty.call(ae,de)&&de!=="layout"&&de!=="paint"&&de!=="filter"&&de!=="metadata"&&de!=="minzoom"&&de!=="maxzoom"&&(de.indexOf("paint.")===0?ct(ae[de],ue[de],F,$,de.slice(6),"setPaintProperty"):Ce(ae[de],ue[de])||ze(F,{command:"setLayerProperty",args:[$,de,ue[de]]}));for(de in ue)Object.prototype.hasOwnProperty.call(ue,de)&&!Object.prototype.hasOwnProperty.call(ae,de)&&de!=="layout"&&de!=="paint"&&de!=="filter"&&de!=="metadata"&&de!=="minzoom"&&de!=="maxzoom"&&(de.indexOf("paint.")===0?ct(ae[de],ue[de],F,$,de.slice(6),"setPaintProperty"):Ce(ae[de],ue[de])||ze(F,{command:"setLayerProperty",args:[$,de,ue[de]]}))}else ze(F,{command:"removeLayer",args:[$]}),Be=V[V.lastIndexOf($)+1],ze(F,{command:"addLayer",args:[ue,Be]})}(v,t.layers,a)}catch(l){console.warn("Unable to compute style diff:",l),a=[{command:"setStyle",args:[t]}]}return a},C.bB=function(i){const t=[],a=i.id;return a===void 0&&t.push({message:`layers.${a}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${a}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),t},C.bC=function i(t,a){if(Array.isArray(t)){if(!Array.isArray(a)||t.length!==a.length)return!1;for(let l=0;l<t.length;l++)if(!i(t[l],a[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&a!==null){if(typeof a!="object"||Object.keys(t).length!==Object.keys(a).length)return!1;for(const l in t)if(!i(t[l],a[l]))return!1;return!0}return t===a},C.bD=ur,C.bE=ir,C.bF=class extends Ya{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},C.bG=vs,C.bH=class extends Ya{constructor(i,t){super(i,t),this.current=pA}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},C.bI=ia,C.bJ=class extends Ya{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},C.bK=class extends Ya{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},C.bL=mt,C.bM=function(i,t){var a=Math.sin(t),l=Math.cos(t);return i[0]=l,i[1]=a,i[2]=0,i[3]=-a,i[4]=l,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},C.bN=function(i,t,a){var l=t[0],g=t[1],v=t[2];return i[0]=l*a[0]+g*a[3]+v*a[6],i[1]=l*a[1]+g*a[4]+v*a[7],i[2]=l*a[2]+g*a[5]+v*a[8],i},C.bO=function(i,t,a,l,g,v,x){var B=1/(t-a),F=1/(l-g),I=1/(v-x);return i[0]=-2*B,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*F,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*I,i[11]=0,i[12]=(t+a)*B,i[13]=(g+l)*F,i[14]=(x+v)*I,i[15]=1,i},C.bP=class extends oh{},C.bQ=ai,C.bR=class extends dA{},C.bS=Ti,C.bT=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},C.bU=Ei,C.bV=function(i,t,a){var l=t[0],g=t[1],v=t[2],x=a[3]*l+a[7]*g+a[11]*v+a[15];return i[0]=(a[0]*l+a[4]*g+a[8]*v+a[12])/(x=x||1),i[1]=(a[1]*l+a[5]*g+a[9]*v+a[13])/x,i[2]=(a[2]*l+a[6]*g+a[10]*v+a[14])/x,i},C.bW=class extends ms{},C.bX=class extends _{},C.bY=function(i,t){return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]&&i[6]===t[6]&&i[7]===t[7]&&i[8]===t[8]&&i[9]===t[9]&&i[10]===t[10]&&i[11]===t[11]&&i[12]===t[12]&&i[13]===t[13]&&i[14]===t[14]&&i[15]===t[15]},C.bZ=function(i,t){var a=i[0],l=i[1],g=i[2],v=i[3],x=i[4],B=i[5],F=i[6],I=i[7],L=i[8],P=i[9],N=i[10],V=i[11],Z=i[12],$=i[13],ae=i[14],ue=i[15],Be=t[0],de=t[1],j=t[2],ie=t[3],ge=t[4],Ve=t[5],dt=t[6],Ze=t[7],Je=t[8],vt=t[9],ft=t[10],wt=t[11],at=t[12],Dt=t[13],rr=t[14],er=t[15];return Math.abs(a-Be)<=Ne*Math.max(1,Math.abs(a),Math.abs(Be))&&Math.abs(l-de)<=Ne*Math.max(1,Math.abs(l),Math.abs(de))&&Math.abs(g-j)<=Ne*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(v-ie)<=Ne*Math.max(1,Math.abs(v),Math.abs(ie))&&Math.abs(x-ge)<=Ne*Math.max(1,Math.abs(x),Math.abs(ge))&&Math.abs(B-Ve)<=Ne*Math.max(1,Math.abs(B),Math.abs(Ve))&&Math.abs(F-dt)<=Ne*Math.max(1,Math.abs(F),Math.abs(dt))&&Math.abs(I-Ze)<=Ne*Math.max(1,Math.abs(I),Math.abs(Ze))&&Math.abs(L-Je)<=Ne*Math.max(1,Math.abs(L),Math.abs(Je))&&Math.abs(P-vt)<=Ne*Math.max(1,Math.abs(P),Math.abs(vt))&&Math.abs(N-ft)<=Ne*Math.max(1,Math.abs(N),Math.abs(ft))&&Math.abs(V-wt)<=Ne*Math.max(1,Math.abs(V),Math.abs(wt))&&Math.abs(Z-at)<=Ne*Math.max(1,Math.abs(Z),Math.abs(at))&&Math.abs($-Dt)<=Ne*Math.max(1,Math.abs($),Math.abs(Dt))&&Math.abs(ae-rr)<=Ne*Math.max(1,Math.abs(ae),Math.abs(rr))&&Math.abs(ue-er)<=Ne*Math.max(1,Math.abs(ue),Math.abs(er))},C.b_=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},C.ba=_A,C.bb=Ja,C.bc=Rt,C.bd=he,C.be=$n,C.bf=function(i,t,a,l,g){return Rt(l,g,_t((i-t)/(a-t),0,1))},C.bg=Ct,C.bh=function(){return new Float64Array(4)},C.bi=function(){return new Float64Array(3)},C.bj=function(i,t,a,l){var g=[],v=[];return g[0]=t[0]-a[0],g[1]=t[1]-a[1],g[2]=t[2]-a[2],v[0]=g[0]*Math.cos(l)-g[1]*Math.sin(l),v[1]=g[0]*Math.sin(l)+g[1]*Math.cos(l),v[2]=g[2],i[0]=v[0]+a[0],i[1]=v[1]+a[1],i[2]=v[2]+a[2],i},C.bk=function(i,t,a,l){var g=[],v=[];return g[0]=t[0]-a[0],g[1]=t[1]-a[1],g[2]=t[2]-a[2],v[0]=g[0],v[1]=g[1]*Math.cos(l)-g[2]*Math.sin(l),v[2]=g[1]*Math.sin(l)+g[2]*Math.cos(l),i[0]=v[0]+a[0],i[1]=v[1]+a[1],i[2]=v[2]+a[2],i},C.bl=function(i,t,a,l){var g=[],v=[];return g[0]=t[0]-a[0],g[1]=t[1]-a[1],g[2]=t[2]-a[2],v[0]=g[2]*Math.sin(l)+g[0]*Math.cos(l),v[1]=g[1],v[2]=g[2]*Math.cos(l)-g[0]*Math.sin(l),i[0]=v[0]+a[0],i[1]=v[1]+a[1],i[2]=v[2]+a[2],i},C.bm=function(i,t,a){var l=Math.sin(a),g=Math.cos(a),v=t[0],x=t[1],B=t[2],F=t[3],I=t[8],L=t[9],P=t[10],N=t[11];return t!==i&&(i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=v*g-I*l,i[1]=x*g-L*l,i[2]=B*g-P*l,i[3]=F*g-N*l,i[8]=v*l+I*g,i[9]=x*l+L*g,i[10]=B*l+P*g,i[11]=F*l+N*g,i},C.bn=function(i,t){const a=Ct(i,360),l=Ct(t,360),g=l-a,v=l>a?g-360:g+360;return Math.abs(g)<Math.abs(v)?g:v},C.bo=function(i){return i[0]=0,i[1]=0,i[2]=0,i},C.bp=function(i,t,a,l){const g=Math.sqrt(i*i+t*t),v=Math.sqrt(a*a+l*l);i/=g,t/=g,a/=v,l/=v;const x=Math.acos(i*a+t*l);return-t*a+i*l>0?x:-x},C.bq=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]},C.br=Df,C.bs=function(i,t){const a=Ct(i,2*Math.PI),l=Ct(t,2*Math.PI);return Math.min(Math.abs(a-l),Math.abs(a-l+2*Math.PI),Math.abs(a-l-2*Math.PI))},C.bt=function(i){return Math.hypot(i[0],i[1],i[2])},C.bu=function(){const i={},t=K.$version;for(const a in K.$root){const l=K.$root[a];if(l.required){let g=null;g=a==="version"?t:l.type==="array"?[]:{},g!=null&&(i[a]=g)}}return i},C.bv=th,C.bw=Ii,C.bx=function(i){i=i.slice();const t=Object.create(null);for(let a=0;a<i.length;a++)t[i[a].id]=i[a];for(let a=0;a<i.length;a++)"ref"in i[a]&&(i[a]=Fe(i[a],t[i[a].ref]));return i},C.by=function(i){if(i.type==="custom")return new oy(i);switch(i.type){case"background":return new $d(i);case"circle":return new eg(i);case"fill":return new Pd(i);case"fill-extrusion":return new lu(i);case"heatmap":return new rg(i);case"hillshade":return new ig(i);case"line":return new dn(i);case"raster":return new Eh(i);case"symbol":return new CA(i)}},C.bz=yr,C.c=or,C.c0=i=>i.type==="circle",C.c1=i=>i.type==="heatmap",C.c2=i=>i.type==="line",C.c3=i=>i.type==="fill",C.c4=i=>i.type==="fill-extrusion",C.c5=i=>i.type==="hillshade",C.c6=i=>i.type==="raster",C.c7=i=>i.type==="background",C.c8=i=>i.type==="custom",C.c9=nt,C.cA=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},C.cB=function(i,t,a,l,g){return A(this,void 0,void 0,function*(){if(Re())try{return yield Ar(i,t,a,l,g)}catch{}return function(v,x,B,F,I){const L=v.width,P=v.height;jr&&Rn||(jr=new OffscreenCanvas(L,P),Rn=jr.getContext("2d",{willReadFrequently:!0})),jr.width=L,jr.height=P,Rn.drawImage(v,0,0,L,P);const N=Rn.getImageData(x,B,F,I);return Rn.clearRect(0,0,L,P),N.data}(i,t,a,l,g)})},C.cC=Rf,C.cD=D,C.cE=q,C.cF=Bs,C.cG=Cf,C.cH=Vs,C.cI=gs,C.ca=function(i,t,a){const l=Wt(t.x-a.x,t.y-a.y),g=Wt(i.x-a.x,i.y-a.y);var v,x;return Gr(Math.atan2(l[0]*g[1]-l[1]*g[0],(v=l)[0]*(x=g)[0]+v[1]*x[1]))},C.cb=yt,C.cc=function(i,t){return en[t]&&(i instanceof MouseEvent||i instanceof WheelEvent)},C.cd=function(i,t){return cn[t]&&"touches"in i},C.ce=function(i){return cn[i]||en[i]},C.cf=function(i,t,a){var l=t[0],g=t[1];return i[0]=a[0]*l+a[4]*g+a[12],i[1]=a[1]*l+a[5]*g+a[13],i},C.cg=function(i,t){const{x:a,y:l}=Sh.fromLngLat(t);return!(i<0||i>25||l<0||l>=1||a<0||a>=1)},C.ch=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},C.ci=class extends Gi{},C.cj=Rg,C.cl=function(i){return i.message===fr},C.cm=Un,C.cn=function(i,t){Nn.REGISTERED_PROTOCOLS[i]=t},C.co=function(i){delete Nn.REGISTERED_PROTOCOLS[i]},C.cp=function(i,t){const a={};for(let g=0;g<i.length;g++){const v=t&&t[i[g].id]||Gs(i[g]);t&&(t[i[g].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(i[g])}const l=[];for(const g in a)l.push(a[g]);return l},C.cq=It,C.cr=Fh,C.cs=tp,C.ct=Gd,C.cu=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=Te/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0],a=t.layout,l=t._unevaluatedLayout._values,g={layoutIconSize:l["icon-size"].possiblyEvaluate(new un(i.bucket.zoom+1),i.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new un(i.bucket.zoom+1),i.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new un(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:L}=i.bucket.textSizeData;g.compositeTextSizes=[l["text-size"].possiblyEvaluate(new un(I),i.canonical),l["text-size"].possiblyEvaluate(new un(L),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:L}=i.bucket.iconSizeData;g.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new un(I),i.canonical),l["icon-size"].possiblyEvaluate(new un(L),i.canonical)]}const v=a.get("text-line-height")*Hn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",B=a.get("text-keep-upright"),F=a.get("text-size");for(const I of i.bucket.features){const L=a.get("text-font").evaluate(I,{},i.canonical).join(","),P=F.evaluate(I,{},i.canonical),N=g.layoutTextSize.evaluate(I,{},i.canonical),V=g.layoutIconSize.evaluate(I,{},i.canonical),Z={horizontal:{},vertical:void 0},$=I.text;let ae,ue=[0,0];if($){const j=$.toString(),ie=a.get("text-letter-spacing").evaluate(I,{},i.canonical)*Hn,ge=tu(j)?ie:0,Ve=a.get("text-anchor").evaluate(I,{},i.canonical),dt=FA(t,I,i.canonical);if(!dt){const ft=a.get("text-radial-offset").evaluate(I,{},i.canonical);ue=ft?Qg(Ve,[ft*Hn,sp]):a.get("text-offset").evaluate(I,{},i.canonical).map(wt=>wt*Hn)}let Ze=x?"center":a.get("text-justify").evaluate(I,{},i.canonical);const Je=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(I,{},i.canonical)*Hn:1/0,vt=()=>{i.bucket.allowVerticalPlacement&&ps(j)&&(Z.vertical=sa($,i.glyphMap,i.glyphPositions,i.imagePositions,L,Je,v,Ve,"left",ge,ue,C.ah.vertical,!0,N,P))};if(!x&&dt){const ft=new Set;if(Ze==="auto")for(let at=0;at<dt.values.length;at+=2)ft.add(Vf(dt.values[at]));else ft.add(Ze);let wt=!1;for(const at of ft)if(!Z.horizontal[at])if(wt)Z.horizontal[at]=Z.horizontal[0];else{const Dt=sa($,i.glyphMap,i.glyphPositions,i.imagePositions,L,Je,v,"center",at,ge,ue,C.ah.horizontal,!1,N,P);Dt&&(Z.horizontal[at]=Dt,wt=Dt.positionedLines.length===1)}vt()}else{Ze==="auto"&&(Ze=Vf(Ve));const ft=sa($,i.glyphMap,i.glyphPositions,i.imagePositions,L,Je,v,Ve,Ze,ge,ue,C.ah.horizontal,!1,N,P);ft&&(Z.horizontal[Ze]=ft),vt(),ps(j)&&x&&B&&(Z.vertical=sa($,i.glyphMap,i.glyphPositions,i.imagePositions,L,Je,v,Ve,Ze,ge,ue,C.ah.vertical,!1,N,P))}}let Be=!1;if(I.icon&&I.icon.name){const j=i.imageMap[I.icon.name];j&&(ae=vg(i.imagePositions[I.icon.name],a.get("icon-offset").evaluate(I,{},i.canonical),a.get("icon-anchor").evaluate(I,{},i.canonical)),Be=!!j.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Be:i.bucket.sdfIcons!==Be&&Rr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(j.pixelRatio!==i.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const de=Lg(Z.horizontal)||Z.vertical;i.bucket.iconsInText=!!de&&de.iconsInText,(de||ae)&&op(i.bucket,I,Z,ae,i.imageMap,g,N,V,ue,Be,i.canonical,i.subdivisionGranularity)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},C.cv=Nd,C.cw=ou,C.cx=xA,C.cy=Au,C.cz=fu,C.d=as,C.e=Ft,C.f=i=>A(void 0,void 0,void 0,function*(){if(i.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(i)],{type:"image/png"});try{return createImageBitmap(t)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),C.g=Nr,C.h=i=>new Promise((t,a)=>{const l=new Image;l.onload=()=>{t(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=Xr})},l.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(i)],{type:"image/png"});l.src=i.byteLength?URL.createObjectURL(g):Xr}),C.i=Lt,C.j=(i,t)=>jn(Ft(i,{type:"json"}),t),C.k=J,C.l=Le,C.m=jn,C.n=(i,t)=>jn(Ft(i,{type:"arrayBuffer"}),t),C.o=function(i){return new fu(i).readFields(ol,[])},C.p=ac,C.q=dh,C.r=Bi,C.s=vr,C.t=Jc,C.u=Er,C.v=K,C.w=Rr,C.x=In,C.y=ds,C.z=function([i,t,a]){return t+=90,t*=Math.PI/180,a*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(a),y:i*Math.sin(t)*Math.sin(a),z:i*Math.cos(a)}}}),w("worker",["./shared"],function(C){class A{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,te){for(const pe of J){this._layerConfigs[pe.id]=pe;const Fe=this._layers[pe.id]=C.by(pe);Fe._featureFilter=C.a7(Fe.filter),this.keyCache[pe.id]&&delete this.keyCache[pe.id]}for(const pe of te)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const K=C.cp(Object.values(this._layerConfigs),this.keyCache);for(const pe of K){const Fe=pe.map(Oe=>this._layers[Oe.id]),Ce=Fe[0];if(Ce.visibility==="none")continue;const ze=Ce.source||"";let Qe=this.familiesBySource[ze];Qe||(Qe=this.familiesBySource[ze]={});const tt=Ce.sourceLayer||"_geojsonTileLayer";let We=Qe[tt];We||(We=Qe[tt]=[]),We.push(Fe)}}}class D{constructor(J){const te={},K=[];for(const ze in J){const Qe=J[ze],tt=te[ze]={};for(const We in Qe){const Oe=Qe[+We];if(!Oe||Oe.bitmap.width===0||Oe.bitmap.height===0)continue;const ct={x:0,y:0,w:Oe.bitmap.width+2,h:Oe.bitmap.height+2};K.push(ct),tt[We]={rect:ct,metrics:Oe.metrics}}}const{w:pe,h:Fe}=C.p(K),Ce=new C.q({width:pe||1,height:Fe||1});for(const ze in J){const Qe=J[ze];for(const tt in Qe){const We=Qe[+tt];if(!We||We.bitmap.width===0||We.bitmap.height===0)continue;const Oe=te[ze][tt].rect;C.q.copy(We.bitmap,Ce,{x:0,y:0},{x:Oe.x+1,y:Oe.y+1},We.bitmap)}}this.image=Ce,this.positions=te}}C.cq("GlyphAtlas",D);class R{constructor(J){this.tileID=new C.Y(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[]}parse(J,te,K,pe,Fe){return C._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new C.a5;const Ce=new C.cr(Object.keys(J.layers).sort()),ze=new C.cs(this.tileID,this.promoteId);ze.bucketLayerIDs=[];const Qe={},tt={featureIndex:ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K,subdivisionGranularity:Fe},We=te.familiesBySource[this.source];for(const Tt in We){const sr=J.layers[Tt];if(!sr)continue;sr.version===1&&C.w(`Vector tile source "${this.source}" layer "${Tt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bn=Ce.encode(Tt),Wi=[];for(let $t=0;$t<sr.length;$t++){const On=sr.feature($t),Kr=ze.getId(On,Tt);Wi.push({feature:On,id:Kr,index:$t,sourceLayerIndex:Bn})}for(const $t of We[Tt]){const On=$t[0];On.source!==this.source&&C.w(`layer.source = ${On.source} does not equal this.source = ${this.source}`),On.minzoom&&this.zoom<Math.floor(On.minzoom)||On.maxzoom&&this.zoom>=On.maxzoom||On.visibility!=="none"&&(k($t,this.zoom,K),(Qe[On.id]=On.createBucket({index:ze.bucketLayerIDs.length,layers:$t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bn,sourceID:this.source})).populate(Wi,tt,this.tileID.canonical),ze.bucketLayerIDs.push($t.map(Kr=>Kr.id)))}}const Oe=C.bD(tt.glyphDependencies,Tt=>Object.keys(Tt).map(Number));this.inFlightDependencies.forEach(Tt=>Tt==null?void 0:Tt.abort()),this.inFlightDependencies=[];let ct=Promise.resolve({});if(Object.keys(Oe).length){const Tt=new AbortController;this.inFlightDependencies.push(Tt),ct=pe.sendAsync({type:"GG",data:{stacks:Oe,source:this.source,tileID:this.tileID,type:"glyphs"}},Tt)}const St=Object.keys(tt.iconDependencies);let Mt=Promise.resolve({});if(St.length){const Tt=new AbortController;this.inFlightDependencies.push(Tt),Mt=pe.sendAsync({type:"GI",data:{icons:St,source:this.source,tileID:this.tileID,type:"icons"}},Tt)}const qe=Object.keys(tt.patternDependencies);let qt=Promise.resolve({});if(qe.length){const Tt=new AbortController;this.inFlightDependencies.push(Tt),qt=pe.sendAsync({type:"GI",data:{icons:qe,source:this.source,tileID:this.tileID,type:"patterns"}},Tt)}const[Ot,nr,Ur]=yield Promise.all([ct,Mt,qt]),pt=new D(Ot),zt=new C.ct(nr,Ur);for(const Tt in Qe){const sr=Qe[Tt];sr instanceof C.a6?(k(sr.layers,this.zoom,K),C.cu({bucket:sr,glyphMap:Ot,glyphPositions:pt.positions,imageMap:nr,imagePositions:zt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:tt.subdivisionGranularity})):sr.hasPattern&&(sr instanceof C.cv||sr instanceof C.cw||sr instanceof C.cx)&&(k(sr.layers,this.zoom,K),sr.addFeatures(tt,this.tileID.canonical,zt.patternPositions))}return this.status="done",{buckets:Object.values(Qe).filter(Tt=>!Tt.isEmpty()),featureIndex:ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pt.image,imageAtlas:zt,glyphMap:this.returnDependencies?Ot:null,iconMap:this.returnDependencies?nr:null,glyphPositions:this.returnDependencies?pt.positions:null}})}}function k(Le,J,te){const K=new C.C(J);for(const pe of Le)pe.recalculate(K,te)}class q{constructor(J,te,K){this.actor=J,this.layerIndex=te,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,te){return C._(this,void 0,void 0,function*(){const K=yield C.n(J.request,te);try{return{vectorTile:new C.cy.VectorTile(new C.cz(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(pe){const Fe=new Uint8Array(K.data);let Ce=`Unable to parse the tile at ${J.request.url}, `;throw Ce+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.message}`,new Error(Ce)}})}loadTile(J){return C._(this,void 0,void 0,function*(){const te=J.uid,K=!!(J&&J.request&&J.request.collectResourceTiming)&&new C.cA(J.request),pe=new R(J);this.loading[te]=pe;const Fe=new AbortController;pe.abort=Fe;try{const Ce=yield this.loadVectorTile(J,Fe);if(delete this.loading[te],!Ce)return null;const ze=Ce.rawData,Qe={};Ce.expires&&(Qe.expires=Ce.expires),Ce.cacheControl&&(Qe.cacheControl=Ce.cacheControl);const tt={};if(K){const Oe=K.finish();Oe&&(tt.resourceTiming=JSON.parse(JSON.stringify(Oe)))}pe.vectorTile=Ce.vectorTile;const We=pe.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[te]=pe,this.fetching[te]={rawTileData:ze,cacheControl:Qe,resourceTiming:tt};try{const Oe=yield We;return C.e({rawTileData:ze.slice(0)},Oe,Qe,tt)}finally{delete this.fetching[te]}}catch(Ce){throw delete this.loading[te],pe.status="done",this.loaded[te]=pe,Ce}})}reloadTile(J){return C._(this,void 0,void 0,function*(){const te=J.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const K=this.loaded[te];if(K.showCollisionBoxes=J.showCollisionBoxes,K.status==="parsing"){const pe=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);let Fe;if(this.fetching[te]){const{rawTileData:Ce,cacheControl:ze,resourceTiming:Qe}=this.fetching[te];delete this.fetching[te],Fe=C.e({rawTileData:Ce.slice(0)},pe,ze,Qe)}else Fe=pe;return Fe}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return C._(this,void 0,void 0,function*(){const te=this.loading,K=J.uid;te&&te[K]&&te[K].abort&&(te[K].abort.abort(),delete te[K])})}removeTile(J){return C._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class X{constructor(){this.loaded={}}loadTile(J){return C._(this,void 0,void 0,function*(){const{uid:te,encoding:K,rawImageData:pe,redFactor:Fe,greenFactor:Ce,blueFactor:ze,baseShift:Qe}=J,tt=pe.width+2,We=pe.height+2,Oe=C.b(pe)?new C.R({width:tt,height:We},yield C.cB(pe,-1,-1,tt,We)):pe,ct=new C.cC(te,Oe,K,Fe,Ce,ze,Qe);return this.loaded=this.loaded||{},this.loaded[te]=ct,ct})}removeTile(J){const te=this.loaded,K=J.uid;te&&te[K]&&delete te[K]}}var W,ne,ye=function(){if(ne)return W;function Le(te,K){if(te.length!==0){J(te[0],K);for(var pe=1;pe<te.length;pe++)J(te[pe],!K)}}function J(te,K){for(var pe=0,Fe=0,Ce=0,ze=te.length,Qe=ze-1;Ce<ze;Qe=Ce++){var tt=(te[Ce][0]-te[Qe][0])*(te[Qe][1]+te[Ce][1]),We=pe+tt;Fe+=Math.abs(pe)>=Math.abs(tt)?pe-We+tt:tt-We+pe,pe=We}pe+Fe>=0!=!!K&&te.reverse()}return ne=1,W=function te(K,pe){var Fe,Ce=K&&K.type;if(Ce==="FeatureCollection")for(Fe=0;Fe<K.features.length;Fe++)te(K.features[Fe],pe);else if(Ce==="GeometryCollection")for(Fe=0;Fe<K.geometries.length;Fe++)te(K.geometries[Fe],pe);else if(Ce==="Feature")te(K.geometry,pe);else if(Ce==="Polygon")Le(K.coordinates,pe);else if(Ce==="MultiPolygon")for(Fe=0;Fe<K.coordinates.length;Fe++)Le(K.coordinates[Fe],pe);return K}}(),Se=C.cD(ye);const le=C.cy.VectorTileFeature.prototype.toGeoJSON;class ve{constructor(J){this._feature=J,this.extent=C.Z,this.type=J.type,this.properties=J.tags,"id"in J&&!isNaN(J.id)&&(this.id=parseInt(J.id,10))}loadGeometry(){if(this._feature.type===1){const J=[];for(const te of this._feature.geometry)J.push([new C.P(te[0],te[1])]);return J}{const J=[];for(const te of this._feature.geometry){const K=[];for(const pe of te)K.push(new C.P(pe[0],pe[1]));J.push(K)}return J}}toGeoJSON(J,te,K){return le.call(this,J,te,K)}}class De{constructor(J){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=C.Z,this.length=J.length,this._features=J}feature(J){return new ve(this._features[J])}}var Re,Me,Ne,st={exports:{}},mt=function(){if(Ne)return st.exports;Ne=1;var Le=C.cG(),J=function(){if(Me)return Re;Me=1;var We=C.cE(),Oe=C.cF().VectorTileFeature;function ct(Mt,qe){this.options=qe||{},this.features=Mt,this.length=Mt.length}function St(Mt,qe){this.id=typeof Mt.id=="number"?Mt.id:void 0,this.type=Mt.type,this.rawGeometry=Mt.type===1?[Mt.geometry]:Mt.geometry,this.properties=Mt.tags,this.extent=qe||4096}return Re=ct,ct.prototype.feature=function(Mt){return new St(this.features[Mt],this.options.extent)},St.prototype.loadGeometry=function(){var Mt=this.rawGeometry;this.geometry=[];for(var qe=0;qe<Mt.length;qe++){for(var qt=Mt[qe],Ot=[],nr=0;nr<qt.length;nr++)Ot.push(new We(qt[nr][0],qt[nr][1]));this.geometry.push(Ot)}return this.geometry},St.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Mt=this.geometry,qe=1/0,qt=-1/0,Ot=1/0,nr=-1/0,Ur=0;Ur<Mt.length;Ur++)for(var pt=Mt[Ur],zt=0;zt<pt.length;zt++){var Tt=pt[zt];qe=Math.min(qe,Tt.x),qt=Math.max(qt,Tt.x),Ot=Math.min(Ot,Tt.y),nr=Math.max(nr,Tt.y)}return[qe,Ot,qt,nr]},St.prototype.toGeoJSON=Oe.prototype.toGeoJSON,Re}();function te(We){var Oe=new Le;return function(ct,St){for(var Mt in ct.layers)St.writeMessage(3,K,ct.layers[Mt])}(We,Oe),Oe.finish()}function K(We,Oe){var ct;Oe.writeVarintField(15,We.version||1),Oe.writeStringField(1,We.name||""),Oe.writeVarintField(5,We.extent||4096);var St={keys:[],values:[],keycache:{},valuecache:{}};for(ct=0;ct<We.length;ct++)St.feature=We.feature(ct),Oe.writeMessage(2,pe,St);var Mt=St.keys;for(ct=0;ct<Mt.length;ct++)Oe.writeStringField(3,Mt[ct]);var qe=St.values;for(ct=0;ct<qe.length;ct++)Oe.writeMessage(4,tt,qe[ct])}function pe(We,Oe){var ct=We.feature;ct.id!==void 0&&Oe.writeVarintField(1,ct.id),Oe.writeMessage(2,Fe,We),Oe.writeVarintField(3,ct.type),Oe.writeMessage(4,Qe,ct)}function Fe(We,Oe){var ct=We.feature,St=We.keys,Mt=We.values,qe=We.keycache,qt=We.valuecache;for(var Ot in ct.properties){var nr=ct.properties[Ot],Ur=qe[Ot];if(nr!==null){Ur===void 0&&(St.push(Ot),qe[Ot]=Ur=St.length-1),Oe.writeVarint(Ur);var pt=typeof nr;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(nr=JSON.stringify(nr));var zt=pt+":"+nr,Tt=qt[zt];Tt===void 0&&(Mt.push(nr),qt[zt]=Tt=Mt.length-1),Oe.writeVarint(Tt)}}}function Ce(We,Oe){return(Oe<<3)+(7&We)}function ze(We){return We<<1^We>>31}function Qe(We,Oe){for(var ct=We.loadGeometry(),St=We.type,Mt=0,qe=0,qt=ct.length,Ot=0;Ot<qt;Ot++){var nr=ct[Ot],Ur=1;St===1&&(Ur=nr.length),Oe.writeVarint(Ce(1,Ur));for(var pt=St===3?nr.length-1:nr.length,zt=0;zt<pt;zt++){zt===1&&St!==1&&Oe.writeVarint(Ce(2,pt-1));var Tt=nr[zt].x-Mt,sr=nr[zt].y-qe;Oe.writeVarint(ze(Tt)),Oe.writeVarint(ze(sr)),Mt+=Tt,qe+=sr}St===3&&Oe.writeVarint(Ce(7,1))}}function tt(We,Oe){var ct=typeof We;ct==="string"?Oe.writeStringField(1,We):ct==="boolean"?Oe.writeBooleanField(7,We):ct==="number"&&(We%1!=0?Oe.writeDoubleField(3,We):We<0?Oe.writeSVarintField(6,We):Oe.writeVarintField(5,We))}return st.exports=te,st.exports.fromVectorTileJs=te,st.exports.fromGeojsonVt=function(We,Oe){Oe=Oe||{};var ct={};for(var St in We)ct[St]=new J(We[St].features,Oe),ct[St].name=St,ct[St].version=Oe.version,ct[St].extent=Oe.extent;return te({layers:ct})},st.exports.GeoJSONWrapper=J,st.exports}(),ot=C.cD(mt);const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},He=Math.fround||(Zt=new Float32Array(1),Le=>(Zt[0]=+Le,Zt[0]));var Zt;const Ut=3,Vt=5,Wt=6;class Te{constructor(J){this.options=Object.assign(Object.create(Qt),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){const{log:te,minZoom:K,maxZoom:pe}=this.options;te&&console.time("total time");const Fe=`prepare ${J.length} points`;te&&console.time(Fe),this.points=J;const Ce=[];for(let Qe=0;Qe<J.length;Qe++){const tt=J[Qe];if(!tt.geometry)continue;const[We,Oe]=tt.geometry.coordinates,ct=He(Rt(We)),St=He(he(Oe));Ce.push(ct,St,1/0,Qe,-1,1),this.options.reduce&&Ce.push(0)}let ze=this.trees[pe+1]=this._createTree(Ce);te&&console.timeEnd(Fe);for(let Qe=pe;Qe>=K;Qe--){const tt=+Date.now();ze=this.trees[Qe]=this._createTree(this._cluster(ze,Qe)),te&&console.log("z%d: %d clusters in %dms",Qe,ze.numItems,+Date.now()-tt)}return te&&console.timeEnd("total time"),this}getClusters(J,te){let K=((J[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,J[1]));let Fe=J[2]===180?180:((J[2]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)K=-180,Fe=180;else if(K>Fe){const Oe=this.getClusters([K,pe,180,Ce],te),ct=this.getClusters([-180,pe,Fe,Ce],te);return Oe.concat(ct)}const ze=this.trees[this._limitZoom(te)],Qe=ze.range(Rt(K),he(Ce),Rt(Fe),he(pe)),tt=ze.data,We=[];for(const Oe of Qe){const ct=this.stride*Oe;We.push(tt[ct+Vt]>1?ut(tt,ct,this.clusterProps):this.points[tt[ct+Ut]])}return We}getChildren(J){const te=this._getOriginId(J),K=this._getOriginZoom(J),pe="No cluster with the specified id.",Fe=this.trees[K];if(!Fe)throw new Error(pe);const Ce=Fe.data;if(te*this.stride>=Ce.length)throw new Error(pe);const ze=this.options.radius/(this.options.extent*Math.pow(2,K-1)),Qe=Fe.within(Ce[te*this.stride],Ce[te*this.stride+1],ze),tt=[];for(const We of Qe){const Oe=We*this.stride;Ce[Oe+4]===J&&tt.push(Ce[Oe+Vt]>1?ut(Ce,Oe,this.clusterProps):this.points[Ce[Oe+Ut]])}if(tt.length===0)throw new Error(pe);return tt}getLeaves(J,te,K){const pe=[];return this._appendLeaves(pe,J,te=te||10,K=K||0,0),pe}getTile(J,te,K){const pe=this.trees[this._limitZoom(J)],Fe=Math.pow(2,J),{extent:Ce,radius:ze}=this.options,Qe=ze/Ce,tt=(K-Qe)/Fe,We=(K+1+Qe)/Fe,Oe={features:[]};return this._addTileFeatures(pe.range((te-Qe)/Fe,tt,(te+1+Qe)/Fe,We),pe.data,te,K,Fe,Oe),te===0&&this._addTileFeatures(pe.range(1-Qe/Fe,tt,1,We),pe.data,Fe,K,Fe,Oe),te===Fe-1&&this._addTileFeatures(pe.range(0,tt,Qe/Fe,We),pe.data,-1,K,Fe,Oe),Oe.features.length?Oe:null}getClusterExpansionZoom(J){let te=this._getOriginZoom(J)-1;for(;te<=this.options.maxZoom;){const K=this.getChildren(J);if(te++,K.length!==1)break;J=K[0].properties.cluster_id}return te}_appendLeaves(J,te,K,pe,Fe){const Ce=this.getChildren(te);for(const ze of Ce){const Qe=ze.properties;if(Qe&&Qe.cluster?Fe+Qe.point_count<=pe?Fe+=Qe.point_count:Fe=this._appendLeaves(J,Qe.cluster_id,K,pe,Fe):Fe<pe?Fe++:J.push(ze),J.length===K)break}return Fe}_createTree(J){const te=new C.aC(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<J.length;K+=this.stride)te.add(J[K],J[K+1]);return te.finish(),te.data=J,te}_addTileFeatures(J,te,K,pe,Fe,Ce){for(const ze of J){const Qe=ze*this.stride,tt=te[Qe+Vt]>1;let We,Oe,ct;if(tt)We=Ct(te,Qe,this.clusterProps),Oe=te[Qe],ct=te[Qe+1];else{const qe=this.points[te[Qe+Ut]];We=qe.properties;const[qt,Ot]=qe.geometry.coordinates;Oe=Rt(qt),ct=he(Ot)}const St={type:1,geometry:[[Math.round(this.options.extent*(Oe*Fe-K)),Math.round(this.options.extent*(ct*Fe-pe))]],tags:We};let Mt;Mt=tt||this.options.generateId?te[Qe+Ut]:this.points[te[Qe+Ut]].id,Mt!==void 0&&(St.id=Mt),Ce.features.push(St)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,te){const{radius:K,extent:pe,reduce:Fe,minPoints:Ce}=this.options,ze=K/(pe*Math.pow(2,te)),Qe=J.data,tt=[],We=this.stride;for(let Oe=0;Oe<Qe.length;Oe+=We){if(Qe[Oe+2]<=te)continue;Qe[Oe+2]=te;const ct=Qe[Oe],St=Qe[Oe+1],Mt=J.within(Qe[Oe],Qe[Oe+1],ze),qe=Qe[Oe+Vt];let qt=qe;for(const Ot of Mt){const nr=Ot*We;Qe[nr+2]>te&&(qt+=Qe[nr+Vt])}if(qt>qe&&qt>=Ce){let Ot,nr=ct*qe,Ur=St*qe,pt=-1;const zt=((Oe/We|0)<<5)+(te+1)+this.points.length;for(const Tt of Mt){const sr=Tt*We;if(Qe[sr+2]<=te)continue;Qe[sr+2]=te;const Bn=Qe[sr+Vt];nr+=Qe[sr]*Bn,Ur+=Qe[sr+1]*Bn,Qe[sr+4]=zt,Fe&&(Ot||(Ot=this._map(Qe,Oe,!0),pt=this.clusterProps.length,this.clusterProps.push(Ot)),Fe(Ot,this._map(Qe,sr)))}Qe[Oe+4]=zt,tt.push(nr/qt,Ur/qt,1/0,zt,-1,qt),Fe&&tt.push(pt)}else{for(let Ot=0;Ot<We;Ot++)tt.push(Qe[Oe+Ot]);if(qt>1)for(const Ot of Mt){const nr=Ot*We;if(!(Qe[nr+2]<=te)){Qe[nr+2]=te;for(let Ur=0;Ur<We;Ur++)tt.push(Qe[nr+Ur])}}}}return tt}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,te,K){if(J[te+Vt]>1){const Ce=this.clusterProps[J[te+Wt]];return K?Object.assign({},Ce):Ce}const pe=this.points[J[te+Ut]].properties,Fe=this.options.map(pe);return K&&Fe===pe?Object.assign({},Fe):Fe}}function ut(Le,J,te){return{type:"Feature",id:Le[J+Ut],properties:Ct(Le,J,te),geometry:{type:"Point",coordinates:[(K=Le[J],360*(K-.5)),nt(Le[J+1])]}};var K}function Ct(Le,J,te){const K=Le[J+Vt],pe=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,Fe=Le[J+Wt],Ce=Fe===-1?{}:Object.assign({},te[Fe]);return Object.assign(Ce,{cluster:!0,cluster_id:Le[J+Ut],point_count:K,point_count_abbreviated:pe})}function Rt(Le){return Le/360+.5}function he(Le){const J=Math.sin(Le*Math.PI/180),te=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return te<0?0:te>1?1:te}function nt(Le){const J=(180-360*Le)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function yt(Le,J,te,K){let pe=K;const Fe=J+(te-J>>1);let Ce,ze=te-J;const Qe=Le[J],tt=Le[J+1],We=Le[te],Oe=Le[te+1];for(let ct=J+3;ct<te;ct+=3){const St=_t(Le[ct],Le[ct+1],Qe,tt,We,Oe);if(St>pe)Ce=ct,pe=St;else if(St===pe){const Mt=Math.abs(ct-Fe);Mt<ze&&(Ce=ct,ze=Mt)}}pe>K&&(Ce-J>3&&yt(Le,J,Ce,K),Le[Ce+2]=pe,te-Ce>3&&yt(Le,Ce,te,K))}function _t(Le,J,te,K,pe,Fe){let Ce=pe-te,ze=Fe-K;if(Ce!==0||ze!==0){const Qe=((Le-te)*Ce+(J-K)*ze)/(Ce*Ce+ze*ze);Qe>1?(te=pe,K=Fe):Qe>0&&(te+=Ce*Qe,K+=ze*Qe)}return Ce=Le-te,ze=J-K,Ce*Ce+ze*ze}function xt(Le,J,te,K){const pe={id:Le??null,type:J,geometry:te,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")Ft(pe,te);else if(J==="Polygon")Ft(pe,te[0]);else if(J==="MultiLineString")for(const Fe of te)Ft(pe,Fe);else if(J==="MultiPolygon")for(const Fe of te)Ft(pe,Fe[0]);return pe}function Ft(Le,J){for(let te=0;te<J.length;te+=3)Le.minX=Math.min(Le.minX,J[te]),Le.minY=Math.min(Le.minY,J[te+1]),Le.maxX=Math.max(Le.maxX,J[te]),Le.maxY=Math.max(Le.maxY,J[te+1])}function Pt(Le,J,te,K){if(!J.geometry)return;const pe=J.geometry.coordinates;if(pe&&pe.length===0)return;const Fe=J.geometry.type,Ce=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let ze=[],Qe=J.id;if(te.promoteId?Qe=J.properties[te.promoteId]:te.generateId&&(Qe=K||0),Fe==="Point")ur(pe,ze);else if(Fe==="MultiPoint")for(const tt of pe)ur(tt,ze);else if(Fe==="LineString")ir(pe,ze,Ce,!1);else if(Fe==="MultiLineString"){if(te.lineMetrics){for(const tt of pe)ze=[],ir(tt,ze,Ce,!1),Le.push(xt(Qe,"LineString",ze,J.properties));return}yr(pe,ze,Ce,!1)}else if(Fe==="Polygon")yr(pe,ze,Ce,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(const tt of J.geometry.geometries)Pt(Le,{id:Qe,geometry:tt,properties:J.properties},te,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of pe){const We=[];yr(tt,We,Ce,!0),ze.push(We)}}Le.push(xt(Qe,Fe,ze,J.properties))}function ur(Le,J){J.push(nn(Le[0]),Rr(Le[1]),0)}function ir(Le,J,te,K){let pe,Fe,Ce=0;for(let Qe=0;Qe<Le.length;Qe++){const tt=nn(Le[Qe][0]),We=Rr(Le[Qe][1]);J.push(tt,We,0),Qe>0&&(Ce+=K?(pe*We-tt*Fe)/2:Math.sqrt(Math.pow(tt-pe,2)+Math.pow(We-Fe,2))),pe=tt,Fe=We}const ze=J.length-3;J[2]=1,yt(J,0,ze,te),J[ze+2]=1,J.size=Math.abs(Ce),J.start=0,J.end=J.size}function yr(Le,J,te,K){for(let pe=0;pe<Le.length;pe++){const Fe=[];ir(Le[pe],Fe,te,K),J.push(Fe)}}function nn(Le){return Le/360+.5}function Rr(Le){const J=Math.sin(Le*Math.PI/180),te=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return te<0?0:te>1?1:te}function Ye(Le,J,te,K,pe,Fe,Ce,ze){if(K/=J,Fe>=(te/=J)&&Ce<K)return Le;if(Ce<te||Fe>=K)return null;const Qe=[];for(const tt of Le){const We=tt.geometry;let Oe=tt.type;const ct=pe===0?tt.minX:tt.minY,St=pe===0?tt.maxX:tt.maxY;if(ct>=te&&St<K){Qe.push(tt);continue}if(St<te||ct>=K)continue;let Mt=[];if(Oe==="Point"||Oe==="MultiPoint")Lt(We,Mt,te,K,pe);else if(Oe==="LineString")bt(We,Mt,te,K,pe,!1,ze.lineMetrics);else if(Oe==="MultiLineString")Xr(We,Mt,te,K,pe,!1);else if(Oe==="Polygon")Xr(We,Mt,te,K,pe,!0);else if(Oe==="MultiPolygon")for(const qe of We){const qt=[];Xr(qe,qt,te,K,pe,!0),qt.length&&Mt.push(qt)}if(Mt.length){if(ze.lineMetrics&&Oe==="LineString"){for(const qe of Mt)Qe.push(xt(tt.id,Oe,qe,tt.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(Mt.length===1?(Oe="LineString",Mt=Mt[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=Mt.length===3?"Point":"MultiPoint"),Qe.push(xt(tt.id,Oe,Mt,tt.tags))}}return Qe.length?Qe:null}function Lt(Le,J,te,K,pe){for(let Fe=0;Fe<Le.length;Fe+=3){const Ce=Le[Fe+pe];Ce>=te&&Ce<=K&&Ar(J,Le[Fe],Le[Fe+1],Le[Fe+2])}}function bt(Le,J,te,K,pe,Fe,Ce){let ze=xr(Le);const Qe=pe===0?jr:Rn;let tt,We,Oe=Le.start;for(let qt=0;qt<Le.length-3;qt+=3){const Ot=Le[qt],nr=Le[qt+1],Ur=Le[qt+2],pt=Le[qt+3],zt=Le[qt+4],Tt=pe===0?Ot:nr,sr=pe===0?pt:zt;let Bn=!1;Ce&&(tt=Math.sqrt(Math.pow(Ot-pt,2)+Math.pow(nr-zt,2))),Tt<te?sr>te&&(We=Qe(ze,Ot,nr,pt,zt,te),Ce&&(ze.start=Oe+tt*We)):Tt>K?sr<K&&(We=Qe(ze,Ot,nr,pt,zt,K),Ce&&(ze.start=Oe+tt*We)):Ar(ze,Ot,nr,Ur),sr<te&&Tt>=te&&(We=Qe(ze,Ot,nr,pt,zt,te),Bn=!0),sr>K&&Tt<=K&&(We=Qe(ze,Ot,nr,pt,zt,K),Bn=!0),!Fe&&Bn&&(Ce&&(ze.end=Oe+tt*We),J.push(ze),ze=xr(Le)),Ce&&(Oe+=tt)}let ct=Le.length-3;const St=Le[ct],Mt=Le[ct+1],qe=pe===0?St:Mt;qe>=te&&qe<=K&&Ar(ze,St,Mt,Le[ct+2]),ct=ze.length-3,Fe&&ct>=3&&(ze[ct]!==ze[0]||ze[ct+1]!==ze[1])&&Ar(ze,ze[0],ze[1],ze[2]),ze.length&&J.push(ze)}function xr(Le){const J=[];return J.size=Le.size,J.start=Le.start,J.end=Le.end,J}function Xr(Le,J,te,K,pe,Fe){for(const Ce of Le)bt(Ce,J,te,K,pe,Fe,!1)}function Ar(Le,J,te,K){Le.push(J,te,K)}function jr(Le,J,te,K,pe,Fe){const Ce=(Fe-J)/(K-J);return Ar(Le,Fe,te+(pe-te)*Ce,1),Ce}function Rn(Le,J,te,K,pe,Fe){const Ce=(Fe-te)/(pe-te);return Ar(Le,J+(K-J)*Ce,Fe,1),Ce}function vr(Le,J){const te=[];for(let K=0;K<Le.length;K++){const pe=Le[K],Fe=pe.type;let Ce;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")Ce=Gr(pe.geometry,J);else if(Fe==="MultiLineString"||Fe==="Polygon"){Ce=[];for(const ze of pe.geometry)Ce.push(Gr(ze,J))}else if(Fe==="MultiPolygon"){Ce=[];for(const ze of pe.geometry){const Qe=[];for(const tt of ze)Qe.push(Gr(tt,J));Ce.push(Qe)}}te.push(xt(pe.id,Fe,Ce,pe.tags))}return te}function Gr(Le,J){const te=[];te.size=Le.size,Le.start!==void 0&&(te.start=Le.start,te.end=Le.end);for(let K=0;K<Le.length;K+=3)te.push(Le[K]+J,Le[K+1],Le[K+2]);return te}function cn(Le,J){if(Le.transformed)return Le;const te=1<<Le.z,K=Le.x,pe=Le.y;for(const Fe of Le.features){const Ce=Fe.geometry,ze=Fe.type;if(Fe.geometry=[],ze===1)for(let Qe=0;Qe<Ce.length;Qe+=2)Fe.geometry.push(en(Ce[Qe],Ce[Qe+1],J,te,K,pe));else for(let Qe=0;Qe<Ce.length;Qe++){const tt=[];for(let We=0;We<Ce[Qe].length;We+=2)tt.push(en(Ce[Qe][We],Ce[Qe][We+1],J,te,K,pe));Fe.geometry.push(tt)}}return Le.transformed=!0,Le}function en(Le,J,te,K,pe,Fe){return[Math.round(te*(Le*K-pe)),Math.round(te*(J*K-Fe))]}function fr(Le,J,te,K,pe){const Fe=J===pe.maxZoom?0:pe.tolerance/((1<<J)*pe.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:Le.length,source:null,x:te,y:K,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ze of Le)or(Ce,ze,Fe,pe);return Ce}function or(Le,J,te,K){const pe=J.geometry,Fe=J.type,Ce=[];if(Le.minX=Math.min(Le.minX,J.minX),Le.minY=Math.min(Le.minY,J.minY),Le.maxX=Math.max(Le.maxX,J.maxX),Le.maxY=Math.max(Le.maxY,J.maxY),Fe==="Point"||Fe==="MultiPoint")for(let ze=0;ze<pe.length;ze+=3)Ce.push(pe[ze],pe[ze+1]),Le.numPoints++,Le.numSimplified++;else if(Fe==="LineString")Nn(Ce,pe,Le,te,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(let ze=0;ze<pe.length;ze++)Nn(Ce,pe[ze],Le,te,Fe==="Polygon",ze===0);else if(Fe==="MultiPolygon")for(let ze=0;ze<pe.length;ze++){const Qe=pe[ze];for(let tt=0;tt<Qe.length;tt++)Nn(Ce,Qe[tt],Le,te,!0,tt===0)}if(Ce.length){let ze=J.tags||null;if(Fe==="LineString"&&K.lineMetrics){ze={};for(const tt in J.tags)ze[tt]=J.tags[tt];ze.mapbox_clip_start=pe.start/pe.size,ze.mapbox_clip_end=pe.end/pe.size}const Qe={geometry:Ce,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:ze};J.id!==null&&(Qe.id=J.id),Le.features.push(Qe)}}function Nn(Le,J,te,K,pe,Fe){const Ce=K*K;if(K>0&&J.size<(pe?Ce:K))return void(te.numPoints+=J.length/3);const ze=[];for(let Qe=0;Qe<J.length;Qe+=3)(K===0||J[Qe+2]>Ce)&&(te.numSimplified++,ze.push(J[Qe],J[Qe+1])),te.numPoints++;pe&&function(Qe,tt){let We=0;for(let Oe=0,ct=Qe.length,St=ct-2;Oe<ct;St=Oe,Oe+=2)We+=(Qe[Oe]-Qe[St])*(Qe[Oe+1]+Qe[St+1]);if(We>0===tt)for(let Oe=0,ct=Qe.length;Oe<ct/2;Oe+=2){const St=Qe[Oe],Mt=Qe[Oe+1];Qe[Oe]=Qe[ct-2-Oe],Qe[Oe+1]=Qe[ct-1-Oe],Qe[ct-2-Oe]=St,Qe[ct-1-Oe]=Mt}}(ze,Fe),Le.push(ze)}const Nr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Yr{constructor(J,te){const K=(te=this.options=function(Fe,Ce){for(const ze in Ce)Fe[ze]=Ce[ze];return Fe}(Object.create(Nr),te)).debug;if(K&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let pe=function(Fe,Ce){const ze=[];if(Fe.type==="FeatureCollection")for(let Qe=0;Qe<Fe.features.length;Qe++)Pt(ze,Fe.features[Qe],Ce,Qe);else Pt(ze,Fe.type==="Feature"?Fe:{geometry:Fe},Ce);return ze}(J,te);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Fe,Ce){const ze=Ce.buffer/Ce.extent;let Qe=Fe;const tt=Ye(Fe,1,-1-ze,ze,0,-1,2,Ce),We=Ye(Fe,1,1-ze,2+ze,0,-1,2,Ce);return(tt||We)&&(Qe=Ye(Fe,1,-ze,1+ze,0,-1,2,Ce)||[],tt&&(Qe=vr(tt,1).concat(Qe)),We&&(Qe=Qe.concat(vr(We,-1)))),Qe}(pe,te),pe.length&&this.splitTile(pe,0,0,0),K&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,te,K,pe,Fe,Ce,ze){const Qe=[J,te,K,pe],tt=this.options,We=tt.debug;for(;Qe.length;){pe=Qe.pop(),K=Qe.pop(),te=Qe.pop(),J=Qe.pop();const Oe=1<<te,ct=Un(te,K,pe);let St=this.tiles[ct];if(!St&&(We>1&&console.time("creation"),St=this.tiles[ct]=fr(J,te,K,pe,tt),this.tileCoords.push({z:te,x:K,y:pe}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,K,pe,St.numFeatures,St.numPoints,St.numSimplified),console.timeEnd("creation"));const Bn=`z${te}`;this.stats[Bn]=(this.stats[Bn]||0)+1,this.total++}if(St.source=J,Fe==null){if(te===tt.indexMaxZoom||St.numPoints<=tt.indexMaxPoints)continue}else{if(te===tt.maxZoom||te===Fe)continue;if(Fe!=null){const Bn=Fe-te;if(K!==Ce>>Bn||pe!==ze>>Bn)continue}}if(St.source=null,J.length===0)continue;We>1&&console.time("clipping");const Mt=.5*tt.buffer/tt.extent,qe=.5-Mt,qt=.5+Mt,Ot=1+Mt;let nr=null,Ur=null,pt=null,zt=null,Tt=Ye(J,Oe,K-Mt,K+qt,0,St.minX,St.maxX,tt),sr=Ye(J,Oe,K+qe,K+Ot,0,St.minX,St.maxX,tt);J=null,Tt&&(nr=Ye(Tt,Oe,pe-Mt,pe+qt,1,St.minY,St.maxY,tt),Ur=Ye(Tt,Oe,pe+qe,pe+Ot,1,St.minY,St.maxY,tt),Tt=null),sr&&(pt=Ye(sr,Oe,pe-Mt,pe+qt,1,St.minY,St.maxY,tt),zt=Ye(sr,Oe,pe+qe,pe+Ot,1,St.minY,St.maxY,tt),sr=null),We>1&&console.timeEnd("clipping"),Qe.push(nr||[],te+1,2*K,2*pe),Qe.push(Ur||[],te+1,2*K,2*pe+1),Qe.push(pt||[],te+1,2*K+1,2*pe),Qe.push(zt||[],te+1,2*K+1,2*pe+1)}}getTile(J,te,K){J=+J,te=+te,K=+K;const pe=this.options,{extent:Fe,debug:Ce}=pe;if(J<0||J>24)return null;const ze=1<<J,Qe=Un(J,te=te+ze&ze-1,K);if(this.tiles[Qe])return cn(this.tiles[Qe],Fe);Ce>1&&console.log("drilling down to z%d-%d-%d",J,te,K);let tt,We=J,Oe=te,ct=K;for(;!tt&&We>0;)We--,Oe>>=1,ct>>=1,tt=this.tiles[Un(We,Oe,ct)];return tt&&tt.source?(Ce>1&&(console.log("found parent tile z%d-%d-%d",We,Oe,ct),console.time("drilling down")),this.splitTile(tt.source,We,Oe,ct,J,te,K),Ce>1&&console.timeEnd("drilling down"),this.tiles[Qe]?cn(this.tiles[Qe],Fe):null):null}}function Un(Le,J,te){return 32*((1<<Le)*te+J)+Le}function Ii(Le,J){return J?Le.properties[J]:Le.id}function jn(Le,J){if(Le==null)return!0;if(Le.type==="Feature")return Ii(Le,J)!=null;if(Le.type==="FeatureCollection"){const te=new Set;for(const K of Le.features){const pe=Ii(K,J);if(pe==null||te.has(pe))return!1;te.add(pe)}return!0}return!1}function as(Le,J){const te=new Map;if(Le!=null)if(Le.type==="Feature")te.set(Ii(Le,J),Le);else for(const K of Le.features)te.set(Ii(K,J),K);return te}class No extends q{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,te){return C._(this,void 0,void 0,function*(){const K=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const pe=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!pe)return null;const Fe=new De(pe.features);let Ce=ot(Fe);return Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),{vectorTile:Fe,rawData:Ce.buffer}})}loadData(J){return C._(this,void 0,void 0,function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const K=!!(J&&J.request&&J.request.collectResourceTiming)&&new C.cA(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest),this._geoJSONIndex=J.cluster?new Te(function({superclusterOptions:Ce,clusterProperties:ze}){if(!ze||!Ce)return Ce;const Qe={},tt={},We={accumulated:null,zoom:0},Oe={properties:null},ct=Object.keys(ze);for(const St of ct){const[Mt,qe]=ze[St],qt=C.cH(qe),Ot=C.cH(typeof Mt=="string"?[Mt,["accumulated"],["get",St]]:Mt);Qe[St]=qt.value,tt[St]=Ot.value}return Ce.map=St=>{Oe.properties=St;const Mt={};for(const qe of ct)Mt[qe]=Qe[qe].evaluate(We,Oe);return Mt},Ce.reduce=(St,Mt)=>{Oe.properties=Mt;for(const qe of ct)We.accumulated=St[qe],St[qe]=tt[qe].evaluate(We,Oe)},Ce}(J)).load((yield this._pendingData).features):(pe=yield this._pendingData,new Yr(pe,J.geojsonVtOptions)),this.loaded={};const Fe={};if(K){const Ce=K.finish();Ce&&(Fe.resourceTiming={},Fe.resourceTiming[J.source]=JSON.parse(JSON.stringify(Ce)))}return Fe}catch(Fe){if(delete this._pendingRequest,C.cl(Fe))return{abandoned:!0};throw Fe}var pe})}getData(){return C._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){const te=this.loaded;return te&&te[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,te){return C._(this,void 0,void 0,function*(){let K=yield this.loadGeoJSON(J,te);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(Se(K,!0),J.filter){const pe=C.cH(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(Ce=>`${Ce.key}: ${Ce.message}`).join(", "));K={type:"FeatureCollection",features:K.features.filter(Ce=>pe.value.evaluate({zoom:0},Ce))}}return K})}loadGeoJSON(J,te){return C._(this,void 0,void 0,function*(){const{promoteId:K}=J;if(J.request){const pe=yield C.j(J.request,te);return this._dataUpdateable=jn(pe.data,K)?as(pe.data,K):void 0,pe.data}if(typeof J.data=="string")try{const pe=JSON.parse(J.data);return this._dataUpdateable=jn(pe,K)?as(pe,K):void 0,pe}catch{throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return function(pe,Fe,Ce){var ze,Qe,tt,We;if(Fe.removeAll&&pe.clear(),Fe.remove)for(const Oe of Fe.remove)pe.delete(Oe);if(Fe.add)for(const Oe of Fe.add){const ct=Ii(Oe,Ce);ct!=null&&pe.set(ct,Oe)}if(Fe.update)for(const Oe of Fe.update){let ct=pe.get(Oe.id);if(ct==null)continue;const St=!Oe.removeAllProperties&&(((ze=Oe.removeProperties)===null||ze===void 0?void 0:ze.length)>0||((Qe=Oe.addOrUpdateProperties)===null||Qe===void 0?void 0:Qe.length)>0);if((Oe.newGeometry||Oe.removeAllProperties||St)&&(ct=Object.assign({},ct),pe.set(Oe.id,ct),St&&(ct.properties=Object.assign({},ct.properties))),Oe.newGeometry&&(ct.geometry=Oe.newGeometry),Oe.removeAllProperties)ct.properties={};else if(((tt=Oe.removeProperties)===null||tt===void 0?void 0:tt.length)>0)for(const Mt of Oe.removeProperties)Object.prototype.hasOwnProperty.call(ct.properties,Mt)&&delete ct.properties[Mt];if(((We=Oe.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0)for(const{key:Mt,value:qe}of Oe.addOrUpdateProperties)ct.properties[Mt]=qe}}(this._dataUpdateable,J.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return C._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class Ba{constructor(J){this.self=J,this.actor=new C.H(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,K)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=K},this.self.addProtocol=C.cn,this.self.removeProtocol=C.co,this.self.registerRTLTextPlugin=te=>{C.cI.setMethods(te)},this.actor.registerMessageHandler("LDT",(te,K)=>this._getDEMWorkerSource(te,K.source).loadTile(K)),this.actor.registerMessageHandler("RDT",(te,K)=>C._(this,void 0,void 0,function*(){this._getDEMWorkerSource(te,K.source).removeTile(K)})),this.actor.registerMessageHandler("GCEZ",(te,K)=>C._(this,void 0,void 0,function*(){return this._getWorkerSource(te,K.type,K.source).getClusterExpansionZoom(K)})),this.actor.registerMessageHandler("GCC",(te,K)=>C._(this,void 0,void 0,function*(){return this._getWorkerSource(te,K.type,K.source).getClusterChildren(K)})),this.actor.registerMessageHandler("GCL",(te,K)=>C._(this,void 0,void 0,function*(){return this._getWorkerSource(te,K.type,K.source).getClusterLeaves(K)})),this.actor.registerMessageHandler("LD",(te,K)=>this._getWorkerSource(te,K.type,K.source).loadData(K)),this.actor.registerMessageHandler("GD",(te,K)=>this._getWorkerSource(te,K.type,K.source).getData()),this.actor.registerMessageHandler("LT",(te,K)=>this._getWorkerSource(te,K.type,K.source).loadTile(K)),this.actor.registerMessageHandler("RT",(te,K)=>this._getWorkerSource(te,K.type,K.source).reloadTile(K)),this.actor.registerMessageHandler("AT",(te,K)=>this._getWorkerSource(te,K.type,K.source).abortTile(K)),this.actor.registerMessageHandler("RMT",(te,K)=>this._getWorkerSource(te,K.type,K.source).removeTile(K)),this.actor.registerMessageHandler("RS",(te,K)=>C._(this,void 0,void 0,function*(){if(!this.workerSources[te]||!this.workerSources[te][K.type]||!this.workerSources[te][K.type][K.source])return;const pe=this.workerSources[te][K.type][K.source];delete this.workerSources[te][K.type][K.source],pe.removeSource!==void 0&&pe.removeSource(K)})),this.actor.registerMessageHandler("RM",te=>C._(this,void 0,void 0,function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})),this.actor.registerMessageHandler("SR",(te,K)=>C._(this,void 0,void 0,function*(){this.referrer=K})),this.actor.registerMessageHandler("SRPS",(te,K)=>this._syncRTLPluginState(te,K)),this.actor.registerMessageHandler("IS",(te,K)=>C._(this,void 0,void 0,function*(){this.self.importScripts(K)})),this.actor.registerMessageHandler("SI",(te,K)=>this._setImages(te,K)),this.actor.registerMessageHandler("UL",(te,K)=>C._(this,void 0,void 0,function*(){this._getLayerIndex(te).update(K.layers,K.removedIds)})),this.actor.registerMessageHandler("SL",(te,K)=>C._(this,void 0,void 0,function*(){this._getLayerIndex(te).replace(K)}))}_setImages(J,te){return C._(this,void 0,void 0,function*(){this.availableImages[J]=te;for(const K in this.workerSources[J]){const pe=this.workerSources[J][K];for(const Fe in pe)pe[Fe].availableImages=te}})}_syncRTLPluginState(J,te){return C._(this,void 0,void 0,function*(){return yield C.cI.syncState(te,this.self.importScripts)})}_getAvailableImages(J){let te=this.availableImages[J];return te||(te=[]),te}_getLayerIndex(J){let te=this.layerIndexes[J];return te||(te=this.layerIndexes[J]=new A),te}_getWorkerSource(J,te,K){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][te]||(this.workerSources[J][te]={}),!this.workerSources[J][te][K]){const pe={sendAsync:(Fe,Ce)=>(Fe.targetMapId=J,this.actor.sendAsync(Fe,Ce))};switch(te){case"vector":this.workerSources[J][te][K]=new q(pe,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][te][K]=new No(pe,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][te][K]=new this.externalWorkerSourceTypes[te](pe,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][te][K]}_getDEMWorkerSource(J,te){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][te]||(this.demWorkerSources[J][te]=new X),this.demWorkerSources[J][te]}}return C.i(self)&&(self.worker=new Ba(self)),Ba}),w("index",["exports","./shared"],function(C,A){var D="5.3.0";function R(){var m=new A.A(4);return A.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}let k,q;const X={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m,e,n){const c=requestAnimationFrame(_=>{f(),e(_)}),{unsubscribe:f}=A.s(m.signal,"abort",()=>{f(),cancelAnimationFrame(c),n(A.c())},!1)},frameAsync(m){return new Promise((e,n)=>{this.frame(m,e,n)})},getImageData(m,e=0){return this.getImageCanvasContext(m).getImageData(-e,-e,m.width+2*e,m.height+2*e)},getImageCanvasContext(m){const e=window.document.createElement("canvas"),n=e.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return e.width=m.width,e.height=m.height,n.drawImage(m,0,0,m.width,m.height),n},resolveURL:m=>(k||(k=document.createElement("a")),k.href=m,k.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(q==null&&(q=matchMedia("(prefers-reduced-motion: reduce)")),q.matches)}};class W{static testProp(e){if(!W.docStyle)return e[0];for(let n=0;n<e.length;n++)if(e[n]in W.docStyle)return e[n];return e[0]}static create(e,n,c){const f=window.document.createElement(e);return n!==void 0&&(f.className=n),c&&c.appendChild(f),f}static createNS(e,n){return window.document.createElementNS(e,n)}static disableDrag(){W.docStyle&&W.selectProp&&(W.userSelect=W.docStyle[W.selectProp],W.docStyle[W.selectProp]="none")}static enableDrag(){W.docStyle&&W.selectProp&&(W.docStyle[W.selectProp]=W.userSelect)}static setTransform(e,n){e.style[W.transformProp]=n}static addEventListener(e,n,c,f={}){e.addEventListener(n,c,"passive"in f?f:f.capture)}static removeEventListener(e,n,c,f={}){e.removeEventListener(n,c,"passive"in f?f:f.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",W.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",W.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",W.suppressClickInternal,!0)},0)}static getScale(e){const n=e.getBoundingClientRect();return{x:n.width/e.offsetWidth||1,y:n.height/e.offsetHeight||1,boundingClientRect:n}}static getPoint(e,n,c){const f=n.boundingClientRect;return new A.P((c.clientX-f.left)/n.x-e.clientLeft,(c.clientY-f.top)/n.y-e.clientTop)}static mousePos(e,n){const c=W.getScale(e);return W.getPoint(e,c,n)}static touchPos(e,n){const c=[],f=W.getScale(e);for(let _=0;_<n.length;_++)c.push(W.getPoint(e,f,n[_]));return c}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){const n=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),c=n.querySelectorAll("script");for(const f of c)f.remove();return W.clean(n),n.innerHTML}static isPossiblyDangerous(e,n){const c=n.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!c.includes("javascript:")&&!c.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const n=e.children;for(const c of n)W.removeAttributes(c),W.clean(c)}static removeAttributes(e){for(const{name:n,value:c}of e.attributes)W.isPossiblyDangerous(n,c)&&e.removeAttribute(n)}}W.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,W.selectProp=W.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),W.transformProp=W.testProp(["transform","WebkitTransform"]);const ne={supported:!1,testSupport:function(m){!le&&Se&&(ve?De(m):ye=m)}};let ye,Se,le=!1,ve=!1;function De(m){const e=m.createTexture();m.bindTexture(m.TEXTURE_2D,e);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,Se),m.isContextLost())return;ne.supported=!0}catch{}m.deleteTexture(e),le=!0}var Re;typeof document<"u"&&(Se=document.createElement("img"),Se.onload=()=>{ye&&De(ye),ye=null,ve=!0},Se.onerror=()=>{le=!0,ye=null},Se.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let e,n,c,f;m.resetRequestQueue=()=>{e=[],n=0,c=0,f={}},m.addThrottleControl=U=>{const Q=c++;return f[Q]=U,Q},m.removeThrottleControl=U=>{delete f[U],b()},m.getImage=(U,Q,O=!0)=>new Promise((H,z)=>{ne.supported&&(U.headers||(U.headers={}),U.headers.accept="image/webp,*/*"),A.e(U,{type:"image"}),e.push({abortController:Q,requestParameters:U,supportImageRefresh:O,state:"queued",onError:Y=>{z(Y)},onSuccess:Y=>{H(Y)}}),b()});const _=U=>A._(this,void 0,void 0,function*(){U.state="running";const{requestParameters:Q,supportImageRefresh:O,onError:H,onSuccess:z,abortController:Y}=U,ee=O===!1&&!A.i(self)&&!A.g(Q.url)&&(!Q.headers||Object.keys(Q.headers).reduce((ce,fe)=>ce&&fe==="accept",!0));n++;const Ae=ee?T(Q,Y):A.m(Q,Y);try{const ce=yield Ae;delete U.abortController,U.state="completed",ce.data instanceof HTMLImageElement||A.b(ce.data)?z(ce):ce.data&&z({data:yield(oe=ce.data,typeof createImageBitmap=="function"?A.f(oe):A.h(oe)),cacheControl:ce.cacheControl,expires:ce.expires})}catch(ce){delete U.abortController,H(ce)}finally{n--,b()}var oe}),b=()=>{const U=(()=>{for(const Q of Object.keys(f))if(f[Q]())return!0;return!1})()?A.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:A.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let Q=n;Q<U&&e.length>0;Q++){const O=e.shift();O.abortController.signal.aborted?Q--:_(O)}},T=(U,Q)=>new Promise((O,H)=>{const z=new Image,Y=U.url,ee=U.credentials;ee&&ee==="include"?z.crossOrigin="use-credentials":(ee&&ee==="same-origin"||!A.d(Y))&&(z.crossOrigin="anonymous"),Q.signal.addEventListener("abort",()=>{z.src="",H(A.c())}),z.fetchPriority="high",z.onload=()=>{z.onerror=z.onload=null,O({data:z})},z.onerror=()=>{z.onerror=z.onload=null,Q.signal.aborted||H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},z.src=Y})}(Re||(Re={})),Re.resetRequestQueue();class Me{constructor(e){this._transformRequestFn=e}transformRequest(e,n){return this._transformRequestFn&&this._transformRequestFn(e,n)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Ne(m){const e=[];if(typeof m=="string")e.push({id:"default",url:m});else if(m&&m.length>0){const n=[];for(const{id:c,url:f}of m){const _=`${c}${f}`;n.indexOf(_)===-1&&(n.push(_),e.push({id:c,url:f}))}}return e}function st(m,e,n){try{const c=new URL(m);return c.pathname+=`${e}${n}`,c.toString()}catch{throw new Error(`Invalid sprite URL "${m}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class mt{constructor(e,n,c,f){this.context=e,this.format=c,this.texture=e.gl.createTexture(),this.update(n,f)}update(e,n,c){const{width:f,height:_}=e,b=!(this.size&&this.size[0]===f&&this.size[1]===_||c),{context:T}=this,{gl:U}=T;if(this.useMipmap=!!(n&&n.useMipmap),U.bindTexture(U.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===U.RGBA&&(!n||n.premultiply!==!1)),b)this.size=[f,_],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||A.b(e)?U.texImage2D(U.TEXTURE_2D,0,this.format,this.format,U.UNSIGNED_BYTE,e):U.texImage2D(U.TEXTURE_2D,0,this.format,f,_,0,this.format,U.UNSIGNED_BYTE,e.data);else{const{x:Q,y:O}=c||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||A.b(e)?U.texSubImage2D(U.TEXTURE_2D,0,Q,O,U.RGBA,U.UNSIGNED_BYTE,e):U.texSubImage2D(U.TEXTURE_2D,0,Q,O,f,_,U.RGBA,U.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&U.generateMipmap(U.TEXTURE_2D)}bind(e,n,c){const{context:f}=this,{gl:_}=f;_.bindTexture(_.TEXTURE_2D,this.texture),c!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=_.LINEAR),e!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,e),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,c||e),this.filter=e),n!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,n),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,n),this.wrap=n)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function ot(m){const{userImage:e}=m;return!!(e&&e.render&&e.render())&&(m.data.replace(new Uint8Array(e.data.buffer)),!0)}class Qt extends A.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new A.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:n,promiseResolve:c}of this.requestors)c(this._getImagesForIds(n));this.requestors=[]}}getImage(e){const n=this.images[e];if(n&&!n.data&&n.spriteData){const c=n.spriteData;n.data=new A.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),n.spriteData=null}return n}addImage(e,n){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,n)&&(this.images[e]=n)}_validate(e,n){let c=!0;const f=n.data||n.spriteData;return this._validateStretch(n.stretchX,f&&f.width)||(this.fire(new A.k(new Error(`Image "${e}" has invalid "stretchX" value`))),c=!1),this._validateStretch(n.stretchY,f&&f.height)||(this.fire(new A.k(new Error(`Image "${e}" has invalid "stretchY" value`))),c=!1),this._validateContent(n.content,n)||(this.fire(new A.k(new Error(`Image "${e}" has invalid "content" value`))),c=!1),c}_validateStretch(e,n){if(!e)return!0;let c=0;for(const f of e){if(f[0]<c||f[1]<f[0]||n<f[1])return!1;c=f[1]}return!0}_validateContent(e,n){if(!e)return!0;if(e.length!==4)return!1;const c=n.spriteData,f=c&&c.width||n.data.width,_=c&&c.height||n.data.height;return!(e[0]<0||f<e[0]||e[1]<0||_<e[1]||e[2]<0||f<e[2]||e[3]<0||_<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,n,c=!0){const f=this.getImage(e);if(c&&(f.data.width!==n.data.width||f.data.height!==n.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${n.data.width}x${n.data.height}).`);n.version=f.version+1,this.images[e]=n,this.updatedImages[e]=!0}removeImage(e){const n=this.images[e];delete this.images[e],delete this.patterns[e],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((n,c)=>{let f=!0;if(!this.isLoaded())for(const _ of e)this.images[_]||(f=!1);this.isLoaded()||f?n(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:n})})}_getImagesForIds(e){const n={};for(const c of e){let f=this.getImage(c);f||(this.fire(new A.l("styleimagemissing",{id:c})),f=this.getImage(c)),f?n[c]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:A.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){const{width:e,height:n}=this.atlasImage;return{width:e,height:n}}getPattern(e){const n=this.patterns[e],c=this.getImage(e);if(!c)return null;if(n&&n.position.version===c.version)return n.position;if(n)n.position.version=c.version;else{const f={w:c.data.width+2,h:c.data.height+2,x:0,y:0},_=new A.I(f,c);this.patterns[e]={bin:f,position:_}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new mt(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const _ in this.patterns)e.push(this.patterns[_].bin);const{w:n,h:c}=A.p(e),f=this.atlasImage;f.resize({width:n||1,height:c||1});for(const _ in this.patterns){const{bin:b}=this.patterns[_],T=b.x+1,U=b.y+1,Q=this.getImage(_).data,O=Q.width,H=Q.height;A.R.copy(Q,f,{x:0,y:0},{x:T,y:U},{width:O,height:H}),A.R.copy(Q,f,{x:0,y:H-1},{x:T,y:U-1},{width:O,height:1}),A.R.copy(Q,f,{x:0,y:0},{x:T,y:U+H},{width:O,height:1}),A.R.copy(Q,f,{x:O-1,y:0},{x:T-1,y:U},{width:1,height:H}),A.R.copy(Q,f,{x:0,y:0},{x:T+O,y:U},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const c=this.getImage(n);c||A.w(`Image with ID: "${n}" was not found`),ot(c)&&this.updateImage(n,c)}}}const He=1e20;function Zt(m,e,n,c,f,_,b,T,U){for(let Q=e;Q<e+c;Q++)Ut(m,n*_+Q,_,f,b,T,U);for(let Q=n;Q<n+f;Q++)Ut(m,Q*_+e,1,c,b,T,U)}function Ut(m,e,n,c,f,_,b){_[0]=0,b[0]=-1e20,b[1]=He,f[0]=m[e];for(let T=1,U=0,Q=0;T<c;T++){f[T]=m[e+T*n];const O=T*T;do{const H=_[U];Q=(f[T]-f[H]+O-H*H)/(T-H)/2}while(Q<=b[U]&&--U>-1);U++,_[U]=T,b[U]=Q,b[U+1]=He}for(let T=0,U=0;T<c;T++){for(;b[U+1]<T;)U++;const Q=_[U],O=T-Q;m[e+T*n]=f[Q]+O*O}}class Vt{constructor(e,n){this.requestManager=e,this.localIdeographFontFamily=n,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return A._(this,void 0,void 0,function*(){const n=[];for(const _ in e)for(const b of e[_])n.push(this._getAndCacheGlyphsPromise(_,b));const c=yield Promise.all(n),f={};for(const{stack:_,id:b,glyph:T}of c)f[_]||(f[_]={}),f[_][b]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return f})}_getAndCacheGlyphsPromise(e,n){return A._(this,void 0,void 0,function*(){let c=this.entries[e];c||(c=this.entries[e]={glyphs:{},requests:{},ranges:{}});let f=c.glyphs[n];if(f!==void 0)return{stack:e,id:n,glyph:f};if(f=this._tinySDF(c,e,n),f)return c.glyphs[n]=f,{stack:e,id:n,glyph:f};const _=Math.floor(n/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[_])return{stack:e,id:n,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[_]){const T=Vt.loadGlyphRange(e,_,this.url,this.requestManager);c.requests[_]=T}const b=yield c.requests[_];for(const T in b)this._doesCharSupportLocalGlyph(+T)||(c.glyphs[+T]=b[+T]);return c.ranges[_]=!0,{stack:e,id:n,glyph:b[n]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(e))||A.u["CJK Unified Ideographs"](e)||A.u["Hangul Syllables"](e)||A.u.Hiragana(e)||A.u.Katakana(e)||A.u["CJK Symbols and Punctuation"](e)||A.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,n,c){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(c))return;let _=e.tinySDF;if(!_){let T="400";/bold/i.test(n)?T="900":/medium/i.test(n)?T="500":/light/i.test(n)&&(T="200"),_=e.tinySDF=new Vt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:T})}const b=_.draw(String.fromCharCode(c));return{id:c,bitmap:new A.q({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}Vt.loadGlyphRange=function(m,e,n,c){return A._(this,void 0,void 0,function*(){const f=256*e,_=f+255,b=c.transformRequest(n.replace("{fontstack}",m).replace("{range}",`${f}-${_}`),"Glyphs"),T=yield A.n(b,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${e}, ${f}-${_}`);const U={};for(const Q of A.o(T.data))U[Q.id]=Q;return U})},Vt.TinySDF=class{constructor({fontSize:m=24,buffer:e=3,radius:n=8,cutoff:c=.25,fontFamily:f="sans-serif",fontWeight:_="normal",fontStyle:b="normal"}={}){this.buffer=e,this.cutoff=c,this.radius=n;const T=this.size=m+4*e,U=this._createCanvas(T),Q=this.ctx=U.getContext("2d",{willReadFrequently:!0});Q.font=`${b} ${_} ${m}px ${f}`,Q.textBaseline="alphabetic",Q.textAlign="left",Q.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(m){const e=document.createElement("canvas");return e.width=e.height=m,e}draw(m){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:c,actualBoundingBoxLeft:f,actualBoundingBoxRight:_}=this.ctx.measureText(m),b=Math.ceil(n),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-f))),U=Math.min(this.size-this.buffer,b+Math.ceil(c)),Q=T+2*this.buffer,O=U+2*this.buffer,H=Math.max(Q*O,0),z=new Uint8ClampedArray(H),Y={data:z,width:Q,height:O,glyphWidth:T,glyphHeight:U,glyphTop:b,glyphLeft:0,glyphAdvance:e};if(T===0||U===0)return Y;const{ctx:ee,buffer:Ae,gridInner:oe,gridOuter:ce}=this;ee.clearRect(Ae,Ae,T,U),ee.fillText(m,Ae,Ae+b);const fe=ee.getImageData(Ae,Ae,T,U);ce.fill(He,0,H),oe.fill(0,0,H);for(let me=0;me<U;me++)for(let _e=0;_e<T;_e++){const we=fe.data[4*(me*T+_e)+3]/255;if(we===0)continue;const Ue=(me+Ae)*Q+_e+Ae;if(we===1)ce[Ue]=0,oe[Ue]=He;else{const Ee=.5-we;ce[Ue]=Ee>0?Ee*Ee:0,oe[Ue]=Ee<0?Ee*Ee:0}}Zt(ce,0,0,Q,O,Q,this.f,this.v,this.z),Zt(oe,Ae,Ae,T,U,Q,this.f,this.v,this.z);for(let me=0;me<H;me++){const _e=Math.sqrt(ce[me])-Math.sqrt(oe[me]);z[me]=Math.round(255-255*(_e/this.radius+this.cutoff))}return Y}};class Wt{constructor(){this.specification=A.v.light.position}possiblyEvaluate(e,n){return A.z(e.expression.evaluate(n))}interpolate(e,n,c){return{x:A.B.number(e.x,n.x,c),y:A.B.number(e.y,n.y,c),z:A.B.number(e.z,n.z,c)}}}let Te;class ut extends A.E{constructor(e){super(),Te=Te||new A.r({anchor:new A.D(A.v.light.anchor),position:new Wt,color:new A.D(A.v.light.color),intensity:new A.D(A.v.light.intensity)}),this._transitionable=new A.T(Te),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(A.t,e,n))for(const c in e){const f=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),f):this._transitionable.setValue(c,f)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,c){return(!c||c.validate!==!1)&&A.x(this,e.call(A.y,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:A.v}))}}const Ct=new A.r({"sky-color":new A.D(A.v.sky["sky-color"]),"horizon-color":new A.D(A.v.sky["horizon-color"]),"fog-color":new A.D(A.v.sky["fog-color"]),"fog-ground-blend":new A.D(A.v.sky["fog-ground-blend"]),"horizon-fog-blend":new A.D(A.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new A.D(A.v.sky["sky-horizon-blend"]),"atmosphere-blend":new A.D(A.v.sky["atmosphere-blend"])});class Rt extends A.E{constructor(e){super(),this._transitionable=new A.T(Ct),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new A.C(0))}setSky(e,n={}){if(!this._validate(A.F,e,n)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const c in e){const f=e[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),f):this._transitionable.setValue(c,f)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,n,c={}){return(c==null?void 0:c.validate)!==!1&&A.x(this,e.call(A.y,A.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:A.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class he{constructor(e,n){this.width=e,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,n){const c=e.join(",")+String(n);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(e,n)),this.dashEntry[c]}getDashRanges(e,n,c){const f=[];let _=e.length%2==1?-e[e.length-1]*c:0,b=e[0]*c,T=!0;f.push({left:_,right:b,isDash:T,zeroLength:e[0]===0});let U=e[0];for(let Q=1;Q<e.length;Q++){T=!T;const O=e[Q];_=U*c,U+=O,b=U*c,f.push({left:_,right:b,isDash:T,zeroLength:O===0})}return f}addRoundDash(e,n,c){const f=n/2;for(let _=-c;_<=c;_++){const b=this.width*(this.nextRow+c+_);let T=0,U=e[T];for(let Q=0;Q<this.width;Q++){Q/U.right>1&&(U=e[++T]);const O=Math.abs(Q-U.left),H=Math.abs(Q-U.right),z=Math.min(O,H);let Y;const ee=_/c*(f+1);if(U.isDash){const Ae=f-Math.abs(ee);Y=Math.sqrt(z*z+Ae*Ae)}else Y=f-Math.sqrt(z*z+ee*ee);this.data[b+Q]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(e){for(let T=e.length-1;T>=0;--T){const U=e[T],Q=e[T+1];U.zeroLength?e.splice(T,1):Q&&Q.isDash===U.isDash&&(Q.left=U.left,e.splice(T,1))}const n=e[0],c=e[e.length-1];n.isDash===c.isDash&&(n.left=c.left-this.width,c.right=n.right+this.width);const f=this.width*this.nextRow;let _=0,b=e[_];for(let T=0;T<this.width;T++){T/b.right>1&&(b=e[++_]);const U=Math.abs(T-b.left),Q=Math.abs(T-b.right),O=Math.min(U,Q);this.data[f+T]=Math.max(0,Math.min(255,(b.isDash?O:-O)+128))}}addDash(e,n){const c=n?7:0,f=2*c+1;if(this.nextRow+f>this.height)return A.w("LineAtlas out of space"),null;let _=0;for(let T=0;T<e.length;T++)_+=e[T];if(_!==0){const T=this.width/_,U=this.getDashRanges(e,this.width,T);n?this.addRoundDash(U,T,c):this.addRegularDash(U)}const b={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:_};return this.nextRow+=f,this.dirty=!0,b}bind(e){const n=e.gl;this.texture?(n.bindTexture(n.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.width,this.height,n.ALPHA,n.UNSIGNED_BYTE,this.data))):(this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,this.data))}}const nt="maplibre_preloaded_worker_pool";class yt{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<yt.workerCount;)this.workers.push(new Worker(A.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(n=>{n.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nt]}numActive(){return Object.keys(this.active).length}}const _t=Math.floor(X.hardwareConcurrency/2);let xt,Ft;function Pt(){return xt||(xt=new yt),xt}yt.workerCount=A.G(globalThis)?Math.max(Math.min(_t,3),1):1;class ur{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n;const c=this.workerPool.acquire(n);for(let f=0;f<c.length;f++){const _=new A.H(c[f],n);_.name=`Worker ${f}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,n){const c=[];for(const f of this.actors)c.push(f.sendAsync({type:e,data:n}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(n=>{n.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,n){for(const c of this.actors)c.registerMessageHandler(e,n)}}function ir(){return Ft||(Ft=new ur(Pt(),A.J),Ft.registerMessageHandler("GR",(m,e,n)=>A.m(e,n))),Ft}function yr(m,e){const n=A.K();return A.L(n,n,[1,1,0]),A.M(n,n,[.5*m.width,.5*m.height,1]),m.calculatePosMatrix?A.N(n,n,m.calculatePosMatrix(e.toUnwrapped())):n}function nn(m,e,n,c,f,_,b){var T;const U=function(z,Y,ee){if(z)for(const Ae of z){const oe=Y[Ae];if(oe&&oe.source===ee&&oe.type==="fill-extrusion")return!0}else for(const Ae in Y){const oe=Y[Ae];if(oe.source===ee&&oe.type==="fill-extrusion")return!0}return!1}((T=f==null?void 0:f.layers)!==null&&T!==void 0?T:null,e,m.id),Q=_.maxPitchScaleFactor(),O=m.tilesIn(c,Q,U);O.sort(Rr);const H=[];for(const z of O)H.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(e,n,m._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,f,_,Q,yr(m.transform,z.tileID),b?(Y,ee)=>b(z.tileID,Y,ee):void 0)});return function(z,Y){for(const ee in z)for(const Ae of z[ee])Ye(Ae,Y);return z}(function(z){const Y={},ee={};for(const Ae of z){const oe=Ae.queryResults,ce=Ae.wrappedTileID,fe=ee[ce]=ee[ce]||{};for(const me in oe){const _e=oe[me],we=fe[me]=fe[me]||{},Ue=Y[me]=Y[me]||[];for(const Ee of _e)we[Ee.featureIndex]||(we[Ee.featureIndex]=!0,Ue.push(Ee))}}return Y}(H),m)}function Rr(m,e){const n=m.tileID,c=e.tileID;return n.overscaledZ-c.overscaledZ||n.canonical.y-c.canonical.y||n.wrap-c.wrap||n.canonical.x-c.canonical.x}function Ye(m,e){const n=m.feature,c=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=c}function Lt(m,e,n){return A._(this,void 0,void 0,function*(){let c=m;if(m.url?c=(yield A.j(e.transformRequest(m.url,"Source"),n)).data:yield X.frameAsync(n),!c)return null;const f=A.O(A.e(c,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(f.vectorLayerIds=c.vector_layers.map(_=>_.id)),f})}class bt{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof A.Q?new A.Q(e.lng,e.lat):A.Q.convert(e),this}setSouthWest(e){return this._sw=e instanceof A.Q?new A.Q(e.lng,e.lat):A.Q.convert(e),this}extend(e){const n=this._sw,c=this._ne;let f,_;if(e instanceof A.Q)f=e,_=e;else{if(!(e instanceof bt))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(bt.convert(e)):this.extend(A.Q.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(A.Q.convert(e)):this;if(f=e._sw,_=e._ne,!f||!_)return this}return n||c?(n.lng=Math.min(f.lng,n.lng),n.lat=Math.min(f.lat,n.lat),c.lng=Math.max(_.lng,c.lng),c.lat=Math.max(_.lat,c.lat)):(this._sw=new A.Q(f.lng,f.lat),this._ne=new A.Q(_.lng,_.lat)),this}getCenter(){return new A.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new A.Q(this.getWest(),this.getNorth())}getSouthEast(){return new A.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:c}=A.Q.convert(e);let f=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&f}static convert(e){return e instanceof bt?e:e&&new bt(e)}static fromLngLat(e,n=0){const c=360*n/40075017,f=c/Math.cos(Math.PI/180*e.lat);return new bt(new A.Q(e.lng-f,e.lat-c),new A.Q(e.lng+f,e.lat+c))}adjustAntiMeridian(){const e=new A.Q(this._sw.lng,this._sw.lat),n=new A.Q(this._ne.lng,this._ne.lat);return new bt(e,e.lng>n.lng?new A.Q(n.lng+360,n.lat):n)}}class xr{constructor(e,n,c){this.bounds=bt.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=c||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),c=Math.floor(A.U(this.bounds.getWest())*n),f=Math.floor(A.S(this.bounds.getNorth())*n),_=Math.ceil(A.U(this.bounds.getEast())*n),b=Math.ceil(A.S(this.bounds.getSouth())*n);return e.x>=c&&e.x<_&&e.y>=f&&e.y<b}}class Xr extends A.E{constructor(e,n,c,f){if(super(),this.id=e,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,A.e(this,A.O(n,["url","scheme","tileSize","promoteId"])),this._options=A.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield Lt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(A.e(this,e),e.bounds&&(this.tileBounds=new xr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new A.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new A.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return A.e({},this._options)}loadTile(e){return A._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(n,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};c.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((_,b)=>{e.reloadPromise={resolve:_,reject:b}})}else e.actor=this.dispatcher.getActor(),f="LT";e.abortController=new AbortController;try{const _=yield e.actor.sendAsync({type:f,data:c},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,_)}catch(_){if(delete e.abortController,e.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,n){if(n&&n.resourceTiming&&(e.resourceTiming=n.resourceTiming),n&&this.map._refreshExpiredTiles&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),e.reloadPromise){const c=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(c.resolve).catch(c.reject)}}abortTile(e){return A._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return A._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ar extends A.E{constructor(e,n,c,f){super(),this.id=e,this.dispatcher=c,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=A.e({type:"raster"},n),A.e(this,A.O(n,["url","scheme","tileSize"]))}load(){return A._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new A.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield Lt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,n&&(A.e(this,n),n.bounds&&(this.tileBounds=new xr(n.bounds,this.minzoom,this.maxzoom)),this.fire(new A.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(n){this._tileJSONRequest=null,this.fire(new A.k(n))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return A.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return A._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const c=yield Re.getImage(this.map._requestManager.transformRequest(n,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&e.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const f=this.map.painter.context,_=f.gl,b=c.data;e.texture=this.map.painter.getTileTexture(b.width),e.texture?e.texture.update(b,{useMipmap:!0}):(e.texture=new mt(f,b,_.RGBA,{useMipmap:!0}),e.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(c){if(delete e.abortController,e.aborted)e.state="unloaded";else if(c)throw e.state="errored",c}})}abortTile(e){return A._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return A._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class jr extends Ar{constructor(e,n,c,f){super(e,n,c,f),this.type="raster-dem",this.maxzoom=22,this._options=A.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(e){return A._(this,void 0,void 0,function*(){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(n,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const f=yield Re.getImage(c,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(f&&f.data){const _=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&e.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const b=A.b(_)&&A.V()?_:yield this.readImageNow(_),T={type:this.type,uid:e.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const U=yield e.actor.sendAsync({type:"LDT",data:T});e.dem=U,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(f){if(delete e.abortController,e.aborted)e.state="unloaded";else if(f)throw e.state="errored",f}})}readImageNow(e){return A._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&A.W()){const n=e.width+2,c=e.height+2;try{return new A.R({width:n,height:c},yield A.X(e,-1,-1,n,c))}catch{}}return X.getImageData(e,1)})}_getNeighboringTiles(e){const n=e.canonical,c=Math.pow(2,n.z),f=(n.x-1+c)%c,_=n.x===0?e.wrap-1:e.wrap,b=(n.x+1+c)%c,T=n.x+1===c?e.wrap+1:e.wrap,U={};return U[new A.Y(e.overscaledZ,_,n.z,f,n.y).key]={backfilled:!1},U[new A.Y(e.overscaledZ,T,n.z,b,n.y).key]={backfilled:!1},n.y>0&&(U[new A.Y(e.overscaledZ,_,n.z,f,n.y-1).key]={backfilled:!1},U[new A.Y(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},U[new A.Y(e.overscaledZ,T,n.z,b,n.y-1).key]={backfilled:!1}),n.y+1<c&&(U[new A.Y(e.overscaledZ,_,n.z,f,n.y+1).key]={backfilled:!1},U[new A.Y(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},U[new A.Y(e.overscaledZ,T,n.z,b,n.y+1).key]={backfilled:!1}),U}unloadTile(e){return A._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class Rn extends A.E{constructor(e,n,c,f){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(f),this._data=n.data,this._options=A.e({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId,n.clusterMaxZoom!==void 0&&this.maxzoom<=n.clusterMaxZoom&&A.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${n.clusterMaxZoom}".`),this.workerOptions=A.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(n.buffer!==void 0?n.buffer:128),tolerance:this._pixelsToTileUnits(n.tolerance!==void 0?n.tolerance:.375),extent:A.Z,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:n.clusterMaxZoom!==void 0?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:A.Z,radius:this._pixelsToTileUnits(n.clusterRadius||50),log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(A.Z/this.tileSize)}load(){return A._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return A._(this,void 0,void 0,function*(){const e=A.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(n=>n.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return A._(this,void 0,void 0,function*(){const e=new bt,n=yield this.getData();let c;switch(n.type){case"FeatureCollection":c=n.features.map(f=>this.getCoordinatesFromGeometry(f.geometry)).flat(1/0);break;case"Feature":c=this.getCoordinatesFromGeometry(n.geometry);break;default:c=this.getCoordinatesFromGeometry(n)}if(c.length==0)return e;for(let f=0;f<c.length-1;f+=2)e.extend([c[f],c[f+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,n,c){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:n,offset:c}})}_updateWorkerData(e){return A._(this,void 0,void 0,function*(){const n=A.e({type:this.type},this.workerOptions);e?n.dataDiff=e:typeof this._data=="string"?(n.request=this.map._requestManager.transformRequest(X.resolveURL(this._data),"Source"),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new A.l("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:n});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new A.l("dataabort",{dataType:"source"}));let f=null;c.resourceTiming&&c.resourceTiming[this.id]&&(f=c.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&A.e(_,{resourceTiming:f}),this.fire(new A.l("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new A.l("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new A.l("dataabort",{dataType:"source"}));this.fire(new A.k(c))}})}loaded(){return this._pendingLoads===0}loadTile(e){return A._(this,void 0,void 0,function*(){const n=e.actor?"RT":"LT";e.actor=this.actor;const c={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const f=yield this.actor.sendAsync({type:n,data:c},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(f,this.map.painter,n==="RT")})}abortTile(e){return A._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return A._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return A.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class vr extends A.E{constructor(e,n,c,f){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=c,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=n}load(e){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const n=yield Re.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,n&&n.data&&(this.image=n.data,e&&(this.coordinates=e),this._finishLoading())}catch(n){this._request=null,this._loaded=!0,this.fire(new A.k(n))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new A.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const n=e.map(A.$.fromLngLat);var c;return this.tileID=function(f){let _=1/0,b=1/0,T=-1/0,U=-1/0;for(const z of f)_=Math.min(_,z.x),b=Math.min(b,z.y),T=Math.max(T,z.x),U=Math.max(U,z.y);const Q=Math.max(T-_,U-b),O=Math.max(0,Math.floor(-Math.log(Q)/Math.LN2)),H=Math.pow(2,O);return new A.a1(O,Math.floor((_+T)/2*H),Math.floor((b+U)/2*H))}(n),this.terrainTileRanges=this._getOverlappingTileRanges(n),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=n.map(f=>this.tileID.getTilePoint(f)._round()),this.flippedWindingOrder=((c=this.tileCoords)[1].x-c[0].x)*(c[2].y-c[0].y)-(c[1].y-c[0].y)*(c[2].x-c[0].x)<0,this.fire(new A.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,n=e.gl;this.texture||(this.texture=new mt(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let c=!1;for(const f in this.tiles){const _=this.tiles[f];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,c=!0)}c&&this.fire(new A.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return A._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let n=1/0,c=1/0,f=-1/0,_=-1/0;for(const T of e)n=Math.min(n,T.x),c=Math.min(c,T.y),f=Math.max(f,T.x),_=Math.max(_,T.y);const b={};for(let T=0;T<=A.a0;T++){const U=Math.pow(2,T),Q=Math.floor(n*U),O=Math.floor(c*U),H=Math.floor(f*U),z=Math.floor(_*U);b[T]={minTileX:Q,minTileY:O,maxTileX:H,maxTileY:z}}return b}}class Gr extends vr{constructor(e,n,c,f){super(e,n,c,f),this.roundZoom=!0,this.type="video",this.options=n}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,"Source").url);try{const n=yield A.a2(this.urls);if(this._loaded=!0,!n)return;this.video=n,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(n){this.fire(new A.k(n))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new A.k(new A.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new mt(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let c=!1;for(const f in this.tiles){const _=this.tiles[f];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,c=!0)}c&&this.fire(new A.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class cn extends vr{constructor(e,n,c,f){super(e,n,c,f),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(b=>typeof b!="number"))||this.fire(new A.k(new A.a3(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new A.k(new A.a3(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new A.k(new A.a3(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof HTMLCanvasElement||this.fire(new A.k(new A.a3(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new A.k(new A.a3(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){return A._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new A.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const n=this.map.painter.context,c=n.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new mt(n,this.canvas,c.RGBA,{premultiply:!0});let f=!1;for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new A.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const en={},fr=m=>{switch(m){case"geojson":return Rn;case"image":return vr;case"raster":return Ar;case"raster-dem":return jr;case"vector":return Xr;case"video":return Gr;case"canvas":return cn}return en[m]},or="RTLPluginLoaded";class Nn extends A.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ir()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(n=>{throw this.status="error",n})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return A._(this,arguments,void 0,function*(n,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=X.resolveURL(n),!this.url)throw new Error(`requested url ${n} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return A._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new A.l(or))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Nr=null;function Yr(){return Nr||(Nr=new Nn),Nr}class Un{constructor(e,n){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=A.a4(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const n=e+this.timeAdded;n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,n,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(f,_){const b={};if(!_)return b;for(const T of f){const U=T.layerIds.map(Q=>_.getLayer(Q)).filter(Boolean);if(U.length!==0){T.layers=U,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(Q=>U.filter(O=>O.id===Q)[0]));for(const Q of U)b[Q.id]=T}}return b}(e.buckets,n==null?void 0:n.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const _=this.buckets[f];if(_ instanceof A.a6){if(this.hasSymbolBuckets=!0,!c)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const _=this.buckets[f];if(_ instanceof A.a6&&_.hasRTLText){this.hasRTLText=!0,Yr().lazyLoad();break}}this.queryPadding=0;for(const f in this.buckets){const _=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(f).queryRadius(_))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new A.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const c in this.buckets){const f=this.buckets[c];f.uploadPending()&&f.upload(e)}const n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mt(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mt(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,n,c,f,_,b,T,U,Q,O,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:_,scale:b,tileSize:this.tileSize,pixelPosMatrix:O,transform:U,params:T,queryPadding:this.queryPadding*Q,getElevation:H},e,n,c):{}}querySourceFeatures(e,n){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const f=c.loadVTLayers(),_=n&&n.sourceLayer?n.sourceLayer:"",b=f._geojsonTileLayer||f[_];if(!b)return;const T=A.a7(n&&n.filter),{z:U,x:Q,y:O}=this.tileID.canonical,H={z:U,x:Q,y:O};for(let z=0;z<b.length;z++){const Y=b.feature(z);if(T.needGeometry){const oe=A.a8(Y,!0);if(!T.filter(new A.C(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!T.filter(new A.C(this.tileID.overscaledZ),Y))continue;const ee=c.getId(Y,_),Ae=new A.a9(Y,U,Q,O,ee);Ae.tile=H,e.push(Ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const c=A.aa(e.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const c=Date.now();let f=!1;if(this.expirationTime>c)f=!1;else if(n)if(this.expirationTime<n)f=!0;else{const _=this.expirationTime-n;_?this.expirationTime=c+Math.max(_,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,n){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!n.style.hasLayer(f))continue;const _=this.buckets[f],b=_.layers[0].sourceLayer||"_geojsonTileLayer",T=c[b],U=e[b];if(!T||!U||Object.keys(U).length===0)continue;_.update(U,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Q=n&&n.style&&n.style.getLayer(f);Q&&(this.queryPadding=Math.max(this.queryPadding,Q.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=X.now()+e}setDependencies(e,n){const c={};for(const f of n)c[f]=!0;this.dependencies[e]=c}hasDependency(e,n){for(const c of e){const f=this.dependencies[c];if(f){for(const _ of n)if(f[_])return!0}}return!1}}class Ii{constructor(e,n){this.max=e,this.onRemove=n,this.reset()}reset(){for(const e in this.data)for(const n of this.data[e])n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value);return this.data={},this.order=[],this}add(e,n,c){const f=e.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const _={value:n,timeout:void 0};if(c!==void 0&&(_.timeout=setTimeout(()=>{this.remove(e,_)},c)),this.data[f].push(_),this.order.push(f),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const n=this.data[e].shift();return n.timeout&&clearTimeout(n.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),n.value}getByKey(e){const n=this.data[e];return n?n[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,n){if(!this.has(e))return this;const c=e.wrapped().key,f=n===void 0?0:this.data[c].indexOf(n),_=this.data[c][f];return this.data[c].splice(f,1),_.timeout&&clearTimeout(_.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(_.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const n=this._getAndRemoveByKey(this.order[0]);n&&this.onRemove(n)}return this}filter(e){const n=[];for(const c in this.data)for(const f of this.data[c])e(f.value)||n.push(f);for(const c of n)this.remove(c.value.tileID,c)}}class jn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,c){const f=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][f]=this.stateChanges[e][f]||{},A.e(this.stateChanges[e][f],c),this.deletedStates[e]===null){this.deletedStates[e]={};for(const _ in this.state[e])_!==f&&(this.deletedStates[e][_]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][f]===null){this.deletedStates[e][f]={};for(const _ in this.state[e][f])c[_]||(this.deletedStates[e][f][_]=null)}else for(const _ in c)this.deletedStates[e]&&this.deletedStates[e][f]&&this.deletedStates[e][f][_]===null&&delete this.deletedStates[e][f][_]}removeFeatureState(e,n,c){if(this.deletedStates[e]===null)return;const f=String(n);if(this.deletedStates[e]=this.deletedStates[e]||{},c&&n!==void 0)this.deletedStates[e][f]!==null&&(this.deletedStates[e][f]=this.deletedStates[e][f]||{},this.deletedStates[e][f][c]=null);else if(n!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][f])for(c in this.deletedStates[e][f]={},this.stateChanges[e][f])this.deletedStates[e][f][c]=null;else this.deletedStates[e][f]=null;else this.deletedStates[e]=null}getState(e,n){const c=String(n),f=A.e({},(this.state[e]||{})[c],(this.stateChanges[e]||{})[c]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const _=this.deletedStates[e][n];if(_===null)return{};for(const b in _)delete f[b]}return f}initializeTileState(e,n){e.setFeatureState(this.state,n)}coalesceChanges(e,n){const c={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const _={};for(const b in this.stateChanges[f])this.state[f][b]||(this.state[f][b]={}),A.e(this.state[f][b],this.stateChanges[f][b]),_[b]=this.state[f][b];c[f]=_}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const _={};if(this.deletedStates[f]===null)for(const b in this.state[f])_[b]={},this.state[f][b]={};else for(const b in this.deletedStates[f]){if(this.deletedStates[f][b]===null)this.state[f][b]={};else for(const T of Object.keys(this.deletedStates[f][b]))delete this.state[f][b][T];_[b]=this.state[f][b]}c[f]=c[f]||{},A.e(c[f],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const f in e)e[f].setFeatureState(c,n)}}function as(m,e,n){const c=e.intersectsFrustum(m);if(!n)return c;const f=e.intersectsPlane(n);return c===0||f===0?0:c===2&&f===2?2:1}function No(m,e,n,c,f){let _=m;const b=Math.atan(e/n),T=Math.hypot(e,n);return _=m+A.ab(c/T/Math.max(.5,Math.cos(A.ad(f/2)))),_+=1*A.ab(Math.cos(b))/2,_+=A.ae(m-_,-0,0),_}function Ba(m,e){const n=(e.roundZoom?Math.round:Math.floor)(m.zoom+A.ab(m.tileSize/e.tileSize));return Math.max(0,n)}function Le(m,e){const n=m.getCameraFrustum(),c=m.getClippingPlane(),f=m.screenPointToMercatorCoordinate(m.getCameraPoint()),_=A.$.fromLngLat(m.center,m.elevation);f.z=_.z+Math.cos(m.pitchInRadians)*m.cameraToCenterDistance/m.worldSize;const b=m.getCoveringTilesDetailsProvider(),T=b.allowVariableZoom(m,e),U=Ba(m,e),Q=e.minzoom||0,O=e.maxzoom!==void 0?e.maxzoom:m.maxZoom,H=Math.min(Math.max(0,U),O),z=Math.pow(2,H),Y=[z*f.x,z*f.y,0],ee=[z*_.x,z*_.y,0],Ae=Math.hypot(_.x-f.x,_.y-f.y),oe=Math.abs(_.z-f.z),ce=Math.hypot(Ae,oe),fe=we=>({zoom:0,x:0,y:0,wrap:we,fullyVisible:!1}),me=[],_e=[];if(m.renderWorldCopies&&b.allowWorldCopies())for(let we=1;we<=3;we++)me.push(fe(-we)),me.push(fe(we));for(me.push(fe(0));me.length>0;){const we=me.pop(),Ue=we.x,Ee=we.y;let Ge=we.fullyVisible;const je={x:Ue,y:Ee,z:we.zoom},rt=b.getTileAABB(je,we.wrap,m.elevation,e);if(!Ge){const Bt=as(n,rt,c);if(Bt===0)continue;Ge=Bt===2}const it=b.distanceToTile2d(f.x,f.y,je,rt);let et=U;T&&(et=(e.calculateTileZoom||No)(m.zoom+A.ab(m.tileSize/e.tileSize),it,oe,ce,m.fov)),et=(e.roundZoom?Math.round:Math.floor)(et),et=Math.max(0,et);const Et=Math.min(et,O);if(we.wrap=b.getWrap(_,je,we.wrap),we.zoom>=Et){if(we.zoom<Q)continue;const Bt=H-we.zoom,lt=Y[0]-.5-(Ue<<Bt),kt=Y[1]-.5-(Ee<<Bt),hr=e.reparseOverscaled?Math.max(we.zoom,et):we.zoom;_e.push({tileID:new A.Y(we.zoom===O?hr:we.zoom,we.wrap,we.zoom,Ue,Ee),distanceSq:A.ac([ee[0]-.5-Ue,ee[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(lt*lt+kt*kt)})}else for(let Bt=0;Bt<4;Bt++)me.push({zoom:we.zoom+1,x:(Ue<<1)+Bt%2,y:(Ee<<1)+(Bt>>1),wrap:we.wrap,fullyVisible:Ge})}return _e.sort((we,Ue)=>we.distanceSq-Ue.distanceSq).map(we=>we.tileID)}class J extends A.E{constructor(e,n,c){super(),this.id=e,this.dispatcher=c,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,_,b,T)=>{const U=new(fr(_.type))(f,_,b,T);if(U.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${U.id}`);return U})(e,n,c,this),this._tiles={},this._cache=new Ii(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new jn,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const n=this._tiles[e];if(n.state!=="loaded"&&n.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,n,c){return A._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,n,c)}catch(f){e.state="errored",f.status!==404?this._source.fire(new A.k(f,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new A.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const n in this._tiles){const c=this._tiles[n];c.upload(e),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(te).map(e=>e.key)}getRenderableIds(e){const n=[];for(const c in this._tiles)this._isIdRenderable(c,e)&&n.push(this._tiles[c]);return e?n.sort((c,f)=>{const _=c.tileID,b=f.tileID,T=new A.P(_.canonical.x,_.canonical.y)._rotate(-this.transform.bearingInRadians),U=new A.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians);return _.overscaledZ-b.overscaledZ||U.y-T.y||U.x-T.x}).map(c=>c.tileID.key):n.map(c=>c.tileID).sort(te).map(c=>c.key)}hasRenderableParent(e){const n=this.findLoadedParent(e,0);return!!n&&this._isIdRenderable(n.tileID.key)}_isIdRenderable(e,n){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(n||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)(e||this._tiles[n].state!=="errored")&&this._reloadTile(n,"reloading")}}_reloadTile(e,n){return A._(this,void 0,void 0,function*(){const c=this._tiles[e];c&&(c.state!=="loading"&&(c.state=n),yield this._loadTile(c,e,n))})}_tileLoaded(e,n,c){e.timeAdded=X.now(),c==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new A.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const n=this.getRenderableIds();for(let f=0;f<n.length;f++){const _=n[f];if(e.neighboringTiles&&e.neighboringTiles[_]){const b=this.getTileByID(_);c(e,b),c(b,e)}}function c(f,_){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let b=_.tileID.canonical.x-f.tileID.canonical.x;const T=_.tileID.canonical.y-f.tileID.canonical.y,U=Math.pow(2,f.tileID.canonical.z),Q=_.tileID.key;b===0&&T===0||Math.abs(T)>1||(Math.abs(b)>1&&(Math.abs(b+U)===1?b+=U:Math.abs(b-U)===1&&(b-=U)),_.dem&&f.dem&&(f.dem.backfillBorder(_.dem,b,T),f.neighboringTiles&&f.neighboringTiles[Q]&&(f.neighboringTiles[Q].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,n,c,f){for(const _ in this._tiles){let b=this._tiles[_];if(f[_]||!b.hasData()||b.tileID.overscaledZ<=n||b.tileID.overscaledZ>c)continue;let T=b.tileID;for(;b&&b.tileID.overscaledZ>n+1;){const Q=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[Q.key],b&&b.hasData()&&(T=Q)}let U=T;for(;U.overscaledZ>n;)if(U=U.scaledTo(U.overscaledZ-1),e[U.key]||e[U.canonical.key]){f[T.key]=T;break}}}findLoadedParent(e,n){if(e.key in this._loadedParentTiles){const c=this._loadedParentTiles[e.key];return c&&c.tileID.overscaledZ>=n?c:null}for(let c=e.overscaledZ-1;c>=n;c--){const f=e.scaledTo(c),_=this._getLoadedTile(f);if(_)return _}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const n=this._tiles[e.key];return n&&n.hasData()?n:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const n=Math.ceil(e.width/this._source.tileSize)+1,c=Math.ceil(e.height/this._source.tileSize)+1,f=Math.floor(n*c*(this._maxTileCacheZoomLevels===null?A.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(_)}handleWrapJump(e){const n=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,n){const c={};for(const f in this._tiles){const _=this._tiles[f];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+n),c[_.tileID.key]=_}this._tiles=c;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(e,n,c,f,_,b){const T={},U={},Q=Object.keys(e),O=X.now();for(const H of Q){const z=e[H],Y=this._tiles[H];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=O)continue;const ee=this.findLoadedParent(z,n),Ae=this.findLoadedSibling(z),oe=ee||Ae||null;oe&&(this._addTile(oe.tileID),T[oe.tileID.key]=oe.tileID),U[H]=z}this._retainLoadedChildren(U,f,c,e);for(const H in T)e[H]||(this._coveredTiles[H]=!0,e[H]=T[H]);if(b){const H={},z={};for(const Y of _)this._tiles[Y.key].hasData()?H[Y.key]=Y:z[Y.key]=Y;for(const Y in z){const ee=z[Y].children(this._source.maxzoom);this._tiles[ee[0].key]&&this._tiles[ee[1].key]&&this._tiles[ee[2].key]&&this._tiles[ee[3].key]&&(H[ee[0].key]=e[ee[0].key]=ee[0],H[ee[1].key]=e[ee[1].key]=ee[1],H[ee[2].key]=e[ee[2].key]=ee[2],H[ee[3].key]=e[ee[3].key]=ee[3],delete z[Y])}for(const Y in z){const ee=z[Y],Ae=this.findLoadedParent(ee,this._source.minzoom),oe=this.findLoadedSibling(ee),ce=Ae||oe||null;if(ce){H[ce.tileID.key]=e[ce.tileID.key]=ce.tileID;for(const fe in H)H[fe].isChildOf(ce.tileID)&&delete H[fe]}}for(const Y in this._tiles)H[Y]||(this._coveredTiles[Y]=!0)}}update(e,n){if(!this._sourceLoaded||this._paused)return;let c;this.transform=e,this.terrain=n,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new A.Y(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(c=Le(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(c=c.filter(O=>this._source.hasTile(O)))):c=[];const f=Ba(e,this._source),_=Math.max(f-J.maxOverzooming,this._source.minzoom),b=Math.max(f+J.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const H of c)if(H.canonical.z>this._source.minzoom){const z=H.scaledTo(H.canonical.z-1);O[z.key]=z;const Y=H.scaledTo(Math.max(this._source.minzoom,Math.min(H.canonical.z,5)));O[Y.key]=Y}c=c.concat(Object.values(O))}const T=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new A.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const U=this._updateRetainedTiles(c,f);K(this._source.type)&&this._updateCoveredAndRetainedTiles(U,_,b,f,c,n);for(const O in U)this._tiles[O].clearFadeHold();const Q=A.af(this._tiles,U);for(const O of Q){const H=this._tiles[O];H.hasSymbolBuckets&&!H.holdingForFade()?H.setHoldDuration(this.map._fadeDuration):H.hasSymbolBuckets&&!H.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,n){var c;const f={},_={},b=Math.max(n-J.maxOverzooming,this._source.minzoom),T=Math.max(n+J.maxUnderzooming,this._source.minzoom),U={};for(const Q of e){const O=this._addTile(Q);f[Q.key]=Q,O.hasData()||n<this._source.maxzoom&&(U[Q.key]=Q)}this._retainLoadedChildren(U,n,T,f);for(const Q of e){let O=this._tiles[Q.key];if(O.hasData())continue;if(n+1>this._source.maxzoom){const z=Q.children(this._source.maxzoom)[0],Y=this.getTile(z);if(Y&&Y.hasData()){f[z.key]=z;continue}}else{const z=Q.children(this._source.maxzoom);if(f[z[0].key]&&f[z[1].key]&&f[z[2].key]&&f[z[3].key])continue}let H=O.wasRequested();for(let z=Q.overscaledZ-1;z>=b;--z){const Y=Q.scaledTo(z);if(_[Y.key])break;if(_[Y.key]=!0,O=this.getTile(Y),!O&&H&&(O=this._addTile(Y)),O){const ee=O.hasData();if((ee||!(!((c=this.map)===null||c===void 0)&&c.cancelPendingTileRequestsWhileZooming)||H)&&(f[Y.key]=Y),H=O.wasRequested(),ee)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const n=[];let c,f=this._tiles[e].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){c=this._loadedParentTiles[f.key];break}n.push(f.key);const _=f.scaledTo(f.overscaledZ-1);if(c=this._getLoadedTile(_),c)break;f=_}for(const _ of n)this._loadedParentTiles[_]=c}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const n=this._tiles[e].tileID,c=this._getLoadedTile(n);this._loadedSiblingTiles[n.key]=c}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const c=n;return n||(n=new Un(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,e.key,n.state)),n.uses++,this._tiles[e.key]=n,c||this._source.fire(new A.l("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(e,n){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const c=n.getExpiryTimeout();c&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},c))}_removeTile(e){const n=this._tiles[e];n&&(n.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),n.uses>0||(n.hasData()&&n.state!=="reloading"?this._cache.add(n.tileID,n,n.getExpiryTimeout()):(n.aborted=!0,this._abortTile(n),this._unloadTile(n))))}_dataHandler(e){const n=e.sourceDataType;e.dataType==="source"&&n==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&n==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,n,c){const f=[],_=this.transform;if(!_)return f;const b=c?_.getCameraQueryGeometry(e):e,T=e.map(ee=>_.screenPointToMercatorCoordinate(ee,this.terrain)),U=b.map(ee=>_.screenPointToMercatorCoordinate(ee,this.terrain)),Q=this.getIds();let O=1/0,H=1/0,z=-1/0,Y=-1/0;for(const ee of U)O=Math.min(O,ee.x),H=Math.min(H,ee.y),z=Math.max(z,ee.x),Y=Math.max(Y,ee.y);for(let ee=0;ee<Q.length;ee++){const Ae=this._tiles[Q[ee]];if(Ae.holdingForFade())continue;const oe=Ae.tileID,ce=Math.pow(2,_.zoom-Ae.tileID.overscaledZ),fe=n*Ae.queryPadding*A.Z/Ae.tileSize/ce,me=[oe.getTilePoint(new A.$(O,H)),oe.getTilePoint(new A.$(z,Y))];if(me[0].x-fe<A.Z&&me[0].y-fe<A.Z&&me[1].x+fe>=0&&me[1].y+fe>=0){const _e=T.map(Ue=>oe.getTilePoint(Ue)),we=U.map(Ue=>oe.getTilePoint(Ue));f.push({tile:Ae,tileID:oe,queryGeometry:_e,cameraQueryGeometry:we,scale:ce})}}return f}getVisibleCoordinates(e){const n=this.getRenderableIds(e).map(c=>this._tiles[c].tileID);return this.transform&&this.transform.populateCache(n),n}hasTransition(){if(this._source.hasTransition())return!0;if(K(this._source.type)){const e=X.now();for(const n in this._tiles)if(this._tiles[n].fadeEndTime>=e)return!0}return!1}setFeatureState(e,n,c){this._state.updateState(e=e||"_geojsonTileLayer",n,c)}removeFeatureState(e,n,c){this._state.removeFeatureState(e=e||"_geojsonTileLayer",n,c)}getFeatureState(e,n){return this._state.getState(e=e||"_geojsonTileLayer",n)}setDependencies(e,n,c){const f=this._tiles[e];f&&f.setDependencies(n,c)}reloadTilesForDependencies(e,n){for(const c in this._tiles)this._tiles[c].hasDependency(e,n)&&this._reloadTile(c,"reloading");this._cache.filter(c=>!c.hasDependency(e,n))}}function te(m,e){const n=Math.abs(2*m.wrap)-+(m.wrap<0),c=Math.abs(2*e.wrap)-+(e.wrap<0);return m.overscaledZ-e.overscaledZ||c-n||e.canonical.y-m.canonical.y||e.canonical.x-m.canonical.x}function K(m){return m==="raster"||m==="image"||m==="video"}J.maxOverzooming=10,J.maxUnderzooming=3;class pe{constructor(e,n){this.reset(e,n)}reset(e,n){this.points=e||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(n||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=A.ae(e,0,1);let n=1,c=this._distances[n];const f=e*this.paddedLength+this.padding;for(;c<f&&n<this._distances.length;)c=this._distances[++n];const _=n-1,b=this._distances[_],T=c-b,U=T>0?(f-b)/T:0;return this.points[_].mult(1-U).add(this.points[n].mult(U))}}function Fe(m,e){let n=!0;return m==="always"||m!=="never"&&e!=="never"||(n=!1),n}class Ce{constructor(e,n,c){const f=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(e/c),this.yCellCount=Math.ceil(n/c);for(let b=0;b<this.xCellCount*this.yCellCount;b++)f.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,n,c,f,_){this._forEachCell(n,c,f,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(n),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(_)}insertCircle(e,n,c,f){this._forEachCell(n-f,c-f,n+f,c+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(n),this.circles.push(c),this.circles.push(f)}_insertBoxCell(e,n,c,f,_,b){this.boxCells[_].push(b)}_insertCircleCell(e,n,c,f,_,b){this.circleCells[_].push(b)}_query(e,n,c,f,_,b,T){if(c<0||e>this.width||f<0||n>this.height)return[];const U=[];if(e<=0&&n<=0&&this.width<=c&&this.height<=f){if(_)return[{key:null,x1:e,y1:n,x2:c,y2:f}];for(let Q=0;Q<this.boxKeys.length;Q++)U.push({key:this.boxKeys[Q],x1:this.bboxes[4*Q],y1:this.bboxes[4*Q+1],x2:this.bboxes[4*Q+2],y2:this.bboxes[4*Q+3]});for(let Q=0;Q<this.circleKeys.length;Q++){const O=this.circles[3*Q],H=this.circles[3*Q+1],z=this.circles[3*Q+2];U.push({key:this.circleKeys[Q],x1:O-z,y1:H-z,x2:O+z,y2:H+z})}}else this._forEachCell(e,n,c,f,this._queryCell,U,{hitTest:_,overlapMode:b,seenUids:{box:{},circle:{}}},T);return U}query(e,n,c,f){return this._query(e,n,c,f,!1,null)}hitTest(e,n,c,f,_,b){return this._query(e,n,c,f,!0,_,b).length>0}hitTestCircle(e,n,c,f,_){const b=e-c,T=e+c,U=n-c,Q=n+c;if(T<0||b>this.width||Q<0||U>this.height)return!1;const O=[];return this._forEachCell(b,U,T,Q,this._queryCellCircle,O,{hitTest:!0,overlapMode:f,circle:{x:e,y:n,radius:c},seenUids:{box:{},circle:{}}},_),O.length>0}_queryCell(e,n,c,f,_,b,T,U){const{seenUids:Q,hitTest:O,overlapMode:H}=T,z=this.boxCells[_];if(z!==null){const ee=this.bboxes;for(const Ae of z)if(!Q.box[Ae]){Q.box[Ae]=!0;const oe=4*Ae,ce=this.boxKeys[Ae];if(e<=ee[oe+2]&&n<=ee[oe+3]&&c>=ee[oe+0]&&f>=ee[oe+1]&&(!U||U(ce))&&(!O||!Fe(H,ce.overlapMode))&&(b.push({key:ce,x1:ee[oe],y1:ee[oe+1],x2:ee[oe+2],y2:ee[oe+3]}),O))return!0}}const Y=this.circleCells[_];if(Y!==null){const ee=this.circles;for(const Ae of Y)if(!Q.circle[Ae]){Q.circle[Ae]=!0;const oe=3*Ae,ce=this.circleKeys[Ae];if(this._circleAndRectCollide(ee[oe],ee[oe+1],ee[oe+2],e,n,c,f)&&(!U||U(ce))&&(!O||!Fe(H,ce.overlapMode))){const fe=ee[oe],me=ee[oe+1],_e=ee[oe+2];if(b.push({key:ce,x1:fe-_e,y1:me-_e,x2:fe+_e,y2:me+_e}),O)return!0}}}return!1}_queryCellCircle(e,n,c,f,_,b,T,U){const{circle:Q,seenUids:O,overlapMode:H}=T,z=this.boxCells[_];if(z!==null){const ee=this.bboxes;for(const Ae of z)if(!O.box[Ae]){O.box[Ae]=!0;const oe=4*Ae,ce=this.boxKeys[Ae];if(this._circleAndRectCollide(Q.x,Q.y,Q.radius,ee[oe+0],ee[oe+1],ee[oe+2],ee[oe+3])&&(!U||U(ce))&&!Fe(H,ce.overlapMode))return b.push(!0),!0}}const Y=this.circleCells[_];if(Y!==null){const ee=this.circles;for(const Ae of Y)if(!O.circle[Ae]){O.circle[Ae]=!0;const oe=3*Ae,ce=this.circleKeys[Ae];if(this._circlesCollide(ee[oe],ee[oe+1],ee[oe+2],Q.x,Q.y,Q.radius)&&(!U||U(ce))&&!Fe(H,ce.overlapMode))return b.push(!0),!0}}}_forEachCell(e,n,c,f,_,b,T,U){const Q=this._convertToXCellCoord(e),O=this._convertToYCellCoord(n),H=this._convertToXCellCoord(c),z=this._convertToYCellCoord(f);for(let Y=Q;Y<=H;Y++)for(let ee=O;ee<=z;ee++)if(_.call(this,e,n,c,f,this.xCellCount*ee+Y,b,T,U))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,n,c,f,_,b){const T=f-e,U=_-n,Q=c+b;return Q*Q>T*T+U*U}_circleAndRectCollide(e,n,c,f,_,b,T){const U=(b-f)/2,Q=Math.abs(e-(f+U));if(Q>U+c)return!1;const O=(T-_)/2,H=Math.abs(n-(_+O));if(H>O+c)return!1;if(Q<=U||H<=O)return!0;const z=Q-U,Y=H-O;return z*z+Y*Y<=c*c}}function ze(m,e,n){const c=A.K();if(!m){const{vecSouth:H,vecEast:z}=tt(e),Y=R();Y[0]=z[0],Y[1]=z[1],Y[2]=H[0],Y[3]=H[1],f=Y,(O=(b=(_=Y)[0])*(Q=_[3])-(U=_[2])*(T=_[1]))&&(f[0]=Q*(O=1/O),f[1]=-T*O,f[2]=-U*O,f[3]=b*O),c[0]=Y[0],c[1]=Y[1],c[4]=Y[2],c[5]=Y[3]}var f,_,b,T,U,Q,O;return A.M(c,c,[1/n,1/n,1]),c}function Qe(m,e,n,c){if(m){const f=A.K();if(!e){const{vecSouth:_,vecEast:b}=tt(n);f[0]=b[0],f[1]=b[1],f[4]=_[0],f[5]=_[1]}return A.M(f,f,[c,c,1]),f}return n.pixelsToClipSpaceMatrix}function tt(m){const e=Math.cos(m.rollInRadians),n=Math.sin(m.rollInRadians),c=Math.cos(m.pitchInRadians),f=Math.cos(m.bearingInRadians),_=Math.sin(m.bearingInRadians),b=A.ak();b[0]=-f*c*n-_*e,b[1]=-_*c*n+f*e;const T=A.al(b);T<1e-9?A.am(b):A.an(b,b,1/T);const U=A.ak();U[0]=f*c*e-_*n,U[1]=_*c*e+f*n;const Q=A.al(U);return Q<1e-9?A.am(U):A.an(U,U,1/Q),{vecEast:U,vecSouth:b}}function We(m,e,n,c){let f;c?(f=[m,e,c(m,e),1],A.ap(f,f,n)):(f=[m,e,0,1],On(f,f,n));const _=f[3];return{point:new A.P(f[0]/_,f[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function Oe(m,e){return .5+m/e*.5}function ct(m,e){return m.x>=-e[0]&&m.x<=e[0]&&m.y>=-e[1]&&m.y<=e[1]}function St(m,e,n,c,f,_,b,T,U,Q,O,H,z){const Y=n?m.textSizeData:m.iconSizeData,ee=A.ag(Y,e.transform.zoom),Ae=[256/e.width*2+1,256/e.height*2+1],oe=n?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;oe.clear();const ce=m.lineVertexArray,fe=n?m.text.placedSymbolArray:m.icon.placedSymbolArray,me=e.transform.width/e.transform.height;let _e=!1;for(let we=0;we<fe.length;we++){const Ue=fe.get(we);if(Ue.hidden||Ue.writingMode===A.ah.vertical&&!_e){$t(Ue.numGlyphs,oe);continue}_e=!1;const Ee=new A.P(Ue.anchorX,Ue.anchorY),Ge={getElevation:z,pitchedLabelPlaneMatrix:c,lineVertexArray:ce,pitchWithMap:_,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:Ee,unwrappedTileID:U,width:Q,height:O,translation:H},je=zt(Ue.anchorX,Ue.anchorY,Ge);if(!ct(je.point,Ae)){$t(Ue.numGlyphs,oe);continue}const rt=Oe(e.transform.cameraToCenterDistance,je.signedDistanceFromCamera),it=A.ai(Y,ee,Ue),et=_?it*e.transform.getPitchedTextCorrection(Ue.anchorX,Ue.anchorY,U)/rt:it*rt,Et=qt({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:f,symbol:Ue,fontSize:et,flip:!1,keepUpright:b,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:me,rotateToLine:T});_e=Et.useVertical,(Et.notEnoughRoom||_e||Et.needsFlipping&&qt({projectionContext:Ge,pitchedLabelPlaneMatrixInverse:f,symbol:Ue,fontSize:et,flip:!0,keepUpright:b,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:me,rotateToLine:T}).notEnoughRoom)&&$t(Ue.numGlyphs,oe)}n?m.text.dynamicLayoutVertexBuffer.updateData(oe):m.icon.dynamicLayoutVertexBuffer.updateData(oe)}function Mt(m,e,n,c,f,_,b,T){const U=_.glyphStartIndex+_.numGlyphs,Q=_.lineStartIndex,O=_.lineStartIndex+_.lineLength,H=e.getoffsetX(_.glyphStartIndex),z=e.getoffsetX(U-1),Y=Bn(m*H,n,c,f,_.segment,Q,O,T,b);if(!Y)return null;const ee=Bn(m*z,n,c,f,_.segment,Q,O,T,b);return ee?T.projectionCache.anyProjectionOccluded?null:{first:Y,last:ee}:null}function qe(m,e,n,c){return m===A.ah.horizontal&&Math.abs(n.y-e.y)>Math.abs(n.x-e.x)*c?{useVertical:!0}:(m===A.ah.vertical?e.y<n.y:e.x>n.x)?{needsFlipping:!0}:null}function qt(m){const{projectionContext:e,pitchedLabelPlaneMatrixInverse:n,symbol:c,fontSize:f,flip:_,keepUpright:b,glyphOffsetArray:T,dynamicLayoutVertexArray:U,aspectRatio:Q,rotateToLine:O}=m,H=f/24,z=c.lineOffsetX*H,Y=c.lineOffsetY*H;let ee;if(c.numGlyphs>1){const Ae=c.glyphStartIndex+c.numGlyphs,oe=c.lineStartIndex,ce=c.lineStartIndex+c.lineLength,fe=Mt(H,T,z,Y,_,c,O,e);if(!fe)return{notEnoughRoom:!0};const me=pt(fe.first.point.x,fe.first.point.y,e,n),_e=pt(fe.last.point.x,fe.last.point.y,e,n);if(b&&!_){const we=qe(c.writingMode,me,_e,Q);if(we)return we}ee=[fe.first];for(let we=c.glyphStartIndex+1;we<Ae-1;we++)ee.push(Bn(H*T.getoffsetX(we),z,Y,_,c.segment,oe,ce,e,O));ee.push(fe.last)}else{if(b&&!_){const oe=Ur(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,ce=c.lineStartIndex+c.segment+1,fe=new A.P(e.lineVertexArray.getx(ce),e.lineVertexArray.gety(ce)),me=Ur(fe.x,fe.y,e),_e=me.signedDistanceFromCamera>0?me.point:Ot(e.tileAnchorPoint,fe,oe,1,e),we=pt(oe.x,oe.y,e,n),Ue=pt(_e.x,_e.y,e,n),Ee=qe(c.writingMode,we,Ue,Q);if(Ee)return Ee}const Ae=Bn(H*T.getoffsetX(c.glyphStartIndex),z,Y,_,c.segment,c.lineStartIndex,c.lineStartIndex+c.lineLength,e,O);if(!Ae||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ee=[Ae]}for(const Ae of ee)A.ao(U,Ae.point,Ae.angle);return{}}function Ot(m,e,n,c,f){const _=m.add(m.sub(e)._unit()),b=Ur(_.x,_.y,f).point,T=n.sub(b);return n.add(T._mult(c/T.mag()))}function nr(m,e,n){const c=e.projectionCache;if(c.projections[m])return c.projections[m];const f=new A.P(e.lineVertexArray.getx(m),e.lineVertexArray.gety(m)),_=Ur(f.x,f.y,e);if(_.signedDistanceFromCamera>0)return c.projections[m]=_.point,c.anyProjectionOccluded=c.anyProjectionOccluded||_.isOccluded,_.point;const b=m-n.direction;return Ot(n.distanceFromAnchor===0?e.tileAnchorPoint:new A.P(e.lineVertexArray.getx(b),e.lineVertexArray.gety(b)),f,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,e)}function Ur(m,e,n){const c=m+n.translation[0],f=e+n.translation[1];let _;return n.pitchWithMap?(_=We(c,f,n.pitchedLabelPlaneMatrix,n.getElevation),_.isOccluded=!1):(_=n.transform.projectTileCoordinates(c,f,n.unwrappedTileID,n.getElevation),_.point.x=(.5*_.point.x+.5)*n.width,_.point.y=(.5*-_.point.y+.5)*n.height),_}function pt(m,e,n,c){if(n.pitchWithMap){const f=[m,e,0,1];return A.ap(f,f,c),n.transform.projectTileCoordinates(f[0]/f[3],f[1]/f[3],n.unwrappedTileID,n.getElevation).point}return{x:m/n.width*2-1,y:e/n.height*2-1}}function zt(m,e,n){return n.transform.projectTileCoordinates(m,e,n.unwrappedTileID,n.getElevation)}function Tt(m,e,n){return m._unit()._perp()._mult(e*n)}function sr(m,e,n,c,f,_,b,T,U){if(T.projectionCache.offsets[m])return T.projectionCache.offsets[m];const Q=n.add(e);if(m+U.direction<c||m+U.direction>=f)return T.projectionCache.offsets[m]=Q,Q;const O=nr(m+U.direction,T,U),H=Tt(O.sub(n),b,U.direction),z=n.add(H),Y=O.add(H);return T.projectionCache.offsets[m]=A.aq(_,Q,z,Y)||Q,T.projectionCache.offsets[m]}function Bn(m,e,n,c,f,_,b,T,U){const Q=c?m-e:m+e;let O=Q>0?1:-1,H=0;c&&(O*=-1,H=Math.PI),O<0&&(H+=Math.PI);let z,Y=O>0?_+f:_+f+1;T.projectionCache.cachedAnchorPoint?z=T.projectionCache.cachedAnchorPoint:(z=Ur(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=z);let ee,Ae,oe=z,ce=z,fe=0,me=0;const _e=Math.abs(Q),we=[];let Ue;for(;fe+me<=_e;){if(Y+=O,Y<_||Y>=b)return null;fe+=me,ce=oe,Ae=ee;const je={absOffsetX:_e,direction:O,distanceFromAnchor:fe,previousVertex:ce};if(oe=nr(Y,T,je),n===0)we.push(ce),Ue=oe.sub(ce);else{let rt;const it=oe.sub(ce);rt=it.mag()===0?Tt(nr(Y+O,T,je).sub(oe),n,O):Tt(it,n,O),Ae||(Ae=ce.add(rt)),ee=sr(Y,rt,oe,_,b,Ae,n,T,je),we.push(Ae),Ue=ee.sub(Ae)}me=Ue.mag()}const Ee=Ue._mult((_e-fe)/me)._add(Ae||ce),Ge=H+Math.atan2(oe.y-ce.y,oe.x-ce.x);return we.push(Ee),{point:Ee,angle:U?Ge:0,path:we}}const Wi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $t(m,e){for(let n=0;n<m;n++){const c=e.length;e.resize(c+4),e.float32.set(Wi,3*c)}}function On(m,e,n){const c=e[0],f=e[1];return m[0]=n[0]*c+n[4]*f+n[12],m[1]=n[1]*c+n[5]*f+n[13],m[3]=n[3]*c+n[7]*f+n[15],m}const Kr=100;class Wn{constructor(e,n=new Ce(e.width+200,e.height+200,25),c=new Ce(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=c,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Kr,this.screenBottomBoundary=e.height+Kr,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,n,c,f,_,b,T,U,Q,O,H,z){const Y=this.projectAndGetPerspectiveRatio(e.anchorPointX+U[0],e.anchorPointY+U[1],_,O,z),ee=c*Y.perspectiveRatio;let Ae;if(b||T)Ae=this._projectCollisionBox(e,ee,f,_,b,T,U,Y,O,H,z);else{const Ue=Y.x+(H?H.x*ee:0),Ee=Y.y+(H?H.y*ee:0);Ae={allPointsOccluded:!1,box:[Ue+e.x1*ee,Ee+e.y1*ee,Ue+e.x2*ee,Ee+e.y2*ee]}}const[oe,ce,fe,me]=Ae.box,_e=b?Ae.allPointsOccluded:Y.isOccluded;let we=_e;return we||(we=Y.perspectiveRatio<this.perspectiveRatioCutoff),we||(we=!this.isInsideGrid(oe,ce,fe,me)),we||n!=="always"&&this.grid.hitTest(oe,ce,fe,me,n,Q)?{box:[oe,ce,fe,me],placeable:!1,offscreen:!1,occluded:_e}:{box:[oe,ce,fe,me],placeable:!0,offscreen:this.isOffscreen(oe,ce,fe,me),occluded:_e}}placeCollisionCircles(e,n,c,f,_,b,T,U,Q,O,H,z,Y,ee){const Ae=[],oe=new A.P(n.anchorX,n.anchorY),ce=this.getPerspectiveRatio(oe.x,oe.y,b,ee),fe=(Q?_*this.transform.getPitchedTextCorrection(n.anchorX,n.anchorY,b)/ce:_*ce)/A.av,me={getElevation:ee,pitchedLabelPlaneMatrix:T,lineVertexArray:c,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:oe,unwrappedTileID:b,width:this.transform.width,height:this.transform.height,translation:Y},_e=Mt(fe,f,n.lineOffsetX*fe,n.lineOffsetY*fe,!1,n,!1,me);let we=!1,Ue=!1,Ee=!0;if(_e){const Ge=.5*H*ce+z,je=new A.P(-100,-100),rt=new A.P(this.screenRightBoundary,this.screenBottomBoundary),it=new pe,et=_e.first,Et=_e.last;let Bt=[];for(let hr=et.path.length-1;hr>=1;hr--)Bt.push(et.path[hr]);for(let hr=1;hr<Et.path.length;hr++)Bt.push(Et.path[hr]);const lt=2.5*Ge;if(Q){const hr=this.projectPathToScreenSpace(Bt,me);Bt=hr.some(Dr=>Dr.signedDistanceFromCamera<=0)?[]:hr.map(Dr=>Dr.point)}let kt=[];if(Bt.length>0){const hr=Bt[0].clone(),Dr=Bt[0].clone();for(let _r=1;_r<Bt.length;_r++)hr.x=Math.min(hr.x,Bt[_r].x),hr.y=Math.min(hr.y,Bt[_r].y),Dr.x=Math.max(Dr.x,Bt[_r].x),Dr.y=Math.max(Dr.y,Bt[_r].y);kt=hr.x>=je.x&&Dr.x<=rt.x&&hr.y>=je.y&&Dr.y<=rt.y?[Bt]:Dr.x<je.x||hr.x>rt.x||Dr.y<je.y||hr.y>rt.y?[]:A.ar([Bt],je.x,je.y,rt.x,rt.y)}for(const hr of kt){it.reset(hr,.25*Ge);let Dr=0;Dr=it.length<=.5*Ge?1:Math.ceil(it.paddedLength/lt)+1;for(let _r=0;_r<Dr;_r++){const Wr=_r/Math.max(Dr-1,1),on=it.lerp(Wr),hn=on.x+Kr,Zr=on.y+Kr;Ae.push(hn,Zr,Ge,0);const $r=hn-Ge,zn=Zr-Ge,ii=hn+Ge,ui=Zr+Ge;if(Ee=Ee&&this.isOffscreen($r,zn,ii,ui),Ue=Ue||this.isInsideGrid($r,zn,ii,ui),e!=="always"&&this.grid.hitTestCircle(hn,Zr,Ge,e,O)&&(we=!0,!U))return{circles:[],offscreen:!1,collisionDetected:we}}}}return{circles:!U&&we||!Ue||ce<this.perspectiveRatioCutoff?[]:Ae,offscreen:Ee,collisionDetected:we}}projectPathToScreenSpace(e,n){const c=function(f,_){const b=A.K();return A.aj(b,_.pitchedLabelPlaneMatrix),f.map(T=>{const U=We(T.x,T.y,b,_.getElevation),Q=_.transform.projectTileCoordinates(U.point.x,U.point.y,_.unwrappedTileID,_.getElevation);return Q.point.x=(.5*Q.point.x+.5)*_.width,Q.point.y=(.5*-Q.point.y+.5)*_.height,Q})}(e,n);return function(f){let _=0,b=0,T=0,U=0;for(let Q=0;Q<f.length;Q++)f[Q].isOccluded?(T=Q+1,U=0):(U++,U>b&&(b=U,_=T));return f.slice(_,_+b)}(c)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const n=[];let c=1/0,f=1/0,_=-1/0,b=-1/0;for(const O of e){const H=new A.P(O.x+Kr,O.y+Kr);c=Math.min(c,H.x),f=Math.min(f,H.y),_=Math.max(_,H.x),b=Math.max(b,H.y),n.push(H)}const T=this.grid.query(c,f,_,b).concat(this.ignoredGrid.query(c,f,_,b)),U={},Q={};for(const O of T){const H=O.key;if(U[H.bucketInstanceId]===void 0&&(U[H.bucketInstanceId]={}),U[H.bucketInstanceId][H.featureIndex])continue;const z=[new A.P(O.x1,O.y1),new A.P(O.x2,O.y1),new A.P(O.x2,O.y2),new A.P(O.x1,O.y2)];A.as(n,z)&&(U[H.bucketInstanceId][H.featureIndex]=!0,Q[H.bucketInstanceId]===void 0&&(Q[H.bucketInstanceId]=[]),Q[H.bucketInstanceId].push(H.featureIndex))}return Q}insertCollisionBox(e,n,c,f,_,b){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:_,collisionGroupID:b,overlapMode:n},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,n,c,f,_,b){const T=c?this.ignoredGrid:this.grid,U={bucketInstanceId:f,featureIndex:_,collisionGroupID:b,overlapMode:n};for(let Q=0;Q<e.length;Q+=4)T.insertCircle(U,e[Q],e[Q+1],e[Q+2])}projectAndGetPerspectiveRatio(e,n,c,f,_){if(_){let b;f?(b=[e,n,f(e,n),1],A.ap(b,b,_)):(b=[e,n,0,1],On(b,b,_));const T=b[3];return{x:(b[0]/T+1)/2*this.transform.width+Kr,y:(-b[1]/T+1)/2*this.transform.height+Kr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}{const b=this.transform.projectTileCoordinates(e,n,c,f);return{x:(b.point.x+1)/2*this.transform.width+Kr,y:(1-b.point.y)/2*this.transform.height+Kr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}}getPerspectiveRatio(e,n,c,f){const _=this.transform.projectTileCoordinates(e,n,c,f);return .5+this.transform.cameraToCenterDistance/_.signedDistanceFromCamera*.5}isOffscreen(e,n,c,f){return c<Kr||e>=this.screenRightBoundary||f<Kr||n>this.screenBottomBoundary}isInsideGrid(e,n,c,f){return c>=0&&e<this.gridRightBoundary&&f>=0&&n<this.gridBottomBoundary}getViewportMatrix(){const e=A.at([]);return A.L(e,e,[-100,-100,0]),e}_projectCollisionBox(e,n,c,f,_,b,T,U,Q,O,H){let z=1,Y=0,ee=0,Ae=1;const oe=e.anchorPointX+T[0],ce=e.anchorPointY+T[1];if(b&&!_){const Bt=this.projectAndGetPerspectiveRatio(oe+1,ce,f,Q,H),lt=Bt.x-U.x,kt=Math.atan((Bt.y-U.y)/lt)+(lt<0?Math.PI:0),hr=Math.sin(kt),Dr=Math.cos(kt);z=Dr,Y=hr,ee=-hr,Ae=Dr}else if(!b&&_){const Bt=tt(this.transform);z=Bt.vecEast[0],Y=Bt.vecEast[1],ee=Bt.vecSouth[0],Ae=Bt.vecSouth[1]}let fe=U.x,me=U.y,_e=n;_&&(fe=oe,me=ce,_e=Math.pow(2,-(this.transform.zoom-c.overscaledZ)),_e*=this.transform.getPitchedTextCorrection(oe,ce,f),O||(_e*=A.ae(.5+U.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(fe+=z*O.x*_e+ee*O.y*_e,me+=Y*O.x*_e+Ae*O.y*_e);const we=e.x1*_e,Ue=e.x2*_e,Ee=(we+Ue)/2,Ge=e.y1*_e,je=e.y2*_e,rt=(Ge+je)/2,it=[{offsetX:we,offsetY:Ge},{offsetX:Ee,offsetY:Ge},{offsetX:Ue,offsetY:Ge},{offsetX:Ue,offsetY:rt},{offsetX:Ue,offsetY:je},{offsetX:Ee,offsetY:je},{offsetX:we,offsetY:je},{offsetX:we,offsetY:rt}];let et=[];for(const{offsetX:Bt,offsetY:lt}of it)et.push(new A.P(fe+z*Bt+ee*lt,me+Y*Bt+Ae*lt));let Et=!1;if(_){const Bt=et.map(lt=>this.projectAndGetPerspectiveRatio(lt.x,lt.y,f,Q,H));Et=Bt.some(lt=>!lt.isOccluded),et=Bt.map(lt=>new A.P(lt.x,lt.y))}else Et=!0;return{box:A.au(et),allPointsOccluded:!Et}}}class jo{constructor(e,n,c,f){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?n:-n))):f&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class Is{constructor(e,n,c,f,_){this.text=new jo(e?e.text:null,n,c,_),this.icon=new jo(e?e.icon:null,n,f,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ti{constructor(e,n,c){this.text=e,this.icon=n,this.skipFade=c}}class tn{constructor(e,n,c,f,_){this.bucketInstanceId=e,this.featureIndex=n,this.sourceLayerIndex=c,this.bucketIndex=f,this.tileID=_}}class gd{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const n=++this.maxGroupID;this.collisionGroups[e]={ID:n,predicate:c=>c.collisionGroupID===n}}return this.collisionGroups[e]}}function Vo(m,e,n,c,f){const{horizontalAlign:_,verticalAlign:b}=A.aB(m);return new A.P(-(_-.5)*e+c[0]*f,-(b-.5)*n+c[1]*f)}class Cc{constructor(e,n,c,f,_){this.transform=e.clone(),this.terrain=n,this.collisionIndex=new Wn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new gd(f),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const n=this.terrain;return n?(c,f)=>n.getElevation(e,c,f):null}getBucketParts(e,n,c,f){const _=c.getBucket(n),b=c.latestFeatureIndex;if(!_||!b||n.id!==_.layerIds[0])return;const T=c.collisionBoxArray,U=_.layers[0].layout,Q=_.layers[0].paint,O=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),H=c.tileSize/A.Z,z=c.tileID.toUnwrapped(),Y=U.get("text-rotation-alignment")==="map",ee=A.aw(c,1,this.transform.zoom),Ae=A.ax(this.collisionIndex.transform,c,Q.get("text-translate"),Q.get("text-translate-anchor")),oe=A.ax(this.collisionIndex.transform,c,Q.get("icon-translate"),Q.get("icon-translate-anchor")),ce=ze(Y,this.transform,ee);this.retainedQueryData[_.bucketInstanceId]=new tn(_.bucketInstanceId,b,_.sourceLayerIndex,_.index,c.tileID);const fe={bucket:_,layout:U,translationText:Ae,translationIcon:oe,unwrappedTileID:z,pitchedLabelPlaneMatrix:ce,scale:O,textPixelRatio:H,holdingForFade:c.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:A.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(f)for(const me of _.sortKeyRanges){const{sortKey:_e,symbolInstanceStart:we,symbolInstanceEnd:Ue}=me;e.push({sortKey:_e,symbolInstanceStart:we,symbolInstanceEnd:Ue,parameters:fe})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:fe})}attemptAnchorPlacement(e,n,c,f,_,b,T,U,Q,O,H,z,Y,ee,Ae,oe,ce,fe,me,_e){const we=A.ay[e.textAnchor],Ue=[e.textOffset0,e.textOffset1],Ee=Vo(we,c,f,Ue,_),Ge=this.collisionIndex.placeCollisionBox(n,z,U,Q,O,T,b,oe,H.predicate,me,Ee,_e);if((!fe||this.collisionIndex.placeCollisionBox(fe,z,U,Q,O,T,b,ce,H.predicate,me,Ee,_e).placeable)&&Ge.placeable){let je;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(je=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:Ue,width:c,height:f,anchor:we,textBoxScale:_,prevAnchor:je},this.markUsedJustification(ee,we,Y,Ae),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,Ae,Y),this.placedOrientations[Y.crossTileID]=Ae),{shift:Ee,placedGlyphBoxes:Ge}}}placeLayerBucketPart(e,n,c){const{bucket:f,layout:_,translationText:b,translationIcon:T,unwrappedTileID:U,pitchedLabelPlaneMatrix:Q,textPixelRatio:O,holdingForFade:H,collisionBoxArray:z,partiallyEvaluatedTextSize:Y,collisionGroup:ee}=e.parameters,Ae=_.get("text-optional"),oe=_.get("icon-optional"),ce=A.az(_,"text-overlap","text-allow-overlap"),fe=ce==="always",me=A.az(_,"icon-overlap","icon-allow-overlap"),_e=me==="always",we=_.get("text-rotation-alignment")==="map",Ue=_.get("text-pitch-alignment")==="map",Ee=_.get("icon-text-fit")!=="none",Ge=_.get("symbol-z-order")==="viewport-y",je=fe&&(_e||!f.hasIconData()||oe),rt=_e&&(fe||!f.hasTextData()||Ae);!f.collisionArrays&&z&&f.deserializeCollisionBoxes(z);const it=this.retainedQueryData[f.bucketInstanceId].tileID,et=this._getTerrainElevationFunc(it),Et=this.transform.getFastPathSimpleProjectionMatrix(it),Bt=(lt,kt,hr)=>{var Dr,_r;if(n[lt.crossTileID])return;if(H)return void(this.placements[lt.crossTileID]=new ti(!1,!1,!1));let Wr=!1,on=!1,hn=!0,Zr=null,$r={box:null,placeable:!1,offscreen:null,occluded:!1},zn={placeable:!1},ii=null,ui=null,Ri=null,ys=0,Xa=0,Eo=0;kt.textFeatureIndex?ys=kt.textFeatureIndex:lt.useRuntimeCollisionCircles&&(ys=lt.featureIndex),kt.verticalTextFeatureIndex&&(Xa=kt.verticalTextFeatureIndex);const _s=kt.textBox;if(_s){const ia=Qn=>{let fn=A.ah.horizontal;if(f.allowVerticalPlacement&&!Qn&&this.prevPlacement){const Kn=this.prevPlacement.placedOrientations[lt.crossTileID];Kn&&(this.placedOrientations[lt.crossTileID]=Kn,fn=Kn,this.markUsedOrientation(f,fn,lt))}return fn},vs=(Qn,fn)=>{if(f.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&kt.verticalTextBox){for(const Kn of f.writingModes)if(Kn===A.ah.vertical?($r=fn(),zn=$r):$r=Qn(),$r&&$r.placeable)break}else $r=Qn()},pA=lt.textAnchorOffsetStartIndex,gA=lt.textAnchorOffsetEndIndex;if(gA===pA){const Qn=(fn,Kn)=>{const qr=this.collisionIndex.placeCollisionBox(fn,ce,O,it,U,Ue,we,b,ee.predicate,et,void 0,Et);return qr&&qr.placeable&&(this.markUsedOrientation(f,Kn,lt),this.placedOrientations[lt.crossTileID]=Kn),qr};vs(()=>Qn(_s,A.ah.horizontal),()=>{const fn=kt.verticalTextBox;return f.allowVerticalPlacement&&lt.numVerticalGlyphVertices>0&&fn?Qn(fn,A.ah.vertical):{box:null,offscreen:null}}),ia($r&&$r.placeable)}else{let Qn=A.ay[(_r=(Dr=this.prevPlacement)===null||Dr===void 0?void 0:Dr.variableOffsets[lt.crossTileID])===null||_r===void 0?void 0:_r.anchor];const fn=(qr,Xs,Ah)=>{const xs=qr.x2-qr.x1,lf=qr.y2-qr.y1,lh=lt.textBoxScale,ch=Ee&&me==="never"?Xs:null;let ya=null,Ia=ce==="never"?1:2,$a="never";Qn&&Ia++;for(let mA=0;mA<Ia;mA++){for(let JA=pA;JA<gA;JA++){const Xl=f.textAnchorOffsets.get(JA);if(Qn&&Xl.textAnchor!==Qn)continue;const Yl=this.attemptAnchorPlacement(Xl,qr,xs,lf,lh,we,Ue,O,it,U,ee,$a,lt,f,Ah,b,T,ch,et);if(Yl&&(ya=Yl.placedGlyphBoxes,ya&&ya.placeable))return Wr=!0,Zr=Yl.shift,ya}Qn?Qn=null:$a=ce}return c&&!ya&&(ya={box:this.collisionIndex.placeCollisionBox(_s,"always",O,it,U,Ue,we,b,ee.predicate,et,void 0,Et).box,offscreen:!1,placeable:!1,occluded:!1}),ya};vs(()=>fn(_s,kt.iconBox,A.ah.horizontal),()=>{const qr=kt.verticalTextBox;return f.allowVerticalPlacement&&(!$r||!$r.placeable)&&lt.numVerticalGlyphVertices>0&&qr?fn(qr,kt.verticalIconBox,A.ah.vertical):{box:null,occluded:!0,offscreen:null}}),$r&&(Wr=$r.placeable,hn=$r.offscreen);const Kn=ia($r&&$r.placeable);if(!Wr&&this.prevPlacement){const qr=this.prevPlacement.variableOffsets[lt.crossTileID];qr&&(this.variableOffsets[lt.crossTileID]=qr,this.markUsedJustification(f,qr.anchor,lt,Kn))}}}if(ii=$r,Wr=ii&&ii.placeable,hn=ii&&ii.offscreen,lt.useRuntimeCollisionCircles){const ia=f.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex),vs=A.ai(f.textSizeData,Y,ia),pA=_.get("text-padding");ui=this.collisionIndex.placeCollisionCircles(ce,ia,f.lineVertexArray,f.glyphOffsetArray,vs,U,Q,c,Ue,ee.predicate,lt.collisionCircleDiameter,pA,b,et),ui.circles.length&&ui.collisionDetected&&!c&&A.w("Collisions detected, but collision boxes are not shown"),Wr=fe||ui.circles.length>0&&!ui.collisionDetected,hn=hn&&ui.offscreen}if(kt.iconFeatureIndex&&(Eo=kt.iconFeatureIndex),kt.iconBox){const ia=vs=>this.collisionIndex.placeCollisionBox(vs,me,O,it,U,Ue,we,T,ee.predicate,et,Ee&&Zr?Zr:void 0,Et);zn&&zn.placeable&&kt.verticalIconBox?(Ri=ia(kt.verticalIconBox),on=Ri.placeable):(Ri=ia(kt.iconBox),on=Ri.placeable),hn=hn&&Ri.offscreen}const To=Ae||lt.numHorizontalGlyphVertices===0&&lt.numVerticalGlyphVertices===0,Ya=oe||lt.numIconVertices===0;To||Ya?Ya?To||(on=on&&Wr):Wr=on&&Wr:on=Wr=on&&Wr;const Wa=on&&Ri.placeable;if(Wr&&ii.placeable&&this.collisionIndex.insertCollisionBox(ii.box,ce,_.get("text-ignore-placement"),f.bucketInstanceId,zn&&zn.placeable&&Xa?Xa:ys,ee.ID),Wa&&this.collisionIndex.insertCollisionBox(Ri.box,me,_.get("icon-ignore-placement"),f.bucketInstanceId,Eo,ee.ID),ui&&Wr&&this.collisionIndex.insertCollisionCircles(ui.circles,ce,_.get("text-ignore-placement"),f.bucketInstanceId,ys,ee.ID),c&&this.storeCollisionData(f.bucketInstanceId,hr,kt,ii,Ri,ui),lt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[lt.crossTileID]=new ti((Wr||je)&&!(ii!=null&&ii.occluded),(on||rt)&&!(Ri!=null&&Ri.occluded),hn||f.justReloaded),n[lt.crossTileID]=!0};if(Ge){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const lt=f.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kt=lt.length-1;kt>=0;--kt){const hr=lt[kt];Bt(f.symbolInstances.get(hr),f.collisionArrays[hr],hr)}}else for(let lt=e.symbolInstanceStart;lt<e.symbolInstanceEnd;lt++)Bt(f.symbolInstances.get(lt),f.collisionArrays[lt],lt);f.justReloaded=!1}storeCollisionData(e,n,c,f,_,b){if(c.textBox||c.iconBox){let T,U;this.collisionBoxArrays.has(e)?T=this.collisionBoxArrays.get(e):(T=new Map,this.collisionBoxArrays.set(e,T)),T.has(n)?U=T.get(n):(U={text:null,icon:null},T.set(n,U)),c.textBox&&(U.text=f.box),c.iconBox&&(U.icon=_.box)}if(b){let T=this.collisionCircleArrays[e];T===void 0&&(T=this.collisionCircleArrays[e]=[]);for(let U=0;U<b.circles.length;U+=4)T.push(b.circles[U+0]-Kr),T.push(b.circles[U+1]-Kr),T.push(b.circles[U+2]),T.push(b.collisionDetected?1:0)}}markUsedJustification(e,n,c,f){let _;_=f===A.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[A.aA(n)];const b=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const T of b)T>=0&&(e.text.placedSymbolArray.get(T).crossTileID=_>=0&&T!==_?0:c.crossTileID)}markUsedOrientation(e,n,c){const f=n===A.ah.horizontal||n===A.ah.horizontalOnly?n:0,_=n===A.ah.vertical?n:0,b=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const T of b)e.text.placedSymbolArray.get(T).placedOrientation=f;c.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const n=this.prevPlacement;let c=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;const f=n?n.symbolFadeChange(e):1,_=n?n.opacities:{},b=n?n.variableOffsets:{},T=n?n.placedOrientations:{};for(const U in this.placements){const Q=this.placements[U],O=_[U];O?(this.opacities[U]=new Is(O,f,Q.text,Q.icon),c=c||Q.text!==O.text.placed||Q.icon!==O.icon.placed):(this.opacities[U]=new Is(null,f,Q.text,Q.icon,Q.skipFade),c=c||Q.text||Q.icon)}for(const U in _){const Q=_[U];if(!this.opacities[U]){const O=new Is(Q,f,!1,!1);O.isHidden()||(this.opacities[U]=O,c=c||Q.text.placed||Q.icon.placed)}}for(const U in b)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=b[U]);for(const U in T)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=T[U]);if(n&&n.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:e)}updateLayerOpacities(e,n){const c={};for(const f of n){const _=f.getBucket(e);_&&f.latestFeatureIndex&&e.id===_.layerIds[0]&&this.updateBucketOpacities(_,f.tileID,c,f.collisionBoxArray)}}updateBucketOpacities(e,n,c,f){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const _=e.layers[0],b=_.layout,T=new Is(null,0,!1,!1,!0),U=b.get("text-allow-overlap"),Q=b.get("icon-allow-overlap"),O=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),H=b.get("text-rotation-alignment")==="map",z=b.get("text-pitch-alignment")==="map",Y=b.get("icon-text-fit")!=="none",ee=new Is(null,0,U&&(Q||!e.hasIconData()||b.get("icon-optional")),Q&&(U||!e.hasTextData()||b.get("text-optional")),!0);!e.collisionArrays&&f&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(f);const Ae=(ce,fe,me)=>{for(let _e=0;_e<fe/4;_e++)ce.opacityVertexArray.emplaceBack(me);ce.hasVisibleVertices=ce.hasVisibleVertices||me!==xl},oe=this.collisionBoxArrays.get(e.bucketInstanceId);for(let ce=0;ce<e.symbolInstances.length;ce++){const fe=e.symbolInstances.get(ce),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:_e,crossTileID:we}=fe;let Ue=this.opacities[we];c[we]?Ue=T:Ue||(Ue=ee,this.opacities[we]=Ue),c[we]=!0;const Ee=fe.numIconVertices>0,Ge=this.placedOrientations[fe.crossTileID],je=Ge===A.ah.vertical,rt=Ge===A.ah.horizontal||Ge===A.ah.horizontalOnly;if(me>0||_e>0){const et=Tc(Ue.text);Ae(e.text,me,je?xl:et),Ae(e.text,_e,rt?xl:et);const Et=Ue.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(e.text.placedSymbolArray.get(kt).hidden=Et||je?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=Et||rt?1:0);const Bt=this.variableOffsets[fe.crossTileID];Bt&&this.markUsedJustification(e,Bt.anchor,fe,Ge);const lt=this.placedOrientations[fe.crossTileID];lt&&(this.markUsedJustification(e,"left",fe,lt),this.markUsedOrientation(e,lt,fe))}if(Ee){const et=Tc(Ue.icon),Et=!(Y&&fe.verticalPlacedIconSymbolIndex&&je);fe.placedIconSymbolIndex>=0&&(Ae(e.icon,fe.numIconVertices,Et?et:xl),e.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(Ae(e.icon,fe.numVerticalIconVertices,Et?xl:et),e.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}const it=oe&&oe.has(ce)?oe.get(ce):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const et=e.collisionArrays[ce];if(et){let Et=new A.P(0,0);if(et.textBox||et.verticalTextBox){let Bt=!0;if(O){const lt=this.variableOffsets[we];lt?(Et=Vo(lt.anchor,lt.width,lt.height,lt.textOffset,lt.textBoxScale),H&&Et._rotate(z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Bt=!1}if(et.textBox||et.verticalTextBox){let lt;et.textBox&&(lt=je),et.verticalTextBox&&(lt=rt),no(e.textCollisionBox.collisionVertexArray,Ue.text.placed,!Bt||lt,it.text,Et.x,Et.y)}}if(et.iconBox||et.verticalIconBox){const Bt=!!(!rt&&et.verticalIconBox);let lt;et.iconBox&&(lt=Bt),et.verticalIconBox&&(lt=!Bt),no(e.iconCollisionBox.collisionVertexArray,Ue.icon.placed,lt,it.icon,Y?Et.x:0,Y?Et.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,n){const c=this.zoomAtLastRecencyCheck===n?1-this.zoomAdjustment(n):1;return this.zoomAtLastRecencyCheck=n,this.commitTime+this.fadeDuration*c>e}setStale(){this.stale=!0}}function no(m,e,n,c,f,_){c&&c.length!==0||(c=[0,0,0,0]);const b=c[0]-Kr,T=c[1]-Kr,U=c[2]-Kr,Q=c[3]-Kr;m.emplaceBack(e?1:0,n?1:0,f||0,_||0,b,T),m.emplaceBack(e?1:0,n?1:0,f||0,_||0,U,T),m.emplaceBack(e?1:0,n?1:0,f||0,_||0,U,Q),m.emplaceBack(e?1:0,n?1:0,f||0,_||0,b,Q)}const Qs=Math.pow(2,25),vl=Math.pow(2,24),ss=Math.pow(2,17),Ec=Math.pow(2,16),Go=Math.pow(2,9),Ko=Math.pow(2,8),Ru=Math.pow(2,1);function Tc(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const e=m.placed?1:0,n=Math.floor(127*m.opacity);return n*Qs+e*vl+n*ss+e*Ec+n*Go+e*Ko+n*Ru+e}const xl=0;class Ou{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,n,c,f,_){const b=this._bucketParts;for(;this._currentTileIndex<e.length;)if(n.getBucketParts(b,f,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((T,U)=>T.sortKey-U.sortKey));this._currentPartIndex<b.length;)if(n.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,_())return!0;return!1}}class ua{constructor(e,n,c,f,_,b,T,U){this.placement=new Cc(e,n,b,T,U),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(e,n,c){const f=X.now(),_=()=>!this._forceFullPlacement&&X.now()-f>2;for(;this._currentPlacementIndex>=0;){const b=n[e[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=T)&&(!b.maxzoom||b.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Ou(b)),this._inProgressLayer.continuePlacement(c[b.source],this.placement,this._showCollisionBoxes,b,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const io=512/A.Z/2;class zu{constructor(e,n,c){this.tileID=e,this.bucketInstanceId=c,this._symbolsByKey={};const f=new Map;for(let _=0;_<n.length;_++){const b=n.get(_),T=b.key,U=f.get(T);U?U.push(b):f.set(T,[b])}for(const[_,b]of f){const T={positions:b.map(U=>({x:Math.floor(U.anchorX*io),y:Math.floor(U.anchorY*io)})),crossTileIDs:b.map(U=>U.crossTileID)};if(T.positions.length>128){const U=new A.aC(T.positions.length,16,Uint16Array);for(const{x:Q,y:O}of T.positions)U.add(Q,O);U.finish(),delete T.positions,T.index=U}this._symbolsByKey[_]=T}}getScaledCoordinates(e,n){const{x:c,y:f,z:_}=this.tileID.canonical,{x:b,y:T,z:U}=n.canonical,Q=io/Math.pow(2,U-_),O=(T*A.Z+e.anchorY)*Q,H=f*A.Z*io;return{x:Math.floor((b*A.Z+e.anchorX)*Q-c*A.Z*io),y:Math.floor(O-H)}}findMatches(e,n,c){const f=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z);for(let _=0;_<e.length;_++){const b=e.get(_);if(b.crossTileID)continue;const T=this._symbolsByKey[b.key];if(!T)continue;const U=this.getScaledCoordinates(b,n);if(T.index){const Q=T.index.range(U.x-f,U.y-f,U.x+f,U.y+f).sort();for(const O of Q){const H=T.crossTileIDs[O];if(!c[H]){c[H]=!0,b.crossTileID=H;break}}}else if(T.positions)for(let Q=0;Q<T.positions.length;Q++){const O=T.positions[Q],H=T.crossTileIDs[Q];if(Math.abs(O.x-U.x)<=f&&Math.abs(O.y-U.y)<=f&&!c[H]){c[H]=!0,b.crossTileID=H;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class wl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Sc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const n=Math.round((e-this.lng)/360);if(n!==0)for(const c in this.indexes){const f=this.indexes[c],_={};for(const b in f){const T=f[b];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+n),_[T.tileID.key]=T}this.indexes[c]=_}this.lng=e}addBucket(e,n,c){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===n.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let _=0;_<n.symbolInstances.length;_++)n.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const f=this.usedCrossTileIDs[e.overscaledZ];for(const _ in this.indexes){const b=this.indexes[_];if(Number(_)>e.overscaledZ)for(const T in b){const U=b[T];U.tileID.isChildOf(e)&&U.findMatches(n.symbolInstances,e,f)}else{const T=b[e.scaledTo(Number(_)).key];T&&T.findMatches(n.symbolInstances,e,f)}}for(let _=0;_<n.symbolInstances.length;_++){const b=n.symbolInstances.get(_);b.crossTileID||(b.crossTileID=c.generate(),f[b.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new zu(e,n.symbolInstances,n.bucketInstanceId),!0}removeBucketCrossTileIDs(e,n){for(const c of n.getCrossTileIDsLists())for(const f of c)delete this.usedCrossTileIDs[e][f]}removeStaleBuckets(e){let n=!1;for(const c in this.indexes){const f=this.indexes[c];for(const _ in f)e[f[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,f[_]),delete f[_],n=!0)}return n}}class Zo{constructor(){this.layerIndexes={},this.crossTileIDs=new wl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,n,c){let f=this.layerIndexes[e.id];f===void 0&&(f=this.layerIndexes[e.id]=new Sc);let _=!1;const b={};f.handleWrapJump(c);for(const T of n){const U=T.getBucket(e);U&&e.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(T.tileID,U,this.crossTileIDs)&&(_=!0),b[U.bucketInstanceId]=!0)}return f.removeStaleBuckets(b)&&(_=!0),_}pruneUnusedLayers(e){const n={};e.forEach(c=>{n[c]=!0});for(const c in this.layerIndexes)n[c]||delete this.layerIndexes[c]}}var bl="void main() {fragColor=vec4(1.0);}";const Vn={prelude:wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:wr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:wr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:wr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wr(bl,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:wr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:wr(bl,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:wr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:wr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:wr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:wr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:wr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:wr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:wr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function wr(m,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=e.match(/in ([\w]+) ([\w]+)/g),f=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=_?_.concat(f):f,T={};return{fragmentSource:m=m.replace(n,(U,Q,O,H,z)=>(T[z]=!0,Q==="define"?`
#ifndef HAS_UNIFORM_u_${z}
in ${O} ${H} ${z};
#else
uniform ${O} ${H} u_${z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${z}
    ${O} ${H} ${z} = u_${z};
#endif
`)),vertexSource:e=e.replace(n,(U,Q,O,H,z)=>{const Y=H==="float"?"vec2":"vec4",ee=z.match(/color/)?"color":Y;return T[z]?Q==="define"?`
#ifndef HAS_UNIFORM_u_${z}
uniform lowp float u_${z}_t;
in ${O} ${Y} a_${z};
out ${O} ${H} ${z};
#else
uniform ${O} ${H} u_${z};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${z}
    ${z} = a_${z};
#else
    ${O} ${H} ${z} = u_${z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${z}
    ${z} = unpack_mix_${ee}(a_${z}, u_${z}_t);
#else
    ${O} ${H} ${z} = u_${z};
#endif
`:Q==="define"?`
#ifndef HAS_UNIFORM_u_${z}
uniform lowp float u_${z}_t;
in ${O} ${Y} a_${z};
#else
uniform ${O} ${H} u_${z};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${z}
    ${O} ${H} ${z} = a_${z};
#else
    ${O} ${H} ${z} = u_${z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${z}
    ${O} ${H} ${z} = unpack_mix_${ee}(a_${z}, u_${z}_t);
#else
    ${O} ${H} ${z} = u_${z};
#endif
`}),staticAttributes:c,staticUniforms:b}}class ao{constructor(e,n,c){this.vertexBuffer=e,this.indexBuffer=n,this.segments=c}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var os=A.aD([{name:"a_pos",type:"Int16",components:2}]);const $i="#define PROJECTION_MERCATOR",qo="mercator";class Qr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return qo}get shaderDefine(){return $i}get shaderPreludeCode(){return Vn.projectionMercator}get vertexShaderPreludeCode(){return Vn.projectionMercator.vertexSource}get subdivisionGranularity(){return A.aE.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,n,c,f,_){if(this._cachedMesh)return this._cachedMesh;const b=new A.aF;b.emplaceBack(0,0),b.emplaceBack(A.Z,0),b.emplaceBack(0,A.Z),b.emplaceBack(A.Z,A.Z);const T=e.createVertexBuffer(b,os.members),U=A.aG.simpleSegment(0,0,4,2),Q=new A.aH;Q.emplaceBack(1,0,2),Q.emplaceBack(1,2,3);const O=e.createIndexBuffer(Q);return this._cachedMesh=new ao(T,O,U),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}function vi(m,e){const n=A.ae(e.lat,-85.051129,A.aJ);return new A.P(A.U(e.lng)*m,A.S(n)*m)}function Bl(m,e){return new A.$(e.x/m,e.y/m).toLngLat()}function Xo(m){return m.cameraToCenterDistance*Math.min(.85*Math.tan(A.ad(90-m.pitch)),Math.tan(A.ad(89.25-m.pitch)))}function Qi(m,e){const n=m.canonical,c=e/A.aI(n.z),f=n.x+Math.pow(2,n.z)*m.wrap,_=A.at(new Float64Array(16));return A.L(_,_,[f*c,n.y*c,0]),A.M(_,_,[c/A.Z,c/A.Z,1]),_}function ci(m,e,n,c,f){const _=A.$.fromLngLat(m,e),b=f*A.aK(1,m.lat),T=b*Math.cos(A.ad(n)),U=Math.sqrt(b*b-T*T),Q=U*Math.sin(A.ad(-c)),O=U*Math.cos(A.ad(-c));return new A.$(_.x+Q,_.y+O,_.z+T)}class Cn{constructor(e=0,n=0,c=0,f=0){if(isNaN(e)||e<0||isNaN(n)||n<0||isNaN(c)||c<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=c,this.right=f}interpolate(e,n,c){return n.top!=null&&e.top!=null&&(this.top=A.B.number(e.top,n.top,c)),n.bottom!=null&&e.bottom!=null&&(this.bottom=A.B.number(e.bottom,n.bottom,c)),n.left!=null&&e.left!=null&&(this.left=A.B.number(e.left,n.left,c)),n.right!=null&&e.right!=null&&(this.right=A.B.number(e.right,n.right,c)),this}getCenter(e,n){const c=A.ae((this.left+e-this.right)/2,0,e),f=A.ae((this.top+n-this.bottom)/2,0,n);return new A.P(c,f)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Cn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fc(m,e){if(!m.renderWorldCopies||m.lngRange)return;const n=e.lng-m.center.lng;e.lng+=n>180?-360:n<-180?360:0}function gi(m){return Math.max(0,Math.floor(m))}class Di{constructor(e,n,c,f,_,b){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=n||0,this._maxZoom=c||22,this._minPitch=f??0,this._maxPitch=_??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new A.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=gi(this._zoom),this._scale=A.aI(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Cn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,n,c){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=gi(this._zoom),this._scale=A.aI(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new Cn(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!c&&e.autoCalculateNearFarZ,n&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new A.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const n=A.aL(e,-180,180)*Math.PI/180;var c,f,_,b,T,U,Q,O,H;this._bearingInRadians!==n&&(this._unmodified=!1,this._bearingInRadians=n,this._calcMatrices(),this._rotationMatrix=R(),c=this._rotationMatrix,_=-this._bearingInRadians,b=(f=this._rotationMatrix)[0],T=f[1],U=f[2],Q=f[3],O=Math.sin(_),H=Math.cos(_),c[0]=b*H+U*O,c[1]=T*H+Q*O,c[2]=b*-O+U*H,c[3]=T*-O+Q*H)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const n=A.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==n&&(this._unmodified=!1,this._pitchInRadians=n,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const n=e/180*Math.PI;this._rollInRadians!==n&&(this._unmodified=!1,this._rollInRadians=n,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return A.aM(this._fovInRadians)}setFov(e){e=A.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=A.ad(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){const n=this.getConstrained(this._center,e).zoom;this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this._tileZoom=Math.max(0,Math.floor(n)),this._scale=A.aI(n),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,n){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=n,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,n,c){this._unmodified=!1,this._edgeInsets.interpolate(e,n,c),this._constrain(),this._calcMatrices()}resize(e,n,c=!0){this._width=e,this._height=n,c&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new bt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,A.aJ])}getConstrained(e,n){return this._callbacks.getConstrained(e,n)}getCameraQueryGeometry(e,n){if(n.length===1)return[n[0],e];{let c=e.x,f=e.y,_=e.x,b=e.y;for(const T of n)c=Math.min(c,T.x),f=Math.min(f,T.y),_=Math.max(_,T.x),b=Math.max(b,T.y);return[new A.P(c,f),new A.P(_,f),new A.P(_,b),new A.P(c,b),new A.P(c,f)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:n,zoom:c}=this.getConstrained(this.center,this.zoom);this.setCenter(n),this.setZoom(c),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=A.at(new Float64Array(16));A.M(e,e,[this._width/2,-this._height/2,1]),A.L(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=A.at(new Float64Array(16)),A.M(e,e,[1,-1,1]),A.L(e,e,[-1,-1,0]),A.M(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,n,c,f){const _=c!==void 0?c:this.bearing,b=f=f!==void 0?f:this.pitch,T=A.$.fromLngLat(e,n),U=-Math.cos(A.ad(b)),Q=Math.sin(A.ad(b)),O=Q*Math.sin(A.ad(_)),H=-Q*Math.cos(A.ad(_));let z=this.elevation;const Y=n-z;let ee;U*Y>=0||Math.abs(U)<.1?(ee=1e4,z=n+ee*U):ee=-Y/U;let Ae,oe,ce=A.aN(1,T.y),fe=0;do{if(fe+=1,fe>10)break;oe=ee/ce,Ae=new A.$(T.x+O*oe,T.y+H*oe),ce=1/Ae.meterInMercatorCoordinateUnits()}while(Math.abs(ee-oe*ce)>1e-12);return{center:Ae.toLngLat(),elevation:z,zoom:A.ab(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const n=A.aK(1,this.center.lat)*this.worldSize,c=this.cameraToCenterDistance/n,f=A.$.fromLngLat(this.center,this.elevation),_=ci(this.center,this.elevation,this.pitch,this.bearing,c);this._elevation=e;const b=this.calculateCenterFromCameraLngLatAlt(_.toLngLat(),A.aN(_.z,f.y),this.bearing,this.pitch);this._elevation=b.elevation,this._center=b.center,this.setZoom(b.zoom)}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new A.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=A.aK(1,this.center.lat)*this.worldSize;return ci(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];const n=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/n,e.canonical.y/n,1/n/A.Z,1/n/A.Z]}}class $n{constructor(e,n){this.min=e,this.max=n,this.center=A.aO([],A.aP([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],c=A.aQ(this.min),f=A.aQ(this.max);for(let _=0;_<n.length;_++)c[_]=n[_]?this.min[_]:this.center[_],f[_]=n[_]?this.center[_]:this.max[_];return f[2]=this.max[2],new $n(c,f)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let n=!0;for(let c=0;c<e.planes.length;c++){const f=this.intersectsPlane(e.planes[c]);if(f===0)return 0;f===1&&(n=!1)}return n?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let n=e[3],c=e[3];for(let f=0;f<3;f++)e[f]>0?(n+=e[f]*this.min[f],c+=e[f]*this.max[f]):(c+=e[f]*this.min[f],n+=e[f]*this.max[f]);return n>=0?2:c<0?0:1}}class Yo{distanceToTile2d(e,n,c,f){const _=f.distanceX([e,n]),b=f.distanceY([e,n]);return Math.hypot(_,b)}getWrap(e,n,c){return c}getTileAABB(e,n,c,f){var _,b;let T=c,U=c;if(f.terrain){const O=new A.Y(e.z,n,e.z,e.x,e.y),H=f.terrain.getMinMaxElevation(O);T=(_=H.minElevation)!==null&&_!==void 0?_:c,U=(b=H.maxElevation)!==null&&b!==void 0?b:c}const Q=1<<e.z;return new $n([n+e.x/Q,e.y/Q,T],[n+(e.x+1)/Q,(e.y+1)/Q,U])}allowVariableZoom(e,n){const c=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,f=A.ae(78.5-c/2,0,60);return!!n.terrain||e.pitch>f}allowWorldCopies(){return!0}recalculateCache(){}}class ha{constructor(e,n,c){this.points=e,this.planes=n,this.aabb=c}static fromInvProjectionMatrix(e,n=1,c=0){const f=Math.pow(2,c),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Q=>{const O=1/(Q=A.ap([],Q,e))[3]/n*f;return A.aR(Q,Q,[O,O,1/Q[3],O])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Q=>{const O=A.aS([],_[Q[0]],_[Q[1]]),H=A.aS([],_[Q[2]],_[Q[1]]),z=A.aT([],A.aU([],O,H)),Y=-A.aV(z,_[Q[1]]);return z.concat(Y)}),T=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],U=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Q of _)for(let O=0;O<3;O++)T[O]=Math.min(T[O],Q[O]),U[O]=Math.max(U[O],Q[O]);return new ha(_,b,new $n(T,U))}}class mn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,c){return this._helper.interpolatePadding(e,n,c)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n,c=!0){this._helper.resize(e,n,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,n){}constructor(e,n,c,f,_){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Di({calcMatrices:()=>{this._calcMatrices()},getConstrained:(b,T)=>this.getConstrained(b,T)},e,n,c,f,_),this._coveringTilesDetailsProvider=new Yo}clone(){const e=new mn;return e.apply(this),e}apply(e,n,c){this._helper.apply(e,n,c)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const n=[new A.aW(0,e)];if(this._helper._renderWorldCopies){const c=this.screenPointToMercatorCoordinate(new A.P(0,0)),f=this.screenPointToMercatorCoordinate(new A.P(this._helper._width,0)),_=this.screenPointToMercatorCoordinate(new A.P(this._helper._width,this._helper._height)),b=this.screenPointToMercatorCoordinate(new A.P(0,this._helper._height)),T=Math.floor(Math.min(c.x,f.x,_.x,b.x)),U=Math.floor(Math.max(c.x,f.x,_.x,b.x)),Q=1;for(let O=T-Q;O<=U+Q;O++)O!==0&&n.push(new A.aW(O,e))}return n}getCameraFrustum(){return ha.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const n=this.screenPointToLocation(this.centerPoint,e),c=e?e.getElevationForLngLatZoom(n,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(c)}setLocationAtPoint(e,n){const c=A.aK(this.elevation,this.center.lat),f=this.screenPointToMercatorCoordinateAtZ(n,c),_=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,c),b=A.$.fromLngLat(e),T=new A.$(b.x-(f.x-_.x),b.y-(f.y-_.y));this.setCenter(T==null?void 0:T.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,n){return n?this.coordinatePoint(A.$.fromLngLat(e),n.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(A.$.fromLngLat(e))}screenPointToLocation(e,n){var c;return(c=this.screenPointToMercatorCoordinate(e,n))===null||c===void 0?void 0:c.toLngLat()}screenPointToMercatorCoordinate(e,n){if(n){const c=n.pointCoordinate(e);if(c!=null)return c}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,n){const c=n||0,f=[e.x,e.y,0,1],_=[e.x,e.y,1,1];A.ap(f,f,this._pixelMatrixInverse),A.ap(_,_,this._pixelMatrixInverse);const b=f[3],T=_[3],U=f[1]/b,Q=_[1]/T,O=f[2]/b,H=_[2]/T,z=O===H?0:(c-O)/(H-O);return new A.$(A.B.number(f[0]/b,_[0]/T,z)/this.worldSize,A.B.number(U,Q,z)/this.worldSize,c)}coordinatePoint(e,n=0,c=this._pixelMatrix){const f=[e.x*this.worldSize,e.y*this.worldSize,n,1];return A.ap(f,f,c),new A.P(f[0]/f[3],f[1]/f[3])}getBounds(){const e=Math.max(0,this._helper._height/2-Xo(this));return new bt().extend(this.screenPointToLocation(new A.P(0,e))).extend(this.screenPointToLocation(new A.P(this._helper._width,e))).extend(this.screenPointToLocation(new A.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new A.P(0,this._helper._height)))}isPointOnMapSurface(e,n){return n?n.pointCoordinate(e)!=null:e.y>this.height/2-Xo(this)}calculatePosMatrix(e,n=!1,c){var f;const _=(f=e.key)!==null&&f!==void 0?f:A.aX(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),b=n?this._alignedPosMatrixCache:this._posMatrixCache;if(b.has(_)){const Q=b.get(_);return c?Q.f32:Q.f64}const T=Qi(e,this.worldSize);A.N(T,n?this._alignedProjMatrix:this._viewProjMatrix,T);const U={f64:T,f32:new Float32Array(T)};return b.set(_,U),c?U.f32:U.f64}calculateFogMatrix(e){const n=e.key,c=this._fogMatrixCacheF32;if(c.has(n))return c.get(n);const f=Qi(e,this.worldSize);return A.N(f,this._fogMatrix,f),c.set(n,new Float32Array(f)),c.get(n)}getConstrained(e,n){n=A.ae(+n,this.minZoom,this.maxZoom);const c={center:new A.Q(e.lng,e.lat),zoom:n};let f=this._helper._lngRange;this._helper._renderWorldCopies||f!==null||(f=[-179.9999999999,180-1e-10]);const _=this.tileSize*A.aI(c.zoom);let b=0,T=_,U=0,Q=_,O=0,H=0;const{x:z,y:Y}=this.size;if(this._helper._latRange){const me=this._helper._latRange;b=A.S(me[1])*_,T=A.S(me[0])*_,T-b<Y&&(O=Y/(T-b))}f&&(U=A.aL(A.U(f[0])*_,0,_),Q=A.aL(A.U(f[1])*_,0,_),Q<U&&(Q+=_),Q-U<z&&(H=z/(Q-U)));const{x:ee,y:Ae}=vi(_,e);let oe,ce;const fe=Math.max(H||0,O||0);if(fe){const me=new A.P(H?(Q+U)/2:ee,O?(T+b)/2:Ae);return c.center=Bl(_,me).wrap(),c.zoom+=A.ab(fe),c}if(this._helper._latRange){const me=Y/2;Ae-me<b&&(ce=b+me),Ae+me>T&&(ce=T-me)}if(f){const me=(U+Q)/2;let _e=ee;this._helper._renderWorldCopies&&(_e=A.aL(ee,me-_/2,me+_/2));const we=z/2;_e-we<U&&(oe=U+we),_e+we>Q&&(oe=Q-we)}if(oe!==void 0||ce!==void 0){const me=new A.P(oe??ee,ce??Ae);c.center=Bl(_,me).wrap()}return c}calculateCenterFromCameraLngLatAlt(e,n,c,f){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,c,f)}_calculateNearFarZIfNeeded(e,n,c){if(!this._helper.autoCalculateNearFarZ)return;const f=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),_=e-f*this._helper._pixelPerMeter/Math.cos(n),b=f<0?_:e,T=Math.PI/2+this.pitchInRadians,U=A.ad(this.fov)*(Math.abs(Math.cos(A.ad(this.roll)))*this.height+Math.abs(Math.sin(A.ad(this.roll)))*this.width)/this.height*(.5+c.y/this.height),Q=Math.sin(U)*b/Math.sin(A.ae(Math.PI-T-U,.01,Math.PI-.01)),O=Xo(this),H=Math.atan(O/this._helper.cameraToCenterDistance),z=A.ad(.75),Y=H>z?2*H*(.5+c.y/(2*O)):z,ee=Math.sin(Y)*b/Math.sin(A.ae(Math.PI-T-Y,.01,Math.PI-.01)),Ae=Math.min(Q,ee);this._helper._farZ=1.01*(Math.cos(Math.PI/2-n)*Ae+b),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,n=vi(this.worldSize,this.center),c=n.x,f=n.y;this._helper._pixelPerMeter=A.aK(1,this.center.lat)*this.worldSize;const _=A.ad(Math.min(this.pitch,89.25)),b=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(_));let T;this._calculateNearFarZIfNeeded(b,_,e),T=new Float64Array(16),A.aY(T,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),A.aj(this._invProjMatrix,T),T[8]=2*-e.x/this._helper._width,T[9]=2*e.y/this._helper._height,this._projectionMatrix=A.aZ(T),A.M(T,T,[1,-1,1]),A.L(T,T,[0,0,-this._helper.cameraToCenterDistance]),A.a_(T,T,-this.rollInRadians),A.a$(T,T,this.pitchInRadians),A.a_(T,T,-this.bearingInRadians),A.L(T,T,[-c,-f,0]),this._mercatorMatrix=A.M([],T,[this.worldSize,this.worldSize,this.worldSize]),A.M(T,T,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=A.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,T),A.L(T,T,[0,0,-this.elevation]),this._viewProjMatrix=T,this._invViewProjMatrix=A.aj([],T);const U=[0,0,-1,1];A.ap(U,U,this._invViewProjMatrix),this._cameraPosition=[U[0]/U[3],U[1]/U[3],U[2]/U[3]],this._fogMatrix=new Float64Array(16),A.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,b,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,A.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),A.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),A.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),A.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),A.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),A.L(this._fogMatrix,this._fogMatrix,[-c,-f,0]),A.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),A.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=A.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,T);const Q=this._helper._width%2/2,O=this._helper._height%2/2,H=Math.cos(this.bearingInRadians),z=Math.sin(-this.bearingInRadians),Y=c-Math.round(c)+H*Q+z*O,ee=f-Math.round(f)+H*O+z*Q,Ae=new Float64Array(T);if(A.L(Ae,Ae,[Y>.5?Y-1:Y,ee>.5?ee-1:ee,0]),this._alignedProjMatrix=Ae,T=A.aj(new Float64Array(16),this._pixelMatrix),!T)throw new Error("failed to invert matrix");this._pixelMatrixInverse=T,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new A.P(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return A.ap(n,n,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=A.aK(1,this.center.lat)*this.worldSize;return ci(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,n){const c=A.$.fromLngLat(e),f=[c.x*this.worldSize,c.y*this.worldSize,n,1];return A.ap(f,f,this._viewProjMatrix),f[2]/f[3]}getProjectionData(e){const{overscaledTileID:n,aligned:c,applyTerrainMatrix:f}=e,_=this._helper.getMercatorTileCoordinates(n),b=n?this.calculatePosMatrix(n,c,!0):null;let T;return T=n&&n.terrainRttPosMatrix32f&&f?n.terrainRttPosMatrix32f:b||A.b0(),{mainMatrix:T,tileMercatorCoords:_,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:T}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,n,c){return 1}transformLightDirection(e){return A.aQ(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,n,c,f){const _=this.calculatePosMatrix(c);let b;f?(b=[e,n,f(e,n),1],A.ap(b,b,_)):(b=[e,n,0,1],On(b,b,_));const T=b[3];return{point:new A.P(b[0]/T,b[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}populateCache(e){for(const n of e)this.calculatePosMatrix(n)}getMatrixForModel(e,n){const c=A.$.fromLngLat(e,n),f=c.meterInMercatorCoordinateUnits(),_=A.b1();return A.L(_,_,[c.x,c.y,c.z]),A.a_(_,_,Math.PI),A.a$(_,_,Math.PI/2),A.M(_,_,[-f,f,f]),_}getProjectionDataForCustomLayer(e=!0){const n=new A.Y(0,0,0,0,0),c=this.getProjectionData({overscaledTileID:n,applyGlobeMatrix:e}),f=Qi(n,this.worldSize);A.N(f,this._viewProjMatrix,f),c.tileMercatorCoords=[0,0,1,1];const _=[A.Z,A.Z,this.worldSize/this._helper.pixelsPerMeter],b=A.b2();return A.M(b,f,_),c.fallbackMatrix=b,c.mainMatrix=b,c}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function so(){A.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ds(m){if(m.useSlerp)if(m.k<1){const e=A.b3(m.startEulerAngles.roll,m.startEulerAngles.pitch,m.startEulerAngles.bearing),n=A.b3(m.endEulerAngles.roll,m.endEulerAngles.pitch,m.endEulerAngles.bearing),c=new Float64Array(4);A.b4(c,e,n,m.k);const f=A.b5(c);m.tr.setRoll(f.roll),m.tr.setPitch(f.pitch),m.tr.setBearing(f.bearing)}else m.tr.setRoll(m.endEulerAngles.roll),m.tr.setPitch(m.endEulerAngles.pitch),m.tr.setBearing(m.endEulerAngles.bearing);else m.tr.setRoll(A.B.number(m.startEulerAngles.roll,m.endEulerAngles.roll,m.k)),m.tr.setPitch(A.B.number(m.startEulerAngles.pitch,m.endEulerAngles.pitch,m.k)),m.tr.setBearing(A.B.number(m.startEulerAngles.bearing,m.endEulerAngles.bearing,m.k))}function Ls(m,e,n,c,f){const _=f.padding,b=vi(f.worldSize,n.getNorthWest()),T=vi(f.worldSize,n.getNorthEast()),U=vi(f.worldSize,n.getSouthEast()),Q=vi(f.worldSize,n.getSouthWest()),O=A.ad(-c),H=b.rotate(O),z=T.rotate(O),Y=U.rotate(O),ee=Q.rotate(O),Ae=new A.P(Math.max(H.x,z.x,ee.x,Y.x),Math.max(H.y,z.y,ee.y,Y.y)),oe=new A.P(Math.min(H.x,z.x,ee.x,Y.x),Math.min(H.y,z.y,ee.y,Y.y)),ce=Ae.sub(oe),fe=(f.width-(_.left+_.right+e.left+e.right))/ce.x,me=(f.height-(_.top+_.bottom+e.top+e.bottom))/ce.y;if(me<0||fe<0)return void so();const _e=Math.min(A.ab(f.scale*Math.min(fe,me)),m.maxZoom),we=A.P.convert(m.offset),Ue=new A.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(A.ad(c)),Ee=we.add(Ue).mult(f.scale/A.aI(_e));return{center:Bl(f.worldSize,b.add(U).div(2).sub(Ee)),zoom:_e,bearing:c}}class Gn{get useGlobeControls(){return!1}handlePanInertia(e,n){return{easingOffset:e,easingCenter:n.center}}handleMapControlsRollPitchBearingZoom(e,n){e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta),e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta)}handleMapControlsPan(e,n,c){e.around.distSqr(n.centerPoint)<.01||n.setLocationAtPoint(c,e.around)}cameraForBoxAndBearing(e,n,c,f,_){return Ls(e,n,c,f,_)}handleJumpToCenterZoom(e,n){e.zoom!==(n.zoom!==void 0?+n.zoom:e.zoom)&&e.setZoom(+n.zoom),n.center!==void 0&&e.setCenter(A.Q.convert(n.center))}handleEaseTo(e,n){const c=e.zoom,f=e.padding,_={roll:e.roll,pitch:e.pitch,bearing:e.bearing},b={roll:n.roll===void 0?e.roll:n.roll,pitch:n.pitch===void 0?e.pitch:n.pitch,bearing:n.bearing===void 0?e.bearing:n.bearing},T=n.zoom!==void 0,U=!e.isPaddingEqual(n.padding);let Q=!1;const O=T?+n.zoom:e.zoom;let H=e.centerPoint.add(n.offsetAsPoint);const z=e.screenPointToLocation(H),{center:Y,zoom:ee}=e.getConstrained(A.Q.convert(n.center||z),O??c);Fc(e,Y);const Ae=vi(e.worldSize,z),oe=vi(e.worldSize,Y).sub(Ae),ce=A.aI(ee-c);return Q=ee!==c,{easeFunc:fe=>{if(Q&&e.setZoom(A.B.number(c,ee,fe)),A.b6(_,b)||Ds({startEulerAngles:_,endEulerAngles:b,tr:e,k:fe,useSlerp:_.roll!=b.roll}),U&&(e.interpolatePadding(f,n.padding,fe),H=e.centerPoint.add(n.offsetAsPoint)),n.around)e.setLocationAtPoint(n.around,n.aroundPoint);else{const me=A.aI(e.zoom-c),_e=ee>c?Math.min(2,ce):Math.max(.5,ce),we=Math.pow(_e,1-fe),Ue=Bl(e.worldSize,Ae.add(oe.mult(fe*we)).mult(me));e.setLocationAtPoint(e.renderWorldCopies?Ue.wrap():Ue,H)}},isZooming:Q,elevationCenter:Y}}handleFlyTo(e,n){const c=n.zoom!==void 0,f=e.zoom,_=e.getConstrained(A.Q.convert(n.center||n.locationAtOffset),c?+n.zoom:f),b=_.center,T=_.zoom;Fc(e,b);const U=vi(e.worldSize,n.locationAtOffset),Q=vi(e.worldSize,b).sub(U),O=Q.mag(),H=A.aI(T-f);let z;if(n.minZoom!==void 0){const Y=Math.min(+n.minZoom,f,T),ee=e.getConstrained(b,Y).zoom;z=A.aI(ee-f)}return{easeFunc:(Y,ee,Ae,oe)=>{e.setZoom(Y===1?T:f+A.ab(ee));const ce=Y===1?b:Bl(e.worldSize,U.add(Q.mult(Ae)).mult(ee));e.setLocationAtPoint(e.renderWorldCopies?ce.wrap():ce,oe)},scaleOfZoom:H,targetCenter:b,scaleOfMinZoom:z,pixelPathLength:O}}}class an{constructor(e,n,c){this.blendFunction=e,this.blendColor=n,this.mask=c}}an.Replace=[1,0],an.disabled=new an(an.Replace,A.b7.transparent,[!1,!1,!1,!1]),an.unblended=new an(an.Replace,A.b7.transparent,[!0,!0,!0,!0]),an.alphaBlended=new an([1,771],A.b7.transparent,[!0,!0,!0,!0]);const Ji=2305;class Cr{constructor(e,n,c){this.enable=e,this.mode=n,this.frontFace=c}}Cr.disabled=new Cr(!1,1029,Ji),Cr.backCCW=new Cr(!0,1029,Ji),Cr.frontCCW=new Cr(!0,1028,Ji);class mr{constructor(e,n,c){this.func=e,this.mask=n,this.range=c}}mr.ReadOnly=!1,mr.ReadWrite=!0,mr.disabled=new mr(519,mr.ReadOnly,[0,1]);const Ps=7680;class Mr{constructor(e,n,c,f,_,b){this.test=e,this.ref=n,this.mask=c,this.fail=f,this.depthFail=_,this.pass=b}}Mr.disabled=new Mr({func:519,mask:0},0,0,Ps,Ps,Ps);const Rs=new WeakMap;function ea(m){var e;if(Rs.has(m))return Rs.get(m);{const n=(e=m.getParameter(m.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return Rs.set(m,n),n}}class RA{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const n=e.context,c=n.gl;this._texFormat=c.RGBA,this._texType=c.UNSIGNED_BYTE;const f=new A.aF;f.emplaceBack(-1,-1),f.emplaceBack(2,-1),f.emplaceBack(-1,2);const _=new A.aH;_.emplaceBack(0,1,2),this._fullscreenTriangle=new ao(n.createVertexBuffer(f,os.members),n.createIndexBuffer(_),A.aG.simpleSegment(0,0,f.length,_.length)),this._resultBuffer=new Uint8Array(4),n.activeTexture.set(c.TEXTURE1);const b=c.createTexture();c.bindTexture(c.TEXTURE_2D,b),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texImage2D(c.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=n.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(b),ea(c)&&(this._pbo=c.createBuffer(),c.bindBuffer(c.PIXEL_PACK_BUFFER,this._pbo),c.bufferData(c.PIXEL_PACK_BUFFER,4,c.STREAM_READ),c.bindBuffer(c.PIXEL_PACK_BUFFER,null))}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,n){const c=this._updateCount;return this._readbackQueue?c>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():c>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,n),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,n=e.gl;e.activeTexture.set(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,n){const c=this._cachedRenderContext.context,f=c.gl;if(this._bindFramebuffer(),c.viewport.set([0,0,this._texWidth,this._texHeight]),c.clear({color:A.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(c,f.TRIANGLES,mr.disabled,Mr.disabled,an.unblended,Cr.disabled,((_,b)=>({u_input:_,u_output_expected:b}))(e,n),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ea(f)){f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.readBuffer(f.COLOR_ATTACHMENT0),f.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),f.bindBuffer(f.PIXEL_PACK_BUFFER,null);const _=f.fenceSync(f.SYNC_GPU_COMMANDS_COMPLETE,0);f.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:_}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ea(e)){const n=e.clientWaitSync(this._readbackQueue.sync,0,0);if(n===e.WAIT_FAILED)return A.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(n===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=RA._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let n=0;return n+=e[0]/256,n+=e[1]/65536,n+=e[2]/16777216,e[3]<127&&(n=-n),n/128}}const mi=A.Z/128;function As(m,e){const n=m.granularity!==void 0?Math.max(m.granularity,1):1,c=n+(m.generateBorders?2:0),f=n+(m.extendToNorthPole||m.generateBorders?1:0)+(m.extendToSouthPole||m.generateBorders?1:0),_=c+1,b=f+1,T=m.generateBorders?-1:0,U=m.generateBorders||m.extendToNorthPole?-1:0,Q=n+(m.generateBorders?1:0),O=n+(m.generateBorders||m.extendToSouthPole?1:0),H=_*b,z=c*f*6,Y=_*b>65536;if(Y&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ee=Y||e==="32bit",Ae=new Int16Array(2*H);let oe=0;for(let me=U;me<=O;me++)for(let _e=T;_e<=Q;_e++){let we=_e/n*A.Z;_e===-1&&(we=-64),_e===n+1&&(we=A.Z+mi);let Ue=me/n*A.Z;me===-1&&(Ue=m.extendToNorthPole?A.b9:-64),me===n+1&&(Ue=m.extendToSouthPole?A.ba:A.Z+mi),Ae[oe++]=we,Ae[oe++]=Ue}const ce=ee?new Uint32Array(z):new Uint16Array(z);let fe=0;for(let me=0;me<f;me++)for(let _e=0;_e<c;_e++){const we=_e+1+me*_,Ue=_e+(me+1)*_,Ee=_e+1+(me+1)*_;ce[fe++]=_e+me*_,ce[fe++]=Ue,ce[fe++]=we,ce[fe++]=we,ce[fe++]=Ue,ce[fe++]=Ee}return{vertices:Ae.buffer.slice(0),indices:ce.buffer.slice(0),uses32bitIndices:ee}}const oo=new A.aE({fill:new A.bb(128,2),line:new A.bb(512,0),tile:new A.bb(128,32),stencil:new A.bb(128,1),circle:3});class Os{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Vn.projectionGlobe}get vertexShaderPreludeCode(){return Vn.projectionMercator.vertexSource}get subdivisionGranularity(){return oo}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new RA(e));const n=A.S(this._errorQueryLatitudeDegrees),c=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,f=this._errorMeasurement.updateErrorLoop(n,c),_=X.now();f!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=f,this._errorMeasurementLastChangeTime=_);const b=Math.min(Math.max((_-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=A.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,A.bd(b))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,n,c,f,_){const b=(_==="stencil"?oo.stencil:oo.tile).getGranularityForZoomLevel(n.z);return this._getMesh(e,{granularity:b,generateBorders:c,extendToNorthPole:n.y===0&&f,extendToSouthPole:n.y===(1<<n.z)-1&&f})}_getMesh(e,n){const c=this._getMeshKey(n);if(c in this._tileMeshCache)return this._tileMeshCache[c];const f=function(_,b){const T=As(b,"16bit"),U=A.aF.deserialize({arrayBuffer:T.vertices,length:T.vertices.byteLength/2/2}),Q=A.aH.deserialize({arrayBuffer:T.indices,length:T.indices.byteLength/2/3});return new ao(_.createVertexBuffer(U,os.members),_.createIndexBuffer(Q),A.aG.simpleSegment(0,0,U.length,Q.length))}(e,n);return this._tileMeshCache[c]=f,f}recalculate(e){}hasTransition(){const e=X.now();let n=!1;return n=n||(e-this._errorMeasurementLastChangeTime)/1e3<.7,n=n||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,n}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}const Uc=new A.r({type:new A.D(A.v.projection.type)});class Ao extends A.E{constructor(e){super(),this._transitionable=new A.T(Uc),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new A.C(0)),this._mercatorProjection=new Qr,this._verticalPerspectiveProjection=new Os}get transitionState(){const e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof A.be){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,n,c,f,_){return this.currentProjection.getMeshFromTileID(e,n,c,f,_)}setProjection(e){this._transitionable.setValue("type",(e==null?void 0:e.type)||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function Mc(m){const e=Cl(m.worldSize,m.center.lat);return 2*Math.PI*e}function Na(m,e,n,c,f){const _=1/(1<<f),b=e/A.Z*_+c*_,T=A.bg((m/A.Z*_+n*_)*Math.PI*2+Math.PI,2*Math.PI),U=2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI,Q=Math.cos(U),O=new Float64Array(3);return O[0]=Math.sin(T)*Q,O[1]=Math.sin(U),O[2]=Math.cos(T)*Q,O}function ri(m){return function(e,n){const c=Math.cos(n),f=new Float64Array(3);return f[0]=Math.sin(e)*c,f[1]=Math.sin(n),f[2]=Math.cos(e)*c,f}(m.lng*Math.PI/180,m.lat*Math.PI/180)}function Cl(m,e){return m/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Zh(m){const e=Math.asin(m[1])/Math.PI*180,n=Math.sqrt(m[0]*m[0]+m[2]*m[2]);if(n>1e-6){const c=m[0]/n,f=Math.acos(m[2]/n),_=(c>0?f:-f)/Math.PI*180;return new A.Q(A.aL(_,-180,180),e)}return new A.Q(0,e)}function Li(m){return Math.cos(m*Math.PI/180)}function ni(m,e){const n=Li(m),c=Li(e);return A.ab(c/n)}function fa(m,e){const n=m.rotate(e.bearingInRadians),c=e.zoom+ni(e.center.lat,0),f=A.bc(1/Li(e.center.lat),1/Li(Math.min(Math.abs(e.center.lat),60)),A.bf(c,7,3,0,1)),_=360/Mc({worldSize:e.worldSize,center:{lat:e.center.lat}});return new A.Q(e.center.lng-n.x*_*f,A.ae(e.center.lat+n.y*_,-85.051129,A.aJ))}function OA(m){const e=.5*m,n=Math.sin(e),c=Math.cos(e);return Math.log(n+c)-Math.log(c-n)}function ku(m,e,n,c){const f=m.lat+n*c;if(Math.abs(n)>1){const _=(Math.sign(m.lat+n)!==Math.sign(m.lat)?-Math.abs(m.lat):Math.abs(m.lat))*Math.PI/180,b=Math.abs(m.lat+n)*Math.PI/180,T=OA(_+c*(b-_)),U=OA(_),Q=OA(b);return new A.Q(m.lng+e*((T-U)/(Q-U)),f)}return new A.Q(m.lng+e*c,f)}class qh{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=e}recalculateCache(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(e,n,c,f){const _=`${e.z}_${e.x}_${e.y}`,b=this._cache.get(_);if(b)return b;const T=this._cachePrevious.get(_);if(T)return this._cache.set(_,T),T;const U=this._aabbFactory(e,n,c,f);return this._cache.set(_,U),this._hadAnyChanges=!0,U}}function zs(m,e,n){const c=m-e;return c<0?-c:Math.max(0,c-n)}function Hu(m,e,n,c,f){const _=m-n;let b;return b=_<0?Math.min(-_,1+_-f):_>1?Math.min(Math.max(_-f,0),1-_):0,Math.max(b,zs(e,c,f))}class Xh{constructor(){this._aabbCache=new qh(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(e,n,c,f){const _=1<<c.z,b=1/_,T=c.x/_,U=c.y/_;let Q=2;return Q=Math.min(Q,Hu(e,n,T,U,b)),Q=Math.min(Q,Hu(e,n,T+.5,-U-b,b)),Q=Math.min(Q,Hu(e,n,T+.5,2-U-b,b)),Q}getWrap(e,n,c){const f=1<<n.z,_=1/f,b=n.x/f,T=zs(e.x,b,_),U=zs(e.x,b-1,_),Q=zs(e.x,b+1,_),O=Math.min(T,U,Q);return O===Q?1:O===U?-1:0}allowVariableZoom(e,n){return Ba(e,n)>4}allowWorldCopies(){return!1}getTileAABB(e,n,c,f){return this._aabbCache.getTileAABB(e,n,c,f)}_computeTileAABB(e,n,c,f){if(e.z<=0)return new $n([-1,-1,-1],[1,1,1]);if(e.z===1)return new $n([e.x===0?-1:0,e.y===0?0:-1,-1],[e.x===0?0:1,e.y===0?1:0,1]);{const _=[Na(0,0,e.x,e.y,e.z),Na(A.Z,0,e.x,e.y,e.z),Na(A.Z,A.Z,e.x,e.y,e.z),Na(0,A.Z,e.x,e.y,e.z)],b=[1,1,1],T=[-1,-1,-1];for(const U of _)for(let Q=0;Q<3;Q++)b[Q]=Math.min(b[Q],U[Q]),T[Q]=Math.max(T[Q],U[Q]);if(e.y===0||e.y===(1<<e.z)-1){const U=[0,e.y===0?1:-1,0];for(let Q=0;Q<3;Q++)b[Q]=Math.min(b[Q],U[Q]),T[Q]=Math.max(T[Q],U[Q])}return new $n(b,T)}}}class Ic{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,c){return this._helper.interpolatePadding(e,n,c)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n){this._helper.resize(e,n)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=A.bh(),this._projectionMatrix=A.b1(),this._globeViewProjMatrix32f=A.b0(),this._globeViewProjMatrixNoCorrection=A.b1(),this._globeViewProjMatrixNoCorrectionInverted=A.b1(),this._globeProjMatrixInverted=A.b1(),this._cameraPosition=A.bi(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Di({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,n)=>this.getConstrained(e,n)}),this._coveringTilesDetailsProvider=new Xh}clone(){const e=new Ic;return e.apply(this),e}apply(e,n){this._globeLatitudeErrorCorrectionRadians=n||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=A.bi();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:n,applyGlobeMatrix:c}=e,f=this._helper.getMercatorTileCoordinates(n);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:f,clippingPlane:this._cachedClippingPlane,projectionTransition:c?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const n=this.pitchInRadians,c=this.cameraToCenterDistance/e,f=Math.sin(n)*c,_=Math.cos(n)*c+1,b=1/Math.sqrt(f*f+_*_)*1;let T=-f,U=_;const Q=Math.sqrt(T*T+U*U);T/=Q,U/=Q;const O=[0,T,U];return A.bj(O,O,[0,0,0],-this.bearingInRadians),A.bk(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),A.bl(O,O,[0,0,0],this.center.lng*Math.PI/180),A.aO(O,O,.25),[...O,.25*-b]}isLocationOccluded(e){return!this.isSurfacePointVisible(ri(e))}transformLightDirection(e){const n=this._helper._center.lng*Math.PI/180,c=this._helper._center.lat*Math.PI/180,f=Math.cos(c),_=[Math.sin(n)*f,Math.sin(c),Math.cos(n)*f],b=[_[2],0,-_[0]],T=[0,0,0];A.aU(T,b,_),A.aT(b,b),A.aT(T,T);const U=[0,0,0];return A.aT(U,[b[0]*e[0]+T[0]*e[1]+_[0]*e[2],b[1]*e[0]+T[1]*e[1]+_[1]*e[2],b[2]*e[0]+T[2]*e[1]+_[2]*e[2]]),U}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,n,c){const f=function(T,U,Q){const O=1/(1<<Q.z);return new A.$(T/A.Z*O+Q.x*O,U/A.Z*O+Q.y*O)}(e,n,c.canonical),_=(b=f.y,[A.bg(f.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI]);var b;return this.getCircleRadiusCorrection()/Math.cos(_[1])}projectTileCoordinates(e,n,c,f){const _=c.canonical,b=Na(e,n,_.x,_.y,_.z),T=1+(f?f(e,n):0)/A.br,U=[b[0]*T,b[1]*T,b[2]*T,1];A.ap(U,U,this._globeViewProjMatrixNoCorrection);const Q=this._cachedClippingPlane,O=Q[0]*b[0]+Q[1]*b[1]+Q[2]*b[2]+Q[3]<0;return{point:new A.P(U[0]/U[3],U[1]/U[3]),signedDistanceFromCamera:U[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=Cl(this.worldSize,this.center.lat),n=A.b2(),c=A.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),A.aY(n,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const f=this.centerOffset;n[8]=2*-f.x/this._helper._width,n[9]=2*f.y/this._helper._height,this._projectionMatrix=A.aZ(n),this._globeProjMatrixInverted=A.b2(),A.aj(this._globeProjMatrixInverted,n),A.L(n,n,[0,0,-this.cameraToCenterDistance]),A.a_(n,n,this.rollInRadians),A.a$(n,n,-this.pitchInRadians),A.a_(n,n,this.bearingInRadians),A.L(n,n,[0,0,-e]);const _=A.bi();_[0]=e,_[1]=e,_[2]=e,A.a$(c,n,this.center.lat*Math.PI/180),A.bm(c,c,-this.center.lng*Math.PI/180),A.M(c,c,_),this._globeViewProjMatrixNoCorrection=c,A.a$(n,n,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),A.bm(n,n,-this.center.lng*Math.PI/180),A.M(n,n,_),this._globeViewProjMatrix32f=new Float32Array(n),this._globeViewProjMatrixNoCorrectionInverted=A.b2(),A.aj(this._globeViewProjMatrixNoCorrectionInverted,c);const b=A.bi();this._cameraPosition=A.bi(),this._cameraPosition[2]=this.cameraToCenterDistance/e,A.bj(this._cameraPosition,this._cameraPosition,b,-this.rollInRadians),A.bk(this._cameraPosition,this._cameraPosition,b,this.pitchInRadians),A.bj(this._cameraPosition,this._cameraPosition,b,-this.bearingInRadians),A.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),A.bk(this._cameraPosition,this._cameraPosition,b,-this.center.lat*Math.PI/180),A.bl(this._cameraPosition,this._cameraPosition,b,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const T=A.aZ(this._globeViewProjMatrixNoCorrectionInverted);A.M(T,T,[1,1,-1]),this._cachedFrustum=ha.fromInvProjectionMatrix(T)}calculateFogMatrix(e){A.w("calculateFogMatrix is not supported on globe projection.");const n=A.b2();return A.at(n),n}getVisibleUnwrappedCoordinates(e){return[new A.aW(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&A.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){if(!this._globeViewProjMatrixNoCorrection)return 1;const c=ri(e);A.aO(c,c,1+n/A.br);const f=A.bh();return A.ap(f,[c[0],c[1],c[2],1],this._globeViewProjMatrixNoCorrection),f[2]/f[3]}populateCache(e){}getBounds(){const e=.5*this.width,n=.5*this.height,c=[new A.P(0,0),new A.P(e,0),new A.P(this.width,0),new A.P(this.width,n),new A.P(this.width,this.height),new A.P(e,this.height),new A.P(0,this.height),new A.P(0,n)],f=[];for(const H of c)f.push(this.unprojectScreenPoint(H));let _=0,b=0,T=0,U=0;const Q=this.center;for(const H of f){const z=A.bn(Q.lng,H.lng),Y=A.bn(Q.lat,H.lat);z<b&&(b=z),z>_&&(_=z),Y<U&&(U=Y),Y>T&&(T=Y)}const O=[Q.lng+b,Q.lat+U,Q.lng+_,Q.lat+T];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new bt(O)}getConstrained(e,n){const c=A.ae(e.lat,-85.051129,A.aJ),f=A.ae(+n,this.minZoom+ni(0,c),this.maxZoom);return{center:new A.Q(e.lng,c),zoom:f}}calculateCenterFromCameraLngLatAlt(e,n,c,f){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,c,f)}setLocationAtPoint(e,n){const c=ri(this.unprojectScreenPoint(n)),f=ri(e),_=A.bi();A.bo(_);const b=A.bi();A.bl(b,c,_,-this.center.lng*Math.PI/180),A.bk(b,b,_,this.center.lat*Math.PI/180);const T=f[0]*f[0]+f[2]*f[2],U=b[0]*b[0];if(T<U)return;const Q=Math.sqrt(T-U),O=-Q,H=A.bp(f[0],f[2],b[0],Q),z=A.bp(f[0],f[2],b[0],O),Y=A.bi();A.bl(Y,f,_,-H);const ee=A.bp(Y[1],Y[2],b[1],b[2]),Ae=A.bi();A.bl(Ae,f,_,-z);const oe=A.bp(Ae[1],Ae[2],b[1],b[2]),ce=.5*Math.PI,fe=ee>=-ce&&ee<=ce,me=oe>=-ce&&oe<=ce;let _e,we;if(fe&&me){const je=this.center.lng*Math.PI/180,rt=this.center.lat*Math.PI/180;A.bs(H,je)+A.bs(ee,rt)<A.bs(z,je)+A.bs(oe,rt)?(_e=H,we=ee):(_e=z,we=oe)}else if(fe)_e=H,we=ee;else{if(!me)return;_e=z,we=oe}const Ue=_e/Math.PI*180,Ee=we/Math.PI*180,Ge=this.center.lat;this.setCenter(new A.Q(Ue,A.ae(Ee,-90,90))),this.setZoom(this.zoom+ni(Ge,this.center.lat))}locationToScreenPoint(e,n){const c=ri(e);if(n){const f=n.getElevationForLngLatZoom(e,this._helper._tileZoom);A.aO(c,c,1+f/A.br)}return this._projectSurfacePointToScreen(c)}_projectSurfacePointToScreen(e){const n=A.bh();return A.ap(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],new A.P((.5*n[0]+.5)*this.width,(.5*-n[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,n){if(n){const c=n.pointCoordinate(e);if(c)return c}return A.$.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,n){var c;return(c=this.screenPointToMercatorCoordinate(e,n))===null||c===void 0?void 0:c.toLngLat()}isPointOnMapSurface(e,n){const c=this._cameraPosition,f=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(c,f)}getRayDirectionFromPixel(e){const n=A.bh();n[0]=e.x/this.width*2-1,n[1]=-1*(e.y/this.height*2-1),n[2]=1,n[3]=1,A.ap(n,n,this._globeViewProjMatrixNoCorrectionInverted),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3];const c=A.bi();c[0]=n[0]-this._cameraPosition[0],c[1]=n[1]-this._cameraPosition[1],c[2]=n[2]-this._cameraPosition[2];const f=A.bi();return A.aT(f,c),f}isSurfacePointVisible(e){const n=this._cachedClippingPlane;return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;const n=A.bh();return A.ap(n,[...e,1],this._globeViewProjMatrixNoCorrection),n[0]/=n[3],n[1]/=n[3],n[2]/=n[3],n[0]>-1&&n[0]<1&&n[1]>-1&&n[1]<1&&n[2]>-1&&n[2]<1}rayPlanetIntersection(e,n){const c=A.aV(e,n),f=A.bi(),_=A.bi();A.aO(_,n,c),A.aS(f,e,_);const b=1-A.aV(f,f);if(b<0)return null;const T=A.aV(e,e)-1,U=-c+(c<0?1:-1)*Math.sqrt(b),Q=T/U,O=U;return{tMin:Math.min(Q,O),tMax:Math.max(Q,O)}}unprojectScreenPoint(e){const n=this._cameraPosition,c=this.getRayDirectionFromPixel(e),f=this.rayPlanetIntersection(n,c);if(f){const Q=A.bi();A.aP(Q,n,[c[0]*f.tMin,c[1]*f.tMin,c[2]*f.tMin]);const O=A.bi();return A.aT(O,Q),Zh(O)}const _=this._cachedClippingPlane[0]*c[0]+this._cachedClippingPlane[1]*c[1]+this._cachedClippingPlane[2]*c[2],b=-A.bq(this._cachedClippingPlane,n)/_,T=A.bi();if(b>0)A.aP(T,n,[c[0]*b,c[1]*b,c[2]*b]);else{const Q=A.bi();A.aP(Q,n,[2*c[0],2*c[1],2*c[2]]);const O=A.bq(this._cachedClippingPlane,Q);A.aS(T,Q,[this._cachedClippingPlane[0]*O,this._cachedClippingPlane[1]*O,this._cachedClippingPlane[2]*O])}const U=A.bi();return A.aT(U,T),Zh(U)}getMatrixForModel(e,n){const c=A.Q.convert(e),f=1/A.br,_=A.b1();return A.bm(_,_,c.lng/180*Math.PI),A.a$(_,_,-c.lat/180*Math.PI),A.L(_,_,[0,0,1+n/A.br]),A.a$(_,_,.5*Math.PI),A.M(_,_,[f,f,f]),_}getProjectionDataForCustomLayer(e=!0){const n=this.getProjectionData({overscaledTileID:new A.Y(0,0,0,0,0),applyGlobeMatrix:e});return n.tileMercatorCoords=[0,0,1,1],n}getFastPathSimpleProjectionMatrix(e){}}class Qc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,n,c){return this._helper.interpolatePadding(e,n,c)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,n,c=!0){this._helper.resize(e,n,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,n){this._helper.overrideNearFarZ(e,n)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,n){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=n,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Di({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,n)=>this.getConstrained(e,n)}),this._globeness=1,this._mercatorTransform=new mn,this._verticalPerspectiveTransform=new Ic}clone(){const e=new Qc;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const n=this._mercatorTransform.getProjectionData(e),c=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?c.mainMatrix:n.mainMatrix,clippingPlane:c.clippingPlane,tileMercatorCoords:c.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:n.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return A.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return A.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,n,c){const f=this._mercatorTransform.getPitchedTextCorrection(e,n,c),_=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,n,c);return A.bc(f,_,this._globeness)}projectTileCoordinates(e,n,c,f){return this.currentTransform.projectTileCoordinates(e,n,c,f)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,n){return this.currentTransform.lngLatToCameraDepth(e,n)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,n){return this.currentTransform.getConstrained(e,n)}calculateCenterFromCameraLngLatAlt(e,n,c,f){return this._helper.calculateCenterFromCameraLngLatAlt(e,n,c,f)}setLocationAtPoint(e,n){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,n),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,n),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,n){return this.currentTransform.locationToScreenPoint(e,n)}screenPointToMercatorCoordinate(e,n){return this.currentTransform.screenPointToMercatorCoordinate(e,n)}screenPointToLocation(e,n){return this.currentTransform.screenPointToLocation(e,n)}isPointOnMapSurface(e,n){return this.currentTransform.isPointOnMapSurface(e,n)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,n){return this.currentTransform.getMatrixForModel(e,n)}getProjectionDataForCustomLayer(e=!0){const n=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return n;const c=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return c.fallbackMatrix=n.mainMatrix,c}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class ja{get useGlobeControls(){return!0}handlePanInertia(e,n){const c=fa(e,n);return Math.abs(c.lng-n.center.lng)>180&&(c.lng=n.center.lng+179.5*Math.sign(c.lng-n.center.lng)),{easingCenter:c,easingOffset:new A.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,n){const c=e.around,f=n.screenPointToLocation(c);e.bearingDelta&&n.setBearing(n.bearing+e.bearingDelta),e.pitchDelta&&n.setPitch(n.pitch+e.pitchDelta),e.rollDelta&&n.setRoll(n.roll+e.rollDelta);const _=n.zoom;e.zoomDelta&&n.setZoom(n.zoom+e.zoomDelta);const b=n.zoom-_;if(b===0)return;const T=A.bn(n.center.lng,f.lng),U=T/(Math.abs(T/180)+1),Q=A.bn(n.center.lat,f.lat),O=n.getRayDirectionFromPixel(c),H=n.cameraPosition,z=-1*A.aV(H,O),Y=A.bi();A.aP(Y,H,[O[0]*z,O[1]*z,O[2]*z]);const ee=A.bt(Y)-1,Ae=Math.exp(.5*-Math.max(ee-.3,0)),oe=Cl(n.worldSize,n.center.lat)/Math.min(n.width,n.height),ce=A.bf(oe,.9,.5,1,.25),fe=(1-A.aI(-b))*Math.min(Ae,ce),me=n.center.lat,_e=n.zoom,we=new A.Q(n.center.lng+U*fe,A.ae(n.center.lat+Q*fe,-85.051129,A.aJ));n.setLocationAtPoint(f,c);const Ue=n.center,Ee=A.bf(Math.abs(T),45,85,0,1),Ge=A.bf(oe,.75,.35,0,1),je=Math.pow(Math.max(Ee,Ge),.25),rt=A.bn(Ue.lng,we.lng),it=A.bn(Ue.lat,we.lat);n.setCenter(new A.Q(Ue.lng+rt*je,Ue.lat+it*je).wrap()),n.setZoom(_e+ni(me,n.center.lat))}handleMapControlsPan(e,n,c){if(!e.panDelta)return;const f=n.center.lat,_=n.zoom;n.setCenter(fa(e.panDelta,n).wrap()),n.setZoom(_+ni(f,n.center.lat))}cameraForBoxAndBearing(e,n,c,f,_){const b=Ls(e,n,c,f,_),T=n.left/_.width*2-1,U=(_.width-n.right)/_.width*2-1,Q=n.top/_.height*-2+1,O=(_.height-n.bottom)/_.height*-2+1,H=A.bn(c.getWest(),c.getEast())<0,z=H?c.getEast():c.getWest(),Y=H?c.getWest():c.getEast(),ee=Math.max(c.getNorth(),c.getSouth()),Ae=Math.min(c.getNorth(),c.getSouth()),oe=z+.5*A.bn(z,Y),ce=ee+.5*A.bn(ee,Ae),fe=_.clone();fe.setCenter(b.center),fe.setBearing(b.bearing),fe.setPitch(0),fe.setRoll(0),fe.setZoom(b.zoom);const me=fe.modelViewProjectionMatrix,_e=[ri(c.getNorthWest()),ri(c.getNorthEast()),ri(c.getSouthWest()),ri(c.getSouthEast()),ri(new A.Q(Y,ce)),ri(new A.Q(z,ce)),ri(new A.Q(oe,ee)),ri(new A.Q(oe,Ae))],we=ri(b.center);let Ue=Number.POSITIVE_INFINITY;for(const Ee of _e)T<0&&(Ue=ja.getLesserNonNegativeNonNull(Ue,ja.solveVectorScale(Ee,we,me,"x",T))),U>0&&(Ue=ja.getLesserNonNegativeNonNull(Ue,ja.solveVectorScale(Ee,we,me,"x",U))),Q>0&&(Ue=ja.getLesserNonNegativeNonNull(Ue,ja.solveVectorScale(Ee,we,me,"y",Q))),O<0&&(Ue=ja.getLesserNonNegativeNonNull(Ue,ja.solveVectorScale(Ee,we,me,"y",O)));if(Number.isFinite(Ue)&&Ue!==0)return b.zoom=fe.zoom+A.ab(Ue),b;so()}handleJumpToCenterZoom(e,n){const c=e.center.lat,f=e.getConstrained(n.center?A.Q.convert(n.center):e.center,e.zoom).center;e.setCenter(f.wrap());const _=n.zoom!==void 0?+n.zoom:e.zoom+ni(c,f.lat);e.zoom!==_&&e.setZoom(_)}handleEaseTo(e,n){const c=e.zoom,f=e.center,_=e.padding,b={roll:e.roll,pitch:e.pitch,bearing:e.bearing},T={roll:n.roll===void 0?e.roll:n.roll,pitch:n.pitch===void 0?e.pitch:n.pitch,bearing:n.bearing===void 0?e.bearing:n.bearing},U=n.zoom!==void 0,Q=!e.isPaddingEqual(n.padding);let O=!1;const H=n.center?A.Q.convert(n.center):f,z=e.getConstrained(H,c).center;Fc(e,z);const Y=e.clone();Y.setCenter(z),Y.setZoom(U?+n.zoom:c+ni(f.lat,H.lat)),Y.setBearing(n.bearing);const ee=new A.P(A.ae(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),A.ae(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));Y.setLocationAtPoint(z,ee);const Ae=(n.offset&&n.offsetAsPoint.mag())>0?Y.center:z,oe=U?+n.zoom:c+ni(f.lat,Ae.lat),ce=c+ni(f.lat,0),fe=oe+ni(Ae.lat,0),me=A.bn(f.lng,Ae.lng),_e=A.bn(f.lat,Ae.lat),we=A.aI(fe-ce);return O=oe!==c,{easeFunc:Ue=>{if(A.b6(b,T)||Ds({startEulerAngles:b,endEulerAngles:T,tr:e,k:Ue,useSlerp:b.roll!=T.roll}),Q&&e.interpolatePadding(_,n.padding,Ue),n.around)A.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(n.around,n.aroundPoint);else{const Ee=fe>ce?Math.min(2,we):Math.max(.5,we),Ge=Math.pow(Ee,1-Ue),je=ku(f,me,_e,Ue*Ge);e.setCenter(je.wrap())}if(O){const Ee=A.B.number(ce,fe,Ue)+ni(0,e.center.lat);e.setZoom(Ee)}},isZooming:O,elevationCenter:Ae}}handleFlyTo(e,n){const c=n.zoom!==void 0,f=e.center,_=e.zoom,b=e.padding,T=!e.isPaddingEqual(n.padding),U=e.getConstrained(A.Q.convert(n.center||n.locationAtOffset),_).center,Q=c?+n.zoom:e.zoom+ni(e.center.lat,U.lat),O=e.clone();O.setCenter(U),O.setZoom(Q),O.setBearing(n.bearing);const H=new A.P(A.ae(e.centerPoint.x+n.offsetAsPoint.x,0,e.width),A.ae(e.centerPoint.y+n.offsetAsPoint.y,0,e.height));O.setLocationAtPoint(U,H);const z=O.center;Fc(e,z);const Y=function(_e,we,Ue){const Ee=ri(we),Ge=ri(Ue),je=A.aV(Ee,Ge),rt=Math.acos(je),it=Mc(_e);return rt/(2*Math.PI)*it}(e,f,z),ee=_+ni(f.lat,0),Ae=Q+ni(z.lat,0),oe=A.aI(Ae-ee);let ce;if(typeof n.minZoom=="number"){const _e=+n.minZoom+ni(z.lat,0),we=Math.min(_e,ee,Ae)+ni(0,z.lat),Ue=e.getConstrained(z,we).zoom+ni(z.lat,0);ce=A.aI(Ue-ee)}const fe=A.bn(f.lng,z.lng),me=A.bn(f.lat,z.lat);return{easeFunc:(_e,we,Ue,Ee)=>{const Ge=ku(f,fe,me,Ue);T&&e.interpolatePadding(b,n.padding,_e);const je=_e===1?z:Ge;e.setCenter(je.wrap());const rt=ee+A.ab(we);e.setZoom(_e===1?Q:rt+ni(0,je.lat))},scaleOfZoom:oe,targetCenter:z,scaleOfMinZoom:ce,pixelPathLength:Y}}static solveVectorScale(e,n,c,f,_){const b=f==="x"?[c[0],c[4],c[8],c[12]]:[c[1],c[5],c[9],c[13]],T=[c[3],c[7],c[11],c[15]],U=e[0]*b[0]+e[1]*b[1]+e[2]*b[2],Q=e[0]*T[0]+e[1]*T[1]+e[2]*T[2],O=n[0]*b[0]+n[1]*b[1]+n[2]*b[2],H=n[0]*T[0]+n[1]*T[1]+n[2]*T[2];return O+_*Q===U+_*H||T[3]*(U-O)+b[3]*(H-Q)+U*H==O*Q?null:(O+b[3]-_*H-_*T[3])/(O-U-_*H+_*Q)}static getLesserNonNegativeNonNull(e,n){return n!==null&&n>=0&&n<e?n:e}}class Yh{constructor(e){this._globe=e,this._mercatorCameraHelper=new Gn,this._verticalPerspectiveCameraHelper=new ja}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,n){return this.currentHelper.handlePanInertia(e,n)}handleMapControlsRollPitchBearingZoom(e,n){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,n)}handleMapControlsPan(e,n,c){this.currentHelper.handleMapControlsPan(e,n,c)}cameraForBoxAndBearing(e,n,c,f,_){return this.currentHelper.cameraForBoxAndBearing(e,n,c,f,_)}handleJumpToCenterZoom(e,n){this.currentHelper.handleJumpToCenterZoom(e,n)}handleEaseTo(e,n){return this.currentHelper.handleEaseTo(e,n)}handleFlyTo(e,n){return this.currentHelper.handleFlyTo(e,n)}}const ks=(m,e)=>A.x(m,e&&e.filter(n=>n.identifier!=="source.canvas")),Nu=A.bu();class zA extends A.E{constructor(e,n={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const f=this.sourceCaches[c].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[c].reload()}},this.map=e,this.dispatcher=new ur(Pt(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(c,f)=>this.getGlyphs(c,f)),this.dispatcher.registerMessageHandler("GI",(c,f)=>this.getImages(c,f)),this.imageManager=new Qt,this.imageManager.setEventedParent(this),this.glyphManager=new Vt(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new he(256,512),this.crossTileSymbolIndex=new Zo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new A.bv,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",A.bw()),Yr().on(or,this._rtlPluginLoaded),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const f=this.sourceCaches[c.sourceId];if(!f)return;const _=f.getSource();if(_&&_.vectorLayerIds)for(const b in this._layers){const T=this._layers[b];T.source===_.id&&this._validateLayer(T)}})}loadURL(e,n={},c){this.fire(new A.l("dataloading",{dataType:"style"})),n.validate=typeof n.validate!="boolean"||n.validate;const f=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;A.j(f,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,n,c)}).catch(b=>{this._loadStyleRequest=null,b&&!_.signal.aborted&&this.fire(new A.k(b))})}loadJSON(e,n={},c){this.fire(new A.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,X.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,n.validate=n.validate!==!1,this._load(e,n,c)}).catch(()=>{})}loadEmpty(){this.fire(new A.l("dataloading",{dataType:"style"})),this._load(Nu,{validate:!1})}_load(e,n,c){var f,_;const b=n.transformStyle?n.transformStyle(c,e):e;if(!n.validate||!ks(this,A.y(b))){this._loaded=!0,this.stylesheet=b;for(const T in b.sources)this.addSource(T,b.sources[T],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new ut(this.stylesheet.light),this._setProjectionInternal(((f=this.stylesheet.projection)===null||f===void 0?void 0:f.type)||"mercator"),this.sky=new Rt(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.fire(new A.l("data",{dataType:"style"})),this.fire(new A.l("style.load"))}}_createLayers(){const e=A.bx(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(n=>n.id),this._layers={},this._serializedLayers=null;for(const n of e){const c=A.by(n);c.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=c}}_loadSprite(e,n=!1,c=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,b,T,U){return A._(this,void 0,void 0,function*(){const Q=Ne(_),O=T>1?"@2x":"",H={},z={};for(const{id:Y,url:ee}of Q){const Ae=b.transformRequest(st(ee,O,".json"),"SpriteJSON");H[Y]=A.j(Ae,U);const oe=b.transformRequest(st(ee,O,".png"),"SpriteImage");z[Y]=Re.getImage(oe,U)}return yield Promise.all([...Object.values(H),...Object.values(z)]),function(Y,ee){return A._(this,void 0,void 0,function*(){const Ae={};for(const oe in Y){Ae[oe]={};const ce=X.getImageCanvasContext((yield ee[oe]).data),fe=(yield Y[oe]).data;for(const me in fe){const{width:_e,height:we,x:Ue,y:Ee,sdf:Ge,pixelRatio:je,stretchX:rt,stretchY:it,content:et,textFitWidth:Et,textFitHeight:Bt}=fe[me];Ae[oe][me]={data:null,pixelRatio:je,sdf:Ge,stretchX:rt,stretchY:it,content:et,textFitWidth:Et,textFitHeight:Bt,spriteData:{width:_e,height:we,x:Ue,y:Ee,context:ce}}}}return Ae})}(H,z)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const b in _){this._spritesImagesIds[b]=[];const T=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(U=>!(U in _)):[];for(const U of T)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(const U in _[b]){const Q=b==="default"?U:`${b}:${U}`;this._spritesImagesIds[b].push(Q),Q in this.imageManager.images?this.imageManager.updateImage(Q,_[b][U],!1):this.imageManager.addImage(Q,_[b][U]),n&&(this._changedImages[Q]=!0)}}}).catch(_=>{this._spriteRequest=null,f=_,this.fire(new A.k(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"})),c&&c(f)})}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const c=e.sourceLayer;if(!c)return;const f=n.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(c)===-1)&&this.fire(new A.k(new Error(`Source layer "${c}" does not exist on source "${f.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,n=!1){const c=this._serializedAllLayers();if(!e||e.length===0)return Object.values(n?A.bz(c):c);const f=[];for(const _ of e)if(c[_]){const b=n?A.bz(c[_]):c[_];f.push(b)}return f}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const n=Object.keys(this._layers);for(const c of n){const f=this._layers[c];f.type!=="custom"&&(e[c]=f.serialize())}return e}hasTransitions(){var e,n,c;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((n=this.sky)===null||n===void 0)&&n.hasTransition()||!((c=this.projection)===null||c===void 0)&&c.hasTransition())return!0;for(const f in this.sourceCaches)if(this.sourceCaches[f].hasTransition())return!0;for(const f in this._layers)if(this._layers[f].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(n){const f=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(f.length||_.length)&&this._updateWorkerLayers(f,_);for(const b in this._updatedSources){const T=this._updatedSources[b];if(T==="reload")this._reloadSource(b);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const b in this._updatedPaintProps)this._layers[b].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const c={};for(const f in this.sourceCaches){const _=this.sourceCaches[f];c[f]=_.used,_.used=!1}for(const f of this._order){const _=this._layers[f];_.recalculate(e,this._availableImages),!_.isHidden(e.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const f in c){const _=this.sourceCaches[f];!!c[f]!=!!_.used&&_.fire(new A.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,n&&this.fire(new A.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,n){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:n})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,n={}){var c;this._checkLoaded();const f=this.serialize();if(e=n.transformStyle?n.transformStyle(f,e):e,((c=n.validate)===null||c===void 0||c)&&ks(this,A.y(e)))return!1;(e=A.bz(e)).layers=A.bx(e.layers);const _=A.bA(f,e),b=this._getOperationsToPerform(_);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(const T of b.operations)T();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const n=[],c=[];for(const f of e)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":n.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":n.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":n.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":n.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":n.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":n.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":n.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":n.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":n.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":n.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":n.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":n.push(()=>this.setSprite.apply(this,f.args));break;case"setTerrain":n.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setSky":n.push(()=>this.setSky.apply(this,f.args));break;case"setProjection":this.setProjection.apply(this,f.args);break;case"setTransition":n.push(()=>{});break;default:c.push(f.command)}return{operations:n,unimplemented:c}}addImage(e,n){if(this.getImage(e))return this.fire(new A.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(e,n){this.imageManager.updateImage(e,n)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new A.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,c={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(A.y.source,`sources.${e}`,n,null,c))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const f=this.sourceCaches[e]=new J(e,n,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:e})),f.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===e)return this.fire(new A.k(new Error(`Source "${e}" cannot be removed while layer "${c}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new A.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,n){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const c=this.sourceCaches[e].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(n),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,n,c={}){this._checkLoaded();const f=e.id;if(this.getLayer(f))return void this.fire(new A.k(new Error(`Layer "${f}" already exists on this map.`)));let _;if(e.type==="custom"){if(ks(this,A.bB(e)))return;_=A.by(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(f,e.source),e=A.bz(e),e=A.e(e,{source:f})),this._validate(A.y.layer,`layers.${f}`,e,{arrayIndex:-1},c))return;_=A.by(e),this._validateLayer(_),_.setEventedParent(this,{layer:{id:f}})}const b=n?this._order.indexOf(n):this._order.length;if(n&&b===-1)this.fire(new A.k(new Error(`Cannot add layer "${f}" before non-existing layer "${n}".`)));else{if(this._order.splice(b,0,f),this._layerOrderChanged=!0,this._layers[f]=_,this._removedLayers[f]&&_.source&&_.type!=="custom"){const T=this._removedLayers[f];delete this._removedLayers[f],T.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new A.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const c=this._order.indexOf(e);this._order.splice(c,1);const f=n?this._order.indexOf(n):this._order.length;n&&f===-1?this.fire(new A.k(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(f,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new A.k(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const c=this._order.indexOf(e);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,n,c){this._checkLoaded();const f=this.getLayer(e);f?f.minzoom===n&&f.maxzoom===c||(n!=null&&(f.minzoom=n),c!=null&&(f.maxzoom=c),this._updateLayer(f)):this.fire(new A.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n,c={}){this._checkLoaded();const f=this.getLayer(e);if(f){if(!A.bC(f.filter,n))return n==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(A.y.filter,`layers.${f.id}.filter`,n,null,c)||(f.filter=A.bz(n),this._updateLayer(f)))}else this.fire(new A.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return A.bz(this.getLayer(e).filter)}setLayoutProperty(e,n,c,f={}){this._checkLoaded();const _=this.getLayer(e);_?A.bC(_.getLayoutProperty(n),c)||(_.setLayoutProperty(n,c,f),this._updateLayer(_)):this.fire(new A.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const c=this.getLayer(e);if(c)return c.getLayoutProperty(n);this.fire(new A.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,c,f={}){this._checkLoaded();const _=this.getLayer(e);_?A.bC(_.getPaintProperty(n),c)||(_.setPaintProperty(n,c,f)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new A.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,n){return this.getLayer(e).getPaintProperty(n)}setFeatureState(e,n){this._checkLoaded();const c=e.source,f=e.sourceLayer,_=this.sourceCaches[c];if(_===void 0)return void this.fire(new A.k(new Error(`The source '${c}' does not exist in the map's style.`)));const b=_.getSource().type;b==="geojson"&&f?this.fire(new A.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||f?(e.id===void 0&&this.fire(new A.k(new Error("The feature id parameter must be provided."))),_.setFeatureState(f,e.id,n)):this.fire(new A.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const c=e.source,f=this.sourceCaches[c];if(f===void 0)return void this.fire(new A.k(new Error(`The source '${c}' does not exist in the map's style.`)));const _=f.getSource().type,b=_==="vector"?e.sourceLayer:void 0;_!=="vector"||b?n&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new A.k(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(b,e.id,n):this.fire(new A.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,c=e.sourceLayer,f=this.sourceCaches[n];if(f!==void 0)return f.getSource().type!=="vector"||c?(e.id===void 0&&this.fire(new A.k(new Error("The feature id parameter must be provided."))),f.getFeatureState(c,e.id)):void this.fire(new A.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new A.k(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return A.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=A.bD(this.sourceCaches,_=>_.serialize()),n=this._serializeByIds(this._order,!0),c=this.map.getTerrain()||void 0,f=this.stylesheet;return A.bE({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,projection:f.projection,sources:e,layers:n,terrain:c},_=>_!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const n=b=>this._layers[b].type==="fill-extrusion",c={},f=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(n(T)){c[T]=b;for(const U of e){const Q=U[T];if(Q)for(const O of Q)f.push(O)}}}f.sort((b,T)=>T.intersectionZ-b.intersectionZ);const _=[];for(let b=this._order.length-1;b>=0;b--){const T=this._order[b];if(n(T))for(let U=f.length-1;U>=0;U--){const Q=f[U].feature;if(c[Q.layer.id]<b)break;_.push(Q),f.pop()}else for(const U of e){const Q=U[T];if(Q)for(const O of Q)_.push(O.feature)}}return _}queryRenderedFeatures(e,n,c){n&&n.filter&&this._validate(A.y.filter,"queryRenderedFeatures.filter",n.filter,null,n);const f={};if(n&&n.layers){if(!(Array.isArray(n.layers)||n.layers instanceof Set))return this.fire(new A.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Q of n.layers){const O=this._layers[Q];if(!O)return this.fire(new A.k(new Error(`The layer '${Q}' does not exist in the map's style and cannot be queried for features.`))),[];f[O.source]=!0}}const _=[];n.availableImages=this._availableImages;const b=this._serializedAllLayers(),T=n.layers instanceof Set?n.layers:Array.isArray(n.layers)?new Set(n.layers):null,U=Object.assign(Object.assign({},n),{layers:T});for(const Q in this.sourceCaches)n.layers&&!f[Q]||_.push(nn(this.sourceCaches[Q],this._layers,b,e,U,c,this.map.terrain?(O,H,z)=>this.map.terrain.getElevation(O,H,z):void 0));return this.placement&&_.push(function(Q,O,H,z,Y,ee,Ae){const oe={},ce=ee.queryRenderedSymbols(z),fe=[];for(const me of Object.keys(ce).map(Number))fe.push(Ae[me]);fe.sort(Rr);for(const me of fe){const _e=me.featureIndex.lookupSymbolFeatures(ce[me.bucketInstanceId],O,me.bucketIndex,me.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,Q);for(const we in _e){const Ue=oe[we]=oe[we]||[],Ee=_e[we];Ee.sort((Ge,je)=>{const rt=me.featureSortOrder;if(rt){const it=rt.indexOf(Ge.featureIndex);return rt.indexOf(je.featureIndex)-it}return je.featureIndex-Ge.featureIndex});for(const Ge of Ee)Ue.push(Ge)}}return function(me,_e,we){for(const Ue in me)for(const Ee of me[Ue])Ye(Ee,we[_e[Ue].source]);return me}(oe,Q,H)}(this._layers,b,this.sourceCaches,e,U,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(e,n){n&&n.filter&&this._validate(A.y.filter,"querySourceFeatures.filter",n.filter,null,n);const c=this.sourceCaches[e];return c?function(f,_){const b=f.getRenderableIds().map(Q=>f.getTileByID(Q)),T=[],U={};for(let Q=0;Q<b.length;Q++){const O=b[Q],H=O.tileID.canonical.key;U[H]||(U[H]=!0,O.querySourceFeatures(T,_))}return T}(c,n):[]}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const c=this.light.getLight();let f=!1;for(const b in e)if(!A.bC(e[b],c[b])){f=!0;break}if(!f)return;const _={now:X.now(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(_)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,n={}){this._checkLoaded();const c=this.getSky();let f=!1;if(!e&&!c)return;if(e&&!c)f=!0;else if(!e&&c)f=!0;else for(const b in e)if(!A.bC(e[b],c[b])){f=!0;break}if(!f)return;const _={now:X.now(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,n),this.sky.updateTransitions(_)}_setProjectionInternal(e){const n=function(c){if(Array.isArray(c)){const f=new Ao({type:c});return{projection:f,transform:new Qc,cameraHelper:new Yh(f)}}switch(c){case"mercator":return{projection:new Qr,transform:new mn,cameraHelper:new Gn};case"globe":{const f=new Ao({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:f,transform:new Qc,cameraHelper:new Yh(f)}}case"vertical-perspective":return{projection:new Os,transform:new Ic,cameraHelper:new ja};default:return A.w(`Unknown projection name: ${c}. Falling back to mercator projection.`),{projection:new Qr,transform:new mn,cameraHelper:new Gn}}}(e);this.projection=n.projection,this.map.migrateProjection(n.transform,n.cameraHelper);for(const c in this.sourceCaches)this.sourceCaches[c].reload()}_validate(e,n,c,f,_={}){return(!_||_.validate!==!1)&&ks(this,e.call(A.y,A.e({key:n,style:this.serialize(),value:c,styleSpec:A.v},f)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Yr().off(or,this._rtlPluginLoaded);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const c=this.sourceCaches[n];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const n in this.sourceCaches)this.sourceCaches[n].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,n,c,f,_=!1){let b=!1,T=!1;const U={};for(const Q of this._order){const O=this._layers[Q];if(O.type!=="symbol")continue;if(!U[O.source]){const z=this.sourceCaches[O.source];U[O.source]=z.getRenderableIds(!0).map(Y=>z.getTileByID(Y)).sort((Y,ee)=>ee.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(ee.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(O,U[O.source],e.center.lng);b=b||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(X.now(),e.zoom))&&(this.pauseablePlacement=new ua(e,this.map.terrain,this._order,_,n,c,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(X.now()),T=!0),b&&this.pauseablePlacement.placement.setStale()),T||b)for(const Q of this._order){const O=this._layers[Q];O.type==="symbol"&&this.placement.updateLayerOpacities(O,U[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(X.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,n){return A._(this,void 0,void 0,function*(){const c=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const f=this.sourceCaches[n.source];return f&&f.setDependencies(n.tileID.key,n.type,n.icons),c})}getGlyphs(e,n){return A._(this,void 0,void 0,function*(){const c=yield this.glyphManager.getGlyphs(n.stacks),f=this.sourceCaches[n.source];return f&&f.setDependencies(n.tileID.key,n.type,[""]),c})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,n={}){this._checkLoaded(),e&&this._validate(A.y.glyphs,"glyphs",e,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,n,c={},f){this._checkLoaded();const _=[{id:e,url:n}],b=[...Ne(this.stylesheet.sprite),..._];this._validate(A.y.sprite,"sprite",b,null,c)||(this.stylesheet.sprite=b,this._loadSprite(_,!0,f))}removeSprite(e){this._checkLoaded();const n=Ne(this.stylesheet.sprite);if(n.find(c=>c.id===e)){if(this._spritesImagesIds[e])for(const c of this._spritesImagesIds[e])this.imageManager.removeImage(c),this._changedImages[c]=!0;n.splice(n.findIndex(c=>c.id===e),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"}))}else this.fire(new A.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Ne(this.stylesheet.sprite)}setSprite(e,n={},c){this._checkLoaded(),e&&this._validate(A.y.sprite,"sprite",e,null,n)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,c):(this._unloadSprite(),c&&c(null)))}}var ju=A.aD([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Dc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,n,c,f,_,b,T,U,Q){this.context=e;let O=this.boundPaintVertexBuffers.length!==f.length;for(let H=0;!O&&H<f.length;H++)this.boundPaintVertexBuffers[H]!==f[H]&&(O=!0);!this.vao||this.boundProgram!==n||this.boundLayoutVertexBuffer!==c||O||this.boundIndexBuffer!==_||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==U||this.boundDynamicVertexBuffer3!==Q?this.freshBind(n,c,f,_,b,T,U,Q):(e.bindVertexArray.set(this.vao),T&&T.bind(),_&&_.dynamicDraw&&_.bind(),U&&U.bind(),Q&&Q.bind())}freshBind(e,n,c,f,_,b,T,U){const Q=e.numAttributes,O=this.context,H=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=f,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=U,n.enableAttributes(H,e);for(const z of c)z.enableAttributes(H,e);b&&b.enableAttributes(H,e),T&&T.enableAttributes(H,e),U&&U.enableAttributes(H,e),n.bind(),n.setVertexAttribPointers(H,e,_);for(const z of c)z.bind(),z.setVertexAttribPointers(H,e,_);b&&(b.bind(),b.setVertexAttribPointers(H,e,_)),f&&f.bind(),T&&(T.bind(),T.setVertexAttribPointers(H,e,_)),U&&(U.bind(),U.setVertexAttribPointers(H,e,_)),O.currentNumAttributes=Q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ls=(m,e,n,c,f)=>({u_texture:0,u_ele_delta:m,u_fog_matrix:e,u_fog_color:n?n.properties.get("fog-color"):A.b7.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?0:n?n.calculateFogBlendOpacity(c):0,u_horizon_color:n?n.properties.get("horizon-color"):A.b7.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1,u_is_globe_mode:f?1:0}),md={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function kA(m){const e=[];for(let n=0;n<m.length;n++){if(m[n]===null)continue;const c=m[n].split(" ");e.push(c.pop())}return e}class El{constructor(e,n,c,f,_,b,T,U){const Q=e.gl;this.program=Q.createProgram();const O=kA(n.staticAttributes),H=c?c.getBinderAttributes():[],z=O.concat(H),Y=Vn.prelude.staticUniforms?kA(Vn.prelude.staticUniforms):[],ee=T.staticUniforms?kA(T.staticUniforms):[],Ae=n.staticUniforms?kA(n.staticUniforms):[],oe=c?c.getBinderUniforms():[],ce=Y.concat(ee).concat(Ae).concat(oe),fe=[];for(const je of ce)fe.indexOf(je)<0&&fe.push(je);const me=c?c.defines():[];ea(Q)&&me.unshift("#version 300 es"),_&&me.push("#define OVERDRAW_INSPECTOR;"),b&&me.push("#define TERRAIN3D;"),U&&me.push(U);let _e=me.concat(Vn.prelude.fragmentSource,T.fragmentSource,n.fragmentSource).join(`
`),we=me.concat(Vn.prelude.vertexSource,T.vertexSource,n.vertexSource).join(`
`);ea(Q)||(_e=function(je){return je.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(_e),we=function(je){return je.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(we));const Ue=Q.createShader(Q.FRAGMENT_SHADER);if(Q.isContextLost())return void(this.failedToCreate=!0);if(Q.shaderSource(Ue,_e),Q.compileShader(Ue),!Q.getShaderParameter(Ue,Q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Q.getShaderInfoLog(Ue)}`);Q.attachShader(this.program,Ue);const Ee=Q.createShader(Q.VERTEX_SHADER);if(Q.isContextLost())return void(this.failedToCreate=!0);if(Q.shaderSource(Ee,we),Q.compileShader(Ee),!Q.getShaderParameter(Ee,Q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Q.getShaderInfoLog(Ee)}`);Q.attachShader(this.program,Ee),this.attributes={};const Ge={};this.numAttributes=z.length;for(let je=0;je<this.numAttributes;je++)z[je]&&(Q.bindAttribLocation(this.program,je,z[je]),this.attributes[z[je]]=je);if(Q.linkProgram(this.program),!Q.getProgramParameter(this.program,Q.LINK_STATUS))throw new Error(`Program failed to link: ${Q.getProgramInfoLog(this.program)}`);Q.deleteShader(Ee),Q.deleteShader(Ue);for(let je=0;je<fe.length;je++){const rt=fe[je];if(rt&&!Ge[rt]){const it=Q.getUniformLocation(this.program,rt);it&&(Ge[rt]=it)}}this.fixedUniforms=f(e,Ge),this.terrainUniforms=((je,rt)=>({u_depth:new A.bF(je,rt.u_depth),u_terrain:new A.bF(je,rt.u_terrain),u_terrain_dim:new A.b8(je,rt.u_terrain_dim),u_terrain_matrix:new A.bH(je,rt.u_terrain_matrix),u_terrain_unpack:new A.bI(je,rt.u_terrain_unpack),u_terrain_exaggeration:new A.b8(je,rt.u_terrain_exaggeration)}))(e,Ge),this.projectionUniforms=((je,rt)=>({u_projection_matrix:new A.bH(je,rt.u_projection_matrix),u_projection_tile_mercator_coords:new A.bI(je,rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new A.bI(je,rt.u_projection_clipping_plane),u_projection_transition:new A.b8(je,rt.u_projection_transition),u_projection_fallback_matrix:new A.bH(je,rt.u_projection_fallback_matrix)}))(e,Ge),this.binderUniforms=c?c.getUniforms(e,Ge):[]}draw(e,n,c,f,_,b,T,U,Q,O,H,z,Y,ee,Ae,oe,ce,fe,me){const _e=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(c),e.setStencilMode(f),e.setColorMode(_),e.setCullFace(b),U){e.activeTexture.set(_e.TEXTURE2),_e.bindTexture(_e.TEXTURE_2D,U.depthTexture),e.activeTexture.set(_e.TEXTURE3),_e.bindTexture(_e.TEXTURE_2D,U.texture);for(const Ue in this.terrainUniforms)this.terrainUniforms[Ue].set(U[Ue])}if(Q)for(const Ue in Q)this.projectionUniforms[md[Ue]].set(Q[Ue]);if(T)for(const Ue in this.fixedUniforms)this.fixedUniforms[Ue].set(T[Ue]);oe&&oe.setUniforms(e,this.binderUniforms,ee,{zoom:Ae});let we=0;switch(n){case _e.LINES:we=2;break;case _e.TRIANGLES:we=3;break;case _e.LINE_STRIP:we=1}for(const Ue of Y.get()){const Ee=Ue.vaos||(Ue.vaos={});(Ee[O]||(Ee[O]=new Dc)).bind(e,this,H,oe?oe.getPaintVertexBuffers():[],z,Ue.vertexOffset,ce,fe,me),_e.drawElements(n,Ue.primitiveLength*we,_e.UNSIGNED_SHORT,Ue.primitiveOffset*we*2)}}}function HA(m,e,n){const c=1/A.aw(n,1,e.transform.tileZoom),f=Math.pow(2,n.tileID.overscaledZ),_=n.tileSize*Math.pow(2,e.transform.tileZoom)/f,b=_*(n.tileID.canonical.x+n.tileID.wrap*f),T=_*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[c,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[b>>16,T>>16],u_pixel_coord_lower:[65535&b,65535&T]}}const Wh=(m,e,n,c)=>{const f=m.style.light,_=f.properties.get("position"),b=[_.x,_.y,_.z],T=A.bL();f.properties.get("anchor")==="viewport"&&A.bM(T,m.transform.bearingInRadians),A.bN(b,b,T);const U=m.transform.transformLightDirection(b),Q=f.properties.get("color");return{u_lightpos:b,u_lightpos_globe:U,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[Q.r,Q.g,Q.b],u_vertical_gradient:+e,u_opacity:n,u_fill_translate:c}},Lc=(m,e,n,c,f,_,b)=>A.e(Wh(m,e,n,c),HA(_,m,b),{u_height_factor:-Math.pow(2,f.overscaledZ)/b.tileSize/8}),$h=(m,e,n,c)=>A.e(HA(e,m,n),{u_fill_translate:c}),NA=(m,e)=>({u_world:m,u_fill_translate:e}),Vu=(m,e,n,c,f)=>A.e($h(m,e,n,f),{u_world:c}),jA=(m,e,n,c,f)=>{const _=m.transform;let b,T,U=0;if(n.paint.get("circle-pitch-alignment")==="map"){const Q=A.aw(e,1,_.zoom);b=!0,T=[Q,Q],U=Q/(A.Z*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*f}else b=!1,T=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(n.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+b,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:T,u_globe_extrude_scale:U,u_translate:c}},yd=m=>({u_pixel_extrude_scale:[1/m.width,1/m.height]}),Gu=m=>({u_viewport_size:[m.width,m.height]}),Tl=(m,e=1)=>({u_color:m,u_overlay:0,u_overlay_scale:e}),Pc=(m,e,n,c)=>{const f=A.aw(m,1,e)/(A.Z*Math.pow(2,m.tileID.overscaledZ))*2*Math.PI*c;return{u_extrude_scale:A.aw(m,1,e),u_intensity:n,u_globe_extrude_scale:f}},Rc=(m,e,n,c)=>{const f=A.K();A.bO(f,0,m.width,m.height,0,0,1);const _=m.context.gl;return{u_matrix:f,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:n,u_color_ramp:c,u_opacity:e.paint.get("heatmap-opacity")}},Ku=(m,e,n)=>{const c=n.paint.get("hillshade-shadow-color"),f=n.paint.get("hillshade-highlight-color"),_=n.paint.get("hillshade-accent-color");let b=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);return n.paint.get("hillshade-illumination-anchor")==="viewport"&&(b+=m.transform.bearingInRadians),{u_image:0,u_latrange:$o(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),b],u_shadow:c,u_highlight:f,u_accent:_}},Wo=(m,e)=>{const n=e.stride,c=A.K();return A.bO(c,0,A.Z,-8192,0,0,1),A.L(c,c,[0,-8192,0]),{u_matrix:c,u_image:1,u_dimension:[n,n],u_zoom:m.overscaledZ,u_unpack:e.getUnpackVector()}};function $o(m,e){const n=Math.pow(2,e.canonical.z),c=e.canonical.y;return[new A.$(0,c/n).toLngLat().lat,new A.$(0,(c+1)/n).toLngLat().lat]}const Oc=(m,e,n,c)=>{const f=m.transform;return{u_translation:GA(m,e,n),u_ratio:c/A.aw(e,1,f.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Jh=(m,e,n,c,f)=>A.e(Oc(m,e,n,c),{u_image:0,u_image_height:f}),VA=(m,e,n,c,f)=>{const _=m.transform,b=Hs(e,_);return{u_translation:GA(m,e,n),u_texsize:e.imageAtlasTexture.size,u_ratio:c/A.aw(e,1,_.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[b,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},ef=(m,e,n,c,f,_)=>{const b=m.lineAtlas,T=Hs(e,m.transform),U=n.layout.get("line-cap")==="round",Q=b.getDash(f.from,U),O=b.getDash(f.to,U),H=Q.width*_.fromScale,z=O.width*_.toScale;return A.e(Oc(m,e,n,c),{u_patternscale_a:[T/H,-Q.height/2],u_patternscale_b:[T/z,-O.height/2],u_sdfgamma:b.width/(256*Math.min(H,z)*m.pixelRatio)/2,u_image:0,u_tex_y_a:Q.y,u_tex_y_b:O.y,u_mix:_.t})};function Hs(m,e){return 1/A.aw(m,1,e.tileZoom)}function GA(m,e,n){return A.ax(m.transform,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const _d=(m,e,n,c,f)=>{return{u_tl_parent:m,u_scale_parent:e,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*c.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:c.paint.get("raster-brightness-min"),u_brightness_high:c.paint.get("raster-brightness-max"),u_saturation_factor:(b=c.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(_=c.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Sl(c.paint.get("raster-hue-rotate")),u_coords_top:[f[0].x,f[0].y,f[1].x,f[1].y],u_coords_bottom:[f[3].x,f[3].y,f[2].x,f[2].y]};var _,b};function Sl(m){m*=Math.PI/180;const e=Math.sin(m),n=Math.cos(m);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const zc=(m,e,n,c,f,_,b,T,U,Q,O,H,z)=>{const Y=b.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:Y.width/Y.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_label_plane_matrix:T,u_coord_matrix:U,u_is_text:+O,u_pitch_with_map:+c,u_is_along_line:f,u_is_variable_anchor:_,u_texsize:H,u_texture:0,u_translation:Q,u_pitched_scale:z}},kc=(m,e,n,c,f,_,b,T,U,Q,O,H,z,Y)=>{const ee=b.transform;return A.e(zc(m,e,n,c,f,_,b,T,U,Q,O,H,Y),{u_gamma_scale:c?Math.cos(ee.pitch*Math.PI/180)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:1})},Fl=(m,e,n,c,f,_,b,T,U,Q,O,H,z)=>A.e(kc(m,e,n,c,f,_,b,T,U,Q,!0,O,0,z),{u_texsize_icon:H,u_texture_icon:1}),Hc=(m,e)=>({u_opacity:m,u_color:e}),Ul=(m,e,n,c,f)=>A.e(function(_,b,T,U){const Q=T.imageManager.getPattern(_.from.toString()),O=T.imageManager.getPattern(_.to.toString()),{width:H,height:z}=T.imageManager.getPixelSize(),Y=Math.pow(2,U.tileID.overscaledZ),ee=U.tileSize*Math.pow(2,T.transform.tileZoom)/Y,Ae=ee*(U.tileID.canonical.x+U.tileID.wrap*Y),oe=ee*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Q.tl,u_pattern_br_a:Q.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[H,z],u_mix:b.t,u_pattern_size_a:Q.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/A.aw(U,1,T.transform.tileZoom),u_pixel_coord_upper:[Ae>>16,oe>>16],u_pixel_coord_lower:[65535&Ae,65535&oe]}}(n,f,e,c),{u_opacity:m}),Va=(m,e)=>{},Nc={fillExtrusion:(m,e)=>({u_lightpos:new A.bJ(m,e.u_lightpos),u_lightpos_globe:new A.bJ(m,e.u_lightpos_globe),u_lightintensity:new A.b8(m,e.u_lightintensity),u_lightcolor:new A.bJ(m,e.u_lightcolor),u_vertical_gradient:new A.b8(m,e.u_vertical_gradient),u_opacity:new A.b8(m,e.u_opacity),u_fill_translate:new A.bK(m,e.u_fill_translate)}),fillExtrusionPattern:(m,e)=>({u_lightpos:new A.bJ(m,e.u_lightpos),u_lightpos_globe:new A.bJ(m,e.u_lightpos_globe),u_lightintensity:new A.b8(m,e.u_lightintensity),u_lightcolor:new A.bJ(m,e.u_lightcolor),u_vertical_gradient:new A.b8(m,e.u_vertical_gradient),u_height_factor:new A.b8(m,e.u_height_factor),u_opacity:new A.b8(m,e.u_opacity),u_fill_translate:new A.bK(m,e.u_fill_translate),u_image:new A.bF(m,e.u_image),u_texsize:new A.bK(m,e.u_texsize),u_pixel_coord_upper:new A.bK(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.bK(m,e.u_pixel_coord_lower),u_scale:new A.bJ(m,e.u_scale),u_fade:new A.b8(m,e.u_fade)}),fill:(m,e)=>({u_fill_translate:new A.bK(m,e.u_fill_translate)}),fillPattern:(m,e)=>({u_image:new A.bF(m,e.u_image),u_texsize:new A.bK(m,e.u_texsize),u_pixel_coord_upper:new A.bK(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.bK(m,e.u_pixel_coord_lower),u_scale:new A.bJ(m,e.u_scale),u_fade:new A.b8(m,e.u_fade),u_fill_translate:new A.bK(m,e.u_fill_translate)}),fillOutline:(m,e)=>({u_world:new A.bK(m,e.u_world),u_fill_translate:new A.bK(m,e.u_fill_translate)}),fillOutlinePattern:(m,e)=>({u_world:new A.bK(m,e.u_world),u_image:new A.bF(m,e.u_image),u_texsize:new A.bK(m,e.u_texsize),u_pixel_coord_upper:new A.bK(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.bK(m,e.u_pixel_coord_lower),u_scale:new A.bJ(m,e.u_scale),u_fade:new A.b8(m,e.u_fade),u_fill_translate:new A.bK(m,e.u_fill_translate)}),circle:(m,e)=>({u_camera_to_center_distance:new A.b8(m,e.u_camera_to_center_distance),u_scale_with_map:new A.bF(m,e.u_scale_with_map),u_pitch_with_map:new A.bF(m,e.u_pitch_with_map),u_extrude_scale:new A.bK(m,e.u_extrude_scale),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_globe_extrude_scale:new A.b8(m,e.u_globe_extrude_scale),u_translate:new A.bK(m,e.u_translate)}),collisionBox:(m,e)=>({u_pixel_extrude_scale:new A.bK(m,e.u_pixel_extrude_scale)}),collisionCircle:(m,e)=>({u_viewport_size:new A.bK(m,e.u_viewport_size)}),debug:(m,e)=>({u_color:new A.bG(m,e.u_color),u_overlay:new A.bF(m,e.u_overlay),u_overlay_scale:new A.b8(m,e.u_overlay_scale)}),depth:Va,clippingMask:Va,heatmap:(m,e)=>({u_extrude_scale:new A.b8(m,e.u_extrude_scale),u_intensity:new A.b8(m,e.u_intensity),u_globe_extrude_scale:new A.b8(m,e.u_globe_extrude_scale)}),heatmapTexture:(m,e)=>({u_matrix:new A.bH(m,e.u_matrix),u_world:new A.bK(m,e.u_world),u_image:new A.bF(m,e.u_image),u_color_ramp:new A.bF(m,e.u_color_ramp),u_opacity:new A.b8(m,e.u_opacity)}),hillshade:(m,e)=>({u_image:new A.bF(m,e.u_image),u_latrange:new A.bK(m,e.u_latrange),u_light:new A.bK(m,e.u_light),u_shadow:new A.bG(m,e.u_shadow),u_highlight:new A.bG(m,e.u_highlight),u_accent:new A.bG(m,e.u_accent)}),hillshadePrepare:(m,e)=>({u_matrix:new A.bH(m,e.u_matrix),u_image:new A.bF(m,e.u_image),u_dimension:new A.bK(m,e.u_dimension),u_zoom:new A.b8(m,e.u_zoom),u_unpack:new A.bI(m,e.u_unpack)}),line:(m,e)=>({u_translation:new A.bK(m,e.u_translation),u_ratio:new A.b8(m,e.u_ratio),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_units_to_pixels:new A.bK(m,e.u_units_to_pixels)}),lineGradient:(m,e)=>({u_translation:new A.bK(m,e.u_translation),u_ratio:new A.b8(m,e.u_ratio),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_units_to_pixels:new A.bK(m,e.u_units_to_pixels),u_image:new A.bF(m,e.u_image),u_image_height:new A.b8(m,e.u_image_height)}),linePattern:(m,e)=>({u_translation:new A.bK(m,e.u_translation),u_texsize:new A.bK(m,e.u_texsize),u_ratio:new A.b8(m,e.u_ratio),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_image:new A.bF(m,e.u_image),u_units_to_pixels:new A.bK(m,e.u_units_to_pixels),u_scale:new A.bJ(m,e.u_scale),u_fade:new A.b8(m,e.u_fade)}),lineSDF:(m,e)=>({u_translation:new A.bK(m,e.u_translation),u_ratio:new A.b8(m,e.u_ratio),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_units_to_pixels:new A.bK(m,e.u_units_to_pixels),u_patternscale_a:new A.bK(m,e.u_patternscale_a),u_patternscale_b:new A.bK(m,e.u_patternscale_b),u_sdfgamma:new A.b8(m,e.u_sdfgamma),u_image:new A.bF(m,e.u_image),u_tex_y_a:new A.b8(m,e.u_tex_y_a),u_tex_y_b:new A.b8(m,e.u_tex_y_b),u_mix:new A.b8(m,e.u_mix)}),raster:(m,e)=>({u_tl_parent:new A.bK(m,e.u_tl_parent),u_scale_parent:new A.b8(m,e.u_scale_parent),u_buffer_scale:new A.b8(m,e.u_buffer_scale),u_fade_t:new A.b8(m,e.u_fade_t),u_opacity:new A.b8(m,e.u_opacity),u_image0:new A.bF(m,e.u_image0),u_image1:new A.bF(m,e.u_image1),u_brightness_low:new A.b8(m,e.u_brightness_low),u_brightness_high:new A.b8(m,e.u_brightness_high),u_saturation_factor:new A.b8(m,e.u_saturation_factor),u_contrast_factor:new A.b8(m,e.u_contrast_factor),u_spin_weights:new A.bJ(m,e.u_spin_weights),u_coords_top:new A.bI(m,e.u_coords_top),u_coords_bottom:new A.bI(m,e.u_coords_bottom)}),symbolIcon:(m,e)=>({u_is_size_zoom_constant:new A.bF(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new A.bF(m,e.u_is_size_feature_constant),u_size_t:new A.b8(m,e.u_size_t),u_size:new A.b8(m,e.u_size),u_camera_to_center_distance:new A.b8(m,e.u_camera_to_center_distance),u_pitch:new A.b8(m,e.u_pitch),u_rotate_symbol:new A.bF(m,e.u_rotate_symbol),u_aspect_ratio:new A.b8(m,e.u_aspect_ratio),u_fade_change:new A.b8(m,e.u_fade_change),u_label_plane_matrix:new A.bH(m,e.u_label_plane_matrix),u_coord_matrix:new A.bH(m,e.u_coord_matrix),u_is_text:new A.bF(m,e.u_is_text),u_pitch_with_map:new A.bF(m,e.u_pitch_with_map),u_is_along_line:new A.bF(m,e.u_is_along_line),u_is_variable_anchor:new A.bF(m,e.u_is_variable_anchor),u_texsize:new A.bK(m,e.u_texsize),u_texture:new A.bF(m,e.u_texture),u_translation:new A.bK(m,e.u_translation),u_pitched_scale:new A.b8(m,e.u_pitched_scale)}),symbolSDF:(m,e)=>({u_is_size_zoom_constant:new A.bF(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new A.bF(m,e.u_is_size_feature_constant),u_size_t:new A.b8(m,e.u_size_t),u_size:new A.b8(m,e.u_size),u_camera_to_center_distance:new A.b8(m,e.u_camera_to_center_distance),u_pitch:new A.b8(m,e.u_pitch),u_rotate_symbol:new A.bF(m,e.u_rotate_symbol),u_aspect_ratio:new A.b8(m,e.u_aspect_ratio),u_fade_change:new A.b8(m,e.u_fade_change),u_label_plane_matrix:new A.bH(m,e.u_label_plane_matrix),u_coord_matrix:new A.bH(m,e.u_coord_matrix),u_is_text:new A.bF(m,e.u_is_text),u_pitch_with_map:new A.bF(m,e.u_pitch_with_map),u_is_along_line:new A.bF(m,e.u_is_along_line),u_is_variable_anchor:new A.bF(m,e.u_is_variable_anchor),u_texsize:new A.bK(m,e.u_texsize),u_texture:new A.bF(m,e.u_texture),u_gamma_scale:new A.b8(m,e.u_gamma_scale),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_is_halo:new A.bF(m,e.u_is_halo),u_translation:new A.bK(m,e.u_translation),u_pitched_scale:new A.b8(m,e.u_pitched_scale)}),symbolTextAndIcon:(m,e)=>({u_is_size_zoom_constant:new A.bF(m,e.u_is_size_zoom_constant),u_is_size_feature_constant:new A.bF(m,e.u_is_size_feature_constant),u_size_t:new A.b8(m,e.u_size_t),u_size:new A.b8(m,e.u_size),u_camera_to_center_distance:new A.b8(m,e.u_camera_to_center_distance),u_pitch:new A.b8(m,e.u_pitch),u_rotate_symbol:new A.bF(m,e.u_rotate_symbol),u_aspect_ratio:new A.b8(m,e.u_aspect_ratio),u_fade_change:new A.b8(m,e.u_fade_change),u_label_plane_matrix:new A.bH(m,e.u_label_plane_matrix),u_coord_matrix:new A.bH(m,e.u_coord_matrix),u_is_text:new A.bF(m,e.u_is_text),u_pitch_with_map:new A.bF(m,e.u_pitch_with_map),u_is_along_line:new A.bF(m,e.u_is_along_line),u_is_variable_anchor:new A.bF(m,e.u_is_variable_anchor),u_texsize:new A.bK(m,e.u_texsize),u_texsize_icon:new A.bK(m,e.u_texsize_icon),u_texture:new A.bF(m,e.u_texture),u_texture_icon:new A.bF(m,e.u_texture_icon),u_gamma_scale:new A.b8(m,e.u_gamma_scale),u_device_pixel_ratio:new A.b8(m,e.u_device_pixel_ratio),u_is_halo:new A.bF(m,e.u_is_halo),u_translation:new A.bK(m,e.u_translation),u_pitched_scale:new A.b8(m,e.u_pitched_scale)}),background:(m,e)=>({u_opacity:new A.b8(m,e.u_opacity),u_color:new A.bG(m,e.u_color)}),backgroundPattern:(m,e)=>({u_opacity:new A.b8(m,e.u_opacity),u_image:new A.bF(m,e.u_image),u_pattern_tl_a:new A.bK(m,e.u_pattern_tl_a),u_pattern_br_a:new A.bK(m,e.u_pattern_br_a),u_pattern_tl_b:new A.bK(m,e.u_pattern_tl_b),u_pattern_br_b:new A.bK(m,e.u_pattern_br_b),u_texsize:new A.bK(m,e.u_texsize),u_mix:new A.b8(m,e.u_mix),u_pattern_size_a:new A.bK(m,e.u_pattern_size_a),u_pattern_size_b:new A.bK(m,e.u_pattern_size_b),u_scale_a:new A.b8(m,e.u_scale_a),u_scale_b:new A.b8(m,e.u_scale_b),u_pixel_coord_upper:new A.bK(m,e.u_pixel_coord_upper),u_pixel_coord_lower:new A.bK(m,e.u_pixel_coord_lower),u_tile_units_to_pixels:new A.b8(m,e.u_tile_units_to_pixels)}),terrain:(m,e)=>({u_texture:new A.bF(m,e.u_texture),u_ele_delta:new A.b8(m,e.u_ele_delta),u_fog_matrix:new A.bH(m,e.u_fog_matrix),u_fog_color:new A.bG(m,e.u_fog_color),u_fog_ground_blend:new A.b8(m,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new A.b8(m,e.u_fog_ground_blend_opacity),u_horizon_color:new A.bG(m,e.u_horizon_color),u_horizon_fog_blend:new A.b8(m,e.u_horizon_fog_blend),u_is_globe_mode:new A.b8(m,e.u_is_globe_mode)}),terrainDepth:(m,e)=>({u_ele_delta:new A.b8(m,e.u_ele_delta)}),terrainCoords:(m,e)=>({u_texture:new A.bF(m,e.u_texture),u_terrain_coords_id:new A.b8(m,e.u_terrain_coords_id),u_ele_delta:new A.b8(m,e.u_ele_delta)}),projectionErrorMeasurement:(m,e)=>({u_input:new A.b8(m,e.u_input),u_output_expected:new A.b8(m,e.u_output_expected)}),atmosphere:(m,e)=>({u_sun_pos:new A.bJ(m,e.u_sun_pos),u_atmosphere_blend:new A.b8(m,e.u_atmosphere_blend),u_globe_position:new A.bJ(m,e.u_globe_position),u_globe_radius:new A.b8(m,e.u_globe_radius),u_inv_proj_matrix:new A.bH(m,e.u_inv_proj_matrix)}),sky:(m,e)=>({u_sky_color:new A.bG(m,e.u_sky_color),u_horizon_color:new A.bG(m,e.u_horizon_color),u_horizon:new A.bK(m,e.u_horizon),u_horizon_normal:new A.bK(m,e.u_horizon_normal),u_sky_horizon_blend:new A.b8(m,e.u_sky_horizon_blend),u_sky_blend:new A.b8(m,e.u_sky_blend)})};class Zu{constructor(e,n,c){this.context=e;const f=e.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const n=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class tf{constructor(e,n,c,f){this.length=n.length,this.attributes=c,this.itemSize=n.bytesPerElement,this.dynamicDraw=f,this.context=e;const _=e.gl;this.buffer=_.createBuffer(),e.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const n=this.context.gl;this.bind(),n.bufferSubData(n.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,n){for(let c=0;c<this.attributes.length;c++){const f=n.attributes[this.attributes[c].name];f!==void 0&&e.enableVertexAttribArray(f)}}setVertexAttribPointers(e,n,c){for(let f=0;f<this.attributes.length;f++){const _=this.attributes[f],b=n.attributes[_.name];b!==void 0&&e.vertexAttribPointer(b,_.components,e[qu[_.type]],!1,this.itemSize,_.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class kr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jo extends kr{getDefault(){return A.b7.transparent}set(e){const n=this.current;(e.r!==n.r||e.g!==n.g||e.b!==n.b||e.a!==n.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Hi extends kr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Ml extends kr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class rf extends kr{getDefault(){return[!0,!0,!0,!0]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class nf extends kr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class af extends kr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Xu extends kr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const n=this.current;(e.func!==n.func||e.ref!==n.ref||e.mask!==n.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Yu extends kr{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class sf extends kr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this.current=e,this.dirty=!1}}class Ns extends kr{getDefault(){return[0,1]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class KA extends kr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this.current=e,this.dirty=!1}}class lo extends kr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Il extends kr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.BLEND):n.disable(n.BLEND),this.current=e,this.dirty=!1}}class co extends kr{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ca extends kr{getDefault(){return A.b7.transparent}set(e){const n=this.current;(e.r!==n.r||e.g!==n.g||e.b!==n.b||e.a!==n.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class xi extends kr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class jc extends kr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;e?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this.current=e,this.dirty=!1}}class Wu extends kr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class js extends kr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class uo extends kr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Ql extends kr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Dl extends kr{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const n=this.current;(e[0]!==n[0]||e[1]!==n[1]||e[2]!==n[2]||e[3]!==n[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Ll extends kr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindFramebuffer(n.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Vc extends kr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindRenderbuffer(n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class of extends kr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindTexture(n.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class eA extends kr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class tA extends kr{getDefault(){return null}set(e){const n=this.gl;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Gc extends kr{getDefault(){return null}set(e){var n;if(e===this.current&&!this.dirty)return;const c=this.gl;ea(c)?c.bindVertexArray(e):(n=c.getExtension("OES_vertex_array_object"))===null||n===void 0||n.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class da extends kr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Pr extends kr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Ni extends kr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const n=this.gl;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class ta extends kr{constructor(e,n){super(e),this.context=e,this.parent=n}getDefault(){return null}}class rA extends ta{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class nA extends ta{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Kc extends ta{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const n=this.gl;n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,e),this.current=e,this.dirty=!1}}const Pl="Framebuffer is not complete";class Zc{constructor(e,n,c,f,_){this.context=e,this.width=n,this.height=c;const b=e.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new rA(e,T),f)this.depthAttachment=_?new Kc(e,T):new nA(e,T);else if(_)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error(Pl)}destroy(){const e=this.context.gl,n=this.colorAttachment.get();if(n&&e.deleteTexture(n),this.depthAttachment){const c=this.depthAttachment.get();c&&e.deleteRenderbuffer(c)}e.deleteFramebuffer(this.framebuffer)}}class ZA{constructor(e){var n,c;if(this.gl=e,this.clearColor=new Jo(this),this.clearDepth=new Hi(this),this.clearStencil=new Ml(this),this.colorMask=new rf(this),this.depthMask=new nf(this),this.stencilMask=new af(this),this.stencilFunc=new Xu(this),this.stencilOp=new Yu(this),this.stencilTest=new sf(this),this.depthRange=new Ns(this),this.depthTest=new KA(this),this.depthFunc=new lo(this),this.blend=new Il(this),this.blendFunc=new co(this),this.blendColor=new Ca(this),this.blendEquation=new xi(this),this.cullFace=new jc(this),this.cullFaceSide=new Wu(this),this.frontFace=new js(this),this.program=new uo(this),this.activeTexture=new Ql(this),this.viewport=new Dl(this),this.bindFramebuffer=new Ll(this),this.bindRenderbuffer=new Vc(this),this.bindTexture=new of(this),this.bindVertexBuffer=new eA(this),this.bindElementBuffer=new tA(this),this.bindVertexArray=new Gc(this),this.pixelStoreUnpack=new da(this),this.pixelStoreUnpackPremultiplyAlpha=new Pr(this),this.pixelStoreUnpackFlipY=new Ni(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),ea(e)){this.HALF_FLOAT=e.HALF_FLOAT;const f=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(n=e.RGBA16F)!==null&&n!==void 0?n:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(c=e.RGB16F)!==null&&c!==void 0?c:f==null?void 0:f.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const f=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,n){return new Zu(this,e,n)}createVertexBuffer(e,n,c){return new tf(this,e,n,c)}createRenderbuffer(e,n,c){const f=this.gl,_=f.createRenderbuffer();return this.bindRenderbuffer.set(_),f.renderbufferStorage(f.RENDERBUFFER,e,n,c),this.bindRenderbuffer.set(null),_}createFramebuffer(e,n,c,f){return new Zc(this,e,n,c,f)}clear({color:e,depth:n,stencil:c}){const f=this.gl;let _=0;e&&(_|=f.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),n!==void 0&&(_|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),c!==void 0&&(_|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),f.clear(_)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){A.bC(e.blendFunction,an.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return ea(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var n;return ea(this.gl)?this.gl.deleteVertexArray(e):(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let iA;function ho(m,e,n,c,f){const _=m.context,b=m.transform,T=_.gl,U=m.useProgram("collisionBox"),Q=[];let O=0,H=0;for(let ce=0;ce<c.length;ce++){const fe=c[ce],me=e.getTile(fe).getBucket(n);if(!me)continue;const _e=f?me.textCollisionBox:me.iconCollisionBox,we=me.collisionCircleArray;we.length>0&&(Q.push({circleArray:we,circleOffset:H,coord:fe}),O+=we.length/4,H=O),_e&&U.draw(_,T.LINES,mr.disabled,Mr.disabled,m.colorModeForRenderPass(),Cr.disabled,yd(m.transform),m.style.map.terrain&&m.style.map.terrain.getTerrainData(fe),b.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),n.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,m.transform.zoom,null,null,_e.collisionVertexBuffer)}if(!f||!Q.length)return;const z=m.useProgram("collisionCircle"),Y=new A.bP;Y.resize(4*O),Y._trim();let ee=0;for(const ce of Q)for(let fe=0;fe<ce.circleArray.length/4;fe++){const me=4*fe,_e=ce.circleArray[me+0],we=ce.circleArray[me+1],Ue=ce.circleArray[me+2],Ee=ce.circleArray[me+3];Y.emplace(ee++,_e,we,Ue,Ee,0),Y.emplace(ee++,_e,we,Ue,Ee,1),Y.emplace(ee++,_e,we,Ue,Ee,2),Y.emplace(ee++,_e,we,Ue,Ee,3)}(!iA||iA.length<2*O)&&(iA=function(ce){const fe=2*ce,me=new A.bR;me.resize(fe),me._trim();for(let _e=0;_e<fe;_e++){const we=6*_e;me.uint16[we+0]=4*_e+0,me.uint16[we+1]=4*_e+1,me.uint16[we+2]=4*_e+2,me.uint16[we+3]=4*_e+2,me.uint16[we+4]=4*_e+3,me.uint16[we+5]=4*_e+0}return me}(O));const Ae=_.createIndexBuffer(iA,!0),oe=_.createVertexBuffer(Y,A.bQ.members,!0);for(const ce of Q){const fe=Gu(m.transform);z.draw(_,T.TRIANGLES,mr.disabled,Mr.disabled,m.colorModeForRenderPass(),Cr.disabled,fe,m.style.map.terrain&&m.style.map.terrain.getTerrainData(ce.coord),null,n.id,oe,Ae,A.aG.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,m.transform.zoom,null,null,null)}oe.destroy(),Ae.destroy()}const Vs=A.at(new Float32Array(16));function $u(m,e,n,c,f,_){const{horizontalAlign:b,verticalAlign:T}=A.aB(m);return new A.P((-(b-.5)*e/f+c[0])*_,(-(T-.5)*n/f+c[1])*_)}function ji(m,e,n,c,f,_){const b=e.tileAnchorPoint.add(new A.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let T=c.mult(_);n||(T=T.rotate(-f));const U=b.add(T);return We(U.x,U.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(n){const T=Ur(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(m),U=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return m.add(c.rotate(U))}return m.add(c)}function qc(m,e,n,c,f,_,b,T,U,Q,O,H){const z=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,ee=m.icon.dynamicLayoutVertexArray,Ae={};Y.clear();for(let oe=0;oe<z.length;oe++){const ce=z.get(oe),fe=ce.hidden||!ce.crossTileID||m.allowVerticalPlacement&&!ce.placedOrientation?null:c[ce.crossTileID];if(fe){const me=new A.P(ce.anchorX,ce.anchorY),_e={getElevation:H,width:f.width,height:f.height,pitchedLabelPlaneMatrix:_,pitchWithMap:n,transform:f,tileAnchorPoint:me,translation:Q,unwrappedTileID:O},we=n?zt(me.x,me.y,_e):Ur(me.x,me.y,_e),Ue=Oe(f.cameraToCenterDistance,we.signedDistanceFromCamera);let Ee=A.ai(m.textSizeData,T,ce)*Ue/A.av;n&&(Ee*=m.tilePixelRatio/b);const{width:Ge,height:je,anchor:rt,textOffset:it,textBoxScale:et}=fe,Et=$u(rt,Ge,je,it,et,Ee),Bt=f.getPitchedTextCorrection(me.x+Q[0],me.y+Q[1],O),lt=ji(we.point,_e,e,Et,-f.bearingInRadians,Bt),kt=m.allowVerticalPlacement&&ce.placedOrientation===A.ah.vertical?Math.PI/2:0;for(let hr=0;hr<ce.numGlyphs;hr++)A.ao(Y,lt,kt);U&&ce.associatedIconIndex>=0&&(Ae[ce.associatedIconIndex]={shiftedAnchor:lt,angle:kt})}else $t(ce.numGlyphs,Y)}if(U){ee.clear();const oe=m.icon.placedSymbolArray;for(let ce=0;ce<oe.length;ce++){const fe=oe.get(ce);if(fe.hidden)$t(fe.numGlyphs,ee);else{const me=Ae[ce];if(me)for(let _e=0;_e<fe.numGlyphs;_e++)A.ao(ee,me.shiftedAnchor,me.angle);else $t(fe.numGlyphs,ee)}}m.icon.dynamicLayoutVertexBuffer.updateData(ee)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function Ea(m,e,n){return n.iconsInText&&e?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function qA(m,e,n,c,f,_,b,T,U,Q,O,H,z){const Y=m.context,ee=Y.gl,Ae=m.transform,oe=T==="map",ce=U==="map",fe=T!=="viewport"&&n.layout.get("symbol-placement")!=="point",me=oe&&!ce&&!fe,_e=!n.layout.get("symbol-sort-key").isConstant();let we=!1;const Ue=m.getDepthModeForSublayer(0,mr.ReadOnly),Ee=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ge=[],je=Ae.getCircleRadiusCorrection();for(const rt of c){const it=e.getTile(rt),et=it.getBucket(n);if(!et)continue;const Et=f?et.text:et.icon;if(!Et||!Et.segments.get().length||!Et.hasVisibleVertices)continue;const Bt=Et.programConfigurations.get(n.id),lt=f||et.sdfIcons,kt=f?et.textSizeData:et.iconSizeData,hr=ce||Ae.pitch!==0,Dr=m.useProgram(Ea(lt,f,et),Bt),_r=A.ag(kt,Ae.zoom),Wr=m.style.map.terrain&&m.style.map.terrain.getTerrainData(rt);let on,hn,Zr,$r,zn=[0,0],ii=null;if(f)hn=it.glyphAtlasTexture,Zr=ee.LINEAR,on=it.glyphAtlasTexture.size,et.iconsInText&&(zn=it.imageAtlasTexture.size,ii=it.imageAtlasTexture,$r=hr||m.options.rotating||m.options.zooming||kt.kind==="composite"||kt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Qn=n.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;hn=it.imageAtlasTexture,Zr=lt||m.options.rotating||m.options.zooming||Qn||hr?ee.LINEAR:ee.NEAREST,on=it.imageAtlasTexture.size}const ui=A.aw(it,1,m.transform.zoom),Ri=ze(oe,m.transform,ui),ys=A.K();A.aj(ys,Ri);const Xa=Qe(ce,oe,m.transform,ui),Eo=A.ax(Ae,it,_,b),_s=Ae.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),To=Ee&&et.hasTextData(),Ya=n.layout.get("icon-text-fit")!=="none"&&To&&et.hasIconData();if(fe){const Qn=m.style.map.terrain?(Kn,qr)=>m.style.map.terrain.getElevation(rt,Kn,qr):null,fn=n.layout.get("text-rotation-alignment")==="map";St(et,m,f,Ri,ys,ce,Q,fn,rt.toUnwrapped(),Ae.width,Ae.height,Eo,Qn)}const Wa=f&&Ee||Ya,ia=fe||Wa?Vs:ce?Ri:m.transform.clipSpaceToPixelsMatrix,vs=lt&&n.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let pA;pA=lt?et.iconsInText?Fl(kt.kind,_r,me,ce,fe,Wa,m,ia,Xa,Eo,on,zn,je):kc(kt.kind,_r,me,ce,fe,Wa,m,ia,Xa,Eo,f,on,0,je):zc(kt.kind,_r,me,ce,fe,Wa,m,ia,Xa,Eo,f,on,je);const gA={program:Dr,buffers:Et,uniformValues:pA,projectionData:_s,atlasTexture:hn,atlasTextureIcon:ii,atlasInterpolation:Zr,atlasInterpolationIcon:$r,isSDF:lt,hasHalo:vs};if(_e&&et.canOverlap){we=!0;const Qn=Et.segments.get();for(const fn of Qn)Ge.push({segments:new A.aG([fn]),sortKey:fn.sortKey,state:gA,terrainData:Wr})}else Ge.push({segments:Et.segments,sortKey:0,state:gA,terrainData:Wr})}we&&Ge.sort((rt,it)=>rt.sortKey-it.sortKey);for(const rt of Ge){const it=rt.state;if(Y.activeTexture.set(ee.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,ee.CLAMP_TO_EDGE),it.atlasTextureIcon&&(Y.activeTexture.set(ee.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),it.isSDF){const et=it.uniformValues;it.hasHalo&&(et.u_is_halo=1,aA(it.buffers,rt.segments,n,m,it.program,Ue,O,H,et,it.projectionData,rt.terrainData)),et.u_is_halo=0}aA(it.buffers,rt.segments,n,m,it.program,Ue,O,H,it.uniformValues,it.projectionData,rt.terrainData)}}function aA(m,e,n,c,f,_,b,T,U,Q,O){const H=c.context;f.draw(H,H.gl.TRIANGLES,_,b,T,Cr.backCCW,U,O,Q,n.id,m.layoutVertexBuffer,m.indexBuffer,e,n.paint,c.transform.zoom,m.programConfigurations.get(n.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function sA(m,e,n,c,f){const _=m.context,b=_.gl,T=Mr.disabled,U=new an([b.ONE,b.ONE],A.b7.transparent,[!0,!0,!0,!0]),Q=e.getBucket(n);if(!Q)return;const O=c.key;let H=n.heatmapFbos.get(O);H||(H=Xc(_,e.tileSize,e.tileSize),n.heatmapFbos.set(O,H)),_.bindFramebuffer.set(H.framebuffer),_.viewport.set([0,0,e.tileSize,e.tileSize]),_.clear({color:A.b7.transparent});const z=Q.programConfigurations.get(n.id),Y=m.useProgram("heatmap",z,!f),ee=m.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ae=m.style.map.terrain.getTerrainData(c);Y.draw(_,b.TRIANGLES,mr.disabled,T,U,Cr.disabled,Pc(e,m.transform.zoom,n.paint.get("heatmap-intensity"),1),Ae,ee,n.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,n.paint,m.transform.zoom,z)}function Rl(m,e,n,c,f){const _=m.context,b=_.gl,T=m.transform;_.setColorMode(m.colorModeForRenderPass());const U=fo(_,e),Q=n.key,O=e.heatmapFbos.get(Q);if(!O)return;_.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,O.colorAttachment.get()),_.activeTexture.set(b.TEXTURE1),U.bind(b.LINEAR,b.CLAMP_TO_EDGE);const H=T.getProjectionData({overscaledTileID:n,applyTerrainMatrix:f,applyGlobeMatrix:!c});m.useProgram("heatmapTexture").draw(_,b.TRIANGLES,mr.disabled,Mr.disabled,m.colorModeForRenderPass(),Cr.disabled,Rc(m,e,0,1),null,H,e.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,e.paint,T.zoom),O.destroy(),e.heatmapFbos.delete(Q)}function Xc(m,e,n){var c,f;const _=m.gl,b=_.createTexture();_.bindTexture(_.TEXTURE_2D,b),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const T=(c=m.HALF_FLOAT)!==null&&c!==void 0?c:_.UNSIGNED_BYTE,U=(f=m.RGBA16F)!==null&&f!==void 0?f:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,U,e,n,0,_.RGBA,T,null);const Q=m.createFramebuffer(e,n,!1,!1);return Q.colorAttachment.set(b),Q}function fo(m,e){return e.colorRampTexture||(e.colorRampTexture=new mt(m,e.colorRamp,m.gl.RGBA)),e.colorRampTexture}function cs(m,e,n,c,f){if(!n||!c||!c.imageAtlas)return;const _=c.imageAtlas.patternPositions;let b=_[n.to.toString()],T=_[n.from.toString()];if(!b&&T&&(b=T),!T&&b&&(T=b),!b||!T){const U=f.getPaintProperty(e);b=_[U],T=_[U]}b&&T&&m.setConstantPatternPositions(b,T)}function oA(m,e,n,c,f,_,b,T){const U=m.context.gl,Q="fill-pattern",O=n.paint.get(Q),H=O&&O.constantOr(1),z=n.getCrossfadeParameters();let Y,ee,Ae,oe,ce;const fe=m.transform,me=n.paint.get("fill-translate"),_e=n.paint.get("fill-translate-anchor");b?(ee=H&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=U.LINES):(ee=H?"fillPattern":"fill",Y=U.TRIANGLES);const we=O.constantOr(null);for(const Ue of c){const Ee=e.getTile(Ue);if(H&&!Ee.patternsLoaded())continue;const Ge=Ee.getBucket(n);if(!Ge)continue;const je=Ge.programConfigurations.get(n.id),rt=m.useProgram(ee,je),it=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Ue);H&&(m.context.activeTexture.set(U.TEXTURE0),Ee.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),je.updatePaintBuffers(z)),cs(je,Q,we,Ee,n);const et=fe.getProjectionData({overscaledTileID:Ue,applyGlobeMatrix:!T,applyTerrainMatrix:!0}),Et=A.ax(fe,Ee,me,_e);if(b){oe=Ge.indexBuffer2,ce=Ge.segments2;const lt=[U.drawingBufferWidth,U.drawingBufferHeight];Ae=ee==="fillOutlinePattern"&&H?Vu(m,z,Ee,lt,Et):NA(lt,Et)}else oe=Ge.indexBuffer,ce=Ge.segments,Ae=H?$h(m,z,Ee,Et):{u_fill_translate:Et};let Bt;if(m.renderPass==="translucent"&&T){const[lt]=m.getStencilConfigForOverlapAndUpdateStencilID(c);Bt=lt[Ue.overscaledZ]}else Bt=m.stencilModeForClipping(Ue);rt.draw(m.context,Y,f,Bt,_,Cr.backCCW,Ae,it,et,n.id,Ge.layoutVertexBuffer,oe,ce,n.paint,m.transform.zoom,je)}}function AA(m,e,n,c,f,_,b,T){const U=m.context,Q=U.gl,O="fill-extrusion-pattern",H=n.paint.get(O),z=H.constantOr(1),Y=n.getCrossfadeParameters(),ee=n.paint.get("fill-extrusion-opacity"),Ae=H.constantOr(null),oe=m.transform;for(const ce of c){const fe=e.getTile(ce),me=fe.getBucket(n);if(!me)continue;const _e=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ce),we=me.programConfigurations.get(n.id),Ue=m.useProgram(z?"fillExtrusionPattern":"fillExtrusion",we);z&&(m.context.activeTexture.set(Q.TEXTURE0),fe.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),we.updatePaintBuffers(Y));const Ee=oe.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!T,applyTerrainMatrix:!0});cs(we,O,Ae,fe,n);const Ge=A.ax(oe,fe,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),je=n.paint.get("fill-extrusion-vertical-gradient"),rt=z?Lc(m,je,ee,Ge,ce,Y,fe):Wh(m,je,ee,Ge);Ue.draw(U,U.gl.TRIANGLES,f,_,b,Cr.backCCW,rt,_e,Ee,n.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,n.paint,m.transform.zoom,we,m.style.map.terrain&&me.centroidVertexBuffer)}}function Vi(m,e,n,c,f,_,b,T,U){var Q;const O=m.style.projection,H=m.context,z=m.transform,Y=H.gl,ee=m.useProgram("hillshade"),Ae=!m.options.moving;for(const oe of c){const ce=e.getTile(oe),fe=ce.fbo;if(!fe)continue;const me=O.getMeshFromTileID(H,oe.canonical,T,!0,"raster"),_e=(Q=m.style.map.terrain)===null||Q===void 0?void 0:Q.getTerrainData(oe);H.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,fe.colorAttachment.get());const we=z.getProjectionData({overscaledTileID:oe,aligned:Ae,applyGlobeMatrix:!U,applyTerrainMatrix:!0});ee.draw(H,Y.TRIANGLES,_,f[oe.overscaledZ],b,Cr.backCCW,Ku(m,ce,n),_e,we,n.id,me.vertexBuffer,me.indexBuffer,me.segments)}}const wi=[new A.P(0,0),new A.P(A.Z,0),new A.P(A.Z,A.Z),new A.P(0,A.Z)];function Ta(m,e,n,c,f,_,b,T,U=!1,Q=!1){const O=c[c.length-1].overscaledZ,H=m.context,z=H.gl,Y=m.useProgram("raster"),ee=m.transform,Ae=m.style.projection,oe=m.colorModeForRenderPass(),ce=!m.options.moving;for(const fe of c){const me=m.getDepthModeForSublayer(fe.overscaledZ-O,n.paint.get("raster-opacity")===1?mr.ReadWrite:mr.ReadOnly,z.LESS),_e=e.getTile(fe);_e.registerFadeDuration(n.paint.get("raster-fade-duration"));const we=e.findLoadedParent(fe,0),Ue=e.findLoadedSibling(fe),Ee=Gs(_e,we||Ue||null,e,n,m.transform,m.style.map.terrain);let Ge,je;const rt=n.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;H.activeTexture.set(z.TEXTURE0),_e.texture.bind(rt,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(z.TEXTURE1),we?(we.texture.bind(rt,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),Ge=Math.pow(2,we.tileID.overscaledZ-_e.tileID.overscaledZ),je=[_e.tileID.canonical.x*Ge%1,_e.tileID.canonical.y*Ge%1]):_e.texture.bind(rt,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),_e.texture.useMipmap&&H.extTextureFilterAnisotropic&&m.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax);const it=m.style.map.terrain&&m.style.map.terrain.getTerrainData(fe),et=ee.getProjectionData({overscaledTileID:fe,aligned:ce,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),Et=_d(je||[0,0],Ge||1,Ee,n,T),Bt=Ae.getMeshFromTileID(H,fe.canonical,_,b,"raster");Y.draw(H,z.TRIANGLES,me,f?f[fe.overscaledZ]:Mr.disabled,oe,U?Cr.frontCCW:Cr.backCCW,Et,it,et,n.id,Bt.vertexBuffer,Bt.indexBuffer,Bt.segments)}}function Gs(m,e,n,c,f,_){const b=c.paint.get("raster-fade-duration");if(!_&&b>0){const T=X.now(),U=(T-m.timeAdded)/b,Q=e?(T-e.timeAdded)/b:-1,O=n.getSource(),H=Ba(f,{tileSize:O.tileSize,roundZoom:O.roundZoom}),z=!e||Math.abs(e.tileID.overscaledZ-H)>Math.abs(m.tileID.overscaledZ-H),Y=z&&m.refreshedUponExpiration?1:A.ae(z?U:1-Q,0,1);return m.refreshedUponExpiration&&U>=1&&(m.refreshedUponExpiration=!1),e?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}const us=new A.b7(1,0,0,1),sn=new A.b7(0,1,0,1),po=new A.b7(0,0,1,1),ra=new A.b7(1,0,1,1),Ol=new A.b7(0,1,1,1);function yi(m,e,n,c){Fr(m,0,e+n/2,m.transform.width,n,c)}function Mn(m,e,n,c){Fr(m,e-n/2,0,n,m.transform.height,c)}function Fr(m,e,n,c,f,_){const b=m.context,T=b.gl;T.enable(T.SCISSOR_TEST),T.scissor(e*m.pixelRatio,n*m.pixelRatio,c*m.pixelRatio,f*m.pixelRatio),b.clear({color:_}),T.disable(T.SCISSOR_TEST)}function Ga(m,e,n){const c=m.context,f=c.gl,_=m.useProgram("debug"),b=mr.disabled,T=Mr.disabled,U=m.colorModeForRenderPass(),Q="$debug",O=m.style.map.terrain&&m.style.map.terrain.getTerrainData(n);c.activeTexture.set(f.TEXTURE0);const H=e.getTileByID(n.key).latestRawTileData,z=Math.floor((H&&H.byteLength||0)/1024),Y=e.getTile(n).tileSize,ee=512/Math.min(Y,512)*(n.overscaledZ/m.transform.zoom)*.5;let Ae=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(Ae+=` => ${n.overscaledZ}`),function(ce,fe){ce.initDebugOverlayCanvas();const me=ce.debugOverlayCanvas,_e=ce.context.gl,we=ce.debugOverlayCanvas.getContext("2d");we.clearRect(0,0,me.width,me.height),we.shadowColor="white",we.shadowBlur=2,we.lineWidth=1.5,we.strokeStyle="white",we.textBaseline="top",we.font="bold 36px Open Sans, sans-serif",we.fillText(fe,5,5),we.strokeText(fe,5,5),ce.debugOverlayTexture.update(me),ce.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(m,`${Ae} ${z}kB`);const oe=m.transform.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(c,f.TRIANGLES,b,T,an.alphaBlended,Cr.disabled,Tl(A.b7.transparent,ee),null,oe,Q,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),_.draw(c,f.LINE_STRIP,b,T,U,Cr.disabled,Tl(A.b7.red),O,oe,Q,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function pa(m,e,n,c){const{isRenderingGlobe:f}=c,_=m.context,b=_.gl,T=m.transform,U=m.colorModeForRenderPass(),Q=m.getDepthModeFor3D(),O=m.useProgram("terrain");_.bindFramebuffer.set(null),_.viewport.set([0,0,m.width,m.height]);for(const H of n){const z=e.getTerrainMesh(H.tileID),Y=m.renderToTexture.getTexture(H),ee=e.getTerrainData(H.tileID);_.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,Y.texture);const Ae=e.getMeshFrameDelta(T.zoom),oe=T.calculateFogMatrix(H.tileID.toUnwrapped()),ce=ls(Ae,oe,m.style.sky,T.pitch,f),fe=T.getProjectionData({overscaledTileID:H.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(_,b.TRIANGLES,Q,Mr.disabled,U,Cr.backCCW,ce,ee,fe,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}function zl(m,e){if(!e.mesh){const n=new A.aF;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(1,1),n.emplaceBack(-1,1);const c=new A.aH;c.emplaceBack(0,1,2),c.emplaceBack(0,2,3),e.mesh=new ao(m.createVertexBuffer(n,os.members),m.createIndexBuffer(c),A.aG.simpleSegment(0,0,n.length,c.length))}return e.mesh}class go{constructor(e,n){this.context=new ZA(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:A.at(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=J.maxUnderzooming+J.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zo}resize(e,n,c){if(this.width=Math.floor(e*c),this.height=Math.floor(n*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const e=this.context,n=new A.aF;n.emplaceBack(0,0),n.emplaceBack(A.Z,0),n.emplaceBack(0,A.Z),n.emplaceBack(A.Z,A.Z),this.tileExtentBuffer=e.createVertexBuffer(n,os.members),this.tileExtentSegments=A.aG.simpleSegment(0,0,4,2);const c=new A.aF;c.emplaceBack(0,0),c.emplaceBack(A.Z,0),c.emplaceBack(0,A.Z),c.emplaceBack(A.Z,A.Z),this.debugBuffer=e.createVertexBuffer(c,os.members),this.debugSegments=A.aG.simpleSegment(0,0,4,5);const f=new A.bW;f.emplaceBack(0,0,0,0),f.emplaceBack(A.Z,0,A.Z,0),f.emplaceBack(0,A.Z,0,A.Z),f.emplaceBack(A.Z,A.Z,A.Z,A.Z),this.rasterBoundsBuffer=e.createVertexBuffer(f,ju.members),this.rasterBoundsSegments=A.aG.simpleSegment(0,0,4,2);const _=new A.aF;_.emplaceBack(0,0),_.emplaceBack(A.Z,0),_.emplaceBack(0,A.Z),_.emplaceBack(A.Z,A.Z),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(_,os.members),this.rasterBoundsSegmentsPosOnly=A.aG.simpleSegment(0,0,4,5);const b=new A.aF;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(b,os.members),this.viewportSegments=A.aG.simpleSegment(0,0,4,2);const T=new A.bX;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(T);const U=new A.aH;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(U);const Q=this.context.gl;this.stencilClearMode=new Mr({func:Q.ALWAYS,mask:0},0,255,Q.ZERO,Q.ZERO,Q.ZERO),this.tileExtentMesh=new ao(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=A.K();A.bO(c,0,this.width,this.height,0,0,1),A.M(c,c,[n.drawingBufferWidth,n.drawingBufferHeight,0]);const f={mainMatrix:c,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:c};this.useProgram("clippingMask",null,!0).draw(e,n.TRIANGLES,mr.disabled,this.stencilClearMode,an.disabled,Cr.disabled,null,null,f,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,c){if(this.currentStencilSource===e.source||!e.isTileClipped()||!n||!n.length)return;this.currentStencilSource=e.source,this.nextStencilID+n.length>256&&this.clearStencil();const f=this.context;f.setColorMode(an.disabled),f.setDepthMode(mr.disabled);const _={};for(const b of n)_[b.key]=this.nextStencilID++;this._renderTileMasks(_,n,c,!0),this._renderTileMasks(_,n,c,!1),this._tileClippingMaskIDs=_}_renderTileMasks(e,n,c,f){const _=this.context,b=_.gl,T=this.style.projection,U=this.transform,Q=this.useProgram("clippingMask");for(const O of n){const H=e[O.key],z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),Y=T.getMeshFromTileID(this.context,O.canonical,f,!0,"stencil"),ee=U.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!0,applyTerrainMatrix:!0});Q.draw(_,b.TRIANGLES,mr.disabled,new Mr({func:b.ALWAYS,mask:0},H,255,b.KEEP,b.KEEP,b.REPLACE),an.disabled,c?Cr.disabled:Cr.backCCW,null,z,ee,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}_renderTilesDepthBuffer(){const e=this.context,n=e.gl,c=this.style.projection,f=this.transform,_=this.useProgram("depth"),b=this.getDepthModeFor3D(),T=Le(f,{tileSize:f.tileSize});for(const U of T){const Q=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),O=c.getMeshFromTileID(this.context,U.canonical,!0,!0,"raster"),H=f.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(e,n.TRIANGLES,b,Mr.disabled,an.disabled,Cr.backCCW,null,Q,H,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new Mr({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){const n=this.context.gl;return new Mr({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const n=this.context.gl,c=e.sort((b,T)=>T.overscaledZ-b.overscaledZ),f=c[c.length-1].overscaledZ,_=c[0].overscaledZ-f+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const b={};for(let T=0;T<_;T++)b[T+f]=new Mr({func:n.GEQUAL,mask:255},T+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=_,[b,c]}return[{[f]:Mr.disabled},c]}stencilConfigForOverlapTwoPass(e){const n=this.context.gl,c=e.sort((b,T)=>T.overscaledZ-b.overscaledZ),f=c[c.length-1].overscaledZ,_=c[0].overscaledZ-f+1;if(this.clearStencil(),_>1){const b={},T={};for(let U=0;U<_;U++)b[U+f]=new Mr({func:n.GREATER,mask:255},_+1+U,255,n.KEEP,n.KEEP,n.REPLACE),T[U+f]=new Mr({func:n.GREATER,mask:255},1+U,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID=2*_+1,[b,T,c]}return this.nextStencilID=3,[{[f]:new Mr({func:n.GREATER,mask:255},2,255,n.KEEP,n.KEEP,n.REPLACE)},{[f]:new Mr({func:n.GREATER,mask:255},1,255,n.KEEP,n.KEEP,n.REPLACE)},c]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new an([e.CONSTANT_COLOR,e.ONE],new A.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?an.unblended:an.alphaBlended}getDepthModeForSublayer(e,n,c){if(!this.opaquePassEnabledForLayer())return mr.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new mr(c||this.context.gl.LEQUAL,n,[f,f])}getDepthModeFor3D(){return new mr(this.context.gl.LEQUAL,mr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){var c,f;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(X.now()),this.imageManager.beginFrame();const _=this.style._order,b=this.style.sourceCaches,T={},U={},Q={},O={isRenderingToTexture:!1,isRenderingGlobe:((c=e.projection)===null||c===void 0?void 0:c.transitionState)>0};for(const z in b){const Y=b[z];Y.used&&Y.prepare(this.context),T[z]=Y.getVisibleCoordinates(!1),U[z]=T[z].slice().reverse(),Q[z]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<_.length;z++)if(this.style._layers[_[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of _){const Y=this.style._layers[z];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const ee=U[Y.source];(Y.type==="custom"||ee.length)&&this.renderLayer(this,b[Y.source],Y,ee,O)}if((f=this.style.projection)===null||f===void 0||f.updateGPUdependent({context:this.context,useProgram:z=>this.useProgram(z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?A.b7.black:A.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(z,Y){const ee=z.context,Ae=ee.gl,oe=((Ue,Ee,Ge)=>{const je=Math.cos(Ee.rollInRadians),rt=Math.sin(Ee.rollInRadians),it=Xo(Ee),et=Ee.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ue.properties.get("sky-color"),u_horizon_color:Ue.properties.get("horizon-color"),u_horizon:[(Ee.width/2-it*rt)*Ge,(Ee.height/2+it*je)*Ge],u_horizon_normal:[-rt,je],u_sky_horizon_blend:Ue.properties.get("sky-horizon-blend")*Ee.height/2*Ge,u_sky_blend:et}})(Y,z.style.map.transform,z.pixelRatio),ce=new mr(Ae.LEQUAL,mr.ReadWrite,[0,1]),fe=Mr.disabled,me=z.colorModeForRenderPass(),_e=z.useProgram("sky"),we=zl(ee,Y);_e.draw(ee,Ae.TRIANGLES,ce,fe,me,Cr.disabled,oe,null,void 0,"sky",we.vertexBuffer,we.indexBuffer,we.segments)}(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[_[this.currentLayer]],Y=b[z.source],ee=T[z.source];this._renderTileClippingMasks(z,ee,!1),this.renderLayer(this,Y,z,ee,O)}this.renderPass="translucent";let H=!1;for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const z=this.style._layers[_[this.currentLayer]],Y=b[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z,O))continue;this.opaquePassEnabledForLayer()||H||(H=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ee=(z.type==="symbol"?Q:U)[z.source];this._renderTileClippingMasks(z,T[z.source],!1),this.renderLayer(this,Y,z,ee,O)}if(O.isRenderingGlobe&&function(z,Y,ee){const Ae=z.context,oe=Ae.gl,ce=z.useProgram("atmosphere"),fe=new mr(oe.LEQUAL,mr.ReadOnly,[0,1]),me=z.transform,_e=function(et,Et){const Bt=et.properties.get("position"),lt=[-Bt.x,-Bt.y,-Bt.z],kt=A.at(new Float64Array(16));return et.properties.get("anchor")==="map"&&(A.a_(kt,kt,Et.rollInRadians),A.a$(kt,kt,-Et.pitchInRadians),A.a_(kt,kt,Et.bearingInRadians),A.a$(kt,kt,Et.center.lat*Math.PI/180),A.bm(kt,kt,-Et.center.lng*Math.PI/180)),A.bV(lt,lt,kt),lt}(ee,z.transform),we=me.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ue=Y.properties.get("atmosphere-blend")*we.projectionTransition;if(Ue===0)return;const Ee=Cl(me.worldSize,me.center.lat),Ge=me.inverseProjectionMatrix,je=new Float64Array(4);je[3]=1,A.ap(je,je,me.modelViewProjectionMatrix),je[0]/=je[3],je[1]/=je[3],je[2]/=je[3],je[3]=1,A.ap(je,je,Ge),je[0]/=je[3],je[1]/=je[3],je[2]/=je[3],je[3]=1;const rt=((et,Et,Bt,lt,kt)=>({u_sun_pos:et,u_atmosphere_blend:Et,u_globe_position:Bt,u_globe_radius:lt,u_inv_proj_matrix:kt}))(_e,Ue,[je[0],je[1],je[2]],Ee,Ge),it=zl(Ae,Y);ce.draw(Ae,oe.TRIANGLES,fe,Mr.disabled,an.alphaBlended,Cr.disabled,rt,null,null,"atmosphere",it.vertexBuffer,it.indexBuffer,it.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const z=function(Y,ee){let Ae=null;const oe=Object.values(Y._layers).flatMap(_e=>_e.source&&!_e.isHidden(ee)?[Y.sourceCaches[_e.source]]:[]),ce=oe.filter(_e=>_e.getSource().type==="vector"),fe=oe.filter(_e=>_e.getSource().type!=="vector"),me=_e=>{(!Ae||Ae.getSource().maxzoom<_e.getSource().maxzoom)&&(Ae=_e)};return ce.forEach(_e=>me(_e)),Ae||fe.forEach(_e=>me(_e)),Ae}(this.style,this.transform.zoom);z&&function(Y,ee,Ae){for(let oe=0;oe<Ae.length;oe++)Ga(Y,ee,Ae[oe])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const Y=z.transform.padding;yi(z,z.transform.height-(Y.top||0),3,us),yi(z,Y.bottom||0,3,sn),Mn(z,Y.left||0,3,po),Mn(z,z.transform.width-(Y.right||0),3,ra);const ee=z.transform.centerPoint;(function(Ae,oe,ce,fe){Fr(Ae,oe-1,ce-10,2,20,fe),Fr(Ae,oe-10,ce-1,20,2,fe)})(z,ee.x,z.transform.height-ee.y,Ol)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,c=this.transform.modelViewProjectionMatrix;let f=this.terrainFacilitator.dirty;f||(f=e?!A.bY(n,c):!A.bZ(n,c)),f||(f=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),f&&(A.b_(n,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,b){const T=_.context,U=T.gl,Q=_.transform,O=an.unblended,H=new mr(U.LEQUAL,mr.ReadWrite,[0,1]),z=b.sourceCache.getRenderableTiles(),Y=_.useProgram("terrainDepth");T.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),T.clear({color:A.b7.transparent,depth:1});for(const ee of z){const Ae=b.getTerrainMesh(ee.tileID),oe=b.getTerrainData(ee.tileID),ce=Q.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),fe={u_ele_delta:b.getMeshFrameDelta(Q.zoom)};Y.draw(T,U.TRIANGLES,H,Mr.disabled,O,Cr.backCCW,fe,oe,ce,"terrain",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,b){const T=_.context,U=T.gl,Q=_.transform,O=an.unblended,H=new mr(U.LEQUAL,mr.ReadWrite,[0,1]),z=b.getCoordsTexture(),Y=b.sourceCache.getRenderableTiles(),ee=_.useProgram("terrainCoords");T.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),T.clear({color:A.b7.transparent,depth:1}),b.coordsIndex=[];for(const Ae of Y){const oe=b.getTerrainMesh(Ae.tileID),ce=b.getTerrainData(Ae.tileID);T.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,z.texture);const fe={u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(Q.zoom)},me=Q.getProjectionData({overscaledTileID:Ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ee.draw(T,U.TRIANGLES,H,Mr.disabled,O,Cr.backCCW,fe,ce,me,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments),b.coordsIndex.push(Ae.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(e,n,c,f,_){c.isHidden(this.transform.zoom)||(c.type==="background"||c.type==="custom"||(f||[]).length)&&(this.id=c.id,A.b$(c)?function(b,T,U,Q,O,H){if(b.renderPass!=="translucent")return;const{isRenderingToTexture:z}=H,Y=Mr.disabled,ee=b.colorModeForRenderPass();(U._unevaluatedLayout.hasValue("text-variable-anchor")||U._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ae,oe,ce,fe,me,_e,we,Ue,Ee){const Ge=oe.transform,je=oe.style.map.terrain,rt=me==="map",it=_e==="map";for(const et of Ae){const Et=fe.getTile(et),Bt=Et.getBucket(ce);if(!Bt||!Bt.text||!Bt.text.segments.get().length)continue;const lt=A.ag(Bt.textSizeData,Ge.zoom),kt=A.aw(Et,1,oe.transform.zoom),hr=ze(rt,oe.transform,kt),Dr=ce.layout.get("icon-text-fit")!=="none"&&Bt.hasIconData();if(lt){const _r=Math.pow(2,Ge.zoom-Et.tileID.overscaledZ),Wr=je?(on,hn)=>je.getElevation(et,on,hn):null;qc(Bt,rt,it,Ee,Ge,hr,_r,lt,Dr,A.ax(Ge,Et,we,Ue),et.toUnwrapped(),Wr)}}}(Q,b,U,T,U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),O),U.paint.get("icon-opacity").constantOr(1)!==0&&qA(b,T,U,Q,!1,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),U.layout.get("icon-rotation-alignment"),U.layout.get("icon-pitch-alignment"),U.layout.get("icon-keep-upright"),Y,ee,z),U.paint.get("text-opacity").constantOr(1)!==0&&qA(b,T,U,Q,!0,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.layout.get("text-keep-upright"),Y,ee,z),T.map.showCollisionBoxes&&(ho(b,T,U,Q,!0),ho(b,T,U,Q,!1))}(e,n,c,f,this.style.placement.variableOffsets,_):A.c0(c)?function(b,T,U,Q,O){if(b.renderPass!=="translucent")return;const{isRenderingToTexture:H}=O,z=U.paint.get("circle-opacity"),Y=U.paint.get("circle-stroke-width"),ee=U.paint.get("circle-stroke-opacity"),Ae=!U.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(Y.constantOr(1)===0||ee.constantOr(1)===0))return;const oe=b.context,ce=oe.gl,fe=b.transform,me=b.getDepthModeForSublayer(0,mr.ReadOnly),_e=Mr.disabled,we=b.colorModeForRenderPass(),Ue=[],Ee=fe.getCircleRadiusCorrection();for(let Ge=0;Ge<Q.length;Ge++){const je=Q[Ge],rt=T.getTile(je),it=rt.getBucket(U);if(!it)continue;const et=U.paint.get("circle-translate"),Et=U.paint.get("circle-translate-anchor"),Bt=A.ax(fe,rt,et,Et),lt=it.programConfigurations.get(U.id),kt=b.useProgram("circle",lt),hr=it.layoutVertexBuffer,Dr=it.indexBuffer,_r=b.style.map.terrain&&b.style.map.terrain.getTerrainData(je),Wr={programConfiguration:lt,program:kt,layoutVertexBuffer:hr,indexBuffer:Dr,uniformValues:jA(b,rt,U,Bt,Ee),terrainData:_r,projectionData:fe.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!H,applyTerrainMatrix:!0})};if(Ae){const on=it.segments.get();for(const hn of on)Ue.push({segments:new A.aG([hn]),sortKey:hn.sortKey,state:Wr})}else Ue.push({segments:it.segments,sortKey:0,state:Wr})}Ae&&Ue.sort((Ge,je)=>Ge.sortKey-je.sortKey);for(const Ge of Ue){const{programConfiguration:je,program:rt,layoutVertexBuffer:it,indexBuffer:et,uniformValues:Et,terrainData:Bt,projectionData:lt}=Ge.state;rt.draw(oe,ce.TRIANGLES,me,_e,we,Cr.backCCW,Et,Bt,lt,U.id,it,et,Ge.segments,U.paint,b.transform.zoom,je)}}(e,n,c,f,_):A.c1(c)?function(b,T,U,Q,O){if(U.paint.get("heatmap-opacity")===0)return;const H=b.context,{isRenderingToTexture:z,isRenderingGlobe:Y}=O;if(b.style.map.terrain){for(const ee of Q){const Ae=T.getTile(ee);T.hasRenderableParent(ee)||(b.renderPass==="offscreen"?sA(b,Ae,U,ee,Y):b.renderPass==="translucent"&&Rl(b,U,ee,z,Y))}H.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function(ee,Ae,oe,ce){const fe=ee.context,me=fe.gl,_e=ee.transform,we=Mr.disabled,Ue=new an([me.ONE,me.ONE],A.b7.transparent,[!0,!0,!0,!0]);(function(Ee,Ge,je){const rt=Ee.gl;Ee.activeTexture.set(rt.TEXTURE1),Ee.viewport.set([0,0,Ge.width/4,Ge.height/4]);let it=je.heatmapFbos.get(A.bS);it?(rt.bindTexture(rt.TEXTURE_2D,it.colorAttachment.get()),Ee.bindFramebuffer.set(it.framebuffer)):(it=Xc(Ee,Ge.width/4,Ge.height/4),je.heatmapFbos.set(A.bS,it))})(fe,ee,oe),fe.clear({color:A.b7.transparent});for(let Ee=0;Ee<ce.length;Ee++){const Ge=ce[Ee];if(Ae.hasRenderableParent(Ge))continue;const je=Ae.getTile(Ge),rt=je.getBucket(oe);if(!rt)continue;const it=rt.programConfigurations.get(oe.id),et=ee.useProgram("heatmap",it),Et=_e.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Bt=_e.getCircleRadiusCorrection();et.draw(fe,me.TRIANGLES,mr.disabled,we,Ue,Cr.backCCW,Pc(je,_e.zoom,oe.paint.get("heatmap-intensity"),Bt),null,Et,oe.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,oe.paint,_e.zoom,it)}fe.viewport.set([0,0,ee.width,ee.height])}(b,T,U,Q):b.renderPass==="translucent"&&function(ee,Ae){const oe=ee.context,ce=oe.gl;oe.setColorMode(ee.colorModeForRenderPass());const fe=Ae.heatmapFbos.get(A.bS);fe&&(oe.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,fe.colorAttachment.get()),oe.activeTexture.set(ce.TEXTURE1),fo(oe,Ae).bind(ce.LINEAR,ce.CLAMP_TO_EDGE),ee.useProgram("heatmapTexture").draw(oe,ce.TRIANGLES,mr.disabled,Mr.disabled,ee.colorModeForRenderPass(),Cr.disabled,Rc(ee,Ae,0,1),null,null,Ae.id,ee.viewportBuffer,ee.quadTriangleIndexBuffer,ee.viewportSegments,Ae.paint,ee.transform.zoom))}(b,U)}(e,n,c,f,_):A.c2(c)?function(b,T,U,Q,O){if(b.renderPass!=="translucent")return;const{isRenderingToTexture:H}=O,z=U.paint.get("line-opacity"),Y=U.paint.get("line-width");if(z.constantOr(1)===0||Y.constantOr(1)===0)return;const ee=b.getDepthModeForSublayer(0,mr.ReadOnly),Ae=b.colorModeForRenderPass(),oe=U.paint.get("line-dasharray"),ce=U.paint.get("line-pattern"),fe=ce.constantOr(1),me=U.paint.get("line-gradient"),_e=U.getCrossfadeParameters(),we=fe?"linePattern":oe?"lineSDF":me?"lineGradient":"line",Ue=b.context,Ee=Ue.gl,Ge=b.transform;let je=!0;for(const rt of Q){const it=T.getTile(rt);if(fe&&!it.patternsLoaded())continue;const et=it.getBucket(U);if(!et)continue;const Et=et.programConfigurations.get(U.id),Bt=b.context.program.get(),lt=b.useProgram(we,Et),kt=je||lt.program!==Bt,hr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(rt),Dr=ce.constantOr(null);if(Dr&&it.imageAtlas){const Zr=it.imageAtlas,$r=Zr.patternPositions[Dr.to.toString()],zn=Zr.patternPositions[Dr.from.toString()];$r&&zn&&Et.setConstantPatternPositions($r,zn)}const _r=Ge.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Wr=Ge.getPixelScale(),on=fe?VA(b,it,U,Wr,_e):oe?ef(b,it,U,Wr,oe,_e):me?Jh(b,it,U,Wr,et.lineClipsArray.length):Oc(b,it,U,Wr);if(fe)Ue.activeTexture.set(Ee.TEXTURE0),it.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Et.updatePaintBuffers(_e);else if(oe&&(kt||b.lineAtlas.dirty))Ue.activeTexture.set(Ee.TEXTURE0),b.lineAtlas.bind(Ue);else if(me){const Zr=et.gradients[U.id];let $r=Zr.texture;if(U.gradientVersion!==Zr.version){let zn=256;if(U.stepInterpolant){const ii=T.getSource().maxzoom,ui=rt.canonical.z===ii?Math.ceil(1<<b.transform.maxZoom-rt.canonical.z):1;zn=A.ae(A.bT(et.maxLineLength/A.Z*1024*ui),256,Ue.maxTextureSize)}Zr.gradient=A.bU({expression:U.gradientExpression(),evaluationKey:"lineProgress",resolution:zn,image:Zr.gradient||void 0,clips:et.lineClipsArray}),Zr.texture?Zr.texture.update(Zr.gradient):Zr.texture=new mt(Ue,Zr.gradient,Ee.RGBA),Zr.version=U.gradientVersion,$r=Zr.texture}Ue.activeTexture.set(Ee.TEXTURE0),$r.bind(U.stepInterpolant?Ee.NEAREST:Ee.LINEAR,Ee.CLAMP_TO_EDGE)}let hn;if(H){const[Zr]=b.getStencilConfigForOverlapAndUpdateStencilID(Q);hn=Zr[rt.overscaledZ]}else hn=b.stencilModeForClipping(rt);lt.draw(Ue,Ee.TRIANGLES,ee,hn,Ae,Cr.disabled,on,hr,_r,U.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,U.paint,b.transform.zoom,Et,et.layoutVertexBuffer2),je=!1}}(e,n,c,f,_):A.c3(c)?function(b,T,U,Q,O){const H=U.paint.get("fill-color"),z=U.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const{isRenderingToTexture:Y}=O,ee=b.colorModeForRenderPass(),Ae=U.paint.get("fill-pattern"),oe=b.opaquePassEnabledForLayer()&&!Ae.constantOr(1)&&H.constantOr(A.b7.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===oe){const ce=b.getDepthModeForSublayer(1,b.renderPass==="opaque"?mr.ReadWrite:mr.ReadOnly);oA(b,T,U,Q,ce,ee,!1,Y)}if(b.renderPass==="translucent"&&U.paint.get("fill-antialias")){const ce=b.getDepthModeForSublayer(U.getPaintProperty("fill-outline-color")?2:0,mr.ReadOnly);oA(b,T,U,Q,ce,ee,!0,Y)}}(e,n,c,f,_):A.c4(c)?function(b,T,U,Q,O){const H=U.paint.get("fill-extrusion-opacity");if(H===0)return;const{isRenderingToTexture:z}=O;if(b.renderPass==="translucent"){const Y=new mr(b.context.gl.LEQUAL,mr.ReadWrite,b.depthRangeFor3D);if(H!==1||U.paint.get("fill-extrusion-pattern").constantOr(1))AA(b,T,U,Q,Y,Mr.disabled,an.disabled,z),AA(b,T,U,Q,Y,b.stencilModeFor3D(),b.colorModeForRenderPass(),z);else{const ee=b.colorModeForRenderPass();AA(b,T,U,Q,Y,Mr.disabled,ee,z)}}}(e,n,c,f,_):A.c5(c)?function(b,T,U,Q,O){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const{isRenderingToTexture:H}=O,z=b.context,Y=b.style.projection.useSubdivision,ee=b.getDepthModeForSublayer(0,mr.ReadOnly),Ae=b.colorModeForRenderPass();if(b.renderPass==="offscreen")(function(oe,ce,fe,me,_e,we,Ue){const Ee=oe.context,Ge=Ee.gl;for(const je of fe){const rt=ce.getTile(je),it=rt.dem;if(!it||!it.data||!rt.needsHillshadePrepare)continue;const et=it.dim,Et=it.stride,Bt=it.getPixels();if(Ee.activeTexture.set(Ge.TEXTURE1),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),rt.demTexture=rt.demTexture||oe.getTileTexture(Et),rt.demTexture){const kt=rt.demTexture;kt.update(Bt,{premultiply:!1}),kt.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE)}else rt.demTexture=new mt(Ee,Bt,Ge.RGBA,{premultiply:!1}),rt.demTexture.bind(Ge.NEAREST,Ge.CLAMP_TO_EDGE);Ee.activeTexture.set(Ge.TEXTURE0);let lt=rt.fbo;if(!lt){const kt=new mt(Ee,{width:et,height:et,data:null},Ge.RGBA);kt.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),lt=rt.fbo=Ee.createFramebuffer(et,et,!0,!1),lt.colorAttachment.set(kt.texture)}Ee.bindFramebuffer.set(lt.framebuffer),Ee.viewport.set([0,0,et,et]),oe.useProgram("hillshadePrepare").draw(Ee,Ge.TRIANGLES,_e,we,Ue,Cr.disabled,Wo(rt.tileID,it),null,null,me.id,oe.rasterBoundsBuffer,oe.quadTriangleIndexBuffer,oe.rasterBoundsSegments),rt.needsHillshadePrepare=!1}})(b,T,Q,U,ee,Mr.disabled,Ae),z.viewport.set([0,0,b.width,b.height]);else if(b.renderPass==="translucent")if(Y){const[oe,ce,fe]=b.stencilConfigForOverlapTwoPass(Q);Vi(b,T,U,fe,oe,ee,Ae,!1,H),Vi(b,T,U,fe,ce,ee,Ae,!0,H)}else{const[oe,ce]=b.getStencilConfigForOverlapAndUpdateStencilID(Q);Vi(b,T,U,ce,oe,ee,Ae,!1,H)}}(e,n,c,f,_):A.c6(c)?function(b,T,U,Q,O){if(b.renderPass!=="translucent"||U.paint.get("raster-opacity")===0||!Q.length)return;const{isRenderingToTexture:H}=O,z=T.getSource(),Y=b.style.projection.useSubdivision;if(z instanceof vr)Ta(b,T,U,Q,null,!1,!1,z.tileCoords,z.flippedWindingOrder,H);else if(Y){const[ee,Ae,oe]=b.stencilConfigForOverlapTwoPass(Q);Ta(b,T,U,oe,ee,!1,!0,wi,!1,H),Ta(b,T,U,oe,Ae,!0,!0,wi,!1,H)}else{const[ee,Ae]=b.getStencilConfigForOverlapAndUpdateStencilID(Q);Ta(b,T,U,Ae,ee,!1,!0,wi,!1,H)}}(e,n,c,f,_):A.c7(c)?function(b,T,U,Q,O){const H=U.paint.get("background-color"),z=U.paint.get("background-opacity");if(z===0)return;const{isRenderingToTexture:Y}=O,ee=b.context,Ae=ee.gl,oe=b.style.projection,ce=b.transform,fe=ce.tileSize,me=U.paint.get("background-pattern");if(b.isPatternMissing(me))return;const _e=!me&&H.a===1&&z===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==_e)return;const we=Mr.disabled,Ue=b.getDepthModeForSublayer(0,_e==="opaque"?mr.ReadWrite:mr.ReadOnly),Ee=b.colorModeForRenderPass(),Ge=b.useProgram(me?"backgroundPattern":"background"),je=Q||Le(ce,{tileSize:fe,terrain:b.style.map.terrain});me&&(ee.activeTexture.set(Ae.TEXTURE0),b.imageManager.bind(b.context));const rt=U.getCrossfadeParameters();for(const it of je){const et=ce.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Et=me?Ul(z,b,me,{tileID:it,tileSize:fe},rt):Hc(z,H),Bt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(it),lt=oe.getMeshFromTileID(ee,it.canonical,!1,!0,"raster");Ge.draw(ee,Ae.TRIANGLES,Ue,we,Ee,Cr.backCCW,Et,Bt,et,U.id,lt.vertexBuffer,lt.indexBuffer,lt.segments)}}(e,0,c,f,_):A.c8(c)&&function(b,T,U,Q){const{isRenderingGlobe:O}=Q,H=b.context,z=U.implementation,Y=b.style.projection,ee=b.transform,Ae=ee.getProjectionDataForCustomLayer(O),oe={farZ:ee.farZ,nearZ:ee.nearZ,fov:ee.fov*Math.PI/180,modelViewProjectionMatrix:ee.modelViewProjectionMatrix,projectionMatrix:ee.projectionMatrix,shaderData:{variantName:Y.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Y.shaderPreludeCode.vertexSource}`,define:Y.shaderDefine},defaultProjectionData:Ae},ce=z.renderingMode?z.renderingMode:"2d";if(b.renderPass==="offscreen"){const fe=z.prerender;fe&&(b.setCustomLayerDefaults(),H.setColorMode(b.colorModeForRenderPass()),fe.call(z,H.gl,oe),H.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),H.setColorMode(b.colorModeForRenderPass()),H.setStencilMode(Mr.disabled);const fe=ce==="3d"?b.getDepthModeFor3D():b.getDepthModeForSublayer(0,mr.ReadOnly);H.setDepthMode(fe),z.render(H.gl,oe),H.setDirty(),b.setBaseState(),H.bindFramebuffer.set(null)}}(e,0,c,_))}saveTileTexture(e){const n=this._tileTextures[e.size[0]];n?n.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const n=this._tileTextures[e];return n&&n.length>0?n.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const n=this.imageManager.getPattern(e.from.toString()),c=this.imageManager.getPattern(e.to.toString());return!n||!c}useProgram(e,n,c=!1){this.cache=this.cache||{};const f=!!this.style.map.terrain,_=this.style.projection,b=e+(n?n.cacheKey:"")+`/${c?qo:_.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(f?"/terrain":"");return this.cache[b]||(this.cache[b]=new El(this.context,Vn[e],n,Nc[e],this._showOverdrawInspector,f,c?Vn.projectionMercator:_.shaderPreludeCode,c?$i:_.shaderDefine)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new mt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:n}=this.context.gl;return this.width!==e||this.height!==n}}function Yc(m,e){let n,c=!1,f=null,_=null;const b=()=>{f=null,c&&(m.apply(_,n),f=setTimeout(b,e),c=!1)};return(...T)=>(c=!0,_=this,n=T,f||b(),f)}class Wc{constructor(e){this._getCurrentHash=()=>{const n=window.location.hash.replace("#","");if(this._hashName){let c;return n.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(c=f)}),(c&&c[1]||"").split("/")}return n.split("/")},this._onHashChange=()=>{const n=this._getCurrentHash();if(!this._isValidHash(n))return!1;const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:c,pitch:+(n[4]||0)}),!0},this._updateHashUnthrottled=()=>{const n=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,n)},this._removeHash=()=>{const n=this._getCurrentHash();if(n.length===0)return;const c=n.join("/");let f=c;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${c}`);let _=window.location.hash.replace(f,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let b=window.location.href.replace(/(#.+)?$/,_);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=Yc(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const n=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,f=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,f),b=Math.round(n.lng*_)/_,T=Math.round(n.lat*_)/_,U=this._map.getBearing(),Q=this._map.getPitch();let O="";if(O+=e?`/${b}/${T}/${c}`:`${c}/${T}/${b}`,(U||Q)&&(O+="/"+Math.round(10*U)/10),Q&&(O+=`/${Math.round(Q)}`),this._hashName){const H=this._hashName;let z=!1;const Y=window.location.hash.slice(1).split("&").map(ee=>{const Ae=ee.split("=")[0];return Ae===H?(z=!0,`${Ae}=${O}`):ee}).filter(ee=>ee);return z||Y.push(`${H}=${O}`),`#${Y.join("&")}`}return`#${O}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new A.Q(+e[2],+e[1])}catch{return!1}const n=+e[0],c=+(e[3]||0),f=+(e[4]||0);return n>=this._map.getMinZoom()&&n<=this._map.getMaxZoom()&&c>=-180&&c<=180&&f>=this._map.getMinPitch()&&f<=this._map.getMaxPitch()}}const hs={linearity:.3,easing:A.c9(0,0,.3,1)},Ka=A.e({deceleration:2500,maxSpeed:1400},hs),Ju=A.e({deceleration:20,maxSpeed:1400},hs),XA=A.e({deceleration:1e3,maxSpeed:360},hs),$c=A.e({deceleration:1e3,maxSpeed:90},hs),mo=A.e({deceleration:1e3,maxSpeed:360},hs);class fs{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:X.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=X.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,roll:0,pan:new A.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)n.zoom+=_.zoomDelta||0,n.bearing+=_.bearingDelta||0,n.pitch+=_.pitchDelta||0,n.roll+=_.rollDelta||0,_.panDelta&&n.pan._add(_.panDelta),_.around&&(n.around=_.around),_.pinchAround&&(n.pinchAround=_.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(n.pan.mag()){const _=na(n.pan.mag(),c,A.e({},Ka,e||{})),b=n.pan.mult(_.amount/n.pan.mag()),T=this._map.cameraHelper.handlePanInertia(b,this._map.transform);f.center=T.easingCenter,f.offset=T.easingOffset,ga(f,_)}if(n.zoom){const _=na(n.zoom,c,Ju);f.zoom=this._map.transform.zoom+_.amount,ga(f,_)}if(n.bearing){const _=na(n.bearing,c,XA);f.bearing=this._map.transform.bearing+A.ae(_.amount,-179,179),ga(f,_)}if(n.pitch){const _=na(n.pitch,c,$c);f.pitch=this._map.transform.pitch+_.amount,ga(f,_)}if(n.roll){const _=na(n.roll,c,mo);f.roll=this._map.transform.roll+A.ae(_.amount,-179,179),ga(f,_)}if(f.zoom||f.bearing){const _=n.pinchAround===void 0?n.around:n.pinchAround;f.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),A.e(f,{noMoveStart:!0})}}function ga(m,e){(!m.duration||m.duration<e.duration)&&(m.duration=e.duration,m.easing=e.easing)}function na(m,e,n){const{maxSpeed:c,linearity:f,deceleration:_}=n,b=A.ae(m*f/(e/1e3),-c,c),T=Math.abs(b)/(_*f);return{easing:n.easing,duration:1e3*T,amount:b*(T/2)}}class _i extends A.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,c,f={}){c=c instanceof MouseEvent?c:new MouseEvent(e,c);const _=W.mousePos(n.getCanvas(),c),b=n.unproject(_);super(e,A.e({point:_,lngLat:b,originalEvent:c},f)),this._defaultPrevented=!1,this.target=n}}class yo extends A.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,c){const f=e==="touchend"?c.changedTouches:c.touches,_=W.touchPos(n.getCanvasContainer(),f),b=_.map(U=>n.unproject(U)),T=_.reduce((U,Q,O,H)=>U.add(Q.div(H.length)),new A.P(0,0));super(e,{points:_,point:T,lngLats:b,lngLat:n.unproject(T),originalEvent:c}),this._defaultPrevented=!1}}class Pi extends A.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,c){super(e,{originalEvent:c}),this._defaultPrevented=!1}}class ma{constructor(e,n){this._map=e,this._clickTolerance=n.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Pi(e.type,this._map,e))}mousedown(e,n){return this._mousedownPos=n,this._firePreventable(new _i(e.type,this._map,e))}mouseup(e){this._map.fire(new _i(e.type,this._map,e))}click(e,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new _i(e.type,this._map,e))}dblclick(e){return this._firePreventable(new _i(e.type,this._map,e))}mouseover(e){this._map.fire(new _i(e.type,this._map,e))}mouseout(e){this._map.fire(new _i(e.type,this._map,e))}touchstart(e){return this._firePreventable(new yo(e.type,this._map,e))}touchmove(e){this._map.fire(new yo(e.type,this._map,e))}touchend(e){this._map.fire(new yo(e.type,this._map,e))}touchcancel(e){this._map.fire(new yo(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _o{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new _i(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new _i(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rn{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(A.P.convert(e),this._map.terrain)}}class ds{constructor(e,n){this._map=e,this._tr=new rn(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,n){this.isEnabled()&&e.shiftKey&&e.button===0&&(W.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(e,n){if(!this._active)return;const c=n;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=c,this._box||(this._box=W.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const _=Math.min(f.x,c.x),b=Math.max(f.x,c.x),T=Math.min(f.y,c.y),U=Math.max(f.y,c.y);W.setTransform(this._box,`translate(${_}px,${T}px)`),this._box.style.width=b-_+"px",this._box.style.height=U-T+"px"}mouseupWindow(e,n){if(!this._active||e.button!==0)return;const c=this._startPos,f=n;if(this.reset(),W.suppressClick(),c.x!==f.x||c.y!==f.y)return this._map.fire(new A.l("boxzoomend",{originalEvent:e})),{cameraAnimation:_=>_.fitScreenCoordinates(c,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(W.remove(this._box),this._box=null),W.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new A.l(e,{originalEvent:n}))}}function Jc(m,e){if(m.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${e.length}`);const n={};for(let c=0;c<m.length;c++)n[m[c].identifier]=e[c];return n}class vd{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),c.length===this.numTouches&&(this.centroid=function(f){const _=new A.P(0,0);for(const b of f)_._add(b);return _.div(f.length)}(n),this.touches=Jc(c,n)))}touchmove(e,n,c){if(this.aborted||!this.centroid)return;const f=Jc(c,n);for(const _ in this.touches){const b=f[_];(!b||b.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(e,n,c){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class eh{constructor(e){this.singleTap=new vd(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,n,c){this.singleTap.touchstart(e,n,c)}touchmove(e,n,c){this.singleTap.touchmove(e,n,c)}touchend(e,n,c){const f=this.singleTap.touchend(e,n,c);if(f){const _=e.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(f)<30;if(_&&b||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class xd{constructor(e){this._tr=new rn(e),this._zoomIn=new eh({numTouches:1,numTaps:2}),this._zoomOut=new eh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,n,c){this._zoomIn.touchstart(e,n,c),this._zoomOut.touchstart(e,n,c)}touchmove(e,n,c){this._zoomIn.touchmove(e,n,c),this._zoomOut.touchmove(e,n,c)}touchend(e,n,c){const f=this._zoomIn.touchend(e,n,c),_=this._zoomOut.touchend(e,n,c),b=this._tr;return f?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(f)},{originalEvent:e})}):_?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(_)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class In{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const n=this._moveFunction(...e);if(n.bearingDelta||n.pitchDelta||n.rollDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(e,n){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(n)?n[0]:n,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,n){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const f=Array.isArray(n)?n[0]:n;return!this._moved&&f.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(c,f))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&W.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const lA={0:1,2:2};class bi{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const n=W.mouseButton(e);this._eventButton=n}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(n,c){const f=lA[c];return n.buttons===void 0||(n.buttons&f)!==f}(e,this._eventButton)}isValidEndEvent(e){return W.mouseButton(e)===this._eventButton}}class It{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class eu{constructor(e=new bi({checkCorrectEvent:()=>!0}),n=new It){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=n}_executeRelevantHandler(e,n,c){return e instanceof MouseEvent?n(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?c(e):void 0}startMove(e){this._executeRelevantHandler(e,n=>this.mouseMoveStateManager.startMove(n),n=>this.oneFingerTouchMoveStateManager.startMove(n))}endMove(e){this._executeRelevantHandler(e,n=>this.mouseMoveStateManager.endMove(n),n=>this.oneFingerTouchMoveStateManager.endMove(n))}isValidStartEvent(e){return this._executeRelevantHandler(e,n=>this.mouseMoveStateManager.isValidStartEvent(n),n=>this.oneFingerTouchMoveStateManager.isValidStartEvent(n))}isValidMoveEvent(e){return this._executeRelevantHandler(e,n=>this.mouseMoveStateManager.isValidMoveEvent(n),n=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(n))}isValidEndEvent(e){return this._executeRelevantHandler(e,n=>this.mouseMoveStateManager.isValidEndEvent(n),n=>this.oneFingerTouchMoveStateManager.isValidEndEvent(n))}}const Za=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=e=>{e.preventDefault()}};class cA{constructor(e,n){this._clickTolerance=e.clickTolerance||1,this._map=n,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new A.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,n,c){return this._calculateTransform(e,n,c)}touchmove(e,n,c){if(this._active){if(!this._shouldBePrevented(c.length))return e.preventDefault(),this._calculateTransform(e,n,c);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,n,c){this._calculateTransform(e,n,c),this._active&&this._shouldBePrevented(c.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,c){c.length>0&&(this._active=!0);const f=Jc(c,n),_=new A.P(0,0),b=new A.P(0,0);let T=0;for(const Q in f){const O=f[Q],H=this._touches[Q];H&&(_._add(O),b._add(O.sub(H)),T++,f[Q]=O)}if(this._touches=f,this._shouldBePrevented(T)||!b.mag())return;const U=b.div(T);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(T),panDelta:U}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,n,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([n[0],n[1]]))}touchmove(e,n,c){if(!this._firstTwoTouches)return;e.preventDefault();const[f,_]=this._firstTwoTouches,b=Ks(c,n,f),T=Ks(c,n,_);if(!b||!T)return;const U=this._aroundCenter?null:b.add(T).div(2);return this._move([b,T],U,e)}touchend(e,n,c){if(!this._firstTwoTouches)return;const[f,_]=this._firstTwoTouches,b=Ks(c,n,f),T=Ks(c,n,_);b&&T||(this._active&&W.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ks(m,e,n){for(let c=0;c<m.length;c++)if(m[c].identifier===n)return e[c]}function th(m,e){return Math.log(m/e)/Math.LN2}class Er extends uA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,n){const c=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(th(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:th(this._distance,c),pinchAround:n}}}function ps(m,e){return 180*m.angleWith(e)/Math.PI}class tu extends uA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,n,c){const f=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ps(this._vector,f),pinchAround:n}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const n=25/(Math.PI*this._minDiameter)*360,c=ps(e,this._startVector);return Math.abs(c)<n}}function vo(m){return Math.abs(m.y)>Math.abs(m.x)}class rh extends uA{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,n,c){super.touchstart(e,n,c),this._currentTouchCount=c.length}_start(e){this._lastPoints=e,vo(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,n,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const f=e[0].sub(this._lastPoints[0]),_=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,_,c.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(f.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(e,n,c){if(this._valid!==void 0)return this._valid;const f=e.mag()>=2,_=n.mag()>=2;if(!f&&!_)return;if(!f||!_)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const b=e.y>0==n.y>0;return vo(e)&&vo(n)&&b}}const kl={panStep:100,bearingStep:15,pitchStep:10};class ru{constructor(e){this._tr=new rn(e);const n=kl;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let n=0,c=0,f=0,_=0,b=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?c=-1:(e.preventDefault(),_=-1);break;case 39:e.shiftKey?c=1:(e.preventDefault(),_=1);break;case 38:e.shiftKey?f=1:(e.preventDefault(),b=-1);break;case 40:e.shiftKey?f=-1:(e.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(c=0,f=0),{cameraAnimation:T=>{const U=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:YA,zoom:n?Math.round(U.zoom)+n*(e.shiftKey?2:1):U.zoom,bearing:U.bearing+c*this._bearingStep,pitch:U.pitch+f*this._pitchStep,offset:[-_*this._panStep,-b*this._panStep],center:U.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function YA(m){return m*(2-m)}const Hl=4.000244140625;class nh{constructor(e,n){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=e,this._tr=new rn(e),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const c=X.now(),f=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,n!==0&&n%Hl==0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(f*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=W.mousePos(this._map.getCanvas(),e),c=this._tr;this._aroundPoint=this._aroundCenter?c.transform.locationToScreenPoint(A.Q.convert(c.center)):n,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const T=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=T),typeof this._targetZoom=="number"&&(this._targetZoom+=T)}if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Hl?this._wheelZoomRate:this._defaultZoomRate;let U=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&U!==0&&(U=1/U);const Q=typeof this._targetZoom!="number"?e.scale:A.aI(this._targetZoom);this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,A.ab(Q*U))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,c=this._startZoom,f=this._easing;let _,b=!1;if(this._type==="wheel"&&c&&f){const T=X.now()-this._lastWheelEventTime,U=Math.min((T+5)/200,1),Q=f(U);_=A.B.number(c,n,Q),U<1?this._frameId||(this._frameId=!0):b=!0}else _=n,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=_,{noInertia:!0,needsRenderFrame:!b,zoomDelta:_-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=A.cb;if(this._prevEase){const c=this._prevEase,f=(X.now()-c.start)/c.duration,_=c.easing(f+.01)-c.easing(f),b=.27/Math.sqrt(_*_+1e-4)*.01,T=Math.sqrt(.0729-b*b);n=A.c9(b,T,.25,1)}return this._prevEase={start:X.now(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class WA{constructor(e,n){this._clickZoom=e,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Af{constructor(e){this._tr=new rn(e),this.reset()}reset(){this._active=!1}dblclick(e,n){return e.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(n)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nl{constructor(){this._tap=new eh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,n,c){if(!this._swipePoint)if(this._tapTime){const f=n[0],_=e.timeStamp-this._tapTime<500,b=this._tapPoint.dist(f)<30;_&&b?c.length>0&&(this._swipePoint=f,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(e,n,c)}touchmove(e,n,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const f=n[0],_=f.y-this._swipePoint.y;return this._swipePoint=f,e.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(e,n,c)}touchend(e,n,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const f=this._tap.touchend(e,n,c);f&&(this._tapTime=e.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gs{constructor(e,n,c){this._el=e,this._mousePan=n,this._touchPan=c}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class un{constructor(e,n,c,f){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=n,this._mousePitch=c,this._mouseRoll=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Sa{constructor(e,n,c,f){this._el=e,this._touchZoom=n,this._touchRotate=c,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class $A{constructor(e,n){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=n,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=W.create("div","maplibregl-cooperative-gesture-screen",e);let n=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(n=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=n,this._container.appendChild(f);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=c,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(W.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,n){this._enabled&&(this._map.fire(new A.l("cooperativegestureprevented",{gestureType:e,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const hA=m=>m.zoom||m.drag||m.roll||m.pitch||m.rotate;class Zs extends A.l{}function qa(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta||m.rollDelta}class jl{constructor(e,n){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,_)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const b=f.type==="renderFrame"?void 0:f,T={needsRenderFrame:!1},U={},Q={};for(const{handlerName:z,handler:Y,allowed:ee}of this._handlers){if(!Y.isEnabled())continue;let Ae;if(this._blockedByActive(Q,ee,z))Y.reset();else if(Y[_||f.type]){if(A.cc(f,_||f.type)){const oe=W.mousePos(this._map.getCanvas(),f);Ae=Y[_||f.type](f,oe)}else if(A.cd(f,_||f.type)){const oe=this._getMapTouches(f.touches),ce=W.touchPos(this._map.getCanvas(),oe);Ae=Y[_||f.type](f,ce,oe)}else A.ce(_||f.type)||(Ae=Y[_||f.type](f));this.mergeHandlerResult(T,U,Ae,z,b),Ae&&Ae.needsRenderFrame&&this._triggerRenderFrame()}(Ae||Y.isActive())&&(Q[z]=Y)}const O={};for(const z in this._previousActiveHandlers)Q[z]||(O[z]=b);this._previousActiveHandlers=Q,(Object.keys(O).length||qa(T))&&(this._changes.push([T,U,O]),this._triggerRenderFrame()),(Object.keys(Q).length||qa(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=T;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new fs(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,_,b]of this._listeners)W.addEventListener(f,_,f===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(const[e,n,c]of this._listeners)W.removeEventListener(e,n,e===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(e){const n=this._map,c=n.getCanvasContainer();this._add("mapEvent",new ma(n,e));const f=n.boxZoom=new ds(n,e);this._add("boxZoom",f),e.interactive&&e.boxZoom&&f.enable();const _=n.cooperativeGestures=new $A(n,e.cooperativeGestures);this._add("cooperativeGestures",_),e.cooperativeGestures&&_.enable();const b=new xd(n),T=new Af(n);n.doubleClickZoom=new WA(T,b),this._add("tapZoom",b),this._add("clickZoom",T),e.interactive&&e.doubleClickZoom&&n.doubleClickZoom.enable();const U=new Nl;this._add("tapDragZoom",U);const Q=n.touchPitch=new rh(n);this._add("touchPitch",Q),e.interactive&&e.touchPitch&&n.touchPitch.enable(e.touchPitch);const O=()=>n.project(n.getCenter()),H=function({enable:_e,clickTolerance:we,aroundCenter:Ue=!0,minPixelCenterThreshold:Ee=100,rotateDegreesPerPixelMoved:Ge=.8},je){const rt=new bi({checkCorrectEvent:it=>W.mouseButton(it)===0&&it.ctrlKey||W.mouseButton(it)===2&&!it.ctrlKey});return new In({clickTolerance:we,move:(it,et)=>{const Et=je();if(Ue&&Math.abs(Et.y-it.y)>Ee)return{bearingDelta:A.ca(new A.P(it.x,et.y),et,Et)};let Bt=(et.x-it.x)*Ge;return Ue&&et.y<Et.y&&(Bt=-Bt),{bearingDelta:Bt}},moveStateManager:rt,enable:_e,assignEvents:Za})}(e,O),z=function({enable:_e,clickTolerance:we,pitchDegreesPerPixelMoved:Ue=-.5}){const Ee=new bi({checkCorrectEvent:Ge=>W.mouseButton(Ge)===0&&Ge.ctrlKey||W.mouseButton(Ge)===2});return new In({clickTolerance:we,move:(Ge,je)=>({pitchDelta:(je.y-Ge.y)*Ue}),moveStateManager:Ee,enable:_e,assignEvents:Za})}(e),Y=function({enable:_e,clickTolerance:we,rollDegreesPerPixelMoved:Ue=.3},Ee){const Ge=new bi({checkCorrectEvent:je=>W.mouseButton(je)===2&&je.ctrlKey});return new In({clickTolerance:we,move:(je,rt)=>{const it=Ee();let et=(rt.x-je.x)*Ue;return rt.y<it.y&&(et=-et),{rollDelta:et}},moveStateManager:Ge,enable:_e,assignEvents:Za})}(e,O);n.dragRotate=new un(e,H,z,Y),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Y,["mousePitch"]),e.interactive&&e.dragRotate&&n.dragRotate.enable();const ee=function({enable:_e,clickTolerance:we}){const Ue=new bi({checkCorrectEvent:Ee=>W.mouseButton(Ee)===0&&!Ee.ctrlKey});return new In({clickTolerance:we,move:(Ee,Ge)=>({around:Ge,panDelta:Ge.sub(Ee)}),activateOnStart:!0,moveStateManager:Ue,enable:_e,assignEvents:Za})}(e),Ae=new cA(e,n);n.dragPan=new gs(c,ee,Ae),this._add("mousePan",ee),this._add("touchPan",Ae,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&n.dragPan.enable(e.dragPan);const oe=new tu,ce=new Er;n.touchZoomRotate=new Sa(c,ce,oe,U),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&n.touchZoomRotate.enable(e.touchZoomRotate);const fe=n.scrollZoom=new nh(n,()=>this._triggerRenderFrame());this._add("scrollZoom",fe,["mousePan"]),e.interactive&&e.scrollZoom&&n.scrollZoom.enable(e.scrollZoom);const me=n.keyboard=new ru(n);this._add("keyboard",me),e.interactive&&e.keyboard&&n.keyboard.enable(),this._add("blockableMapEvent",new _o(n))}_add(e,n,c){this._handlers.push({handlerName:e,handler:n,allowed:c}),this._handlersById[e]=n}stop(e){if(!this._updatingCamera){for(const{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!hA(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,n,c){for(const f in e)if(f!==c&&(!n||n.indexOf(f)<0))return!0;return!1}_getMapTouches(e){const n=[];for(const c of e)this._el.contains(c.target)&&n.push(c);return n}mergeHandlerResult(e,n,c,f,_){if(!c)return;A.e(e,c);const b={handlerName:f,originalEvent:c.originalEvent||_};c.zoomDelta!==void 0&&(n.zoom=b),c.panDelta!==void 0&&(n.drag=b),c.rollDelta!==void 0&&(n.roll=b),c.pitchDelta!==void 0&&(n.pitch=b),c.bearingDelta!==void 0&&(n.rotate=b)}_applyChanges(){const e={},n={},c={};for(const[f,_,b]of this._changes)f.panDelta&&(e.panDelta=(e.panDelta||new A.P(0,0))._add(f.panDelta)),f.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+f.pitchDelta),f.rollDelta&&(e.rollDelta=(e.rollDelta||0)+f.rollDelta),f.around!==void 0&&(e.around=f.around),f.pinchAround!==void 0&&(e.pinchAround=f.pinchAround),f.noInertia&&(e.noInertia=f.noInertia),A.e(n,_),A.e(c,b);this._updateMapTransform(e,n,c),this._changes=[]}_updateMapTransform(e,n,c){const f=this._map,_=f._getTransformForUpdate(),b=f.terrain;if(!(qa(e)||b&&this._terrainMovement))return this._fireEvents(n,c,!0);f._stop(!0);let{panDelta:T,zoomDelta:U,bearingDelta:Q,pitchDelta:O,rollDelta:H,around:z,pinchAround:Y}=e;Y!==void 0&&(z=Y),z=z||f.transform.centerPoint,b&&!_.isPointOnMapSurface(z)&&(z=_.centerPoint);const ee={panDelta:T,zoomDelta:U,rollDelta:H,pitchDelta:O,bearingDelta:Q,around:z};this._map.cameraHelper.useGlobeControls&&!_.isPointOnMapSurface(z)&&(z=_.centerPoint);const Ae=z.distSqr(_.centerPoint)<.01?_.center:_.screenPointToLocation(T?z.sub(T):z);b?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,_),this._terrainMovement||!n.drag&&!n.zoom?n.drag&&this._terrainMovement?_.setCenter(_.screenPointToLocation(_.centerPoint.sub(T))):this._map.cameraHelper.handleMapControlsPan(ee,_,Ae):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ee,_,Ae))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ee,_),this._map.cameraHelper.handleMapControlsPan(ee,_,Ae)),f._applyUpdatedTransform(_),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,c,!0)}_fireEvents(e,n,c){const f=hA(this._eventsInProgress),_=hA(e),b={};for(const H in e){const{originalEvent:z}=e[H];this._eventsInProgress[H]||(b[`${H}start`]=z),this._eventsInProgress[H]=e[H]}!f&&_&&this._fireEvent("movestart",_.originalEvent);for(const H in b)this._fireEvent(H,b[H]);_&&this._fireEvent("move",_.originalEvent);for(const H in e){const{originalEvent:z}=e[H];this._fireEvent(H,z)}const T={};let U;for(const H in this._eventsInProgress){const{handlerName:z,originalEvent:Y}=this._eventsInProgress[H];this._handlersById[z].isActive()||(delete this._eventsInProgress[H],U=n[z]||Y,T[`${H}end`]=U)}for(const H in T)this._fireEvent(H,T[H]);const Q=hA(this._eventsInProgress),O=(f||_)&&!Q;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const H=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&H.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(H)}if(c&&O){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!H||!H.essential&&X.prefersReducedMotion?(this._map.fire(new A.l("moveend",{originalEvent:U})),z(this._map.getBearing())&&this._map.resetNorth()):(z(H.bearing||this._map.getBearing())&&(H.bearing=0),H.freezeElevation=!0,this._map.easeTo(H,{originalEvent:U})),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new A.l(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Zs("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Fa extends A.E{constructor(e,n,c){super(),this._renderFrameCallback=()=>{const f=Math.min((X.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=c.bearingSnap,this.cameraHelper=n,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,n){e.apply(this.transform),this.transform=e,this.cameraHelper=n}getCenter(){return new A.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(e,n){return this.jumpTo({center:e},n)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,n){return this.jumpTo({elevation:e},n),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,n,c){return e=A.P.convert(e).mult(-1),this.panTo(this.transform.center,A.e({offset:e},n),c)}panTo(e,n,c){return this.easeTo(A.e({center:e},n),c)}getZoom(){return this.transform.zoom}setZoom(e,n){return this.jumpTo({zoom:e},n),this}zoomTo(e,n,c){return this.easeTo(A.e({zoom:e},n),c)}zoomIn(e,n){return this.zoomTo(this.getZoom()+1,e,n),this}zoomOut(e,n){return this.zoomTo(this.getZoom()-1,e,n),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,n){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new A.l("movestart",n)).fire(new A.l("move",n)).fire(new A.l("moveend",n))),this}getBearing(){return this.transform.bearing}setBearing(e,n){return this.jumpTo({bearing:e},n),this}getPadding(){return this.transform.padding}setPadding(e,n){return this.jumpTo({padding:e},n),this}rotateTo(e,n,c){return this.easeTo(A.e({bearing:e},n),c)}resetNorth(e,n){return this.rotateTo(0,A.e({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(A.e({bearing:0,pitch:0,roll:0,duration:1e3},e),n),this}snapToNorth(e,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,n):this}getPitch(){return this.transform.pitch}setPitch(e,n){return this.jumpTo({pitch:e},n),this}getRoll(){return this.transform.roll}setRoll(e,n){return this.jumpTo({roll:e},n),this}cameraForBounds(e,n){e=bt.convert(e).adjustAntiMeridian();const c=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),c,n)}_cameraForBoxAndBearing(e,n,c,f){const _={top:0,bottom:0,right:0,left:0};if(typeof(f=A.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const Q=f.padding;f.padding={top:Q,bottom:Q,right:Q,left:Q}}const b=A.e(_,f.padding);f.padding=b;const T=this.transform,U=new bt(e,n);return this.cameraHelper.cameraForBoxAndBearing(f,b,U,c,T)}fitBounds(e,n,c){return this._fitInternal(this.cameraForBounds(e,n),n,c)}fitScreenCoordinates(e,n,c,f,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(A.P.convert(e)),this.transform.screenPointToLocation(A.P.convert(n)),c,f),f,_)}_fitInternal(e,n,c){return e?(delete(n=A.e(e,n)).padding,n.linear?this.easeTo(n,c):this.flyTo(n,c)):this}jumpTo(e,n){this.stop();const c=this._getTransformForUpdate();let f=!1,_=!1,b=!1;const T=c.zoom;this.cameraHelper.handleJumpToCenterZoom(c,e);const U=c.zoom!==T;return"elevation"in e&&c.elevation!==+e.elevation&&c.setElevation(+e.elevation),"bearing"in e&&c.bearing!==+e.bearing&&(f=!0,c.setBearing(+e.bearing)),"pitch"in e&&c.pitch!==+e.pitch&&(_=!0,c.setPitch(+e.pitch)),"roll"in e&&c.roll!==+e.roll&&(b=!0,c.setRoll(+e.roll)),e.padding==null||c.isPaddingEqual(e.padding)||c.setPadding(e.padding),this._applyUpdatedTransform(c),this.fire(new A.l("movestart",n)).fire(new A.l("move",n)),U&&this.fire(new A.l("zoomstart",n)).fire(new A.l("zoom",n)).fire(new A.l("zoomend",n)),f&&this.fire(new A.l("rotatestart",n)).fire(new A.l("rotate",n)).fire(new A.l("rotateend",n)),_&&this.fire(new A.l("pitchstart",n)).fire(new A.l("pitch",n)).fire(new A.l("pitchend",n)),b&&this.fire(new A.l("rollstart",n)).fire(new A.l("roll",n)).fire(new A.l("rollend",n)),this.fire(new A.l("moveend",n))}calculateCameraOptionsFromTo(e,n,c,f=0){const _=A.$.fromLngLat(e,n),b=A.$.fromLngLat(c,f),T=b.x-_.x,U=b.y-_.y,Q=b.z-_.z,O=Math.hypot(T,U,Q);if(O===0)throw new Error("Can't calculate camera options with same From and To");const H=Math.hypot(T,U),z=A.ab(this.transform.cameraToCenterDistance/O/this.transform.tileSize),Y=180*Math.atan2(T,-U)/Math.PI;let ee=180*Math.acos(H/O)/Math.PI;return ee=Q<0?90-ee:90+ee,{center:b.toLngLat(),elevation:f,zoom:z,pitch:ee,bearing:Y}}calculateCameraOptionsFromCameraLngLatAltRotation(e,n,c,f,_){const b=this.transform.calculateCenterFromCameraLngLatAlt(e,n,c,f);return{center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:c,pitch:f,roll:_}}easeTo(e,n){this._stop(!1,e.easeId),((e=A.e({offset:[0,0],duration:500,easing:A.cb},e)).animate===!1||!e.essential&&X.prefersReducedMotion)&&(e.duration=0);const c=this._getTransformForUpdate(),f=this.getBearing(),_=c.pitch,b=c.roll,T="bearing"in e?this._normalizeBearing(e.bearing,f):f,U="pitch"in e?+e.pitch:_,Q="roll"in e?this._normalizeBearing(e.roll,b):b,O="padding"in e?e.padding:c.padding,H=A.P.convert(e.offset);let z,Y;e.around&&(z=A.Q.convert(e.around),Y=c.locationToScreenPoint(z));const ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ae=this.cameraHelper.handleEaseTo(c,{bearing:T,pitch:U,roll:Q,padding:O,around:z,aroundPoint:Y,offsetAsPoint:H,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||f!==T,this._pitching=this._pitching||U!==_,this._rolling=this._rolling||Q!==b,this._padding=!c.isPaddingEqual(O),this._zooming=this._zooming||Ae.isZooming,this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,ee),this.terrain&&this._prepareElevation(Ae.elevationCenter),this._ease(oe=>{Ae.easeFunc(oe),this.terrain&&!e.freezeElevation&&this._updateElevation(oe),this._applyUpdatedTransform(c),this._fireMoveEvents(n)},oe=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n,oe)},e),this}_prepareEase(e,n,c={}){this._moving=!0,n||c.moving||this.fire(new A.l("movestart",e)),this._zooming&&!c.zooming&&this.fire(new A.l("zoomstart",e)),this._rotating&&!c.rotating&&this.fire(new A.l("rotatestart",e)),this._pitching&&!c.pitching&&this.fire(new A.l("pitchstart",e)),this._rolling&&!c.rolling&&this.fire(new A.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&n!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(c-(n-(c*e+this._elevationStart))/(1-e)),this._elevationTarget=n}this.transform.setElevation(A.B.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};const n=e.getCameraLngLat(),c=e.getCameraAltitude(),f=this.terrain?this.terrain.getElevationForLngLatZoom(n,e.zoom):0;if(c<f){const _=this.calculateCameraOptionsFromTo(n,f,e.center,e.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(e){const n=[];if(n.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&n.push(f=>this.transformCameraUpdate(f)),!n.length)return;const c=e.clone();for(const f of n){const _=c.clone(),{center:b,zoom:T,roll:U,pitch:Q,bearing:O,elevation:H}=f(_);b&&_.setCenter(b),H!==void 0&&_.setElevation(H),T!==void 0&&_.setZoom(T),U!==void 0&&_.setRoll(U),Q!==void 0&&_.setPitch(Q),O!==void 0&&_.setBearing(O),c.apply(_)}this.transform.apply(c)}_fireMoveEvents(e){this.fire(new A.l("move",e)),this._zooming&&this.fire(new A.l("zoom",e)),this._rotating&&this.fire(new A.l("rotate",e)),this._pitching&&this.fire(new A.l("pitch",e)),this._rolling&&this.fire(new A.l("roll",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const c=this._zooming,f=this._rotating,_=this._pitching,b=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,c&&this.fire(new A.l("zoomend",e)),f&&this.fire(new A.l("rotateend",e)),_&&this.fire(new A.l("pitchend",e)),b&&this.fire(new A.l("rollend",e)),this.fire(new A.l("moveend",e))}flyTo(e,n){if(!e.essential&&X.prefersReducedMotion){const et=A.O(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(et,n)}this.stop(),e=A.e({offset:[0,0],speed:1.2,curve:1.42,easing:A.cb},e);const c=this._getTransformForUpdate(),f=c.bearing,_=c.pitch,b=c.roll,T=c.padding,U="bearing"in e?this._normalizeBearing(e.bearing,f):f,Q="pitch"in e?+e.pitch:_,O="roll"in e?this._normalizeBearing(e.roll,b):b,H="padding"in e?e.padding:c.padding,z=A.P.convert(e.offset);let Y=c.centerPoint.add(z);const ee=c.screenPointToLocation(Y),Ae=this.cameraHelper.handleFlyTo(c,{bearing:U,pitch:Q,roll:O,padding:H,locationAtOffset:ee,offsetAsPoint:z,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let oe=e.curve;const ce=Math.max(c.width,c.height),fe=ce/Ae.scaleOfZoom,me=Ae.pixelPathLength;typeof Ae.scaleOfMinZoom=="number"&&(oe=Math.sqrt(ce/Ae.scaleOfMinZoom/me*2));const _e=oe*oe;function we(et){const Et=(fe*fe-ce*ce+(et?-1:1)*_e*_e*me*me)/(2*(et?fe:ce)*_e*me);return Math.log(Math.sqrt(Et*Et+1)-Et)}function Ue(et){return(Math.exp(et)-Math.exp(-et))/2}function Ee(et){return(Math.exp(et)+Math.exp(-et))/2}const Ge=we(!1);let je=function(et){return Ee(Ge)/Ee(Ge+oe*et)},rt=function(et){return ce*((Ee(Ge)*(Ue(Et=Ge+oe*et)/Ee(Et))-Ue(Ge))/_e)/me;var Et},it=(we(!0)-Ge)/oe;if(Math.abs(me)<2e-6||!isFinite(it)){if(Math.abs(ce-fe)<1e-6)return this.easeTo(e,n);const et=fe<ce?-1:1;it=Math.abs(Math.log(fe/ce))/oe,rt=()=>0,je=Et=>Math.exp(et*oe*Et)}return e.duration="duration"in e?+e.duration:1e3*it/("screenSpeed"in e?+e.screenSpeed/oe:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=f!==U,this._pitching=Q!==_,this._rolling=O!==b,this._padding=!c.isPaddingEqual(H),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(Ae.targetCenter),this._ease(et=>{const Et=et*it,Bt=1/je(Et),lt=rt(Et);this._rotating&&c.setBearing(A.B.number(f,U,et)),this._pitching&&c.setPitch(A.B.number(_,Q,et)),this._rolling&&c.setRoll(A.B.number(b,O,et)),this._padding&&(c.interpolatePadding(T,H,et),Y=c.centerPoint.add(z)),Ae.easeFunc(et,Bt,lt,Y),this.terrain&&!e.freezeElevation&&this._updateElevation(et),this._applyUpdatedTransform(c),this._fireMoveEvents(n)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(n)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,n){var c;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,n)}return e||(c=this.handlers)===null||c===void 0||c.stop(!1),this}_ease(e,n,c){c.animate===!1||c.duration===0?(e(1),n()):(this._easeStart=X.now(),this._easeOptions=c,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=A.aL(e,-180,180);const c=Math.abs(e-n);return Math.abs(e-360-n)<c&&(e-=360),Math.abs(e+360-n)<c&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(A.Q.convert(e),this.transform.tileZoom):null}}const fA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Nt{constructor(e=fA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=n=>{!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=W.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=W.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=W.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){W.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,n){const c=this._map._getUIString(`AttributionControl.${n}`);e.title=c,e.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const n=this._map.style.sourceCaches;for(const f in n){const _=n[f];if(_.used||_.usedForTerrain){const b=_.getSource();b.attribution&&e.indexOf(b.attribution)<0&&e.push(b.attribution)}}e=e.filter(f=>String(f).trim()),e.sort((f,_)=>f.length-_.length),e=e.filter((f,_)=>{for(let b=_+1;b<e.length;b++)if(e[b].indexOf(f)>=0)return!1;return!0});const c=e.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,e.length?(this._innerContainer.innerHTML=W.sanitize(c),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Jt{constructor(e={}){this._updateCompact=()=>{const n=this._container.children;if(n.length){const c=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=W.create("div","maplibregl-ctrl");const n=W.create("a","maplibregl-ctrl-logo");return n.target="_blank",n.rel="noopener nofollow",n.href="https://maplibre.org/",n.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),n.setAttribute("rel","noopener nofollow"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){W.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Vl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const n=++this._id;return this._queue.push({callback:e,id:n,cancelled:!1}),n}remove(e){const n=this._currentlyRunning,c=n?this._queue.concat(n):this._queue;for(const f of c)if(f.id===e)return void(f.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const n=this._currentlyRunning=this._queue;this._queue=[];for(const c of n)if(!c.cancelled&&(c.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var nu=A.aD([{name:"a_pos3d",type:"Int16",components:3}]);class xo extends A.E{constructor(e){super(),this._lastTilesetChange=X.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];const c={};for(const f of Le(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))c[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.terrainRttPosMatrix32f=new Float64Array(16),A.bO(f.terrainRttPosMatrix32f,0,A.Z,A.Z,0,0,1),this._tiles[f.key]=new Un(f,this.tileSize),this._lastTilesetChange=X.now());for(const f in this._tiles)c[f]||delete this._tiles[f]}freeRtt(e){for(const n in this._tiles){const c=this._tiles[n];(!e||c.tileID.equals(e)||c.tileID.isChildOf(e)||e.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,n){return n?this._getTerrainCoordsForTileRanges(e,n):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const n={};for(const c of this._renderableTilesKeys){const f=this._tiles[c].tileID,_=e.clone(),b=A.b2();if(f.canonical.equals(e.canonical))A.bO(b,0,A.Z,A.Z,0,0,1);else if(f.canonical.isChildOf(e.canonical)){const T=f.canonical.z-e.canonical.z,U=f.canonical.x-(f.canonical.x>>T<<T),Q=f.canonical.y-(f.canonical.y>>T<<T),O=A.Z>>T;A.bO(b,0,O,O,0,0,1),A.L(b,b,[-U*O,-Q*O,0])}else{if(!e.canonical.isChildOf(f.canonical))continue;{const T=e.canonical.z-f.canonical.z,U=e.canonical.x-(e.canonical.x>>T<<T),Q=e.canonical.y-(e.canonical.y>>T<<T),O=A.Z>>T;A.bO(b,0,A.Z,A.Z,0,0,1),A.L(b,b,[U*O,Q*O,0]),A.M(b,b,[1/2**T,1/2**T,0])}}_.terrainRttPosMatrix32f=new Float32Array(b),n[c]=_}return n}_getTerrainCoordsForTileRanges(e,n){const c={};for(const f of this._renderableTilesKeys){const _=this._tiles[f].tileID;if(!this._isWithinTileRanges(_,n))continue;const b=e.clone(),T=A.b2();if(_.canonical.z===e.canonical.z){const U=e.canonical.x-_.canonical.x,Q=e.canonical.y-_.canonical.y;A.bO(T,0,A.Z,A.Z,0,0,1),A.L(T,T,[U*A.Z,Q*A.Z,0])}else if(_.canonical.z>e.canonical.z){const U=_.canonical.z-e.canonical.z,Q=_.canonical.x-(_.canonical.x>>U<<U),O=_.canonical.y-(_.canonical.y>>U<<U),H=e.canonical.x-(_.canonical.x>>U),z=e.canonical.y-(_.canonical.y>>U),Y=A.Z>>U;A.bO(T,0,Y,Y,0,0,1),A.L(T,T,[-Q*Y+H*A.Z,-O*Y+z*A.Z,0])}else{const U=e.canonical.z-_.canonical.z,Q=e.canonical.x-(e.canonical.x>>U<<U),O=e.canonical.y-(e.canonical.y>>U<<U),H=(e.canonical.x>>U)-_.canonical.x,z=(e.canonical.y>>U)-_.canonical.y,Y=A.Z<<U;A.bO(T,0,Y,Y,0,0,1),A.L(T,T,[Q*A.Z+H*Y,O*A.Z+z*Y,0])}b.terrainRttPosMatrix32f=new Float32Array(T),c[f]=b}return c}getSourceTile(e,n){const c=this.sourceCache._source;let f=e.overscaledZ-this.deltaZoom;if(f>c.maxzoom&&(f=c.maxzoom),f<c.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(f).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!_||!_.dem)&&n)for(;f>=c.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(e.scaledTo(f--).key);return _}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,n){return n[e.canonical.z]&&e.canonical.x>=n[e.canonical.z].minTileX&&e.canonical.x<=n[e.canonical.z].maxTileX&&e.canonical.y>=n[e.canonical.z].minTileY&&e.canonical.y<=n[e.canonical.z].maxTileY}}class Bi{constructor(e,n,c){this._meshCache={},this.painter=e,this.sourceCache=new xo(n),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,n,c,f=A.Z){var _;if(!(n>=0&&n<f&&c>=0&&c<f))return 0;const b=this.getTerrainData(e),T=(_=b.tile)===null||_===void 0?void 0:_.dem;if(!T)return 0;const U=A.cf([],[n/f*A.Z,c/f*A.Z],b.u_terrain_matrix),Q=[U[0]*T.dim,U[1]*T.dim],O=Math.floor(Q[0]),H=Math.floor(Q[1]),z=Q[0]-O,Y=Q[1]-H;return T.get(O,H)*(1-z)*(1-Y)+T.get(O+1,H)*z*(1-Y)+T.get(O,H+1)*(1-z)*Y+T.get(O+1,H+1)*z*Y}getElevationForLngLatZoom(e,n){if(!A.cg(n,e.wrap()))return 0;const{tileID:c,mercatorX:f,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(e,n);return this.getElevation(c,f%A.Z,_%A.Z,A.Z)}getElevation(e,n,c,f=A.Z){return this.getDEMElevation(e,n,c,f)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const f=this.painter.context,_=new A.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new mt(f,_,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new mt(f,new A.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=A.at([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const f=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new mt(f,n.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),n.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const c=n&&n+n.tileID.key+e.key;if(c&&!this._demMatrixCache[c]){const f=this.sourceCache.sourceCache._source.maxzoom;let _=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=f?_=e.canonical.z-f:A.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const b=e.canonical.x-(e.canonical.x>>_<<_),T=e.canonical.y-(e.canonical.y>>_<<_),U=A.ch(new Float64Array(16),[1/(A.Z<<_),1/(A.Z<<_),0]);A.L(U,U,[b*A.Z,T*A.Z,0]),this._demMatrixCache[e.key]={matrix:U,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(e){const n=this.painter,c=n.width/devicePixelRatio,f=n.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new mt(n.context,{width:c,height:f,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new mt(n.context,{width:c,height:f,data:null},n.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(n.context.gl.NEAREST,n.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=n.context.createFramebuffer(c,f,!0,!1),this._fbo.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,c,f))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,b=0;_<this._coordsTextureSize;_++)for(let T=0;T<this._coordsTextureSize;T++,b+=4)n[b+0]=255&T,n[b+1]=255&_,n[b+2]=T>>8<<4|_>>8,n[b+3]=0;const c=new A.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),f=new mt(e,c,e.gl.RGBA,{premultiply:!1});return f.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),c=this.painter.context,f=c.gl,_=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(_,T-b-1,1,1,f.RGBA,f.UNSIGNED_BYTE,n),c.bindFramebuffer.set(null);const U=n[0]+(n[2]>>4<<8),Q=n[1]+((15&n[2])<<8),O=this.coordsIndex[255-n[3]],H=O&&this.sourceCache.getTileByID(O);if(!H)return null;const z=this._coordsTextureSize,Y=(1<<H.tileID.canonical.z)*z;return new A.$((H.tileID.canonical.x*z+U)/Y+H.tileID.wrap,(H.tileID.canonical.y*z+Q)/Y,this.getElevation(H.tileID,U,Q,z))}depthAtPoint(e){const n=new Uint8Array(4),c=this.painter.context,f=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,n),c.bindFramebuffer.set(null),(n[0]/16777216+n[1]/65536+n[2]/256+n[3])/256}getTerrainMesh(e){var n;const c=((n=this.painter.style.projection)===null||n===void 0?void 0:n.transitionState)>0,f=c&&e.canonical.y===0,_=c&&e.canonical.y===(1<<e.canonical.z)-1,b=`m_${f?"n":""}_${_?"s":""}`;if(this._meshCache[b])return this._meshCache[b];const T=this.painter.context,U=new A.ci,Q=new A.aH,O=this.meshSize,H=A.Z/O,z=O*O;for(let Ee=0;Ee<=O;Ee++)for(let Ge=0;Ge<=O;Ge++)U.emplaceBack(Ge*H,Ee*H,0);for(let Ee=0;Ee<z;Ee+=O+1)for(let Ge=0;Ge<O;Ge++)Q.emplaceBack(Ge+Ee,O+Ge+Ee+1,O+Ge+Ee+2),Q.emplaceBack(Ge+Ee,O+Ge+Ee+2,Ge+Ee+1);const Y=U.length,ee=Y+(O+1),Ae=(O+1)*O,oe=f?A.b9:0,ce=f?0:1,fe=_?A.ba:A.Z,me=_?0:1;for(let Ee=0;Ee<=O;Ee++)U.emplaceBack(Ee*H,oe,ce);for(let Ee=0;Ee<=O;Ee++)U.emplaceBack(Ee*H,fe,me);for(let Ee=0;Ee<O;Ee++)Q.emplaceBack(Ae+Ee,ee+Ee,ee+Ee+1),Q.emplaceBack(Ae+Ee,ee+Ee+1,Ae+Ee+1),Q.emplaceBack(0+Ee,Y+Ee+1,Y+Ee),Q.emplaceBack(0+Ee,0+Ee+1,Y+Ee+1);const _e=U.length,we=_e+2*(O+1);for(const Ee of[0,1])for(let Ge=0;Ge<=O;Ge++)for(const je of[0,1])U.emplaceBack(Ee*A.Z,Ge*H,je);for(let Ee=0;Ee<2*O;Ee+=2)Q.emplaceBack(_e+Ee,_e+Ee+1,_e+Ee+3),Q.emplaceBack(_e+Ee,_e+Ee+3,_e+Ee+2),Q.emplaceBack(we+Ee,we+Ee+3,we+Ee+1),Q.emplaceBack(we+Ee,we+Ee+2,we+Ee+3);const Ue=new ao(T.createVertexBuffer(U,nu.members),T.createIndexBuffer(Q),A.aG.simpleSegment(0,0,U.length,Q.length));return this._meshCache[b]=Ue,Ue}getMeshFrameDelta(e){return 2*Math.PI*A.br/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,n){var c;const{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(e,n);return(c=this.getMinMaxElevation(f).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(e){const n=this.getTerrainData(e).tile,c={minElevation:null,maxElevation:null};return n&&n.dem&&(c.minElevation=n.dem.min*this.exaggeration,c.maxElevation=n.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(e,n){const c=A.$.fromLngLat(e.wrap()),f=(1<<n)*A.Z,_=c.x*f,b=c.y*f,T=Math.floor(_/A.Z),U=Math.floor(b/A.Z);return{tileID:new A.Y(n,0,n,T,U),mercatorX:_,mercatorY:b}}}class ih{constructor(e,n,c){this._context=e,this._size=n,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const n=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new mt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),n.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),n.colorAttachment.set(c.texture),{id:e,fbo:n,texture:c,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(n=>e.id!==n),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const n of this._recentlyUsed)if(!this._objects[n].inUse)return this._objects[n];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}const Ci={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ah{constructor(e,n){this.painter=e,this.terrain=n,this.pool=new ih(e.context,30,n.sourceCache.tileSize*n.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,n){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(c=>!e._layers[c].isHidden(n)),this._coordsAscending={};for(const c in e.sourceCaches){this._coordsAscending[c]={};const f=e.sourceCaches[c].getVisibleCoordinates(),_=e.sourceCaches[c].getSource(),b=_ instanceof vr?_.terrainTileRanges:null;for(const T of f){const U=this.terrain.sourceCache.getTerrainCoords(T,b);for(const Q in U)this._coordsAscending[c][Q]||(this._coordsAscending[c][Q]=[]),this._coordsAscending[c][Q].push(U[Q])}}this._coordsAscendingStr={};for(const c of e._order){const f=e._layers[c],_=f.source;if(Ci[f.type]&&!this._coordsAscendingStr[_]){this._coordsAscendingStr[_]={};for(const b in this._coordsAscending[_])this._coordsAscendingStr[_][b]=this._coordsAscending[_][b].map(T=>T.key).sort().join()}}for(const c of this._renderableTiles)for(const f in this._coordsAscendingStr){const _=this._coordsAscendingStr[f][c.tileID.key];_&&_!==c.rttCoords[f]&&(c.rtt=[])}}renderLayer(e,n){if(e.isHidden(this.painter.transform.zoom))return!1;const c=Object.assign(Object.assign({},n),{isRenderingToTexture:!0}),f=e.type,_=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Ci[f]&&(this._prevType&&Ci[this._prevType]||this._stacks.push([]),this._prevType=f,this._stacks[this._stacks.length-1].push(e.id),!b))return!0;if(Ci[this._prevType]||Ci[f]&&b){this._prevType=f;const T=this._stacks.length-1,U=this._stacks[T]||[];for(const Q of this._renderableTiles){if(this.pool.isFull()&&(pa(this.painter,this.terrain,this._rttTiles,c),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Q),Q.rtt[T]){const H=this.pool.getObjectForId(Q.rtt[T].id);if(H.stamp===Q.rtt[T].stamp){this.pool.useObject(H);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),Q.rtt[T]={id:O.id,stamp:O.stamp},_.context.bindFramebuffer.set(O.fbo.framebuffer),_.context.clear({color:A.b7.transparent,stencil:0}),_.currentStencilSource=void 0;for(let H=0;H<U.length;H++){const z=_.style._layers[U[H]],Y=z.source?this._coordsAscending[z.source][Q.tileID.key]:[Q.tileID];_.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),_._renderTileClippingMasks(z,Y,!0),_.renderLayer(_,_.style.sourceCaches[z.source],z,Y,c),z.source&&(Q.rttCoords[z.source]=this._coordsAscendingStr[z.source][Q.tileID.key])}}return pa(this.painter,this.terrain,this._rttTiles,c),this._rttTiles=[],this.pool.freeAllObjects(),Ci[f]}return!1}}const Ua={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},tr=D,lr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:fA,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:A.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Jn={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class wo{constructor(e,n,c=!1){this.mousedown=_=>{this.startMove(_,W.mousePos(this.element,_)),W.addEventListener(window,"mousemove",this.mousemove),W.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=_=>{this.move(_,W.mousePos(this.element,_))},this.mouseup=_=>{this._rotatePitchHanlder.dragEnd(_),this.offTemp()},this.touchstart=_=>{_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=W.touchPos(this.element,_.targetTouches)[0],this.startMove(_,this._startPos),W.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),W.addEventListener(window,"touchend",this.touchend))},this.touchmove=_=>{_.targetTouches.length!==1?this.reset():(this._lastPos=W.touchPos(this.element,_.targetTouches)[0],this.move(_,this._lastPos))},this.touchend=_=>{_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=n;const f=new eu;this._rotatePitchHanlder=new In({clickTolerance:3,move:(_,b)=>{const T=n.getBoundingClientRect(),U=new A.P((T.bottom-T.top)/2,(T.right-T.left)/2);return{bearingDelta:A.ca(new A.P(_.x,b.y),b,U),pitchDelta:c?-.5*(b.y-_.y):void 0}},moveStateManager:f,enable:!0,assignEvents:()=>{}}),this.map=e,W.addEventListener(n,"mousedown",this.mousedown),W.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),W.addEventListener(n,"touchcancel",this.reset)}startMove(e,n){this._rotatePitchHanlder.dragStart(e,n),W.disableDrag()}move(e,n){const c=this.map,{bearingDelta:f,pitchDelta:_}=this._rotatePitchHanlder.dragMove(e,n)||{};f&&c.setBearing(c.getBearing()+f),_&&c.setPitch(c.getPitch()+_)}off(){const e=this.element;W.removeEventListener(e,"mousedown",this.mousedown),W.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),W.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),W.removeEventListener(window,"touchend",this.touchend),W.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){W.enableDrag(),W.removeEventListener(window,"mousemove",this.mousemove),W.removeEventListener(window,"mouseup",this.mouseup),W.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),W.removeEventListener(window,"touchend",this.touchend)}}let Gi;function ms(m,e,n){const c=new A.Q(m.lng,m.lat);if(m=new A.Q(m.lng,m.lat),e){const f=new A.Q(m.lng-360,m.lat),_=new A.Q(m.lng+360,m.lat),b=n.locationToScreenPoint(m).distSqr(e);n.locationToScreenPoint(f).distSqr(e)<b?m=f:n.locationToScreenPoint(_).distSqr(e)<b&&(m=_)}for(;Math.abs(m.lng-n.center.lng)>180;){const f=n.locationToScreenPoint(m);if(f.x>=0&&f.y>=0&&f.x<=n.width&&f.y<=n.height)break;m.lng>n.center.lng?m.lng-=360:m.lng+=360}return m.lng!==c.lng&&n.isPointOnMapSurface(n.locationToScreenPoint(m))?m:c}const bo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bo(m,e,n){const c=m.classList;for(const f in bo)c.remove(`maplibregl-${n}-anchor-${f}`);c.add(`maplibregl-${n}-anchor-${e}`)}class Ma extends A.E{constructor(e){if(super(),this._onKeyPress=n=>{const c=n.code,f=n.charCode||n.keyCode;c!=="Space"&&c!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=n=>{const c=n.originalEvent.target,f=this._element;this._popup&&(c===f||f.contains(c))&&this.togglePopup()},this._update=n=>{var c;if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((n==null?void 0:n.type)==="terrain"||(n==null?void 0:n.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ms(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||n&&n.type!=="moveend"||(this._pos=this._pos.round()),W.setTransform(this._element,`${bo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${_}`),X.frameAsync(new AbortController).then(()=>{this._updateOpacity(n&&n.type==="moveend")}).catch(()=>{})},this._onMove=n=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new A.l("dragstart"))),this.fire(new A.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new A.l("dragend")),this._state="inactive"},this._addDragHandler=n=>{this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e==null?void 0:e.opacity,e==null?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=A.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=W.create("div");const n=W.createNS("http://www.w3.org/2000/svg","svg"),c=41,f=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${c}px`),n.setAttributeNS(null,"width",`${f}px`),n.setAttributeNS(null,"viewBox",`0 0 ${f} ${c}`);const _=W.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const b=W.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");const T=W.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const U=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ce of U){const fe=W.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ce.rx),fe.setAttributeNS(null,"ry",ce.ry),T.appendChild(fe)}const Q=W.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"fill",this._color);const O=W.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Q.appendChild(O);const H=W.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const z=W.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(z);const Y=W.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const ee=W.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ae=W.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#000000"),Ae.setAttributeNS(null,"opacity","0.25"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962");const oe=W.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),ee.appendChild(Ae),ee.appendChild(oe),b.appendChild(T),b.appendChild(Q),b.appendChild(H),b.appendChild(Y),b.appendChild(ee),n.appendChild(b),n.setAttributeNS(null,"height",c*this._scale+"px"),n.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(n),this._offset=A.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",n=>{n.preventDefault()}),this._element.addEventListener("mousedown",n=>{n.preventDefault()}),Bo(this._element,this._anchor,"marker"),e&&e.className)for(const n of e.className.split(" "))this._element.classList.add(n);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),W.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=A.Q.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const f=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var n,c;if(!(!((n=this._map)===null||n===void 0)&&n.terrain)){const H=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==H&&(this._element.style.opacity=H))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const f=this._map,_=f.terrain.depthAtPoint(this._pos),b=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,b)-_<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/f.transform.pixelsPerMeter,U=Math.sin(f.getPitch()*Math.PI/180)*T,Q=f.terrain.depthAtPoint(new A.P(this._pos.x,this._pos.y-this._offset.y)),O=f.transform.lngLatToCameraDepth(this._lngLat,b+U)-Q>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&O&&this._popup.remove(),this._element.style.opacity=O?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=A.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,n){return(this._opacity===void 0||e===void 0&&n===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),n!==void 0&&(this._opacityWhenCovered=n),this._map&&this._updateOpacity(!0),this}}const sh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let yn=0,qs=!1;const Gl={maxWidth:100,unit:"metric"};function Kl(m,e,n){const c=n&&n.maxWidth||100,f=m._container.clientHeight/2,_=m._container.clientWidth/2,b=m.unproject([_-c/2,f]),T=m.unproject([_+c/2,f]),U=Math.round(m.project(T).x-m.project(b).x),Q=Math.min(c,U,m._container.clientWidth),O=b.distanceTo(T);if(n&&n.unit==="imperial"){const H=3.2808*O;H>5280?Co(e,Q,H/5280,m._getUIString("ScaleControl.Miles")):Co(e,Q,H,m._getUIString("ScaleControl.Feet"))}else n&&n.unit==="nautical"?Co(e,Q,O/1852,m._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Co(e,Q,O/1e3,m._getUIString("ScaleControl.Kilometers")):Co(e,Q,O,m._getUIString("ScaleControl.Meters"))}function Co(m,e,n,c){const f=function(_){const b=Math.pow(10,`${Math.floor(_)}`.length-1);let T=_/b;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(U){const Q=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*Q)/Q}(T),b*T}(n);m.style.width=e*(f/n)+"px",m.innerHTML=`${f}&nbsp;${c}`}const oh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Zl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function dA(m){if(m){if(typeof m=="number"){const e=Math.round(Math.abs(m)/Math.SQRT2);return{center:new A.P(0,0),top:new A.P(0,m),"top-left":new A.P(e,e),"top-right":new A.P(-e,e),bottom:new A.P(0,-m),"bottom-left":new A.P(e,-e),"bottom-right":new A.P(-e,-e),left:new A.P(m,0),right:new A.P(-m,0)}}if(m instanceof A.P||Array.isArray(m)){const e=A.P.convert(m);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:A.P.convert(m.center||[0,0]),top:A.P.convert(m.top||[0,0]),"top-left":A.P.convert(m["top-left"]||[0,0]),"top-right":A.P.convert(m["top-right"]||[0,0]),bottom:A.P.convert(m.bottom||[0,0]),"bottom-left":A.P.convert(m["bottom-left"]||[0,0]),"bottom-right":A.P.convert(m["bottom-right"]||[0,0]),left:A.P.convert(m.left||[0,0]),right:A.P.convert(m.right||[0,0])}}return dA(new A.P(0,0))}const ql=D;C.AJAXError=A.cm,C.Event=A.l,C.Evented=A.E,C.LngLat=A.Q,C.MercatorCoordinate=A.$,C.Point=A.P,C.addProtocol=A.cn,C.config=A.a,C.removeProtocol=A.co,C.AttributionControl=Nt,C.BoxZoomHandler=ds,C.CanvasSource=cn,C.CooperativeGesturesHandler=$A,C.DoubleClickZoomHandler=WA,C.DragPanHandler=gs,C.DragRotateHandler=un,C.EdgeInsets=Cn,C.FullscreenControl=class extends A.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var e;let n=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=n==null?void 0:n.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)n=n.shadowRoot.fullscreenElement;n===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:A.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){W.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const m=this._fullscreenButton=W.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);W.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new A.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new A.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},C.GeoJSONSource=Rn,C.GeolocateControl=class extends A.E{constructor(m){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new A.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new A.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{const n=new A.Q(e.coords.longitude,e.coords.latitude),c=e.coords.accuracy,f=this._map.getBearing(),_=A.e({bearing:f},this.options.fitBoundsOptions),b=bt.fromLngLat(n,c);this._map.fitBounds(b,_,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const n=new A.Q(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&qs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new A.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=W.create("button","maplibregl-ctrl-geolocate",this._container),W.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){A.w("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=W.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ma({element:this._dotElement}),this._circleElement=W.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ma({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new A.l("trackuserlocationend")),this.fire(new A.l("userlocationlostfocus")))})}},this.options=A.e({},sh,m)}onAdd(m){return this._map=m,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return A._(this,arguments,void 0,function*(e=!1){if(Gi!==void 0&&!e)return Gi;if(window.navigator.permissions===void 0)return Gi=!!window.navigator.geolocation,Gi;try{Gi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Gi=!!window.navigator.geolocation}return Gi})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),W.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,yn=0,qs=!1}_isOutOfMapMaxBounds(m){const e=this._map.getMaxBounds(),n=m.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const m=this._map.getBounds(),e=m.getSouthEast(),n=m.getNorthEast(),c=e.distanceTo(n),f=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return A.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new A.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yn--,qs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new A.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new A.l("trackuserlocationstart")),this.fire(new A.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),yn++,yn>1?(m={maximumAge:6e5,timeout:0},qs=!0):(m=this.options.positionOptions,qs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},C.GlobeControl=class{constructor(){this._toggleProjection=()=>{var m;const e=(m=this._map.getProjection())===null||m===void 0?void 0:m.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var m;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((m=this._map.getProjection())===null||m===void 0?void 0:m.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(m){return this._map=m,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=W.create("button","maplibregl-ctrl-globe",this._container),W.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){W.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},C.Hash=Wc,C.ImageSource=vr,C.KeyboardHandler=ru,C.LngLatBounds=bt,C.LogoControl=Jt,C.Map=class extends Fa{constructor(m){var e,n;A.cj.mark(A.ck.create);const c=Object.assign(Object.assign(Object.assign({},lr),m),{canvasContextAttributes:Object.assign(Object.assign({},lr.canvasContextAttributes),m.canvasContextAttributes)});if(c.minZoom!=null&&c.maxZoom!=null&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(c.minPitch!=null&&c.maxPitch!=null&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(c.minPitch!=null&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(c.maxPitch!=null&&c.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const f=new mn,_=new Gn;if(c.minZoom!==void 0&&f.setMinZoom(c.minZoom),c.maxZoom!==void 0&&f.setMaxZoom(c.maxZoom),c.minPitch!==void 0&&f.setMinPitch(c.minPitch),c.maxPitch!==void 0&&f.setMaxPitch(c.maxPitch),c.renderWorldCopies!==void 0&&f.setRenderWorldCopies(c.renderWorldCopies),super(f,_,{bearingSnap:c.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Vl,this._controls=[],this._mapId=A.a4(),this._contextLost=T=>{T.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new A.l("webglcontextlost",{originalEvent:T}))},this._contextRestored=T=>{this._setupPainter(),this.resize(),this._update(),this.fire(new A.l("webglcontextrestored",{originalEvent:T}))},this._onMapScroll=T=>{if(T.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._maxTileCacheZoomLevels=c.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},c.canvasContextAttributes),this._trackResize=c.trackResize===!0,this._bearingSnap=c.bearingSnap,this._centerClampedToGround=c.centerClampedToGround,this._refreshExpiredTiles=c.refreshExpiredTiles===!0,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions===!0,this._collectResourceTiming=c.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ua),c.locale),this._clickTolerance=c.clickTolerance,this._overridePixelRatio=c.pixelRatio,this._maxCanvasSize=c.maxCanvasSize,this.transformCameraUpdate=c.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=c.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Re.addThrottleControl(()=>this.isMoving()),this._requestManager=new Me(c.transformRequest),typeof c.container=="string"){if(this._container=document.getElementById(c.container),!this._container)throw new Error(`Container '${c.container}' not found.`)}else{if(!(c.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let T=!1;const U=Yc(Q=>{this._trackResize&&!this._removed&&(this.resize(Q),this.redraw())},50);this._resizeObserver=new ResizeObserver(Q=>{T?U(Q):T=!0}),this._resizeObserver.observe(this._container)}this.handlers=new jl(this,c),this._hash=c.hash&&new Wc(typeof c.hash=="string"&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,elevation:c.elevation,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch,roll:c.roll}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,A.e({},c.fitBoundsOptions,{duration:0}))));const b=typeof c.style=="string"||((n=(e=c.style)===null||e===void 0?void 0:e.projection)===null||n===void 0?void 0:n.type)!=="globe";this.resize(null,b),this._localIdeographFontFamily=c.localIdeographFontFamily,this._validateStyle=c.validateStyle,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new Nt(typeof c.attributionControl=="boolean"?void 0:c.attributionControl)),c.maplibreLogo&&this.addControl(new Jt,c.logoPosition),this.on("style.load",()=>{if(b||this._resizeTransform(),this.transform.unmodified){const T=A.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(T)}}),this.on("data",T=>{this._update(T.dataType==="style"),this.fire(new A.l(`${T.dataType}data`,T))}),this.on("dataloading",T=>{this.fire(new A.l(`${T.dataType}dataloading`,T))}),this.on("dataabort",T=>{this.fire(new A.l("sourcedataabort",T))})}_getMapId(){return this._mapId}addControl(m,e){if(e===void 0&&(e=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new A.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=m.onAdd(this);this._controls.push(m);const c=this._controlPositions[e];return e.indexOf("bottom")!==-1?c.insertBefore(n,c.firstChild):c.appendChild(n),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new A.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(m);return e>-1&&this._controls.splice(e,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,e,n,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,e,n,c)}resize(m,e=!0){const[n,c]=this._containerDimensions(),f=this._getClampedPixelRatio(n,c);if(this._resizeCanvas(n,c,f),this.painter.resize(n,c,f),this.painter.overLimit()){const b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];const T=this._getClampedPixelRatio(n,c);this._resizeCanvas(n,c,T),this.painter.resize(n,c,T)}this._resizeTransform(e);const _=!this._moving;return _&&(this.stop(),this.fire(new A.l("movestart",m)).fire(new A.l("move",m))),this.fire(new A.l("resize",m)),_&&this.fire(new A.l("moveend",m)),this}_resizeTransform(m=!0){var e;const[n,c]=this._containerDimensions();this.transform.resize(n,c,m),(e=this._requestedCameraState)===null||e===void 0||e.resize(n,c,m)}_getClampedPixelRatio(m,e){const{0:n,1:c}=this._maxCanvasSize,f=this.getPixelRatio(),_=m*f,b=e*f;return Math.min(_>n?n/_:1,b>c?c/b:1)*f}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(bt.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.setMinZoom(m),this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.setMaxZoom(m),this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.setMinPitch(m),this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(m>=this.transform.minPitch)return this.transform.setMaxPitch(m),this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.setRenderWorldCopies(m),this._update()}project(m){return this.transform.locationToScreenPoint(A.Q.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.screenPointToLocation(A.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,e,n){if(m==="mouseenter"||m==="mouseover"){let c=!1;return{layers:e,listener:n,delegates:{mousemove:_=>{const b=e.filter(U=>this.getLayer(U)),T=b.length!==0?this.queryRenderedFeatures(_.point,{layers:b}):[];T.length?c||(c=!0,n.call(this,new _i(m,this,_.originalEvent,{features:T}))):c=!1},mouseout:()=>{c=!1}}}}if(m==="mouseleave"||m==="mouseout"){let c=!1;return{layers:e,listener:n,delegates:{mousemove:b=>{const T=e.filter(U=>this.getLayer(U));(T.length!==0?this.queryRenderedFeatures(b.point,{layers:T}):[]).length?c=!0:c&&(c=!1,n.call(this,new _i(m,this,b.originalEvent)))},mouseout:b=>{c&&(c=!1,n.call(this,new _i(m,this,b.originalEvent)))}}}}{const c=f=>{const _=e.filter(T=>this.getLayer(T)),b=_.length!==0?this.queryRenderedFeatures(f.point,{layers:_}):[];b.length&&(f.features=b,n.call(this,f),delete f.features)};return{layers:e,listener:n,delegates:{[m]:c}}}}_saveDelegatedListener(m,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(e)}_removeDelegatedListener(m,e,n){if(!this._delegatedListeners||!this._delegatedListeners[m])return;const c=this._delegatedListeners[m];for(let f=0;f<c.length;f++){const _=c[f];if(_.listener===n&&_.layers.length===e.length&&_.layers.every(b=>e.includes(b))){for(const b in _.delegates)this.off(b,_.delegates[b]);return void c.splice(f,1)}}}on(m,e,n){if(n===void 0)return super.on(m,e);const c=typeof e=="string"?[e]:e,f=this._createDelegatedListener(m,c,n);this._saveDelegatedListener(m,f);for(const _ in f.delegates)this.on(_,f.delegates[_]);return{unsubscribe:()=>{this._removeDelegatedListener(m,c,n)}}}once(m,e,n){if(n===void 0)return super.once(m,e);const c=typeof e=="string"?[e]:e,f=this._createDelegatedListener(m,c,n);for(const _ in f.delegates){const b=f.delegates[_];f.delegates[_]=(...T)=>{this._removeDelegatedListener(m,c,n),b(...T)}}this._saveDelegatedListener(m,f);for(const _ in f.delegates)this.once(_,f.delegates[_]);return this}off(m,e,n){return n===void 0?super.off(m,e):(this._removeDelegatedListener(m,typeof e=="string"?[e]:e,n),this)}queryRenderedFeatures(m,e){if(!this.style)return[];let n;const c=m instanceof A.P||Array.isArray(m),f=c?m:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(c?{}:m)||{},f instanceof A.P||typeof f[0]=="number")n=[A.P.convert(f)];else{const _=A.P.convert(f[0]),b=A.P.convert(f[1]);n=[_,new A.P(b.x,_.y),b,new A.P(_.x,b.y),_]}return this.style.queryRenderedFeatures(n,e,this.transform)}querySourceFeatures(m,e){return this.style.querySourceFeatures(m,e)}setStyle(m,e){return(e=A.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(m,e))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const e=this._locale[m];if(e==null)throw new Error(`Missing UI string '${m}'`);return e}_updateStyle(m,e){var n,c;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,e));const f=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new zA(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,e,f):this.style.loadJSON(m,e,f),this):((c=(n=this.style)===null||n===void 0?void 0:n.projection)===null||c===void 0||c.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new zA(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,e){if(typeof m=="string"){const n=this._requestManager.transformRequest(m,"Style");A.j(n,new AbortController).then(c=>{this._updateDiff(c.data,e)}).catch(c=>{c&&this.fire(new A.k(c))})}else typeof m=="object"&&this._updateDiff(m,e)}_updateDiff(m,e){try{this.style.setState(m,e)&&this._update(!0)}catch(n){A.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(m,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():A.w("There is no style added to the map.")}addSource(m,e){return this._lazyInitEmptyStyle(),this.style.addSource(m,e),this._update(!0)}isSourceLoaded(m){const e=this.style&&this.style.sourceCaches[m];if(e!==void 0)return e.loaded();this.fire(new A.k(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){const e=this.style.sourceCaches[m.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&e.reload();for(const n in this.style._layers){const c=this.style._layers[n];c.type==="hillshade"&&c.source===m.source&&A.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bi(this.painter,e,m),this.painter.renderToTexture=new ah(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=n=>{var c;n.dataType==="style"?this.terrain.sourceCache.freeRtt():n.dataType==="source"&&n.tile&&(n.sourceId!==m.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((c=n.source)===null||c===void 0?void 0:c.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(n.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new A.l("terrain",{terrain:m})),this}getTerrain(){var m,e;return(e=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const e in m){const n=m[e]._tiles;for(const c in n){const f=n[c];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,e,n={}){const{pixelRatio:c=1,sdf:f=!1,stretchX:_,stretchY:b,content:T,textFitWidth:U,textFitHeight:Q}=n;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||A.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new A.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:H,data:z}=e,Y=e;return this.style.addImage(m,{data:new A.R({width:O,height:H},new Uint8Array(z)),pixelRatio:c,stretchX:_,stretchY:b,content:T,textFitWidth:U,textFitHeight:Q,sdf:f,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,m),this}}{const{width:O,height:H,data:z}=X.getImageData(e);this.style.addImage(m,{data:new A.R({width:O,height:H},z),pixelRatio:c,stretchX:_,stretchY:b,content:T,textFitWidth:U,textFitHeight:Q,sdf:f,version:0})}}updateImage(m,e){const n=this.style.getImage(m);if(!n)return this.fire(new A.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=e instanceof HTMLImageElement||A.b(e)?X.getImageData(e):e,{width:f,height:_,data:b}=c;if(f===void 0||_===void 0)return this.fire(new A.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==n.data.width||_!==n.data.height)return this.fire(new A.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(e instanceof HTMLImageElement||A.b(e));return n.data.replace(b,T),this.style.updateImage(m,n),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new A.k(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return Re.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,e){return this._lazyInitEmptyStyle(),this.style.addLayer(m,e),this._update(!0)}moveLayer(m,e){return this.style.moveLayer(m,e),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,e,n){return this.style.setLayerZoomRange(m,e,n),this._update(!0)}setFilter(m,e,n={}){return this.style.setFilter(m,e,n),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,e,n,c={}){return this.style.setPaintProperty(m,e,n,c),this._update(!0)}getPaintProperty(m,e){return this.style.getPaintProperty(m,e)}setLayoutProperty(m,e,n,c={}){return this.style.setLayoutProperty(m,e,n,c),this._update(!0)}getLayoutProperty(m,e){return this.style.getLayoutProperty(m,e)}setGlyphs(m,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,e,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,e,n,c=>{c||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,e,n=>{n||this._update(!0)}),this}setLight(m,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(m,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(m,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,e){return this.style.setFeatureState(m,e),this._update()}removeFeatureState(m,e){return this.style.removeFeatureState(m,e),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,e=0;return this._container&&(m=this._container.clientWidth||400,e=this._container.clientHeight||300),[m,e]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map");const e=this._canvasContainer=W.create("div","maplibregl-canvas-container",m);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=W.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),c=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],c);const f=this._controlContainer=W.create("div","maplibregl-control-container",m),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=W.create("div",`maplibregl-ctrl-${b} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,e,n){this._canvas.width=Math.floor(n*m),this._canvas.height=Math.floor(n*e),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const m=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let e=null;this._canvas.addEventListener("webglcontextcreationerror",c=>{e={requestedAttributes:m},c&&(e.statusMessage=c.statusMessage,e.type=c.type)},{once:!0});let n=null;if(n=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,m):this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m),!n){const c="Failed to initialize WebGL";throw e?(e.message=c,new Error(JSON.stringify(e))):new Error(c)}this.painter=new go(n,this.transform),ne.testSupport(n)}migrateProjection(m,e){super.migrateProjection(m,e),this.painter.transform=m,this.fire(new A.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){var e,n,c,f,_;const b=this._idleTriggered?this._fadeDuration:0,T=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let U=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const H=this.transform.zoom,z=X.now();this.style.zoomHistory.update(H,z);const Y=new A.C(H,{now:z,fadeDuration:b,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=Y.crossFadingFactor();ee===1&&ee===this._crossFadingFactor||(U=!0,this._crossFadingFactor=ee),this.style.update(Y)}const Q=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0!==T;(c=this.style.projection)===null||c===void 0||c.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((f=this.style.projection)===null||f===void 0?void 0:f.transitionState,(_=this.style.projection)===null||_===void 0?void 0:_.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Q)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,Q),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,showPadding:this.showPadding}),this.fire(new A.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,A.cj.mark(A.ck.load),this.fire(new A.l("load"))),this.style&&(this.style.hasTransitions()||U)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new A.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,A.cj.mark(A.ck.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Re.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e!=null&&e.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),W.remove(this._canvasContainer),W.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),A.cj.clearMetrics(),this._removed=!0,this.fire(new A.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,X.frame(this._frameRequest,m=>{A.cj.frame(m),this._frameRequest=null;try{this._render(m)}catch(e){if(!A.cl(e)&&!function(n){return n.message===Pl}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return tr}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(m){return this._lazyInitEmptyStyle(),this.style.setProjection(m),this._update(!0)}},C.MapMouseEvent=_i,C.MapTouchEvent=yo,C.MapWheelEvent=Pi,C.Marker=Ma,C.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{const e=this._map.getZoom(),n=e===this._map.getMaxZoom(),c=e===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,n)=>{const c=this._map._getUIString(`NavigationControl.${n}`);e.title=c,e.setAttribute("aria-label",c)},this.options=A.e({},Jn,m),this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),W.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),W.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=W.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){W.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,e){const n=W.create("button",m,this._container);return n.type="button",n.addEventListener("click",e),n}},C.Popup=class extends A.E{constructor(m){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&W.remove(this._content),this._container&&(W.remove(this._container),delete this._container),this._closeButton&&this._closeButton.removeEventListener("click",this._onClose),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new A.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var n;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=W.create("div","maplibregl-popup",this._map.getContainer()),this._tip=W.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ms(this._lngLat,this._flatPos,this._map.transform):(n=this._lngLat)===null||n===void 0?void 0:n.wrap(),this._trackPointer&&!e)return;const c=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const _=dA(this.options.offset);if(!f){const T=this._container.offsetWidth,U=this._container.offsetHeight;let Q;Q=c.y+_.bottom.y<U?["top"]:c.y>this._map.transform.height-U?["bottom"]:[],c.x<T/2?Q.push("left"):c.x>this._map.transform.width-T/2&&Q.push("right"),f=Q.length===0?"bottom":Q.join("-")}let b=c.add(_[f]);this.options.subpixelPositioning||(b=b.round()),W.setTransform(this._container,`${bo[f]} translate(${b.x}px,${b.y}px)`),Bo(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=A.e(Object.create(oh),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new A.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=A.Q.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const e=document.createDocumentFragment(),n=document.createElement("body");let c;for(n.innerHTML=m;c=n.firstChild,c;)e.appendChild(c);return this.setDOMContent(e)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=W.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=W.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Zl);m&&m.focus()}},C.RasterDEMTileSource=jr,C.RasterTileSource=Ar,C.ScaleControl=class{constructor(m){this._onMove=()=>{Kl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Kl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Gl),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){W.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},C.ScrollZoomHandler=nh,C.Style=zA,C.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=W.create("button","maplibregl-ctrl-terrain",this._container),W.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){W.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},C.TwoFingersTouchPitchHandler=rh,C.TwoFingersTouchRotateHandler=tu,C.TwoFingersTouchZoomHandler=Er,C.TwoFingersTouchZoomRotateHandler=Sa,C.VectorTileSource=Xr,C.VideoSource=Gr,C.addSourceType=(m,e)=>A._(void 0,void 0,void 0,function*(){if(fr(m))throw new Error(`A source type called "${m}" already exists.`);((n,c)=>{en[n]=c})(m,e)}),C.clearPrewarmedResources=function(){const m=xt;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(nt),xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},C.createTileMesh=As,C.getMaxParallelImageRequests=function(){return A.a.MAX_PARALLEL_IMAGE_REQUESTS},C.getRTLTextPluginStatus=function(){return Yr().getRTLTextPluginStatus()},C.getVersion=function(){return ql},C.getWorkerCount=function(){return yt.workerCount},C.getWorkerUrl=function(){return A.a.WORKER_URL},C.importScriptInWorkers=function(m){return ir().broadcast("IS",m)},C.prewarm=function(){Pt().acquire(nt)},C.setMaxParallelImageRequests=function(m){A.a.MAX_PARALLEL_IMAGE_REQUESTS=m},C.setRTLTextPlugin=function(m,e){return Yr().setRTLTextPlugin(m,e)},C.setWorkerCount=function(m){yt.workerCount=m},C.setWorkerUrl=function(m){A.a.WORKER_URL=m}});var S=d;return S})}(dm)),dm.exports}var Gw=Vw();const J_=Vh(Gw);function Kw(o,u,d={}){const p={type:"Feature"};return(d.id===0||d.id)&&(p.id=d.id),d.bbox&&(p.bbox=d.bbox),p.properties=u||{},p.geometry=o,p}function Zw(o,u,d={}){if(!o)throw new Error("coordinates is required");if(!Array.isArray(o))throw new Error("coordinates must be an Array");if(o.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!e0(o[0])||!e0(o[1]))throw new Error("coordinates must contain numbers");return Kw({type:"Point",coordinates:o},u,d)}function e0(o){return!isNaN(o)&&o!==null&&!Array.isArray(o)}function Hv(o,u,d){if(o!==null)for(var p,w,S,C,A,D,R,k=0,q=0,X,W=o.type,ne=W==="FeatureCollection",ye=W==="Feature",Se=ne?o.features.length:1,le=0;le<Se;le++){R=ne?o.features[le].geometry:ye?o.geometry:o,X=R?R.type==="GeometryCollection":!1,A=X?R.geometries.length:1;for(var ve=0;ve<A;ve++){var De=0,Re=0;if(C=X?R.geometries[ve]:R,C!==null){D=C.coordinates;var Me=C.type;switch(k=Me==="Polygon"||Me==="MultiPolygon"?1:0,Me){case null:break;case"Point":if(u(D,q,le,De,Re)===!1)return!1;q++,De++;break;case"LineString":case"MultiPoint":for(p=0;p<D.length;p++){if(u(D[p],q,le,De,Re)===!1)return!1;q++,Me==="MultiPoint"&&De++}Me==="LineString"&&De++;break;case"Polygon":case"MultiLineString":for(p=0;p<D.length;p++){for(w=0;w<D[p].length-k;w++){if(u(D[p][w],q,le,De,Re)===!1)return!1;q++}Me==="MultiLineString"&&De++,Me==="Polygon"&&Re++}Me==="Polygon"&&De++;break;case"MultiPolygon":for(p=0;p<D.length;p++){for(Re=0,w=0;w<D[p].length;w++){for(S=0;S<D[p][w].length-k;S++){if(u(D[p][w][S],q,le,De,Re)===!1)return!1;q++}Re++}De++}break;case"GeometryCollection":for(p=0;p<C.geometries.length;p++)if(Hv(C.geometries[p],u)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function t0(o,u={}){let d=0,p=0,w=0;return Hv(o,function(S){d+=S[0],p+=S[1],w++}),Zw([d/w,p/w],u.properties)}const qf={citation:"Origin from the SODREPO Project, SODIC Research Group  TU Chemnitz, 2025. Please cite appropriately in academic work.",datasetMetadata:{"@context":"https://schema.org","@type":"Dataset",name:"SODREPO  Spatial Open Data Regions & Portals",creator:{"@type":"Organization",name:"SODIC Research Group  TU Chemnitz"},description:"A dataset of Pan European (currently Germany) Open Data portals, categorized and linked to administrative regions.",license:"https://creativecommons.org/licenses/by/4.0/",citation:"Hahn, F. (2025). SODREPO Dataset. SODIC Research Group  TU Chemnitz. https://github.com/SODIC-research",distribution:{"@type":"DataDownload",contentUrl:"/data/sodrepoData.json",encodingFormat:"application/json"}},openDataPortals:[{name:"DreiD",nameEn:"DreiD",mainTopic:"3D-Stadtmodelle",portalType:"Geo",portalTypeEn:"Geo",portalHexColor:"#5cb6ff",inCountry:"Deutschland",inCountryEn:"the Federal Republic of Germany",inFederalState:"Sachsen",inFederalStateEn:"Saxony",inDistrict:null,inDistrictEn:null,inCity:null,inCityEn:null,isCountry:!1,isFederalState:!0,isDistrict:!1,isCity:!1,isGovernment:!1,isCivilLaw:!1,"isOther:":!0,levelInEu:5,geoBoundariesLevel:null,geoBoundariesType:"ADM1",relatedToEu:!0,license:"Offene Lizenz laut Portalangaben",licenseEn:"Open license according to portal information",publisher:{name:"Unbekannt",nameEn:"Unknown",contactEmail:null},url:"https://www.drei-d.sachsen.de/",subdomain:!0,urlSubdomainIsOpenData:!1,datasetsCount:null,datasetUploadLastThreeMonths:!1,datasetUpdatedLastThreeMonths:!1,categoriesCount:null,portalSoftware:null,openDataRanking:!1,openDataRankingPoints:0,openDataInventoryRankingPoints:0,openDataBarometerPoints:0,globalDataBarometerPoints:0,oecdOurdataInexPoints:0,opendataMaturityStudiePoints:0,openDataCityCensusPoints:0,dataFormats:[],mostDataFormat:null,fiveStar:1,dcat:{details:null,available:!1,url:null,type:null,DCAT:!0,"DCAT-AP":!0,"DCAT-AP_SHACL":!1},ckan:{details:null,available:!1,url:null,type:null},apiDocumentation:{details:null,available:!1,url:null,type:null},mqa:{details:null,available:!1,url:null,points:0},sparql:{details:null,available:!1,url:null,endpoint:null},graphql:{details:null,available:!1,url:null,endpoint:null},metadata:{details:null,available:!1,url:null,endpoint:null,formats:[]},additionalProperties:{notes:"Details zu DreiD sind noch zu validieren",notesEn:"Details for DreiD are yet to be validated"}},{name:"TestPortal",nameEn:"TestPortal",mainTopic:"3D-TestPortal",portalType:"Open",portalTypeEn:"Open",portalHexColor:"#406482",inCountry:"Deutschland",inCountryEn:"the Federal Republic of Germany",inFederalState:"Sachsen",inFederalStateEn:"Saxony",inDistrict:null,inDistrictEn:null,inCity:null,inCityEn:null,isCountry:!1,isFederalState:!0,isDistrict:!1,isCity:!1,isGovernment:!1,isCivilLaw:!1,"isOther:":!0,levelInEu:5,geoBoundariesLevel:null,geoBoundariesType:"ADM1",relatedToEu:!0,license:"Offene Lizenz laut Portalangaben",licenseEn:"Open license according to portal information",publisher:{name:"Unbekannt",nameEn:"Unknown",contactEmail:null},url:"https://www.sachsen.de",subdomain:!0,urlSubdomainIsOpenData:!1,datasetsCount:null,datasetUploadLastThreeMonths:!1,datasetUpdatedLastThreeMonths:!1,categoriesCount:null,portalSoftware:null,openDataRanking:!1,openDataRankingPoints:0,openDataInventoryRankingPoints:0,openDataBarometerPoints:0,globalDataBarometerPoints:0,oecdOurdataInexPoints:0,opendataMaturityStudiePoints:0,openDataCityCensusPoints:0,dataFormats:[],mostDataFormat:null,fiveStar:1,dcat:{details:null,available:!1,url:null,type:null,DCAT:!0,"DCAT-AP":!0,"DCAT-AP_SHACL":!1},ckan:{details:null,available:!1,url:null,type:null},apiDocumentation:{details:null,available:!1,url:null,type:null},mqa:{details:null,available:!1,url:null,points:0},sparql:{details:null,available:!1,url:null,endpoint:null},graphql:{details:null,available:!1,url:null,endpoint:null},metadata:{details:null,available:!1,url:null,endpoint:null,formats:[]},additionalProperties:{notes:"Details zu DreiD sind noch zu validieren",notesEn:"Details for DreiD are yet to be validated"}},{name:"TestPortal",nameEn:"TestPortal",mainTopic:"3D-TestPortal",portalType:"Gov",portalTypeEn:"Gov",portalHexColor:"#011e3b",inCountry:"Deutschland",inCountryEn:"the Federal Republic of Germany",inFederalState:"Sachsen",inFederalStateEn:"Saxony",inDistrict:"Chemnitz",inDistrictEn:"Chemnitz",inCity:"Chemnitz",inCityEn:"Chemnitz",isCountry:!1,isFederalState:!1,isDistrict:!0,isCity:!1,isGovernment:!1,isCivilLaw:!1,"isOther:":!0,levelInEu:3,geoBoundariesLevel:"ADM2",geoBoundariesType:"ADM2",relatedToEu:!0,license:"Offene Lizenz laut Portalangaben",licenseEn:"Open license according to portal information",publisher:{name:"Unbekannt",nameEn:"Unknown",contactEmail:null},url:"www.chemnitz.de",subdomain:!0,urlSubdomainIsOpenData:!1,datasetsCount:null,datasetUploadLastThreeMonths:!1,datasetUpdatedLastThreeMonths:!1,categoriesCount:null,portalSoftware:null,openDataRanking:!1,openDataRankingPoints:0,openDataInventoryRankingPoints:0,openDataBarometerPoints:0,globalDataBarometerPoints:0,oecdOurdataInexPoints:0,opendataMaturityStudiePoints:0,openDataCityCensusPoints:0,dataFormats:[],mostDataFormat:null,fiveStar:1,dcat:{details:null,available:!1,url:null,type:null,DCAT:!0,"DCAT-AP":!0,"DCAT-AP_SHACL":!1},ckan:{details:null,available:!1,url:null,type:null},apiDocumentation:{details:null,available:!1,url:null,type:null},mqa:{details:null,available:!1,url:null,points:0},sparql:{details:null,available:!1,url:null,endpoint:null},graphql:{details:null,available:!1,url:null,endpoint:null},metadata:{details:null,available:!1,url:null,endpoint:null,formats:[]},additionalProperties:{notes:"Details zu DreiD sind noch zu validieren",notesEn:"Details for DreiD are yet to be validated"}},{name:"TestPortal",nameEn:"TestPortal",mainTopic:"3D-TestPortal",portalType:"Other",portalTypeEn:"Other",portalHexColor:"#6c9fd4",inCountry:"Deutschland",inCountryEn:"the Federal Republic of Germany",inFederalState:"Sachsen",inFederalStateEn:"Saxony",inDistrict:"Chemnitz",inDistrictEn:"Chemnitz",inCity:"Chemnitz",inCityEn:"Chemnitz",isCountry:!1,isFederalState:!1,isDistrict:!1,isCity:!0,isGovernment:!1,isCivilLaw:!1,"isOther:":!0,levelInEu:4,geoBoundariesLevel:"ADM3",geoBoundariesType:"ADM3",relatedToEu:!0,license:"Offene Lizenz laut Portalangaben",licenseEn:"Open license according to portal information",publisher:{name:"Unbekannt",nameEn:"Unknown",contactEmail:null},url:"https://www.test.com/",subdomain:!0,urlSubdomainIsOpenData:!1,datasetsCount:null,datasetUploadLastThreeMonths:!1,datasetUpdatedLastThreeMonths:!1,categoriesCount:null,portalSoftware:null,openDataRanking:!1,openDataRankingPoints:0,openDataInventoryRankingPoints:0,openDataBarometerPoints:0,globalDataBarometerPoints:0,oecdOurdataInexPoints:0,opendataMaturityStudiePoints:0,openDataCityCensusPoints:0,dataFormats:[],mostDataFormat:null,fiveStar:1,dcat:{details:null,available:!1,url:null,type:null,DCAT:!0,"DCAT-AP":!0,"DCAT-AP_SHACL":!1},ckan:{details:null,available:!1,url:null,type:null},apiDocumentation:{details:null,available:!1,url:null,type:null},mqa:{details:null,available:!1,url:null,points:0},sparql:{details:null,available:!1,url:null,endpoint:null},graphql:{details:null,available:!1,url:null,endpoint:null},metadata:{details:null,available:!1,url:null,endpoint:null,formats:[]},additionalProperties:{notes:"Details zu DreiD sind noch zu validieren",notesEn:"Details for DreiD are yet to be validated"}},{name:"TestPortal",nameEn:"TestPortal",mainTopic:"3D-TestPortal",portalType:"Geo",portalTypeEn:"Geo",portalHexColor:"#5cb6ff",inCountry:"Deutschland",inCountryEn:"the Federal Republic of Germany",inFederalState:null,inFederalStateEn:null,inDistrict:null,inDistrictEn:null,inCity:null,inCityEn:null,isCountry:!0,isFederalState:!1,isDistrict:!1,isCity:!1,isGovernment:!1,isCivilLaw:!1,"isOther:":!0,levelInEu:1,geoBoundariesLevel:"ADM0",geoBoundariesType:"ADM0",relatedToEu:!0,license:"Offene Lizenz laut Portalangaben",licenseEn:"Open license according to portal information",publisher:{name:"Unbekannt",nameEn:"Unknown",contactEmail:null},url:"https://www.google.com",subdomain:!0,urlSubdomainIsOpenData:!1,datasetsCount:null,datasetUploadLastThreeMonths:!1,datasetUpdatedLastThreeMonths:!1,categoriesCount:null,portalSoftware:null,openDataRanking:!1,openDataRankingPoints:0,openDataInventoryRankingPoints:0,openDataBarometerPoints:0,globalDataBarometerPoints:0,oecdOurdataInexPoints:0,opendataMaturityStudiePoints:0,openDataCityCensusPoints:0,dataFormats:[],mostDataFormat:null,fiveStar:1,dcat:{details:null,available:!1,url:null,type:null,DCAT:!0,"DCAT-AP":!0,"DCAT-AP_SHACL":!1},ckan:{details:null,available:!1,url:null,type:null},apiDocumentation:{details:null,available:!1,url:null,type:null},mqa:{details:null,available:!1,url:null,points:0},sparql:{details:null,available:!1,url:null,endpoint:null},graphql:{details:null,available:!1,url:null,endpoint:null},metadata:{details:null,available:!1,url:null,endpoint:null,formats:[]},additionalProperties:{notes:"Details zu DreiD sind noch zu validieren",notesEn:"Details for DreiD are yet to be validated"}}]},qw=[{from:"Dresden",to:"Sachsen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Leipzig",to:"Sachsen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Chemnitz",to:"Sachsen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Sachsen",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Berlin",to:"Berlin",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Bremen",to:"Bremen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Hamburg",to:"Hamburg",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Berlin",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Bremen",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Hamburg",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Stuttgart",to:"Baden-Wrttemberg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Karlsruhe",to:"Baden-Wrttemberg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Freiburg im Breisgau",to:"Baden-Wrttemberg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Mannheim",to:"Baden-Wrttemberg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Baden-Wrttemberg",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Mnchen",to:"Bayern",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Nrnberg",to:"Bayern",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Augsburg",to:"Bayern",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Regensburg",to:"Bayern",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Bayern",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Potsdam",to:"Brandenburg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Cottbus",to:"Brandenburg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Frankfurt (Oder)",to:"Brandenburg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Brandenburg an der Havel",to:"Brandenburg",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Brandenburg",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Wiesbaden",to:"Hessen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Frankfurt am Main",to:"Hessen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Darmstadt",to:"Hessen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Kassel",to:"Hessen",levelFrom:"ADM2",levelTo:"ADM1"},{from:"Hessen",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Schwerin",to:"Mecklenburg-Vorpommern",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Rostock",to:"Mecklenburg-Vorpommern",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Mecklenburg-Vorpommern",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Hannover",to:"Niedersachsen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Braunschweig",to:"Niedersachsen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Oldenburg",to:"Niedersachsen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Osnabrck",to:"Niedersachsen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Niedersachsen",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Dsseldorf",to:"Nordrhein-Westfalen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Kln",to:"Nordrhein-Westfalen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Dortmund",to:"Nordrhein-Westfalen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Essen",to:"Nordrhein-Westfalen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Nordrhein-Westfalen",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Mainz",to:"Rheinland-Pfalz",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Koblenz",to:"Rheinland-Pfalz",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Ludwigshafen am Rhein",to:"Rheinland-Pfalz",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Rheinland-Pfalz",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Saarbrcken",to:"Saarland",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Saarland",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Magdeburg",to:"Sachsen-Anhalt",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Halle (Saale)",to:"Sachsen-Anhalt",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Dessau-Rolau",to:"Sachsen-Anhalt",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Sachsen-Anhalt",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Kiel",to:"Schleswig-Holstein",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Lbeck",to:"Schleswig-Holstein",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Schleswig-Holstein",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"},{from:"Erfurt",to:"Thringen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Jena",to:"Thringen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Gera",to:"Thringen",levelFrom:"ADM3",levelTo:"ADM1"},{from:"Thringen",to:"the Federal Republic of Germany",levelFrom:"ADM1",levelTo:"ADM0"}],r0=["ADM0","ADM1","ADM2","ADM3","ADM4","ADM5"],zg={ADM0:[0,4.9],ADM1:[5,6.9],ADM2:[7,8.9],ADM3:[9,24],ADM4:[24,30],ADM5:[30,50]};var gp={},n0;function Xw(){if(n0)return gp;n0=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.parse=C,gp.serialize=R;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,u=/^[\u0021-\u003A\u003C-\u007E]*$/,d=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,p=/^[\u0020-\u003A\u003D-\u007E]*$/,w=Object.prototype.toString,S=(()=>{const X=function(){};return X.prototype=Object.create(null),X})();function C(X,W){const ne=new S,ye=X.length;if(ye<2)return ne;const Se=(W==null?void 0:W.decode)||k;let le=0;do{const ve=X.indexOf("=",le);if(ve===-1)break;const De=X.indexOf(";",le),Re=De===-1?ye:De;if(ve>Re){le=X.lastIndexOf(";",ve-1)+1;continue}const Me=A(X,le,ve),Ne=D(X,ve,Me),st=X.slice(Me,Ne);if(ne[st]===void 0){let mt=A(X,ve+1,Re),ot=D(X,Re,mt);const Qt=Se(X.slice(mt,ot));ne[st]=Qt}le=Re+1}while(le<ye);return ne}function A(X,W,ne){do{const ye=X.charCodeAt(W);if(ye!==32&&ye!==9)return W}while(++W<ne);return ne}function D(X,W,ne){for(;W>ne;){const ye=X.charCodeAt(--W);if(ye!==32&&ye!==9)return W+1}return ne}function R(X,W,ne){const ye=(ne==null?void 0:ne.encode)||encodeURIComponent;if(!o.test(X))throw new TypeError(`argument name is invalid: ${X}`);const Se=ye(W);if(!u.test(Se))throw new TypeError(`argument val is invalid: ${W}`);let le=X+"="+Se;if(!ne)return le;if(ne.maxAge!==void 0){if(!Number.isInteger(ne.maxAge))throw new TypeError(`option maxAge is invalid: ${ne.maxAge}`);le+="; Max-Age="+ne.maxAge}if(ne.domain){if(!d.test(ne.domain))throw new TypeError(`option domain is invalid: ${ne.domain}`);le+="; Domain="+ne.domain}if(ne.path){if(!p.test(ne.path))throw new TypeError(`option path is invalid: ${ne.path}`);le+="; Path="+ne.path}if(ne.expires){if(!q(ne.expires)||!Number.isFinite(ne.expires.valueOf()))throw new TypeError(`option expires is invalid: ${ne.expires}`);le+="; Expires="+ne.expires.toUTCString()}if(ne.httpOnly&&(le+="; HttpOnly"),ne.secure&&(le+="; Secure"),ne.partitioned&&(le+="; Partitioned"),ne.priority)switch(typeof ne.priority=="string"?ne.priority.toLowerCase():void 0){case"low":le+="; Priority=Low";break;case"medium":le+="; Priority=Medium";break;case"high":le+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${ne.priority}`)}if(ne.sameSite)switch(typeof ne.sameSite=="string"?ne.sameSite.toLowerCase():ne.sameSite){case!0:case"strict":le+="; SameSite=Strict";break;case"lax":le+="; SameSite=Lax";break;case"none":le+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${ne.sameSite}`)}return le}function k(X){if(X.indexOf("%")===-1)return X;try{return decodeURIComponent(X)}catch{return X}}function q(X){return w.call(X)==="[object Date]"}return gp}Xw();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var i0="popstate";function Yw(o={}){function u(w,S){let{pathname:C="/",search:A="",hash:D=""}=Gh(w.location.hash.substring(1));return!C.startsWith("/")&&!C.startsWith(".")&&(C="/"+C),Vy("",{pathname:C,search:A,hash:D},S.state&&S.state.usr||null,S.state&&S.state.key||"default")}function d(w,S){let C=w.document.querySelector("base"),A="";if(C&&C.getAttribute("href")){let D=w.location.href,R=D.indexOf("#");A=R===-1?D:D.slice(0,R)}return A+"#"+(typeof S=="string"?S:zp(S))}function p(w,S){DA(w.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(S)})`)}return $w(u,d,p,o)}function pi(o,u){if(o===!1||o===null||typeof o>"u")throw new Error(u)}function DA(o,u){if(!o){typeof console<"u"&&console.warn(u);try{throw new Error(u)}catch{}}}function Ww(){return Math.random().toString(36).substring(2,10)}function a0(o,u){return{usr:o.state,key:o.key,idx:u}}function Vy(o,u,d=null,p){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof u=="string"?Gh(u):u,state:d,key:u&&u.key||p||Ww()}}function zp({pathname:o="/",search:u="",hash:d=""}){return u&&u!=="?"&&(o+=u.charAt(0)==="?"?u:"?"+u),d&&d!=="#"&&(o+=d.charAt(0)==="#"?d:"#"+d),o}function Gh(o){let u={};if(o){let d=o.indexOf("#");d>=0&&(u.hash=o.substring(d),o=o.substring(0,d));let p=o.indexOf("?");p>=0&&(u.search=o.substring(p),o=o.substring(0,p)),o&&(u.pathname=o)}return u}function $w(o,u,d,p={}){let{window:w=document.defaultView,v5Compat:S=!1}=p,C=w.history,A="POP",D=null,R=k();R==null&&(R=0,C.replaceState({...C.state,idx:R},""));function k(){return(C.state||{idx:null}).idx}function q(){A="POP";let Se=k(),le=Se==null?null:Se-R;R=Se,D&&D({action:A,location:ye.location,delta:le})}function X(Se,le){A="PUSH";let ve=Vy(ye.location,Se,le);d&&d(ve,Se),R=k()+1;let De=a0(ve,R),Re=ye.createHref(ve);try{C.pushState(De,"",Re)}catch(Me){if(Me instanceof DOMException&&Me.name==="DataCloneError")throw Me;w.location.assign(Re)}S&&D&&D({action:A,location:ye.location,delta:1})}function W(Se,le){A="REPLACE";let ve=Vy(ye.location,Se,le);d&&d(ve,Se),R=k();let De=a0(ve,R),Re=ye.createHref(ve);C.replaceState(De,"",Re),S&&D&&D({action:A,location:ye.location,delta:0})}function ne(Se){let le=w.location.origin!=="null"?w.location.origin:w.location.href,ve=typeof Se=="string"?Se:zp(Se);return ve=ve.replace(/ $/,"%20"),pi(le,`No window.location.(origin|href) available to create URL for href: ${ve}`),new URL(ve,le)}let ye={get action(){return A},get location(){return o(w,C)},listen(Se){if(D)throw new Error("A history only accepts one active listener");return w.addEventListener(i0,q),D=Se,()=>{w.removeEventListener(i0,q),D=null}},createHref(Se){return u(w,Se)},createURL:ne,encodeLocation(Se){let le=ne(Se);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:X,replace:W,go(Se){return C.go(Se)}};return ye}function Nv(o,u,d="/"){return Jw(o,u,d,!1)}function Jw(o,u,d,p){let w=typeof u=="string"?Gh(u):u,S=xc(w.pathname||"/",d);if(S==null)return null;let C=jv(o);eb(C);let A=null;for(let D=0;A==null&&D<C.length;++D){let R=ub(S);A=lb(C[D],R,p)}return A}function jv(o,u=[],d=[],p=""){let w=(S,C,A)=>{let D={relativePath:A===void 0?S.path||"":A,caseSensitive:S.caseSensitive===!0,childrenIndex:C,route:S};D.relativePath.startsWith("/")&&(pi(D.relativePath.startsWith(p),`Absolute route path "${D.relativePath}" nested under path "${p}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),D.relativePath=D.relativePath.slice(p.length));let R=_c([p,D.relativePath]),k=d.concat(D);S.children&&S.children.length>0&&(pi(S.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),jv(S.children,u,k,R)),!(S.path==null&&!S.index)&&u.push({path:R,score:ob(R,S.index),routesMeta:k})};return o.forEach((S,C)=>{var A;if(S.path===""||!((A=S.path)!=null&&A.includes("?")))w(S,C);else for(let D of Vv(S.path))w(S,C,D)}),u}function Vv(o){let u=o.split("/");if(u.length===0)return[];let[d,...p]=u,w=d.endsWith("?"),S=d.replace(/\?$/,"");if(p.length===0)return w?[S,""]:[S];let C=Vv(p.join("/")),A=[];return A.push(...C.map(D=>D===""?S:[S,D].join("/"))),w&&A.push(...C),A.map(D=>o.startsWith("/")&&D===""?"/":D)}function eb(o){o.sort((u,d)=>u.score!==d.score?d.score-u.score:Ab(u.routesMeta.map(p=>p.childrenIndex),d.routesMeta.map(p=>p.childrenIndex)))}var tb=/^:[\w-]+$/,rb=3,nb=2,ib=1,ab=10,sb=-2,s0=o=>o==="*";function ob(o,u){let d=o.split("/"),p=d.length;return d.some(s0)&&(p+=sb),u&&(p+=nb),d.filter(w=>!s0(w)).reduce((w,S)=>w+(tb.test(S)?rb:S===""?ib:ab),p)}function Ab(o,u){return o.length===u.length&&o.slice(0,-1).every((p,w)=>p===u[w])?o[o.length-1]-u[u.length-1]:0}function lb(o,u,d=!1){let{routesMeta:p}=o,w={},S="/",C=[];for(let A=0;A<p.length;++A){let D=p[A],R=A===p.length-1,k=S==="/"?u:u.slice(S.length)||"/",q=Cm({path:D.relativePath,caseSensitive:D.caseSensitive,end:R},k),X=D.route;if(!q&&R&&d&&!p[p.length-1].route.index&&(q=Cm({path:D.relativePath,caseSensitive:D.caseSensitive,end:!1},k)),!q)return null;Object.assign(w,q.params),C.push({params:w,pathname:_c([S,q.pathname]),pathnameBase:pb(_c([S,q.pathnameBase])),route:X}),q.pathnameBase!=="/"&&(S=_c([S,q.pathnameBase]))}return C}function Cm(o,u){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[d,p]=cb(o.path,o.caseSensitive,o.end),w=u.match(d);if(!w)return null;let S=w[0],C=S.replace(/(.)\/+$/,"$1"),A=w.slice(1);return{params:p.reduce((R,{paramName:k,isOptional:q},X)=>{if(k==="*"){let ne=A[X]||"";C=S.slice(0,S.length-ne.length).replace(/(.)\/+$/,"$1")}const W=A[X];return q&&!W?R[k]=void 0:R[k]=(W||"").replace(/%2F/g,"/"),R},{}),pathname:S,pathnameBase:C,pattern:o}}function cb(o,u=!1,d=!0){DA(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let p=[],w="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,A,D)=>(p.push({paramName:A,isOptional:D!=null}),D?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(p.push({paramName:"*"}),w+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?w+="\\/*$":o!==""&&o!=="/"&&(w+="(?:(?=\\/|$))"),[new RegExp(w,u?void 0:"i"),p]}function ub(o){try{return o.split("/").map(u=>decodeURIComponent(u).replace(/\//g,"%2F")).join("/")}catch(u){return DA(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${u}).`),o}}function xc(o,u){if(u==="/")return o;if(!o.toLowerCase().startsWith(u.toLowerCase()))return null;let d=u.endsWith("/")?u.length-1:u.length,p=o.charAt(d);return p&&p!=="/"?null:o.slice(d)||"/"}function hb(o,u="/"){let{pathname:d,search:p="",hash:w=""}=typeof o=="string"?Gh(o):o;return{pathname:d?d.startsWith("/")?d:fb(d,u):u,search:gb(p),hash:mb(w)}}function fb(o,u){let d=u.replace(/\/+$/,"").split("/");return o.split("/").forEach(w=>{w===".."?d.length>1&&d.pop():w!=="."&&d.push(w)}),d.length>1?d.join("/"):"/"}function py(o,u,d,p){return`Cannot include a '${o}' character in a manually specified \`to.${u}\` field [${JSON.stringify(p)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function db(o){return o.filter((u,d)=>d===0||u.route.path&&u.route.path.length>0)}function Gv(o){let u=db(o);return u.map((d,p)=>p===u.length-1?d.pathname:d.pathnameBase)}function Kv(o,u,d,p=!1){let w;typeof o=="string"?w=Gh(o):(w={...o},pi(!w.pathname||!w.pathname.includes("?"),py("?","pathname","search",w)),pi(!w.pathname||!w.pathname.includes("#"),py("#","pathname","hash",w)),pi(!w.search||!w.search.includes("#"),py("#","search","hash",w)));let S=o===""||w.pathname==="",C=S?"/":w.pathname,A;if(C==null)A=d;else{let q=u.length-1;if(!p&&C.startsWith("..")){let X=C.split("/");for(;X[0]==="..";)X.shift(),q-=1;w.pathname=X.join("/")}A=q>=0?u[q]:"/"}let D=hb(w,A),R=C&&C!=="/"&&C.endsWith("/"),k=(S||C===".")&&d.endsWith("/");return!D.pathname.endsWith("/")&&(R||k)&&(D.pathname+="/"),D}var _c=o=>o.join("/").replace(/\/\/+/g,"/"),pb=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),gb=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,mb=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function yb(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var Zv=["POST","PUT","PATCH","DELETE"];new Set(Zv);var _b=["GET",...Zv];new Set(_b);var fd=be.createContext(null);fd.displayName="DataRouter";var zm=be.createContext(null);zm.displayName="DataRouterState";var qv=be.createContext({isTransitioning:!1});qv.displayName="ViewTransition";var vb=be.createContext(new Map);vb.displayName="Fetchers";var xb=be.createContext(null);xb.displayName="Await";var ml=be.createContext(null);ml.displayName="Navigation";var Kp=be.createContext(null);Kp.displayName="Location";var Bc=be.createContext({outlet:null,matches:[],isDataRoute:!1});Bc.displayName="Route";var __=be.createContext(null);__.displayName="RouteError";function wb(o,{relative:u}={}){pi(Zp(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:p}=be.useContext(ml),{hash:w,pathname:S,search:C}=qp(o,{relative:u}),A=S;return d!=="/"&&(A=S==="/"?d:_c([d,S])),p.createHref({pathname:A,search:C,hash:w})}function Zp(){return be.useContext(Kp)!=null}function Kh(){return pi(Zp(),"useLocation() may be used only in the context of a <Router> component."),be.useContext(Kp).location}var Xv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Yv(o){be.useContext(ml).static||be.useLayoutEffect(o)}function bb(){let{isDataRoute:o}=be.useContext(Bc);return o?Pb():Bb()}function Bb(){pi(Zp(),"useNavigate() may be used only in the context of a <Router> component.");let o=be.useContext(fd),{basename:u,navigator:d}=be.useContext(ml),{matches:p}=be.useContext(Bc),{pathname:w}=Kh(),S=JSON.stringify(Gv(p)),C=be.useRef(!1);return Yv(()=>{C.current=!0}),be.useCallback((D,R={})=>{if(DA(C.current,Xv),!C.current)return;if(typeof D=="number"){d.go(D);return}let k=Kv(D,JSON.parse(S),w,R.relative==="path");o==null&&u!=="/"&&(k.pathname=k.pathname==="/"?u:_c([u,k.pathname])),(R.replace?d.replace:d.push)(k,R.state,R)},[u,d,S,w,o])}be.createContext(null);function qp(o,{relative:u}={}){let{matches:d}=be.useContext(Bc),{pathname:p}=Kh(),w=JSON.stringify(Gv(d));return be.useMemo(()=>Kv(o,JSON.parse(w),p,u==="path"),[o,w,p,u])}function Cb(o,u){return Wv(o,u)}function Wv(o,u,d,p){var ve;pi(Zp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:w,static:S}=be.useContext(ml),{matches:C}=be.useContext(Bc),A=C[C.length-1],D=A?A.params:{},R=A?A.pathname:"/",k=A?A.pathnameBase:"/",q=A&&A.route;{let De=q&&q.path||"";$v(R,!q||De.endsWith("*")||De.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${R}" (under <Route path="${De}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${De}"> to <Route path="${De==="/"?"*":`${De}/*`}">.`)}let X=Kh(),W;if(u){let De=typeof u=="string"?Gh(u):u;pi(k==="/"||((ve=De.pathname)==null?void 0:ve.startsWith(k)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${k}" but pathname "${De.pathname}" was given in the \`location\` prop.`),W=De}else W=X;let ne=W.pathname||"/",ye=ne;if(k!=="/"){let De=k.replace(/^\//,"").split("/");ye="/"+ne.replace(/^\//,"").split("/").slice(De.length).join("/")}let Se=!S&&d&&d.matches&&d.matches.length>0?d.matches:Nv(o,{pathname:ye});DA(q||Se!=null,`No routes matched location "${W.pathname}${W.search}${W.hash}" `),DA(Se==null||Se[Se.length-1].route.element!==void 0||Se[Se.length-1].route.Component!==void 0||Se[Se.length-1].route.lazy!==void 0,`Matched leaf route at location "${W.pathname}${W.search}${W.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=Ub(Se&&Se.map(De=>Object.assign({},De,{params:Object.assign({},D,De.params),pathname:_c([k,w.encodeLocation?w.encodeLocation(De.pathname).pathname:De.pathname]),pathnameBase:De.pathnameBase==="/"?k:_c([k,w.encodeLocation?w.encodeLocation(De.pathnameBase).pathname:De.pathnameBase])})),C,d,p);return u&&le?be.createElement(Kp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...W},navigationType:"POP"}},le):le}function Eb(){let o=Lb(),u=yb(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),d=o instanceof Error?o.stack:null,p="rgba(200,200,200, 0.5)",w={padding:"0.5rem",backgroundColor:p},S={padding:"2px 4px",backgroundColor:p},C=null;return console.error("Error handled by React Router default ErrorBoundary:",o),C=be.createElement(be.Fragment,null,be.createElement("p",null," Hey developer "),be.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",be.createElement("code",{style:S},"ErrorBoundary")," or"," ",be.createElement("code",{style:S},"errorElement")," prop on your route.")),be.createElement(be.Fragment,null,be.createElement("h2",null,"Unexpected Application Error!"),be.createElement("h3",{style:{fontStyle:"italic"}},u),d?be.createElement("pre",{style:w},d):null,C)}var Tb=be.createElement(Eb,null),Sb=class extends be.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,u){return u.location!==o.location||u.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:u.error,location:u.location,revalidation:o.revalidation||u.revalidation}}componentDidCatch(o,u){console.error("React Router caught the following error during render",o,u)}render(){return this.state.error!==void 0?be.createElement(Bc.Provider,{value:this.props.routeContext},be.createElement(__.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fb({routeContext:o,match:u,children:d}){let p=be.useContext(fd);return p&&p.static&&p.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(p.staticContext._deepestRenderedBoundaryId=u.route.id),be.createElement(Bc.Provider,{value:o},d)}function Ub(o,u=[],d=null,p=null){if(o==null){if(!d)return null;if(d.errors)o=d.matches;else if(u.length===0&&!d.initialized&&d.matches.length>0)o=d.matches;else return null}let w=o,S=d==null?void 0:d.errors;if(S!=null){let D=w.findIndex(R=>R.route.id&&(S==null?void 0:S[R.route.id])!==void 0);pi(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(S).join(",")}`),w=w.slice(0,Math.min(w.length,D+1))}let C=!1,A=-1;if(d)for(let D=0;D<w.length;D++){let R=w[D];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(A=D),R.route.id){let{loaderData:k,errors:q}=d,X=R.route.loader&&!k.hasOwnProperty(R.route.id)&&(!q||q[R.route.id]===void 0);if(R.route.lazy||X){C=!0,A>=0?w=w.slice(0,A+1):w=[w[0]];break}}}return w.reduceRight((D,R,k)=>{let q,X=!1,W=null,ne=null;d&&(q=S&&R.route.id?S[R.route.id]:void 0,W=R.route.errorElement||Tb,C&&(A<0&&k===0?($v("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),X=!0,ne=null):A===k&&(X=!0,ne=R.route.hydrateFallbackElement||null)));let ye=u.concat(w.slice(0,k+1)),Se=()=>{let le;return q?le=W:X?le=ne:R.route.Component?le=be.createElement(R.route.Component,null):R.route.element?le=R.route.element:le=D,be.createElement(Fb,{match:R,routeContext:{outlet:D,matches:ye,isDataRoute:d!=null},children:le})};return d&&(R.route.ErrorBoundary||R.route.errorElement||k===0)?be.createElement(Sb,{location:d.location,revalidation:d.revalidation,component:W,error:q,children:Se(),routeContext:{outlet:null,matches:ye,isDataRoute:!0}}):Se()},null)}function v_(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mb(o){let u=be.useContext(fd);return pi(u,v_(o)),u}function Ib(o){let u=be.useContext(zm);return pi(u,v_(o)),u}function Qb(o){let u=be.useContext(Bc);return pi(u,v_(o)),u}function x_(o){let u=Qb(o),d=u.matches[u.matches.length-1];return pi(d.route.id,`${o} can only be used on routes that contain a unique "id"`),d.route.id}function Db(){return x_("useRouteId")}function Lb(){var p;let o=be.useContext(__),u=Ib("useRouteError"),d=x_("useRouteError");return o!==void 0?o:(p=u.errors)==null?void 0:p[d]}function Pb(){let{router:o}=Mb("useNavigate"),u=x_("useNavigate"),d=be.useRef(!1);return Yv(()=>{d.current=!0}),be.useCallback(async(w,S={})=>{DA(d.current,Xv),d.current&&(typeof w=="number"?o.navigate(w):await o.navigate(w,{fromRouteId:u,...S}))},[o,u])}var o0={};function $v(o,u,d){!u&&!o0[o]&&(o0[o]=!0,DA(!1,d))}be.memo(Rb);function Rb({routes:o,future:u,state:d}){return Wv(o,void 0,d,u)}function pm(o){pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ob({basename:o="/",children:u=null,location:d,navigationType:p="POP",navigator:w,static:S=!1}){pi(!Zp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let C=o.replace(/^\/*/,"/"),A=be.useMemo(()=>({basename:C,navigator:w,static:S,future:{}}),[C,w,S]);typeof d=="string"&&(d=Gh(d));let{pathname:D="/",search:R="",hash:k="",state:q=null,key:X="default"}=d,W=be.useMemo(()=>{let ne=xc(D,C);return ne==null?null:{location:{pathname:ne,search:R,hash:k,state:q,key:X},navigationType:p}},[C,D,R,k,q,X,p]);return DA(W!=null,`<Router basename="${C}"> is not able to match the URL "${D}${R}${k}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:be.createElement(ml.Provider,{value:A},be.createElement(Kp.Provider,{children:u,value:W}))}function zb({children:o,location:u}){return Cb(Gy(o),u)}function Gy(o,u=[]){let d=[];return be.Children.forEach(o,(p,w)=>{if(!be.isValidElement(p))return;let S=[...u,w];if(p.type===be.Fragment){d.push.apply(d,Gy(p.props.children,S));return}pi(p.type===pm,`[${typeof p.type=="string"?p.type:p.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pi(!p.props.index||!p.props.children,"An index route cannot have child routes.");let C={id:p.props.id||S.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,hydrateFallbackElement:p.props.hydrateFallbackElement,HydrateFallback:p.props.HydrateFallback,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.hasErrorBoundary===!0||p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(C.children=Gy(p.props.children,S)),d.push(C)}),d}var gm="get",mm="application/x-www-form-urlencoded";function km(o){return o!=null&&typeof o.tagName=="string"}function kb(o){return km(o)&&o.tagName.toLowerCase()==="button"}function Hb(o){return km(o)&&o.tagName.toLowerCase()==="form"}function Nb(o){return km(o)&&o.tagName.toLowerCase()==="input"}function jb(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function Vb(o,u){return o.button===0&&(!u||u==="_self")&&!jb(o)}var kg=null;function Gb(){if(kg===null)try{new FormData(document.createElement("form"),0),kg=!1}catch{kg=!0}return kg}var Kb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gy(o){return o!=null&&!Kb.has(o)?(DA(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mm}"`),null):o}function Zb(o,u){let d,p,w,S,C;if(Hb(o)){let A=o.getAttribute("action");p=A?xc(A,u):null,d=o.getAttribute("method")||gm,w=gy(o.getAttribute("enctype"))||mm,S=new FormData(o)}else if(kb(o)||Nb(o)&&(o.type==="submit"||o.type==="image")){let A=o.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let D=o.getAttribute("formaction")||A.getAttribute("action");if(p=D?xc(D,u):null,d=o.getAttribute("formmethod")||A.getAttribute("method")||gm,w=gy(o.getAttribute("formenctype"))||gy(A.getAttribute("enctype"))||mm,S=new FormData(A,o),!Gb()){let{name:R,type:k,value:q}=o;if(k==="image"){let X=R?`${R}.`:"";S.append(`${X}x`,"0"),S.append(`${X}y`,"0")}else R&&S.append(R,q)}}else{if(km(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=gm,p=null,w=mm,C=o}return S&&w==="text/plain"&&(C=S,S=void 0),{action:p,method:d.toLowerCase(),encType:w,formData:S,body:C}}function w_(o,u){if(o===!1||o===null||typeof o>"u")throw new Error(u)}async function qb(o,u){if(o.id in u)return u[o.id];try{let d=await import(o.module);return u[o.id]=d,d}catch(d){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xb(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function Yb(o,u,d){let p=await Promise.all(o.map(async w=>{let S=u.routes[w.route.id];if(S){let C=await qb(S,d);return C.links?C.links():[]}return[]}));return eB(p.flat(1).filter(Xb).filter(w=>w.rel==="stylesheet"||w.rel==="preload").map(w=>w.rel==="stylesheet"?{...w,rel:"prefetch",as:"style"}:{...w,rel:"prefetch"}))}function A0(o,u,d,p,w,S){let C=(D,R)=>d[R]?D.route.id!==d[R].route.id:!0,A=(D,R)=>{var k;return d[R].pathname!==D.pathname||((k=d[R].route.path)==null?void 0:k.endsWith("*"))&&d[R].params["*"]!==D.params["*"]};return S==="assets"?u.filter((D,R)=>C(D,R)||A(D,R)):S==="data"?u.filter((D,R)=>{var q;let k=p.routes[D.route.id];if(!k||!k.hasLoader)return!1;if(C(D,R)||A(D,R))return!0;if(D.route.shouldRevalidate){let X=D.route.shouldRevalidate({currentUrl:new URL(w.pathname+w.search+w.hash,window.origin),currentParams:((q=d[0])==null?void 0:q.params)||{},nextUrl:new URL(o,window.origin),nextParams:D.params,defaultShouldRevalidate:!0});if(typeof X=="boolean")return X}return!0}):[]}function Wb(o,u,{includeHydrateFallback:d}={}){return $b(o.map(p=>{let w=u.routes[p.route.id];if(!w)return[];let S=[w.module];return w.clientActionModule&&(S=S.concat(w.clientActionModule)),w.clientLoaderModule&&(S=S.concat(w.clientLoaderModule)),d&&w.hydrateFallbackModule&&(S=S.concat(w.hydrateFallbackModule)),w.imports&&(S=S.concat(w.imports)),S}).flat(1))}function $b(o){return[...new Set(o)]}function Jb(o){let u={},d=Object.keys(o).sort();for(let p of d)u[p]=o[p];return u}function eB(o,u){let d=new Set;return new Set(u),o.reduce((p,w)=>{let S=JSON.stringify(Jb(w));return d.has(S)||(d.add(S),p.push({key:S,link:w})),p},[])}function tB(o,u){let d=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return d.pathname==="/"?d.pathname="_root.data":u&&xc(d.pathname,u)==="/"?d.pathname=`${u.replace(/\/$/,"")}/_root.data`:d.pathname=`${d.pathname.replace(/\/$/,"")}.data`,d}function Jv(){let o=be.useContext(fd);return w_(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function rB(){let o=be.useContext(zm);return w_(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var b_=be.createContext(void 0);b_.displayName="FrameworkContext";function ex(){let o=be.useContext(b_);return w_(o,"You must render this element inside a <HydratedRouter> element"),o}function nB(o,u){let d=be.useContext(b_),[p,w]=be.useState(!1),[S,C]=be.useState(!1),{onFocus:A,onBlur:D,onMouseEnter:R,onMouseLeave:k,onTouchStart:q}=u,X=be.useRef(null);be.useEffect(()=>{if(o==="render"&&C(!0),o==="viewport"){let ye=le=>{le.forEach(ve=>{C(ve.isIntersecting)})},Se=new IntersectionObserver(ye,{threshold:.5});return X.current&&Se.observe(X.current),()=>{Se.disconnect()}}},[o]),be.useEffect(()=>{if(p){let ye=setTimeout(()=>{C(!0)},100);return()=>{clearTimeout(ye)}}},[p]);let W=()=>{w(!0)},ne=()=>{w(!1),C(!1)};return d?o!=="intent"?[S,X,{}]:[S,X,{onFocus:mp(A,W),onBlur:mp(D,ne),onMouseEnter:mp(R,W),onMouseLeave:mp(k,ne),onTouchStart:mp(q,W)}]:[!1,X,{}]}function mp(o,u){return d=>{o&&o(d),d.defaultPrevented||u(d)}}function iB({page:o,...u}){let{router:d}=Jv(),p=be.useMemo(()=>Nv(d.routes,o,d.basename),[d.routes,o,d.basename]);return p?be.createElement(sB,{page:o,matches:p,...u}):null}function aB(o){let{manifest:u,routeModules:d}=ex(),[p,w]=be.useState([]);return be.useEffect(()=>{let S=!1;return Yb(o,u,d).then(C=>{S||w(C)}),()=>{S=!0}},[o,u,d]),p}function sB({page:o,matches:u,...d}){let p=Kh(),{manifest:w,routeModules:S}=ex(),{basename:C}=Jv(),{loaderData:A,matches:D}=rB(),R=be.useMemo(()=>A0(o,u,D,w,p,"data"),[o,u,D,w,p]),k=be.useMemo(()=>A0(o,u,D,w,p,"assets"),[o,u,D,w,p]),q=be.useMemo(()=>{if(o===p.pathname+p.search+p.hash)return[];let ne=new Set,ye=!1;if(u.forEach(le=>{var De;let ve=w.routes[le.route.id];!ve||!ve.hasLoader||(!R.some(Re=>Re.route.id===le.route.id)&&le.route.id in A&&((De=S[le.route.id])!=null&&De.shouldRevalidate)||ve.hasClientLoader?ye=!0:ne.add(le.route.id))}),ne.size===0)return[];let Se=tB(o,C);return ye&&ne.size>0&&Se.searchParams.set("_routes",u.filter(le=>ne.has(le.route.id)).map(le=>le.route.id).join(",")),[Se.pathname+Se.search]},[C,A,p,w,R,u,o,S]),X=be.useMemo(()=>Wb(k,w),[k,w]),W=aB(k);return be.createElement(be.Fragment,null,q.map(ne=>be.createElement("link",{key:ne,rel:"prefetch",as:"fetch",href:ne,...d})),X.map(ne=>be.createElement("link",{key:ne,rel:"modulepreload",href:ne,...d})),W.map(({key:ne,link:ye})=>be.createElement("link",{key:ne,...ye})))}function oB(...o){return u=>{o.forEach(d=>{typeof d=="function"?d(u):d!=null&&(d.current=u)})}}var tx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tx&&(window.__reactRouterVersion="7.5.0")}catch{}function AB({basename:o,children:u,window:d}){let p=be.useRef();p.current==null&&(p.current=Yw({window:d,v5Compat:!0}));let w=p.current,[S,C]=be.useState({action:w.action,location:w.location}),A=be.useCallback(D=>{be.startTransition(()=>C(D))},[C]);return be.useLayoutEffect(()=>w.listen(A),[w,A]),be.createElement(Ob,{basename:o,children:u,location:S.location,navigationType:S.action,navigator:w})}var rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ad=be.forwardRef(function({onClick:u,discover:d="render",prefetch:p="none",relative:w,reloadDocument:S,replace:C,state:A,target:D,to:R,preventScrollReset:k,viewTransition:q,...X},W){let{basename:ne}=be.useContext(ml),ye=typeof R=="string"&&rx.test(R),Se,le=!1;if(typeof R=="string"&&ye&&(Se=R,tx))try{let ot=new URL(window.location.href),Qt=R.startsWith("//")?new URL(ot.protocol+R):new URL(R),He=xc(Qt.pathname,ne);Qt.origin===ot.origin&&He!=null?R=He+Qt.search+Qt.hash:le=!0}catch{DA(!1,`<Link to="${R}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ve=wb(R,{relative:w}),[De,Re,Me]=nB(p,X),Ne=hB(R,{replace:C,state:A,target:D,preventScrollReset:k,relative:w,viewTransition:q});function st(ot){u&&u(ot),ot.defaultPrevented||Ne(ot)}let mt=be.createElement("a",{...X,...Me,href:Se||ve,onClick:le||S?u:st,ref:oB(W,Re),target:D,"data-discover":!ye&&d==="render"?"true":void 0});return De&&!ye?be.createElement(be.Fragment,null,mt,be.createElement(iB,{page:ve})):mt});ad.displayName="Link";var lB=be.forwardRef(function({"aria-current":u="page",caseSensitive:d=!1,className:p="",end:w=!1,style:S,to:C,viewTransition:A,children:D,...R},k){let q=qp(C,{relative:R.relative}),X=Kh(),W=be.useContext(zm),{navigator:ne,basename:ye}=be.useContext(ml),Se=W!=null&&mB(q)&&A===!0,le=ne.encodeLocation?ne.encodeLocation(q).pathname:q.pathname,ve=X.pathname,De=W&&W.navigation&&W.navigation.location?W.navigation.location.pathname:null;d||(ve=ve.toLowerCase(),De=De?De.toLowerCase():null,le=le.toLowerCase()),De&&ye&&(De=xc(De,ye)||De);const Re=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let Me=ve===le||!w&&ve.startsWith(le)&&ve.charAt(Re)==="/",Ne=De!=null&&(De===le||!w&&De.startsWith(le)&&De.charAt(le.length)==="/"),st={isActive:Me,isPending:Ne,isTransitioning:Se},mt=Me?u:void 0,ot;typeof p=="function"?ot=p(st):ot=[p,Me?"active":null,Ne?"pending":null,Se?"transitioning":null].filter(Boolean).join(" ");let Qt=typeof S=="function"?S(st):S;return be.createElement(ad,{...R,"aria-current":mt,className:ot,ref:k,style:Qt,to:C,viewTransition:A},typeof D=="function"?D(st):D)});lB.displayName="NavLink";var cB=be.forwardRef(({discover:o="render",fetcherKey:u,navigate:d,reloadDocument:p,replace:w,state:S,method:C=gm,action:A,onSubmit:D,relative:R,preventScrollReset:k,viewTransition:q,...X},W)=>{let ne=pB(),ye=gB(A,{relative:R}),Se=C.toLowerCase()==="get"?"get":"post",le=typeof A=="string"&&rx.test(A),ve=De=>{if(D&&D(De),De.defaultPrevented)return;De.preventDefault();let Re=De.nativeEvent.submitter,Me=(Re==null?void 0:Re.getAttribute("formmethod"))||C;ne(Re||De.currentTarget,{fetcherKey:u,method:Me,navigate:d,replace:w,state:S,relative:R,preventScrollReset:k,viewTransition:q})};return be.createElement("form",{ref:W,method:Se,action:ye,onSubmit:p?D:ve,...X,"data-discover":!le&&o==="render"?"true":void 0})});cB.displayName="Form";function uB(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nx(o){let u=be.useContext(fd);return pi(u,uB(o)),u}function hB(o,{target:u,replace:d,state:p,preventScrollReset:w,relative:S,viewTransition:C}={}){let A=bb(),D=Kh(),R=qp(o,{relative:S});return be.useCallback(k=>{if(Vb(k,u)){k.preventDefault();let q=d!==void 0?d:zp(D)===zp(R);A(o,{replace:q,state:p,preventScrollReset:w,relative:S,viewTransition:C})}},[D,A,R,d,p,u,o,w,S,C])}var fB=0,dB=()=>`__${String(++fB)}__`;function pB(){let{router:o}=nx("useSubmit"),{basename:u}=be.useContext(ml),d=Db();return be.useCallback(async(p,w={})=>{let{action:S,method:C,encType:A,formData:D,body:R}=Zb(p,u);if(w.navigate===!1){let k=w.fetcherKey||dB();await o.fetch(k,d,w.action||S,{preventScrollReset:w.preventScrollReset,formData:D,body:R,formMethod:w.method||C,formEncType:w.encType||A,flushSync:w.flushSync})}else await o.navigate(w.action||S,{preventScrollReset:w.preventScrollReset,formData:D,body:R,formMethod:w.method||C,formEncType:w.encType||A,replace:w.replace,state:w.state,fromRouteId:d,flushSync:w.flushSync,viewTransition:w.viewTransition})},[o,u,d])}function gB(o,{relative:u}={}){let{basename:d}=be.useContext(ml),p=be.useContext(Bc);pi(p,"useFormAction must be used inside a RouteContext");let[w]=p.matches.slice(-1),S={...qp(o||".",{relative:u})},C=Kh();if(o==null){S.search=C.search;let A=new URLSearchParams(S.search),D=A.getAll("index");if(D.some(k=>k==="")){A.delete("index"),D.filter(q=>q).forEach(q=>A.append("index",q));let k=A.toString();S.search=k?`?${k}`:""}}return(!o||o===".")&&w.route.index&&(S.search=S.search?S.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(S.pathname=S.pathname==="/"?d:_c([d,S.pathname])),zp(S)}function mB(o,u={}){let d=be.useContext(qv);pi(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:p}=nx("useViewTransitionState"),w=qp(o,{relative:u.relative});if(!d.isTransitioning)return!1;let S=xc(d.currentLocation.pathname,p)||d.currentLocation.pathname,C=xc(d.nextLocation.pathname,p)||d.nextLocation.pathname;return Cm(w.pathname,C)!=null||Cm(w.pathname,S)!=null}new TextEncoder;var ix=zv();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ky=function(o,u){return Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(d[w]=p[w])},Ky(o,u)};function LA(o,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");Ky(o,u);function d(){this.constructor=o}o.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}var Zy=function(){return Zy=Object.assign||function(u){for(var d,p=1,w=arguments.length;p<w;p++){d=arguments[p];for(var S in d)Object.prototype.hasOwnProperty.call(d,S)&&(u[S]=d[S])}return u},Zy.apply(this,arguments)};function is(o,u,d,p){function w(S){return S instanceof d?S:new d(function(C){C(S)})}return new(d||(d=Promise))(function(S,C){function A(k){try{R(p.next(k))}catch(q){C(q)}}function D(k){try{R(p.throw(k))}catch(q){C(q)}}function R(k){k.done?S(k.value):w(k.value).then(A,D)}R((p=p.apply(o,[])).next())})}function ka(o,u){var d={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},p,w,S,C;return C={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function A(R){return function(k){return D([R,k])}}function D(R){if(p)throw new TypeError("Generator is already executing.");for(;d;)try{if(p=1,w&&(S=R[0]&2?w.return:R[0]?w.throw||((S=w.return)&&S.call(w),0):w.next)&&!(S=S.call(w,R[1])).done)return S;switch(w=0,S&&(R=[R[0]&2,S.value]),R[0]){case 0:case 1:S=R;break;case 4:return d.label++,{value:R[1],done:!1};case 5:d.label++,w=R[1],R=[0];continue;case 7:R=d.ops.pop(),d.trys.pop();continue;default:if(S=d.trys,!(S=S.length>0&&S[S.length-1])&&(R[0]===6||R[0]===2)){d=0;continue}if(R[0]===3&&(!S||R[1]>S[0]&&R[1]<S[3])){d.label=R[1];break}if(R[0]===6&&d.label<S[1]){d.label=S[1],S=R;break}if(S&&d.label<S[2]){d.label=S[2],d.ops.push(R);break}S[2]&&d.ops.pop(),d.trys.pop();continue}R=u.call(o,d)}catch(k){R=[6,k],w=0}finally{p=S=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}}function Hg(o,u,d){if(arguments.length===2)for(var p=0,w=u.length,S;p<w;p++)(S||!(p in u))&&(S||(S=Array.prototype.slice.call(u,0,p)),S[p]=u[p]);return o.concat(S||u)}var wc=function(){function o(u,d,p,w){this.left=u,this.top=d,this.width=p,this.height=w}return o.prototype.add=function(u,d,p,w){return new o(this.left+u,this.top+d,this.width+p,this.height+w)},o.fromClientRect=function(u,d){return new o(d.left+u.windowBounds.left,d.top+u.windowBounds.top,d.width,d.height)},o.fromDOMRectList=function(u,d){var p=Array.from(d).find(function(w){return w.width!==0});return p?new o(p.left+u.windowBounds.left,p.top+u.windowBounds.top,p.width,p.height):o.EMPTY},o.EMPTY=new o(0,0,0,0),o}(),Hm=function(o,u){return wc.fromClientRect(o,u.getBoundingClientRect())},yB=function(o){var u=o.body,d=o.documentElement;if(!u||!d)throw new Error("Unable to get document size");var p=Math.max(Math.max(u.scrollWidth,d.scrollWidth),Math.max(u.offsetWidth,d.offsetWidth),Math.max(u.clientWidth,d.clientWidth)),w=Math.max(Math.max(u.scrollHeight,d.scrollHeight),Math.max(u.offsetHeight,d.offsetHeight),Math.max(u.clientHeight,d.clientHeight));return new wc(0,0,p,w)},Nm=function(o){for(var u=[],d=0,p=o.length;d<p;){var w=o.charCodeAt(d++);if(w>=55296&&w<=56319&&d<p){var S=o.charCodeAt(d++);(S&64512)===56320?u.push(((w&1023)<<10)+(S&1023)+65536):(u.push(w),d--)}else u.push(w)}return u},Mi=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var d=o.length;if(!d)return"";for(var p=[],w=-1,S="";++w<d;){var C=o[w];C<=65535?p.push(C):(C-=65536,p.push((C>>10)+55296,C%1024+56320)),(w+1===d||p.length>16384)&&(S+=String.fromCharCode.apply(String,p),p.length=0)}return S},l0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_B=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ng=0;Ng<l0.length;Ng++)_B[l0.charCodeAt(Ng)]=Ng;var c0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jg=0;jg<c0.length;jg++)Cp[c0.charCodeAt(jg)]=jg;var vB=function(o){var u=o.length*.75,d=o.length,p,w=0,S,C,A,D;o[o.length-1]==="="&&(u--,o[o.length-2]==="="&&u--);var R=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(u):new Array(u),k=Array.isArray(R)?R:new Uint8Array(R);for(p=0;p<d;p+=4)S=Cp[o.charCodeAt(p)],C=Cp[o.charCodeAt(p+1)],A=Cp[o.charCodeAt(p+2)],D=Cp[o.charCodeAt(p+3)],k[w++]=S<<2|C>>4,k[w++]=(C&15)<<4|A>>2,k[w++]=(A&3)<<6|D&63;return R},xB=function(o){for(var u=o.length,d=[],p=0;p<u;p+=2)d.push(o[p+1]<<8|o[p]);return d},wB=function(o){for(var u=o.length,d=[],p=0;p<u;p+=4)d.push(o[p+3]<<24|o[p+2]<<16|o[p+1]<<8|o[p]);return d},zh=5,B_=11,my=2,bB=B_-zh,ax=65536>>zh,BB=1<<zh,yy=BB-1,CB=1024>>zh,EB=ax+CB,TB=EB,SB=32,FB=TB+SB,UB=65536>>B_,MB=1<<bB,IB=MB-1,u0=function(o,u,d){return o.slice?o.slice(u,d):new Uint16Array(Array.prototype.slice.call(o,u,d))},QB=function(o,u,d){return o.slice?o.slice(u,d):new Uint32Array(Array.prototype.slice.call(o,u,d))},DB=function(o,u){var d=vB(o),p=Array.isArray(d)?wB(d):new Uint32Array(d),w=Array.isArray(d)?xB(d):new Uint16Array(d),S=24,C=u0(w,S/2,p[4]/2),A=p[5]===2?u0(w,(S+p[4])/2):QB(p,Math.ceil((S+p[4])/4));return new LB(p[0],p[1],p[2],p[3],C,A)},LB=function(){function o(u,d,p,w,S,C){this.initialValue=u,this.errorValue=d,this.highStart=p,this.highValueIndex=w,this.index=S,this.data=C}return o.prototype.get=function(u){var d;if(u>=0){if(u<55296||u>56319&&u<=65535)return d=this.index[u>>zh],d=(d<<my)+(u&yy),this.data[d];if(u<=65535)return d=this.index[ax+(u-55296>>zh)],d=(d<<my)+(u&yy),this.data[d];if(u<this.highStart)return d=FB-UB+(u>>B_),d=this.index[d],d+=u>>zh&IB,d=this.index[d],d=(d<<my)+(u&yy),this.data[d];if(u<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),h0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PB=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vg=0;Vg<h0.length;Vg++)PB[h0.charCodeAt(Vg)]=Vg;var RB="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",f0=50,OB=1,sx=2,ox=3,zB=4,kB=5,d0=7,Ax=8,p0=9,Tu=10,qy=11,g0=12,Xy=13,HB=14,Ep=15,Yy=16,Gg=17,yp=18,NB=19,m0=20,Wy=21,_p=22,_y=23,Xf=24,to=25,Tp=26,Sp=27,Yf=28,jB=29,Lh=30,VB=31,Kg=32,Zg=33,$y=34,Jy=35,e_=36,kp=37,t_=38,ym=39,_m=40,vy=41,lx=42,GB=43,KB=[9001,65288],cx="!",Vr="",qg="",r_=DB(RB),gc=[Lh,e_],n_=[OB,sx,ox,kB],ux=[Tu,Ax],y0=[Sp,Tp],ZB=n_.concat(ux),_0=[t_,ym,_m,$y,Jy],qB=[Ep,Xy],XB=function(o,u){u===void 0&&(u="strict");var d=[],p=[],w=[];return o.forEach(function(S,C){var A=r_.get(S);if(A>f0?(w.push(!0),A-=f0):w.push(!1),["normal","auto","loose"].indexOf(u)!==-1&&[8208,8211,12316,12448].indexOf(S)!==-1)return p.push(C),d.push(Yy);if(A===zB||A===qy){if(C===0)return p.push(C),d.push(Lh);var D=d[C-1];return ZB.indexOf(D)===-1?(p.push(p[C-1]),d.push(D)):(p.push(C),d.push(Lh))}if(p.push(C),A===VB)return d.push(u==="strict"?Wy:kp);if(A===lx||A===jB)return d.push(Lh);if(A===GB)return S>=131072&&S<=196605||S>=196608&&S<=262141?d.push(kp):d.push(Lh);d.push(A)}),[p,d,w]},xy=function(o,u,d,p){var w=p[d];if(Array.isArray(o)?o.indexOf(w)!==-1:o===w)for(var S=d;S<=p.length;){S++;var C=p[S];if(C===u)return!0;if(C!==Tu)break}if(w===Tu)for(var S=d;S>0;){S--;var A=p[S];if(Array.isArray(o)?o.indexOf(A)!==-1:o===A)for(var D=d;D<=p.length;){D++;var C=p[D];if(C===u)return!0;if(C!==Tu)break}if(A!==Tu)break}return!1},v0=function(o,u){for(var d=o;d>=0;){var p=u[d];if(p===Tu)d--;else return p}return 0},YB=function(o,u,d,p,w){if(d[p]===0)return Vr;var S=p-1;if(Array.isArray(w)&&w[S]===!0)return Vr;var C=S-1,A=S+1,D=u[S],R=C>=0?u[C]:0,k=u[A];if(D===sx&&k===ox)return Vr;if(n_.indexOf(D)!==-1)return cx;if(n_.indexOf(k)!==-1||ux.indexOf(k)!==-1)return Vr;if(v0(S,u)===Ax)return qg;if(r_.get(o[S])===qy||(D===Kg||D===Zg)&&r_.get(o[A])===qy||D===d0||k===d0||D===p0||[Tu,Xy,Ep].indexOf(D)===-1&&k===p0||[Gg,yp,NB,Xf,Yf].indexOf(k)!==-1||v0(S,u)===_p||xy(_y,_p,S,u)||xy([Gg,yp],Wy,S,u)||xy(g0,g0,S,u))return Vr;if(D===Tu)return qg;if(D===_y||k===_y)return Vr;if(k===Yy||D===Yy)return qg;if([Xy,Ep,Wy].indexOf(k)!==-1||D===HB||R===e_&&qB.indexOf(D)!==-1||D===Yf&&k===e_||k===m0||gc.indexOf(k)!==-1&&D===to||gc.indexOf(D)!==-1&&k===to||D===Sp&&[kp,Kg,Zg].indexOf(k)!==-1||[kp,Kg,Zg].indexOf(D)!==-1&&k===Tp||gc.indexOf(D)!==-1&&y0.indexOf(k)!==-1||y0.indexOf(D)!==-1&&gc.indexOf(k)!==-1||[Sp,Tp].indexOf(D)!==-1&&(k===to||[_p,Ep].indexOf(k)!==-1&&u[A+1]===to)||[_p,Ep].indexOf(D)!==-1&&k===to||D===to&&[to,Yf,Xf].indexOf(k)!==-1)return Vr;if([to,Yf,Xf,Gg,yp].indexOf(k)!==-1)for(var q=S;q>=0;){var X=u[q];if(X===to)return Vr;if([Yf,Xf].indexOf(X)!==-1)q--;else break}if([Sp,Tp].indexOf(k)!==-1)for(var q=[Gg,yp].indexOf(D)!==-1?C:S;q>=0;){var X=u[q];if(X===to)return Vr;if([Yf,Xf].indexOf(X)!==-1)q--;else break}if(t_===D&&[t_,ym,$y,Jy].indexOf(k)!==-1||[ym,$y].indexOf(D)!==-1&&[ym,_m].indexOf(k)!==-1||[_m,Jy].indexOf(D)!==-1&&k===_m||_0.indexOf(D)!==-1&&[m0,Tp].indexOf(k)!==-1||_0.indexOf(k)!==-1&&D===Sp||gc.indexOf(D)!==-1&&gc.indexOf(k)!==-1||D===Xf&&gc.indexOf(k)!==-1||gc.concat(to).indexOf(D)!==-1&&k===_p&&KB.indexOf(o[A])===-1||gc.concat(to).indexOf(k)!==-1&&D===yp)return Vr;if(D===vy&&k===vy){for(var W=d[S],ne=1;W>0&&(W--,u[W]===vy);)ne++;if(ne%2!==0)return Vr}return D===Kg&&k===Zg?Vr:qg},WB=function(o,u){u||(u={lineBreak:"normal",wordBreak:"normal"});var d=XB(o,u.lineBreak),p=d[0],w=d[1],S=d[2];(u.wordBreak==="break-all"||u.wordBreak==="break-word")&&(w=w.map(function(A){return[to,Lh,lx].indexOf(A)!==-1?kp:A}));var C=u.wordBreak==="keep-all"?S.map(function(A,D){return A&&o[D]>=19968&&o[D]<=40959}):void 0;return[p,w,C]},$B=function(){function o(u,d,p,w){this.codePoints=u,this.required=d===cx,this.start=p,this.end=w}return o.prototype.slice=function(){return Mi.apply(void 0,this.codePoints.slice(this.start,this.end))},o}(),JB=function(o,u){var d=Nm(o),p=WB(d,u),w=p[0],S=p[1],C=p[2],A=d.length,D=0,R=0;return{next:function(){if(R>=A)return{done:!0,value:null};for(var k=Vr;R<A&&(k=YB(d,S,w,++R,C))===Vr;);if(k!==Vr||R===A){var q=new $B(d,k,D,R);return D=R,{value:q,done:!1}}return{done:!0,value:null}}}},e1=1,t1=2,Xp=4,x0=8,Em=10,w0=47,Ip=92,r1=9,n1=32,Xg=34,vp=61,i1=35,a1=36,s1=37,Yg=39,Wg=40,xp=41,o1=95,Fs=45,A1=33,l1=60,c1=62,u1=64,h1=91,f1=93,d1=61,p1=123,$g=63,g1=125,b0=124,m1=126,y1=128,B0=65533,wy=42,Ph=43,_1=44,v1=58,x1=59,Hp=46,w1=0,b1=8,B1=11,C1=14,E1=31,T1=127,hl=-1,hx=48,fx=97,dx=101,S1=102,F1=117,U1=122,px=65,gx=69,mx=70,M1=85,I1=90,Ha=function(o){return o>=hx&&o<=57},Q1=function(o){return o>=55296&&o<=57343},Wf=function(o){return Ha(o)||o>=px&&o<=mx||o>=fx&&o<=S1},D1=function(o){return o>=fx&&o<=U1},L1=function(o){return o>=px&&o<=I1},P1=function(o){return D1(o)||L1(o)},R1=function(o){return o>=y1},Jg=function(o){return o===Em||o===r1||o===n1},Tm=function(o){return P1(o)||R1(o)||o===o1},C0=function(o){return Tm(o)||Ha(o)||o===Fs},O1=function(o){return o>=w1&&o<=b1||o===B1||o>=C1&&o<=E1||o===T1},Eu=function(o,u){return o!==Ip?!1:u!==Em},em=function(o,u,d){return o===Fs?Tm(u)||Eu(u,d):Tm(o)?!0:!!(o===Ip&&Eu(o,u))},by=function(o,u,d){return o===Ph||o===Fs?Ha(u)?!0:u===Hp&&Ha(d):Ha(o===Hp?u:o)},z1=function(o){var u=0,d=1;(o[u]===Ph||o[u]===Fs)&&(o[u]===Fs&&(d=-1),u++);for(var p=[];Ha(o[u]);)p.push(o[u++]);var w=p.length?parseInt(Mi.apply(void 0,p),10):0;o[u]===Hp&&u++;for(var S=[];Ha(o[u]);)S.push(o[u++]);var C=S.length,A=C?parseInt(Mi.apply(void 0,S),10):0;(o[u]===gx||o[u]===dx)&&u++;var D=1;(o[u]===Ph||o[u]===Fs)&&(o[u]===Fs&&(D=-1),u++);for(var R=[];Ha(o[u]);)R.push(o[u++]);var k=R.length?parseInt(Mi.apply(void 0,R),10):0;return d*(w+A*Math.pow(10,-C))*Math.pow(10,D*k)},k1={type:2},H1={type:3},N1={type:4},j1={type:13},V1={type:8},G1={type:21},K1={type:9},Z1={type:10},q1={type:11},X1={type:12},Y1={type:14},tm={type:23},W1={type:1},$1={type:25},J1={type:24},eC={type:26},tC={type:27},rC={type:28},nC={type:29},iC={type:31},i_={type:32},yx=function(){function o(){this._value=[]}return o.prototype.write=function(u){this._value=this._value.concat(Nm(u))},o.prototype.read=function(){for(var u=[],d=this.consumeToken();d!==i_;)u.push(d),d=this.consumeToken();return u},o.prototype.consumeToken=function(){var u=this.consumeCodePoint();switch(u){case Xg:return this.consumeStringToken(Xg);case i1:var d=this.peekCodePoint(0),p=this.peekCodePoint(1),w=this.peekCodePoint(2);if(C0(d)||Eu(p,w)){var S=em(d,p,w)?t1:e1,C=this.consumeName();return{type:5,value:C,flags:S}}break;case a1:if(this.peekCodePoint(0)===vp)return this.consumeCodePoint(),j1;break;case Yg:return this.consumeStringToken(Yg);case Wg:return k1;case xp:return H1;case wy:if(this.peekCodePoint(0)===vp)return this.consumeCodePoint(),Y1;break;case Ph:if(by(u,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(u),this.consumeNumericToken();break;case _1:return N1;case Fs:var A=u,D=this.peekCodePoint(0),R=this.peekCodePoint(1);if(by(A,D,R))return this.reconsumeCodePoint(u),this.consumeNumericToken();if(em(A,D,R))return this.reconsumeCodePoint(u),this.consumeIdentLikeToken();if(D===Fs&&R===c1)return this.consumeCodePoint(),this.consumeCodePoint(),J1;break;case Hp:if(by(u,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(u),this.consumeNumericToken();break;case w0:if(this.peekCodePoint(0)===wy)for(this.consumeCodePoint();;){var k=this.consumeCodePoint();if(k===wy&&(k=this.consumeCodePoint(),k===w0))return this.consumeToken();if(k===hl)return this.consumeToken()}break;case v1:return eC;case x1:return tC;case l1:if(this.peekCodePoint(0)===A1&&this.peekCodePoint(1)===Fs&&this.peekCodePoint(2)===Fs)return this.consumeCodePoint(),this.consumeCodePoint(),$1;break;case u1:var q=this.peekCodePoint(0),X=this.peekCodePoint(1),W=this.peekCodePoint(2);if(em(q,X,W)){var C=this.consumeName();return{type:7,value:C}}break;case h1:return rC;case Ip:if(Eu(u,this.peekCodePoint(0)))return this.reconsumeCodePoint(u),this.consumeIdentLikeToken();break;case f1:return nC;case d1:if(this.peekCodePoint(0)===vp)return this.consumeCodePoint(),V1;break;case p1:return q1;case g1:return X1;case F1:case M1:var ne=this.peekCodePoint(0),ye=this.peekCodePoint(1);return ne===Ph&&(Wf(ye)||ye===$g)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(u),this.consumeIdentLikeToken();case b0:if(this.peekCodePoint(0)===vp)return this.consumeCodePoint(),K1;if(this.peekCodePoint(0)===b0)return this.consumeCodePoint(),G1;break;case m1:if(this.peekCodePoint(0)===vp)return this.consumeCodePoint(),Z1;break;case hl:return i_}return Jg(u)?(this.consumeWhiteSpace(),iC):Ha(u)?(this.reconsumeCodePoint(u),this.consumeNumericToken()):Tm(u)?(this.reconsumeCodePoint(u),this.consumeIdentLikeToken()):{type:6,value:Mi(u)}},o.prototype.consumeCodePoint=function(){var u=this._value.shift();return typeof u>"u"?-1:u},o.prototype.reconsumeCodePoint=function(u){this._value.unshift(u)},o.prototype.peekCodePoint=function(u){return u>=this._value.length?-1:this._value[u]},o.prototype.consumeUnicodeRangeToken=function(){for(var u=[],d=this.consumeCodePoint();Wf(d)&&u.length<6;)u.push(d),d=this.consumeCodePoint();for(var p=!1;d===$g&&u.length<6;)u.push(d),d=this.consumeCodePoint(),p=!0;if(p){var w=parseInt(Mi.apply(void 0,u.map(function(D){return D===$g?hx:D})),16),S=parseInt(Mi.apply(void 0,u.map(function(D){return D===$g?mx:D})),16);return{type:30,start:w,end:S}}var C=parseInt(Mi.apply(void 0,u),16);if(this.peekCodePoint(0)===Fs&&Wf(this.peekCodePoint(1))){this.consumeCodePoint(),d=this.consumeCodePoint();for(var A=[];Wf(d)&&A.length<6;)A.push(d),d=this.consumeCodePoint();var S=parseInt(Mi.apply(void 0,A),16);return{type:30,start:C,end:S}}else return{type:30,start:C,end:C}},o.prototype.consumeIdentLikeToken=function(){var u=this.consumeName();return u.toLowerCase()==="url"&&this.peekCodePoint(0)===Wg?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Wg?(this.consumeCodePoint(),{type:19,value:u}):{type:20,value:u}},o.prototype.consumeUrlToken=function(){var u=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===hl)return{type:22,value:""};var d=this.peekCodePoint(0);if(d===Yg||d===Xg){var p=this.consumeStringToken(this.consumeCodePoint());return p.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===hl||this.peekCodePoint(0)===xp)?(this.consumeCodePoint(),{type:22,value:p.value}):(this.consumeBadUrlRemnants(),tm)}for(;;){var w=this.consumeCodePoint();if(w===hl||w===xp)return{type:22,value:Mi.apply(void 0,u)};if(Jg(w))return this.consumeWhiteSpace(),this.peekCodePoint(0)===hl||this.peekCodePoint(0)===xp?(this.consumeCodePoint(),{type:22,value:Mi.apply(void 0,u)}):(this.consumeBadUrlRemnants(),tm);if(w===Xg||w===Yg||w===Wg||O1(w))return this.consumeBadUrlRemnants(),tm;if(w===Ip)if(Eu(w,this.peekCodePoint(0)))u.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),tm;else u.push(w)}},o.prototype.consumeWhiteSpace=function(){for(;Jg(this.peekCodePoint(0));)this.consumeCodePoint()},o.prototype.consumeBadUrlRemnants=function(){for(;;){var u=this.consumeCodePoint();if(u===xp||u===hl)return;Eu(u,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},o.prototype.consumeStringSlice=function(u){for(var d=5e4,p="";u>0;){var w=Math.min(d,u);p+=Mi.apply(void 0,this._value.splice(0,w)),u-=w}return this._value.shift(),p},o.prototype.consumeStringToken=function(u){var d="",p=0;do{var w=this._value[p];if(w===hl||w===void 0||w===u)return d+=this.consumeStringSlice(p),{type:0,value:d};if(w===Em)return this._value.splice(0,p),W1;if(w===Ip){var S=this._value[p+1];S!==hl&&S!==void 0&&(S===Em?(d+=this.consumeStringSlice(p),p=-1,this._value.shift()):Eu(w,S)&&(d+=this.consumeStringSlice(p),d+=Mi(this.consumeEscapedCodePoint()),p=-1))}p++}while(!0)},o.prototype.consumeNumber=function(){var u=[],d=Xp,p=this.peekCodePoint(0);for((p===Ph||p===Fs)&&u.push(this.consumeCodePoint());Ha(this.peekCodePoint(0));)u.push(this.consumeCodePoint());p=this.peekCodePoint(0);var w=this.peekCodePoint(1);if(p===Hp&&Ha(w))for(u.push(this.consumeCodePoint(),this.consumeCodePoint()),d=x0;Ha(this.peekCodePoint(0));)u.push(this.consumeCodePoint());p=this.peekCodePoint(0),w=this.peekCodePoint(1);var S=this.peekCodePoint(2);if((p===gx||p===dx)&&((w===Ph||w===Fs)&&Ha(S)||Ha(w)))for(u.push(this.consumeCodePoint(),this.consumeCodePoint()),d=x0;Ha(this.peekCodePoint(0));)u.push(this.consumeCodePoint());return[z1(u),d]},o.prototype.consumeNumericToken=function(){var u=this.consumeNumber(),d=u[0],p=u[1],w=this.peekCodePoint(0),S=this.peekCodePoint(1),C=this.peekCodePoint(2);if(em(w,S,C)){var A=this.consumeName();return{type:15,number:d,flags:p,unit:A}}return w===s1?(this.consumeCodePoint(),{type:16,number:d,flags:p}):{type:17,number:d,flags:p}},o.prototype.consumeEscapedCodePoint=function(){var u=this.consumeCodePoint();if(Wf(u)){for(var d=Mi(u);Wf(this.peekCodePoint(0))&&d.length<6;)d+=Mi(this.consumeCodePoint());Jg(this.peekCodePoint(0))&&this.consumeCodePoint();var p=parseInt(d,16);return p===0||Q1(p)||p>1114111?B0:p}return u===hl?B0:u},o.prototype.consumeName=function(){for(var u="";;){var d=this.consumeCodePoint();if(C0(d))u+=Mi(d);else if(Eu(d,this.peekCodePoint(0)))u+=Mi(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(d),u}},o}(),_x=function(){function o(u){this._tokens=u}return o.create=function(u){var d=new yx;return d.write(u),new o(d.read())},o.parseValue=function(u){return o.create(u).parseComponentValue()},o.parseValues=function(u){return o.create(u).parseComponentValues()},o.prototype.parseComponentValue=function(){for(var u=this.consumeToken();u.type===31;)u=this.consumeToken();if(u.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(u);var d=this.consumeComponentValue();do u=this.consumeToken();while(u.type===31);if(u.type===32)return d;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},o.prototype.parseComponentValues=function(){for(var u=[];;){var d=this.consumeComponentValue();if(d.type===32)return u;u.push(d),u.push()}},o.prototype.consumeComponentValue=function(){var u=this.consumeToken();switch(u.type){case 11:case 28:case 2:return this.consumeSimpleBlock(u.type);case 19:return this.consumeFunction(u)}return u},o.prototype.consumeSimpleBlock=function(u){for(var d={type:u,values:[]},p=this.consumeToken();;){if(p.type===32||sC(p,u))return d;this.reconsumeToken(p),d.values.push(this.consumeComponentValue()),p=this.consumeToken()}},o.prototype.consumeFunction=function(u){for(var d={name:u.value,values:[],type:18};;){var p=this.consumeToken();if(p.type===32||p.type===3)return d;this.reconsumeToken(p),d.values.push(this.consumeComponentValue())}},o.prototype.consumeToken=function(){var u=this._tokens.shift();return typeof u>"u"?i_:u},o.prototype.reconsumeToken=function(u){this._tokens.unshift(u)},o}(),Yp=function(o){return o.type===15},dd=function(o){return o.type===17},Pn=function(o){return o.type===20},aC=function(o){return o.type===0},a_=function(o,u){return Pn(o)&&o.value===u},vx=function(o){return o.type!==31},sd=function(o){return o.type!==31&&o.type!==4},yl=function(o){var u=[],d=[];return o.forEach(function(p){if(p.type===4){if(d.length===0)throw new Error("Error parsing function args, zero tokens for arg");u.push(d),d=[];return}p.type!==31&&d.push(p)}),d.length&&u.push(d),u},sC=function(o,u){return u===11&&o.type===12||u===28&&o.type===29?!0:u===2&&o.type===3},Du=function(o){return o.type===17||o.type===15},ki=function(o){return o.type===16||Du(o)},xx=function(o){return o.length>1?[o[0],o[1]]:[o[0]]},ba={type:17,number:0,flags:Xp},C_={type:16,number:50,flags:Xp},Su={type:16,number:100,flags:Xp},Fp=function(o,u,d){var p=o[0],w=o[1];return[Yn(p,u),Yn(typeof w<"u"?w:p,d)]},Yn=function(o,u){if(o.type===16)return o.number/100*u;if(Yp(o))switch(o.unit){case"rem":case"em":return 16*o.number;case"px":default:return o.number}return o.number},wx="deg",bx="grad",Bx="rad",Cx="turn",jm={name:"angle",parse:function(o,u){if(u.type===15)switch(u.unit){case wx:return Math.PI*u.number/180;case bx:return Math.PI/200*u.number;case Bx:return u.number;case Cx:return Math.PI*2*u.number}throw new Error("Unsupported angle type")}},Ex=function(o){return o.type===15&&(o.unit===wx||o.unit===bx||o.unit===Bx||o.unit===Cx)},Tx=function(o){var u=o.filter(Pn).map(function(d){return d.value}).join(" ");switch(u){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ba,ba];case"to top":case"bottom":return Ro(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ba,Su];case"to right":case"left":return Ro(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Su,Su];case"to bottom":case"top":return Ro(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Su,ba];case"to left":case"right":return Ro(270)}return 0},Ro=function(o){return Math.PI*o/180},Iu={name:"color",parse:function(o,u){if(u.type===18){var d=oC[u.name];if(typeof d>"u")throw new Error('Attempting to parse an unsupported color function "'+u.name+'"');return d(o,u.values)}if(u.type===5){if(u.value.length===3){var p=u.value.substring(0,1),w=u.value.substring(1,2),S=u.value.substring(2,3);return Fu(parseInt(p+p,16),parseInt(w+w,16),parseInt(S+S,16),1)}if(u.value.length===4){var p=u.value.substring(0,1),w=u.value.substring(1,2),S=u.value.substring(2,3),C=u.value.substring(3,4);return Fu(parseInt(p+p,16),parseInt(w+w,16),parseInt(S+S,16),parseInt(C+C,16)/255)}if(u.value.length===6){var p=u.value.substring(0,2),w=u.value.substring(2,4),S=u.value.substring(4,6);return Fu(parseInt(p,16),parseInt(w,16),parseInt(S,16),1)}if(u.value.length===8){var p=u.value.substring(0,2),w=u.value.substring(2,4),S=u.value.substring(4,6),C=u.value.substring(6,8);return Fu(parseInt(p,16),parseInt(w,16),parseInt(S,16),parseInt(C,16)/255)}}if(u.type===20){var A=vc[u.value.toUpperCase()];if(typeof A<"u")return A}return vc.TRANSPARENT}},Qu=function(o){return(255&o)===0},la=function(o){var u=255&o,d=255&o>>8,p=255&o>>16,w=255&o>>24;return u<255?"rgba("+w+","+p+","+d+","+u/255+")":"rgb("+w+","+p+","+d+")"},Fu=function(o,u,d,p){return(o<<24|u<<16|d<<8|Math.round(p*255)<<0)>>>0},E0=function(o,u){if(o.type===17)return o.number;if(o.type===16){var d=u===3?1:255;return u===3?o.number/100*d:Math.round(o.number/100*d)}return 0},T0=function(o,u){var d=u.filter(sd);if(d.length===3){var p=d.map(E0),w=p[0],S=p[1],C=p[2];return Fu(w,S,C,1)}if(d.length===4){var A=d.map(E0),w=A[0],S=A[1],C=A[2],D=A[3];return Fu(w,S,C,D)}return 0};function By(o,u,d){return d<0&&(d+=1),d>=1&&(d-=1),d<1/6?(u-o)*d*6+o:d<1/2?u:d<2/3?(u-o)*6*(2/3-d)+o:o}var S0=function(o,u){var d=u.filter(sd),p=d[0],w=d[1],S=d[2],C=d[3],A=(p.type===17?Ro(p.number):jm.parse(o,p))/(Math.PI*2),D=ki(w)?w.number/100:0,R=ki(S)?S.number/100:0,k=typeof C<"u"&&ki(C)?Yn(C,1):1;if(D===0)return Fu(R*255,R*255,R*255,1);var q=R<=.5?R*(D+1):R+D-R*D,X=R*2-q,W=By(X,q,A+1/3),ne=By(X,q,A),ye=By(X,q,A-1/3);return Fu(W*255,ne*255,ye*255,k)},oC={hsl:S0,hsla:S0,rgb:T0,rgba:T0},Qp=function(o,u){return Iu.parse(o,_x.create(u).parseComponentValue())},vc={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},AC={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(o,u){return u.map(function(d){if(Pn(d))switch(d.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},lC={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vm=function(o,u){var d=Iu.parse(o,u[0]),p=u[1];return p&&ki(p)?{color:d,stop:p}:{color:d,stop:null}},F0=function(o,u){var d=o[0],p=o[o.length-1];d.stop===null&&(d.stop=ba),p.stop===null&&(p.stop=Su);for(var w=[],S=0,C=0;C<o.length;C++){var A=o[C].stop;if(A!==null){var D=Yn(A,u);D>S?w.push(D):w.push(S),S=D}else w.push(null)}for(var R=null,C=0;C<w.length;C++){var k=w[C];if(k===null)R===null&&(R=C);else if(R!==null){for(var q=C-R,X=w[R-1],W=(k-X)/(q+1),ne=1;ne<=q;ne++)w[R+ne-1]=W*ne;R=null}}return o.map(function(ye,Se){var le=ye.color;return{color:le,stop:Math.max(Math.min(1,w[Se]/u),0)}})},cC=function(o,u,d){var p=u/2,w=d/2,S=Yn(o[0],u)-p,C=w-Yn(o[1],d);return(Math.atan2(C,S)+Math.PI*2)%(Math.PI*2)},uC=function(o,u,d){var p=typeof o=="number"?o:cC(o,u,d),w=Math.abs(u*Math.sin(p))+Math.abs(d*Math.cos(p)),S=u/2,C=d/2,A=w/2,D=Math.sin(p-Math.PI/2)*A,R=Math.cos(p-Math.PI/2)*A;return[w,S-R,S+R,C-D,C+D]},QA=function(o,u){return Math.sqrt(o*o+u*u)},U0=function(o,u,d,p,w){var S=[[0,0],[0,u],[o,0],[o,u]];return S.reduce(function(C,A){var D=A[0],R=A[1],k=QA(d-D,p-R);return(w?k<C.optimumDistance:k>C.optimumDistance)?{optimumCorner:A,optimumDistance:k}:C},{optimumDistance:w?1/0:-1/0,optimumCorner:null}).optimumCorner},hC=function(o,u,d,p,w){var S=0,C=0;switch(o.size){case 0:o.shape===0?S=C=Math.min(Math.abs(u),Math.abs(u-p),Math.abs(d),Math.abs(d-w)):o.shape===1&&(S=Math.min(Math.abs(u),Math.abs(u-p)),C=Math.min(Math.abs(d),Math.abs(d-w)));break;case 2:if(o.shape===0)S=C=Math.min(QA(u,d),QA(u,d-w),QA(u-p,d),QA(u-p,d-w));else if(o.shape===1){var A=Math.min(Math.abs(d),Math.abs(d-w))/Math.min(Math.abs(u),Math.abs(u-p)),D=U0(p,w,u,d,!0),R=D[0],k=D[1];S=QA(R-u,(k-d)/A),C=A*S}break;case 1:o.shape===0?S=C=Math.max(Math.abs(u),Math.abs(u-p),Math.abs(d),Math.abs(d-w)):o.shape===1&&(S=Math.max(Math.abs(u),Math.abs(u-p)),C=Math.max(Math.abs(d),Math.abs(d-w)));break;case 3:if(o.shape===0)S=C=Math.max(QA(u,d),QA(u,d-w),QA(u-p,d),QA(u-p,d-w));else if(o.shape===1){var A=Math.max(Math.abs(d),Math.abs(d-w))/Math.max(Math.abs(u),Math.abs(u-p)),q=U0(p,w,u,d,!1),R=q[0],k=q[1];S=QA(R-u,(k-d)/A),C=A*S}break}return Array.isArray(o.size)&&(S=Yn(o.size[0],p),C=o.size.length===2?Yn(o.size[1],w):S),[S,C]},fC=function(o,u){var d=Ro(180),p=[];return yl(u).forEach(function(w,S){if(S===0){var C=w[0];if(C.type===20&&C.value==="to"){d=Tx(w);return}else if(Ex(C)){d=jm.parse(o,C);return}}var A=Vm(o,w);p.push(A)}),{angle:d,stops:p,type:1}},rm=function(o,u){var d=Ro(180),p=[];return yl(u).forEach(function(w,S){if(S===0){var C=w[0];if(C.type===20&&["top","left","right","bottom"].indexOf(C.value)!==-1){d=Tx(w);return}else if(Ex(C)){d=(jm.parse(o,C)+Ro(270))%Ro(360);return}}var A=Vm(o,w);p.push(A)}),{angle:d,stops:p,type:1}},dC=function(o,u){var d=Ro(180),p=[],w=1,S=0,C=3,A=[];return yl(u).forEach(function(D,R){var k=D[0];if(R===0){if(Pn(k)&&k.value==="linear"){w=1;return}else if(Pn(k)&&k.value==="radial"){w=2;return}}if(k.type===18){if(k.name==="from"){var q=Iu.parse(o,k.values[0]);p.push({stop:ba,color:q})}else if(k.name==="to"){var q=Iu.parse(o,k.values[0]);p.push({stop:Su,color:q})}else if(k.name==="color-stop"){var X=k.values.filter(sd);if(X.length===2){var q=Iu.parse(o,X[1]),W=X[0];dd(W)&&p.push({stop:{type:16,number:W.number*100,flags:W.flags},color:q})}}}}),w===1?{angle:(d+Ro(180))%Ro(360),stops:p,type:w}:{size:C,shape:S,stops:p,position:A,type:w}},Sx="closest-side",Fx="farthest-side",Ux="closest-corner",Mx="farthest-corner",Ix="circle",Qx="ellipse",Dx="cover",Lx="contain",pC=function(o,u){var d=0,p=3,w=[],S=[];return yl(u).forEach(function(C,A){var D=!0;if(A===0){var R=!1;D=C.reduce(function(q,X){if(R)if(Pn(X))switch(X.value){case"center":return S.push(C_),q;case"top":case"left":return S.push(ba),q;case"right":case"bottom":return S.push(Su),q}else(ki(X)||Du(X))&&S.push(X);else if(Pn(X))switch(X.value){case Ix:return d=0,!1;case Qx:return d=1,!1;case"at":return R=!0,!1;case Sx:return p=0,!1;case Dx:case Fx:return p=1,!1;case Lx:case Ux:return p=2,!1;case Mx:return p=3,!1}else if(Du(X)||ki(X))return Array.isArray(p)||(p=[]),p.push(X),!1;return q},D)}if(D){var k=Vm(o,C);w.push(k)}}),{size:p,shape:d,stops:w,position:S,type:2}},nm=function(o,u){var d=0,p=3,w=[],S=[];return yl(u).forEach(function(C,A){var D=!0;if(A===0?D=C.reduce(function(k,q){if(Pn(q))switch(q.value){case"center":return S.push(C_),!1;case"top":case"left":return S.push(ba),!1;case"right":case"bottom":return S.push(Su),!1}else if(ki(q)||Du(q))return S.push(q),!1;return k},D):A===1&&(D=C.reduce(function(k,q){if(Pn(q))switch(q.value){case Ix:return d=0,!1;case Qx:return d=1,!1;case Lx:case Sx:return p=0,!1;case Fx:return p=1,!1;case Ux:return p=2,!1;case Dx:case Mx:return p=3,!1}else if(Du(q)||ki(q))return Array.isArray(p)||(p=[]),p.push(q),!1;return k},D)),D){var R=Vm(o,C);w.push(R)}}),{size:p,shape:d,stops:w,position:S,type:2}},gC=function(o){return o.type===1},mC=function(o){return o.type===2},E_={name:"image",parse:function(o,u){if(u.type===22){var d={url:u.value,type:0};return o.cache.addImage(u.value),d}if(u.type===18){var p=Px[u.name];if(typeof p>"u")throw new Error('Attempting to parse an unsupported image function "'+u.name+'"');return p(o,u.values)}throw new Error("Unsupported image type "+u.type)}};function yC(o){return!(o.type===20&&o.value==="none")&&(o.type!==18||!!Px[o.name])}var Px={"linear-gradient":fC,"-moz-linear-gradient":rm,"-ms-linear-gradient":rm,"-o-linear-gradient":rm,"-webkit-linear-gradient":rm,"radial-gradient":pC,"-moz-radial-gradient":nm,"-ms-radial-gradient":nm,"-o-radial-gradient":nm,"-webkit-radial-gradient":nm,"-webkit-gradient":dC},_C={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(o,u){if(u.length===0)return[];var d=u[0];return d.type===20&&d.value==="none"?[]:u.filter(function(p){return sd(p)&&yC(p)}).map(function(p){return E_.parse(o,p)})}},vC={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(o,u){return u.map(function(d){if(Pn(d))switch(d.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},xC={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(o,u){return yl(u).map(function(d){return d.filter(ki)}).map(xx)}},wC={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(o,u){return yl(u).map(function(d){return d.filter(Pn).map(function(p){return p.value}).join(" ")}).map(bC)}},bC=function(o){switch(o){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},id;(function(o){o.AUTO="auto",o.CONTAIN="contain",o.COVER="cover"})(id||(id={}));var BC={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(o,u){return yl(u).map(function(d){return d.filter(CC)})}},CC=function(o){return Pn(o)||ki(o)},Gm=function(o){return{name:"border-"+o+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},EC=Gm("top"),TC=Gm("right"),SC=Gm("bottom"),FC=Gm("left"),Km=function(o){return{name:"border-radius-"+o,initialValue:"0 0",prefix:!1,type:1,parse:function(u,d){return xx(d.filter(ki))}}},UC=Km("top-left"),MC=Km("top-right"),IC=Km("bottom-right"),QC=Km("bottom-left"),Zm=function(o){return{name:"border-"+o+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(u,d){switch(d){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},DC=Zm("top"),LC=Zm("right"),PC=Zm("bottom"),RC=Zm("left"),qm=function(o){return{name:"border-"+o+"-width",initialValue:"0",type:0,prefix:!1,parse:function(u,d){return Yp(d)?d.number:0}}},OC=qm("top"),zC=qm("right"),kC=qm("bottom"),HC=qm("left"),NC={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},jC={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(o,u){switch(u){case"rtl":return 1;case"ltr":default:return 0}}},VC={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(o,u){return u.filter(Pn).reduce(function(d,p){return d|GC(p.value)},0)}},GC=function(o){switch(o){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},KC={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(o,u){switch(u){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ZC={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(o,u){return u.type===20&&u.value==="normal"?0:u.type===17||u.type===15?u.number:0}},Sm;(function(o){o.NORMAL="normal",o.STRICT="strict"})(Sm||(Sm={}));var qC={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,u){switch(u){case"strict":return Sm.STRICT;case"normal":default:return Sm.NORMAL}}},XC={name:"line-height",initialValue:"normal",prefix:!1,type:4},M0=function(o,u){return Pn(o)&&o.value==="normal"?1.2*u:o.type===17?u*o.number:ki(o)?Yn(o,u):u},YC={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(o,u){return u.type===20&&u.value==="none"?null:E_.parse(o,u)}},WC={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(o,u){switch(u){case"inside":return 0;case"outside":default:return 1}}},s_={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(o,u){switch(u){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Xm=function(o){return{name:"margin-"+o,initialValue:"0",prefix:!1,type:4}},$C=Xm("top"),JC=Xm("right"),eE=Xm("bottom"),tE=Xm("left"),rE={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(o,u){return u.filter(Pn).map(function(d){switch(d.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},nE={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(o,u){switch(u){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ym=function(o){return{name:"padding-"+o,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},iE=Ym("top"),aE=Ym("right"),sE=Ym("bottom"),oE=Ym("left"),AE={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(o,u){switch(u){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},lE={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(o,u){switch(u){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},cE={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,u){return u.length===1&&a_(u[0],"none")?[]:yl(u).map(function(d){for(var p={color:vc.TRANSPARENT,offsetX:ba,offsetY:ba,blur:ba},w=0,S=0;S<d.length;S++){var C=d[S];Du(C)?(w===0?p.offsetX=C:w===1?p.offsetY=C:p.blur=C,w++):p.color=Iu.parse(o,C)}return p})}},uE={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(o,u){switch(u){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},hE={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(o,u){if(u.type===20&&u.value==="none")return null;if(u.type===18){var d=pE[u.name];if(typeof d>"u")throw new Error('Attempting to parse an unsupported transform function "'+u.name+'"');return d(u.values)}return null}},fE=function(o){var u=o.filter(function(d){return d.type===17}).map(function(d){return d.number});return u.length===6?u:null},dE=function(o){var u=o.filter(function(D){return D.type===17}).map(function(D){return D.number}),d=u[0],p=u[1];u[2],u[3];var w=u[4],S=u[5];u[6],u[7],u[8],u[9],u[10],u[11];var C=u[12],A=u[13];return u[14],u[15],u.length===16?[d,p,w,S,C,A]:null},pE={matrix:fE,matrix3d:dE},I0={type:16,number:50,flags:Xp},gE=[I0,I0],mE={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(o,u){var d=u.filter(ki);return d.length!==2?gE:[d[0],d[1]]}},yE={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(o,u){switch(u){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Dp;(function(o){o.NORMAL="normal",o.BREAK_ALL="break-all",o.KEEP_ALL="keep-all"})(Dp||(Dp={}));var _E={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(o,u){switch(u){case"break-all":return Dp.BREAK_ALL;case"keep-all":return Dp.KEEP_ALL;case"normal":default:return Dp.NORMAL}}},vE={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(o,u){if(u.type===20)return{auto:!0,order:0};if(dd(u))return{auto:!1,order:u.number};throw new Error("Invalid z-index number parsed")}},Rx={name:"time",parse:function(o,u){if(u.type===15)switch(u.unit.toLowerCase()){case"s":return 1e3*u.number;case"ms":return u.number}throw new Error("Unsupported time type")}},xE={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(o,u){return dd(u)?u.number:1}},wE={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bE={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(o,u){return u.filter(Pn).map(function(d){switch(d.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(d){return d!==0})}},BE={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(o,u){var d=[],p=[];return u.forEach(function(w){switch(w.type){case 20:case 0:d.push(w.value);break;case 17:d.push(w.number.toString());break;case 4:p.push(d.join(" ")),d.length=0;break}}),d.length&&p.push(d.join(" ")),p.map(function(w){return w.indexOf(" ")===-1?w:"'"+w+"'"})}},CE={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},EE={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(o,u){if(dd(u))return u.number;if(Pn(u))switch(u.value){case"bold":return 700;case"normal":default:return 400}return 400}},TE={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(o,u){return u.filter(Pn).map(function(d){return d.value})}},SE={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(o,u){switch(u){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Yi=function(o,u){return(o&u)!==0},FE={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(o,u){if(u.length===0)return[];var d=u[0];return d.type===20&&d.value==="none"?[]:u}},UE={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(o,u){if(u.length===0)return null;var d=u[0];if(d.type===20&&d.value==="none")return null;for(var p=[],w=u.filter(vx),S=0;S<w.length;S++){var C=w[S],A=w[S+1];if(C.type===20){var D=A&&dd(A)?A.number:1;p.push({counter:C.value,increment:D})}}return p}},ME={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(o,u){if(u.length===0)return[];for(var d=[],p=u.filter(vx),w=0;w<p.length;w++){var S=p[w],C=p[w+1];if(Pn(S)&&S.value!=="none"){var A=C&&dd(C)?C.number:0;d.push({counter:S.value,reset:A})}}return d}},IE={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(o,u){return u.filter(Yp).map(function(d){return Rx.parse(o,d)})}},QE={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(o,u){if(u.length===0)return null;var d=u[0];if(d.type===20&&d.value==="none")return null;var p=[],w=u.filter(aC);if(w.length%2!==0)return null;for(var S=0;S<w.length;S+=2){var C=w[S].value,A=w[S+1].value;p.push({open:C,close:A})}return p}},Q0=function(o,u,d){if(!o)return"";var p=o[Math.min(u,o.length-1)];return p?d?p.open:p.close:""},DE={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(o,u){return u.length===1&&a_(u[0],"none")?[]:yl(u).map(function(d){for(var p={color:255,offsetX:ba,offsetY:ba,blur:ba,spread:ba,inset:!1},w=0,S=0;S<d.length;S++){var C=d[S];a_(C,"inset")?p.inset=!0:Du(C)?(w===0?p.offsetX=C:w===1?p.offsetY=C:w===2?p.blur=C:p.spread=C,w++):p.color=Iu.parse(o,C)}return p})}},LE={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(o,u){var d=[0,1,2],p=[];return u.filter(Pn).forEach(function(w){switch(w.value){case"stroke":p.push(1);break;case"fill":p.push(0);break;case"markers":p.push(2);break}}),d.forEach(function(w){p.indexOf(w)===-1&&p.push(w)}),p}},PE={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},RE={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(o,u){return Yp(u)?u.number:0}},OE=function(){function o(u,d){var p,w;this.animationDuration=Xt(u,IE,d.animationDuration),this.backgroundClip=Xt(u,AC,d.backgroundClip),this.backgroundColor=Xt(u,lC,d.backgroundColor),this.backgroundImage=Xt(u,_C,d.backgroundImage),this.backgroundOrigin=Xt(u,vC,d.backgroundOrigin),this.backgroundPosition=Xt(u,xC,d.backgroundPosition),this.backgroundRepeat=Xt(u,wC,d.backgroundRepeat),this.backgroundSize=Xt(u,BC,d.backgroundSize),this.borderTopColor=Xt(u,EC,d.borderTopColor),this.borderRightColor=Xt(u,TC,d.borderRightColor),this.borderBottomColor=Xt(u,SC,d.borderBottomColor),this.borderLeftColor=Xt(u,FC,d.borderLeftColor),this.borderTopLeftRadius=Xt(u,UC,d.borderTopLeftRadius),this.borderTopRightRadius=Xt(u,MC,d.borderTopRightRadius),this.borderBottomRightRadius=Xt(u,IC,d.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(u,QC,d.borderBottomLeftRadius),this.borderTopStyle=Xt(u,DC,d.borderTopStyle),this.borderRightStyle=Xt(u,LC,d.borderRightStyle),this.borderBottomStyle=Xt(u,PC,d.borderBottomStyle),this.borderLeftStyle=Xt(u,RC,d.borderLeftStyle),this.borderTopWidth=Xt(u,OC,d.borderTopWidth),this.borderRightWidth=Xt(u,zC,d.borderRightWidth),this.borderBottomWidth=Xt(u,kC,d.borderBottomWidth),this.borderLeftWidth=Xt(u,HC,d.borderLeftWidth),this.boxShadow=Xt(u,DE,d.boxShadow),this.color=Xt(u,NC,d.color),this.direction=Xt(u,jC,d.direction),this.display=Xt(u,VC,d.display),this.float=Xt(u,KC,d.cssFloat),this.fontFamily=Xt(u,BE,d.fontFamily),this.fontSize=Xt(u,CE,d.fontSize),this.fontStyle=Xt(u,SE,d.fontStyle),this.fontVariant=Xt(u,TE,d.fontVariant),this.fontWeight=Xt(u,EE,d.fontWeight),this.letterSpacing=Xt(u,ZC,d.letterSpacing),this.lineBreak=Xt(u,qC,d.lineBreak),this.lineHeight=Xt(u,XC,d.lineHeight),this.listStyleImage=Xt(u,YC,d.listStyleImage),this.listStylePosition=Xt(u,WC,d.listStylePosition),this.listStyleType=Xt(u,s_,d.listStyleType),this.marginTop=Xt(u,$C,d.marginTop),this.marginRight=Xt(u,JC,d.marginRight),this.marginBottom=Xt(u,eE,d.marginBottom),this.marginLeft=Xt(u,tE,d.marginLeft),this.opacity=Xt(u,xE,d.opacity);var S=Xt(u,rE,d.overflow);this.overflowX=S[0],this.overflowY=S[S.length>1?1:0],this.overflowWrap=Xt(u,nE,d.overflowWrap),this.paddingTop=Xt(u,iE,d.paddingTop),this.paddingRight=Xt(u,aE,d.paddingRight),this.paddingBottom=Xt(u,sE,d.paddingBottom),this.paddingLeft=Xt(u,oE,d.paddingLeft),this.paintOrder=Xt(u,LE,d.paintOrder),this.position=Xt(u,lE,d.position),this.textAlign=Xt(u,AE,d.textAlign),this.textDecorationColor=Xt(u,wE,(p=d.textDecorationColor)!==null&&p!==void 0?p:d.color),this.textDecorationLine=Xt(u,bE,(w=d.textDecorationLine)!==null&&w!==void 0?w:d.textDecoration),this.textShadow=Xt(u,cE,d.textShadow),this.textTransform=Xt(u,uE,d.textTransform),this.transform=Xt(u,hE,d.transform),this.transformOrigin=Xt(u,mE,d.transformOrigin),this.visibility=Xt(u,yE,d.visibility),this.webkitTextStrokeColor=Xt(u,PE,d.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(u,RE,d.webkitTextStrokeWidth),this.wordBreak=Xt(u,_E,d.wordBreak),this.zIndex=Xt(u,vE,d.zIndex)}return o.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},o.prototype.isTransparent=function(){return Qu(this.backgroundColor)},o.prototype.isTransformed=function(){return this.transform!==null},o.prototype.isPositioned=function(){return this.position!==0},o.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},o.prototype.isFloating=function(){return this.float!==0},o.prototype.isInlineLevel=function(){return Yi(this.display,4)||Yi(this.display,33554432)||Yi(this.display,268435456)||Yi(this.display,536870912)||Yi(this.display,67108864)||Yi(this.display,134217728)},o}(),zE=function(){function o(u,d){this.content=Xt(u,FE,d.content),this.quotes=Xt(u,QE,d.quotes)}return o}(),D0=function(){function o(u,d){this.counterIncrement=Xt(u,UE,d.counterIncrement),this.counterReset=Xt(u,ME,d.counterReset)}return o}(),Xt=function(o,u,d){var p=new yx,w=d!==null&&typeof d<"u"?d.toString():u.initialValue;p.write(w);var S=new _x(p.read());switch(u.type){case 2:var C=S.parseComponentValue();return u.parse(o,Pn(C)?C.value:u.initialValue);case 0:return u.parse(o,S.parseComponentValue());case 1:return u.parse(o,S.parseComponentValues());case 4:return S.parseComponentValue();case 3:switch(u.format){case"angle":return jm.parse(o,S.parseComponentValue());case"color":return Iu.parse(o,S.parseComponentValue());case"image":return E_.parse(o,S.parseComponentValue());case"length":var A=S.parseComponentValue();return Du(A)?A:ba;case"length-percentage":var D=S.parseComponentValue();return ki(D)?D:ba;case"time":return Rx.parse(o,S.parseComponentValue())}break}},kE="data-html2canvas-debug",HE=function(o){var u=o.getAttribute(kE);switch(u){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},o_=function(o,u){var d=HE(o);return d===1||u===d},_l=function(){function o(u,d){if(this.context=u,this.textNodes=[],this.elements=[],this.flags=0,o_(d,3))debugger;this.styles=new OE(u,window.getComputedStyle(d,null)),c_(d)&&(this.styles.animationDuration.some(function(p){return p>0})&&(d.style.animationDuration="0s"),this.styles.transform!==null&&(d.style.transform="none")),this.bounds=Hm(this.context,d),o_(d,4)&&(this.flags|=16)}return o}(),NE="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",L0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Up=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var im=0;im<L0.length;im++)Up[L0.charCodeAt(im)]=im;var jE=function(o){var u=o.length*.75,d=o.length,p,w=0,S,C,A,D;o[o.length-1]==="="&&(u--,o[o.length-2]==="="&&u--);var R=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(u):new Array(u),k=Array.isArray(R)?R:new Uint8Array(R);for(p=0;p<d;p+=4)S=Up[o.charCodeAt(p)],C=Up[o.charCodeAt(p+1)],A=Up[o.charCodeAt(p+2)],D=Up[o.charCodeAt(p+3)],k[w++]=S<<2|C>>4,k[w++]=(C&15)<<4|A>>2,k[w++]=(A&3)<<6|D&63;return R},VE=function(o){for(var u=o.length,d=[],p=0;p<u;p+=2)d.push(o[p+1]<<8|o[p]);return d},GE=function(o){for(var u=o.length,d=[],p=0;p<u;p+=4)d.push(o[p+3]<<24|o[p+2]<<16|o[p+1]<<8|o[p]);return d},kh=5,T_=11,Cy=2,KE=T_-kh,Ox=65536>>kh,ZE=1<<kh,Ey=ZE-1,qE=1024>>kh,XE=Ox+qE,YE=XE,WE=32,$E=YE+WE,JE=65536>>T_,e2=1<<KE,t2=e2-1,P0=function(o,u,d){return o.slice?o.slice(u,d):new Uint16Array(Array.prototype.slice.call(o,u,d))},r2=function(o,u,d){return o.slice?o.slice(u,d):new Uint32Array(Array.prototype.slice.call(o,u,d))},n2=function(o,u){var d=jE(o),p=Array.isArray(d)?GE(d):new Uint32Array(d),w=Array.isArray(d)?VE(d):new Uint16Array(d),S=24,C=P0(w,S/2,p[4]/2),A=p[5]===2?P0(w,(S+p[4])/2):r2(p,Math.ceil((S+p[4])/4));return new i2(p[0],p[1],p[2],p[3],C,A)},i2=function(){function o(u,d,p,w,S,C){this.initialValue=u,this.errorValue=d,this.highStart=p,this.highValueIndex=w,this.index=S,this.data=C}return o.prototype.get=function(u){var d;if(u>=0){if(u<55296||u>56319&&u<=65535)return d=this.index[u>>kh],d=(d<<Cy)+(u&Ey),this.data[d];if(u<=65535)return d=this.index[Ox+(u-55296>>kh)],d=(d<<Cy)+(u&Ey),this.data[d];if(u<this.highStart)return d=$E-JE+(u>>T_),d=this.index[d],d+=u>>kh&t2,d=this.index[d],d=(d<<Cy)+(u&Ey),this.data[d];if(u<=1114111)return this.data[this.highValueIndex]}return this.errorValue},o}(),R0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var am=0;am<R0.length;am++)a2[R0.charCodeAt(am)]=am;var s2=1,Ty=2,Sy=3,O0=4,z0=5,o2=7,k0=8,Fy=9,Uy=10,H0=11,N0=12,j0=13,V0=14,My=15,A2=function(o){for(var u=[],d=0,p=o.length;d<p;){var w=o.charCodeAt(d++);if(w>=55296&&w<=56319&&d<p){var S=o.charCodeAt(d++);(S&64512)===56320?u.push(((w&1023)<<10)+(S&1023)+65536):(u.push(w),d--)}else u.push(w)}return u},l2=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];if(String.fromCodePoint)return String.fromCodePoint.apply(String,o);var d=o.length;if(!d)return"";for(var p=[],w=-1,S="";++w<d;){var C=o[w];C<=65535?p.push(C):(C-=65536,p.push((C>>10)+55296,C%1024+56320)),(w+1===d||p.length>16384)&&(S+=String.fromCharCode.apply(String,p),p.length=0)}return S},c2=n2(NE),Lo="",Iy="",u2=function(o){return c2.get(o)},h2=function(o,u,d){var p=d-2,w=u[p],S=u[d-1],C=u[d];if(S===Ty&&C===Sy)return Lo;if(S===Ty||S===Sy||S===O0||C===Ty||C===Sy||C===O0)return Iy;if(S===k0&&[k0,Fy,H0,N0].indexOf(C)!==-1||(S===H0||S===Fy)&&(C===Fy||C===Uy)||(S===N0||S===Uy)&&C===Uy||C===j0||C===z0||C===o2||S===s2)return Lo;if(S===j0&&C===V0){for(;w===z0;)w=u[--p];if(w===V0)return Lo}if(S===My&&C===My){for(var A=0;w===My;)A++,w=u[--p];if(A%2===0)return Lo}return Iy},f2=function(o){var u=A2(o),d=u.length,p=0,w=0,S=u.map(u2);return{next:function(){if(p>=d)return{done:!0,value:null};for(var C=Lo;p<d&&(C=h2(u,S,++p))===Lo;);if(C!==Lo||p===d){var A=l2.apply(null,u.slice(w,p));return w=p,{value:A,done:!1}}return{done:!0,value:null}}}},d2=function(o){for(var u=f2(o),d=[],p;!(p=u.next()).done;)p.value&&d.push(p.value.slice());return d},p2=function(o){var u=123;if(o.createRange){var d=o.createRange();if(d.getBoundingClientRect){var p=o.createElement("boundtest");p.style.height=u+"px",p.style.display="block",o.body.appendChild(p),d.selectNode(p);var w=d.getBoundingClientRect(),S=Math.round(w.height);if(o.body.removeChild(p),S===u)return!0}}return!1},g2=function(o){var u=o.createElement("boundtest");u.style.width="50px",u.style.display="block",u.style.fontSize="12px",u.style.letterSpacing="0px",u.style.wordSpacing="0px",o.body.appendChild(u);var d=o.createRange();u.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var p=u.firstChild,w=Nm(p.data).map(function(D){return Mi(D)}),S=0,C={},A=w.every(function(D,R){d.setStart(p,S),d.setEnd(p,S+D.length);var k=d.getBoundingClientRect();S+=D.length;var q=k.x>C.x||k.y>C.y;return C=k,R===0?!0:q});return o.body.removeChild(u),A},m2=function(){return typeof new Image().crossOrigin<"u"},y2=function(){return typeof new XMLHttpRequest().responseType=="string"},_2=function(o){var u=new Image,d=o.createElement("canvas"),p=d.getContext("2d");if(!p)return!1;u.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{p.drawImage(u,0,0),d.toDataURL()}catch{return!1}return!0},G0=function(o){return o[0]===0&&o[1]===255&&o[2]===0&&o[3]===255},v2=function(o){var u=o.createElement("canvas"),d=100;u.width=d,u.height=d;var p=u.getContext("2d");if(!p)return Promise.reject(!1);p.fillStyle="rgb(0, 255, 0)",p.fillRect(0,0,d,d);var w=new Image,S=u.toDataURL();w.src=S;var C=A_(d,d,0,0,w);return p.fillStyle="red",p.fillRect(0,0,d,d),K0(C).then(function(A){p.drawImage(A,0,0);var D=p.getImageData(0,0,d,d).data;p.fillStyle="red",p.fillRect(0,0,d,d);var R=o.createElement("div");return R.style.backgroundImage="url("+S+")",R.style.height=d+"px",G0(D)?K0(A_(d,d,0,0,R)):Promise.reject(!1)}).then(function(A){return p.drawImage(A,0,0),G0(p.getImageData(0,0,d,d).data)}).catch(function(){return!1})},A_=function(o,u,d,p,w){var S="http://www.w3.org/2000/svg",C=document.createElementNS(S,"svg"),A=document.createElementNS(S,"foreignObject");return C.setAttributeNS(null,"width",o.toString()),C.setAttributeNS(null,"height",u.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",d.toString()),A.setAttributeNS(null,"y",p.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),C.appendChild(A),A.appendChild(w),C},K0=function(o){return new Promise(function(u,d){var p=new Image;p.onload=function(){return u(p)},p.onerror=d,p.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(o))})},wa={get SUPPORT_RANGE_BOUNDS(){var o=p2(document);return Object.defineProperty(wa,"SUPPORT_RANGE_BOUNDS",{value:o}),o},get SUPPORT_WORD_BREAKING(){var o=wa.SUPPORT_RANGE_BOUNDS&&g2(document);return Object.defineProperty(wa,"SUPPORT_WORD_BREAKING",{value:o}),o},get SUPPORT_SVG_DRAWING(){var o=_2(document);return Object.defineProperty(wa,"SUPPORT_SVG_DRAWING",{value:o}),o},get SUPPORT_FOREIGNOBJECT_DRAWING(){var o=typeof Array.from=="function"&&typeof window.fetch=="function"?v2(document):Promise.resolve(!1);return Object.defineProperty(wa,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:o}),o},get SUPPORT_CORS_IMAGES(){var o=m2();return Object.defineProperty(wa,"SUPPORT_CORS_IMAGES",{value:o}),o},get SUPPORT_RESPONSE_TYPE(){var o=y2();return Object.defineProperty(wa,"SUPPORT_RESPONSE_TYPE",{value:o}),o},get SUPPORT_CORS_XHR(){var o="withCredentials"in new XMLHttpRequest;return Object.defineProperty(wa,"SUPPORT_CORS_XHR",{value:o}),o},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var o=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(wa,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:o}),o}},Lp=function(){function o(u,d){this.text=u,this.bounds=d}return o}(),x2=function(o,u,d,p){var w=B2(u,d),S=[],C=0;return w.forEach(function(A){if(d.textDecorationLine.length||A.trim().length>0)if(wa.SUPPORT_RANGE_BOUNDS){var D=Z0(p,C,A.length).getClientRects();if(D.length>1){var R=S_(A),k=0;R.forEach(function(X){S.push(new Lp(X,wc.fromDOMRectList(o,Z0(p,k+C,X.length).getClientRects()))),k+=X.length})}else S.push(new Lp(A,wc.fromDOMRectList(o,D)))}else{var q=p.splitText(A.length);S.push(new Lp(A,w2(o,p))),p=q}else wa.SUPPORT_RANGE_BOUNDS||(p=p.splitText(A.length));C+=A.length}),S},w2=function(o,u){var d=u.ownerDocument;if(d){var p=d.createElement("html2canvaswrapper");p.appendChild(u.cloneNode(!0));var w=u.parentNode;if(w){w.replaceChild(p,u);var S=Hm(o,p);return p.firstChild&&w.replaceChild(p.firstChild,p),S}}return wc.EMPTY},Z0=function(o,u,d){var p=o.ownerDocument;if(!p)throw new Error("Node has no owner document");var w=p.createRange();return w.setStart(o,u),w.setEnd(o,u+d),w},S_=function(o){if(wa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var u=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(u.segment(o)).map(function(d){return d.segment})}return d2(o)},b2=function(o,u){if(wa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var d=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(d.segment(o)).map(function(p){return p.segment})}return E2(o,u)},B2=function(o,u){return u.letterSpacing!==0?S_(o):b2(o,u)},C2=[32,160,4961,65792,65793,4153,4241],E2=function(o,u){for(var d=JB(o,{lineBreak:u.lineBreak,wordBreak:u.overflowWrap==="break-word"?"break-word":u.wordBreak}),p=[],w,S=function(){if(w.value){var C=w.value.slice(),A=Nm(C),D="";A.forEach(function(R){C2.indexOf(R)===-1?D+=Mi(R):(D.length&&p.push(D),p.push(Mi(R)),D="")}),D.length&&p.push(D)}};!(w=d.next()).done;)S();return p},T2=function(){function o(u,d,p){this.text=S2(d.data,p.textTransform),this.textBounds=x2(u,this.text,p,d)}return o}(),S2=function(o,u){switch(u){case 1:return o.toLowerCase();case 3:return o.replace(F2,U2);case 2:return o.toUpperCase();default:return o}},F2=/(^|\s|:|-|\(|\))([a-z])/g,U2=function(o,u,d){return o.length>0?u+d.toUpperCase():o},zx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w.src=p.currentSrc||p.src,w.intrinsicWidth=p.naturalWidth,w.intrinsicHeight=p.naturalHeight,w.context.cache.addImage(w.src),w}return u}(_l),kx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w.canvas=p,w.intrinsicWidth=p.width,w.intrinsicHeight=p.height,w}return u}(_l),Hx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this,S=new XMLSerializer,C=Hm(d,p);return p.setAttribute("width",C.width+"px"),p.setAttribute("height",C.height+"px"),w.svg="data:image/svg+xml,"+encodeURIComponent(S.serializeToString(p)),w.intrinsicWidth=p.width.baseVal.value,w.intrinsicHeight=p.height.baseVal.value,w.context.cache.addImage(w.svg),w}return u}(_l),Nx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w.value=p.value,w}return u}(_l),l_=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w.start=p.start,w.reversed=typeof p.reversed=="boolean"&&p.reversed===!0,w}return u}(_l),M2=[{type:15,flags:0,unit:"px",number:3}],I2=[{type:16,flags:0,number:50}],Q2=function(o){return o.width>o.height?new wc(o.left+(o.width-o.height)/2,o.top,o.height,o.height):o.width<o.height?new wc(o.left,o.top+(o.height-o.width)/2,o.width,o.width):o},D2=function(o){var u=o.type===L2?new Array(o.value.length+1).join(""):o.value;return u.length===0?o.placeholder||"":u},Fm="checkbox",Um="radio",L2="password",q0=707406591,F_=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;switch(w.type=p.type.toLowerCase(),w.checked=p.checked,w.value=D2(p),(w.type===Fm||w.type===Um)&&(w.styles.backgroundColor=3739148031,w.styles.borderTopColor=w.styles.borderRightColor=w.styles.borderBottomColor=w.styles.borderLeftColor=2779096575,w.styles.borderTopWidth=w.styles.borderRightWidth=w.styles.borderBottomWidth=w.styles.borderLeftWidth=1,w.styles.borderTopStyle=w.styles.borderRightStyle=w.styles.borderBottomStyle=w.styles.borderLeftStyle=1,w.styles.backgroundClip=[0],w.styles.backgroundOrigin=[0],w.bounds=Q2(w.bounds)),w.type){case Fm:w.styles.borderTopRightRadius=w.styles.borderTopLeftRadius=w.styles.borderBottomRightRadius=w.styles.borderBottomLeftRadius=M2;break;case Um:w.styles.borderTopRightRadius=w.styles.borderTopLeftRadius=w.styles.borderBottomRightRadius=w.styles.borderBottomLeftRadius=I2;break}return w}return u}(_l),jx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this,S=p.options[p.selectedIndex||0];return w.value=S&&S.text||"",w}return u}(_l),Vx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w.value=p.value,w}return u}(_l),Gx=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;w.src=p.src,w.width=parseInt(p.width,10)||0,w.height=parseInt(p.height,10)||0,w.backgroundColor=w.styles.backgroundColor;try{if(p.contentWindow&&p.contentWindow.document&&p.contentWindow.document.documentElement){w.tree=Zx(d,p.contentWindow.document.documentElement);var S=p.contentWindow.document.documentElement?Qp(d,getComputedStyle(p.contentWindow.document.documentElement).backgroundColor):vc.TRANSPARENT,C=p.contentWindow.document.body?Qp(d,getComputedStyle(p.contentWindow.document.body).backgroundColor):vc.TRANSPARENT;w.backgroundColor=Qu(S)?Qu(C)?w.styles.backgroundColor:C:S}}catch{}return w}return u}(_l),P2=["OL","UL","MENU"],vm=function(o,u,d,p){for(var w=u.firstChild,S=void 0;w;w=S)if(S=w.nextSibling,qx(w)&&w.data.trim().length>0)d.textNodes.push(new T2(o,w,d.styles));else if(nd(w))if($x(w)&&w.assignedNodes)w.assignedNodes().forEach(function(A){return vm(o,A,d,p)});else{var C=Kx(o,w);C.styles.isVisible()&&(R2(w,C,p)?C.flags|=4:O2(C.styles)&&(C.flags|=2),P2.indexOf(w.tagName)!==-1&&(C.flags|=8),d.elements.push(C),w.slot,w.shadowRoot?vm(o,w.shadowRoot,C,p):!Mm(w)&&!Xx(w)&&!Im(w)&&vm(o,w,C,p))}},Kx=function(o,u){return u_(u)?new zx(o,u):Yx(u)?new kx(o,u):Xx(u)?new Hx(o,u):z2(u)?new Nx(o,u):k2(u)?new l_(o,u):H2(u)?new F_(o,u):Im(u)?new jx(o,u):Mm(u)?new Vx(o,u):Wx(u)?new Gx(o,u):new _l(o,u)},Zx=function(o,u){var d=Kx(o,u);return d.flags|=4,vm(o,u,d,d),d},R2=function(o,u,d){return u.styles.isPositionedWithZIndex()||u.styles.opacity<1||u.styles.isTransformed()||U_(o)&&d.styles.isTransparent()},O2=function(o){return o.isPositioned()||o.isFloating()},qx=function(o){return o.nodeType===Node.TEXT_NODE},nd=function(o){return o.nodeType===Node.ELEMENT_NODE},c_=function(o){return nd(o)&&typeof o.style<"u"&&!xm(o)},xm=function(o){return typeof o.className=="object"},z2=function(o){return o.tagName==="LI"},k2=function(o){return o.tagName==="OL"},H2=function(o){return o.tagName==="INPUT"},N2=function(o){return o.tagName==="HTML"},Xx=function(o){return o.tagName==="svg"},U_=function(o){return o.tagName==="BODY"},Yx=function(o){return o.tagName==="CANVAS"},X0=function(o){return o.tagName==="VIDEO"},u_=function(o){return o.tagName==="IMG"},Wx=function(o){return o.tagName==="IFRAME"},Y0=function(o){return o.tagName==="STYLE"},j2=function(o){return o.tagName==="SCRIPT"},Mm=function(o){return o.tagName==="TEXTAREA"},Im=function(o){return o.tagName==="SELECT"},$x=function(o){return o.tagName==="SLOT"},W0=function(o){return o.tagName.indexOf("-")>0},V2=function(){function o(){this.counters={}}return o.prototype.getCounterValue=function(u){var d=this.counters[u];return d&&d.length?d[d.length-1]:1},o.prototype.getCounterValues=function(u){var d=this.counters[u];return d||[]},o.prototype.pop=function(u){var d=this;u.forEach(function(p){return d.counters[p].pop()})},o.prototype.parse=function(u){var d=this,p=u.counterIncrement,w=u.counterReset,S=!0;p!==null&&p.forEach(function(A){var D=d.counters[A.counter];D&&A.increment!==0&&(S=!1,D.length||D.push(1),D[Math.max(0,D.length-1)]+=A.increment)});var C=[];return S&&w.forEach(function(A){var D=d.counters[A.counter];C.push(A.counter),D||(D=d.counters[A.counter]=[]),D.push(A.reset)}),C},o}(),$0={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},J0={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},G2={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},K2={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$f=function(o,u,d,p,w,S){return o<u||o>d?Np(o,w,S.length>0):p.integers.reduce(function(C,A,D){for(;o>=A;)o-=A,C+=p.values[D];return C},"")+S},Jx=function(o,u,d,p){var w="";do d||o--,w=p(o)+w,o/=u;while(o*u>=u);return w},Ui=function(o,u,d,p,w){var S=d-u+1;return(o<0?"-":"")+(Jx(Math.abs(o),S,p,function(C){return Mi(Math.floor(C%S)+u)})+w)},Dh=function(o,u,d){d===void 0&&(d=". ");var p=u.length;return Jx(Math.abs(o),p,!1,function(w){return u[Math.floor(w%p)]})+d},td=1,Bu=2,Cu=4,Mp=8,mc=function(o,u,d,p,w,S){if(o<-9999||o>9999)return Np(o,4,w.length>0);var C=Math.abs(o),A=w;if(C===0)return u[0]+A;for(var D=0;C>0&&D<=4;D++){var R=C%10;R===0&&Yi(S,td)&&A!==""?A=u[R]+A:R>1||R===1&&D===0||R===1&&D===1&&Yi(S,Bu)||R===1&&D===1&&Yi(S,Cu)&&o>100||R===1&&D>1&&Yi(S,Mp)?A=u[R]+(D>0?d[D-1]:"")+A:R===1&&D>0&&(A=d[D-1]+A),C=Math.floor(C/10)}return(o<0?p:"")+A},ev="",tv="",rv="",Qy="",Np=function(o,u,d){var p=d?". ":"",w=d?"":"",S=d?", ":"",C=d?" ":"";switch(u){case 0:return""+C;case 1:return""+C;case 2:return""+C;case 5:var A=Ui(o,48,57,!0,p);return A.length<4?"0"+A:A;case 4:return Dh(o,"",w);case 6:return $f(o,1,3999,$0,3,p).toLowerCase();case 7:return $f(o,1,3999,$0,3,p);case 8:return Ui(o,945,969,!1,p);case 9:return Ui(o,97,122,!1,p);case 10:return Ui(o,65,90,!1,p);case 11:return Ui(o,1632,1641,!0,p);case 12:case 49:return $f(o,1,9999,J0,3,p);case 35:return $f(o,1,9999,J0,3,p).toLowerCase();case 13:return Ui(o,2534,2543,!0,p);case 14:case 30:return Ui(o,6112,6121,!0,p);case 15:return Dh(o,"",w);case 16:return Dh(o,"",w);case 17:case 48:return mc(o,"",ev,"",w,Bu|Cu|Mp);case 47:return mc(o,"",tv,"",w,td|Bu|Cu|Mp);case 42:return mc(o,"",ev,"",w,Bu|Cu|Mp);case 41:return mc(o,"",tv,"",w,td|Bu|Cu|Mp);case 26:return mc(o,"","",rv,w,0);case 25:return mc(o,"","",rv,w,td|Bu|Cu);case 31:return mc(o,"","",Qy,S,td|Bu|Cu);case 33:return mc(o,"","",Qy,S,0);case 32:return mc(o,"","",Qy,S,td|Bu|Cu);case 18:return Ui(o,2406,2415,!0,p);case 20:return $f(o,1,19999,K2,3,p);case 21:return Ui(o,2790,2799,!0,p);case 22:return Ui(o,2662,2671,!0,p);case 22:return $f(o,1,10999,G2,3,p);case 23:return Dh(o,"");case 24:return Dh(o,"");case 27:return Ui(o,3302,3311,!0,p);case 28:return Dh(o,"",w);case 29:return Dh(o,"",w);case 34:return Ui(o,3792,3801,!0,p);case 37:return Ui(o,6160,6169,!0,p);case 38:return Ui(o,4160,4169,!0,p);case 39:return Ui(o,2918,2927,!0,p);case 40:return Ui(o,1776,1785,!0,p);case 43:return Ui(o,3046,3055,!0,p);case 44:return Ui(o,3174,3183,!0,p);case 45:return Ui(o,3664,3673,!0,p);case 46:return Ui(o,3872,3881,!0,p);case 3:default:return Ui(o,48,57,!0,p)}},ew="data-html2canvas-ignore",nv=function(){function o(u,d,p){if(this.context=u,this.options=p,this.scrolledElements=[],this.referenceElement=d,this.counters=new V2,this.quoteDepth=0,!d.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(d.ownerDocument.documentElement,!1)}return o.prototype.toIFrame=function(u,d){var p=this,w=Z2(u,d);if(!w.contentWindow)return Promise.reject("Unable to find iframe window");var S=u.defaultView.pageXOffset,C=u.defaultView.pageYOffset,A=w.contentWindow,D=A.document,R=Y2(w).then(function(){return is(p,void 0,void 0,function(){var k,q;return ka(this,function(X){switch(X.label){case 0:return this.scrolledElements.forEach(eT),A&&(A.scrollTo(d.left,d.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==d.top||A.scrollX!==d.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-d.left,A.scrollY-d.top,0,0))),k=this.options.onclone,q=this.clonedReferenceElement,typeof q>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:D.fonts&&D.fonts.ready?[4,D.fonts.ready]:[3,2];case 1:X.sent(),X.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,X2(D)]:[3,4];case 3:X.sent(),X.label=4;case 4:return typeof k=="function"?[2,Promise.resolve().then(function(){return k(D,q)}).then(function(){return w})]:[2,w]}})})});return D.open(),D.write($2(document.doctype)+"<html></html>"),J2(this.referenceElement.ownerDocument,S,C),D.replaceChild(D.adoptNode(this.documentElement),D.documentElement),D.close(),R},o.prototype.createElementClone=function(u){if(o_(u,2))debugger;if(Yx(u))return this.createCanvasClone(u);if(X0(u))return this.createVideoClone(u);if(Y0(u))return this.createStyleClone(u);var d=u.cloneNode(!1);return u_(d)&&(u_(u)&&u.currentSrc&&u.currentSrc!==u.src&&(d.src=u.currentSrc,d.srcset=""),d.loading==="lazy"&&(d.loading="eager")),W0(d)?this.createCustomElementClone(d):d},o.prototype.createCustomElementClone=function(u){var d=document.createElement("html2canvascustomelement");return Dy(u.style,d),d},o.prototype.createStyleClone=function(u){try{var d=u.sheet;if(d&&d.cssRules){var p=[].slice.call(d.cssRules,0).reduce(function(S,C){return C&&typeof C.cssText=="string"?S+C.cssText:S},""),w=u.cloneNode(!1);return w.textContent=p,w}}catch(S){if(this.context.logger.error("Unable to access cssRules property",S),S.name!=="SecurityError")throw S}return u.cloneNode(!1)},o.prototype.createCanvasClone=function(u){var d;if(this.options.inlineImages&&u.ownerDocument){var p=u.ownerDocument.createElement("img");try{return p.src=u.toDataURL(),p}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",u)}}var w=u.cloneNode(!1);try{w.width=u.width,w.height=u.height;var S=u.getContext("2d"),C=w.getContext("2d");if(C)if(!this.options.allowTaint&&S)C.putImageData(S.getImageData(0,0,u.width,u.height),0,0);else{var A=(d=u.getContext("webgl2"))!==null&&d!==void 0?d:u.getContext("webgl");if(A){var D=A.getContextAttributes();(D==null?void 0:D.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",u)}C.drawImage(u,0,0)}return w}catch{this.context.logger.info("Unable to clone canvas as it is tainted",u)}return w},o.prototype.createVideoClone=function(u){var d=u.ownerDocument.createElement("canvas");d.width=u.offsetWidth,d.height=u.offsetHeight;var p=d.getContext("2d");try{return p&&(p.drawImage(u,0,0,d.width,d.height),this.options.allowTaint||p.getImageData(0,0,d.width,d.height)),d}catch{this.context.logger.info("Unable to clone video as it is tainted",u)}var w=u.ownerDocument.createElement("canvas");return w.width=u.offsetWidth,w.height=u.offsetHeight,w},o.prototype.appendChildNode=function(u,d,p){(!nd(d)||!j2(d)&&!d.hasAttribute(ew)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(d)))&&(!this.options.copyStyles||!nd(d)||!Y0(d))&&u.appendChild(this.cloneNode(d,p))},o.prototype.cloneChildNodes=function(u,d,p){for(var w=this,S=u.shadowRoot?u.shadowRoot.firstChild:u.firstChild;S;S=S.nextSibling)if(nd(S)&&$x(S)&&typeof S.assignedNodes=="function"){var C=S.assignedNodes();C.length&&C.forEach(function(A){return w.appendChildNode(d,A,p)})}else this.appendChildNode(d,S,p)},o.prototype.cloneNode=function(u,d){if(qx(u))return document.createTextNode(u.data);if(!u.ownerDocument)return u.cloneNode(!1);var p=u.ownerDocument.defaultView;if(p&&nd(u)&&(c_(u)||xm(u))){var w=this.createElementClone(u);w.style.transitionProperty="none";var S=p.getComputedStyle(u),C=p.getComputedStyle(u,":before"),A=p.getComputedStyle(u,":after");this.referenceElement===u&&c_(w)&&(this.clonedReferenceElement=w),U_(w)&&nT(w);var D=this.counters.parse(new D0(this.context,S)),R=this.resolvePseudoContent(u,w,C,Pp.BEFORE);W0(u)&&(d=!0),X0(u)||this.cloneChildNodes(u,w,d),R&&w.insertBefore(R,w.firstChild);var k=this.resolvePseudoContent(u,w,A,Pp.AFTER);return k&&w.appendChild(k),this.counters.pop(D),(S&&(this.options.copyStyles||xm(u))&&!Wx(u)||d)&&Dy(S,w),(u.scrollTop!==0||u.scrollLeft!==0)&&this.scrolledElements.push([w,u.scrollLeft,u.scrollTop]),(Mm(u)||Im(u))&&(Mm(w)||Im(w))&&(w.value=u.value),w}return u.cloneNode(!1)},o.prototype.resolvePseudoContent=function(u,d,p,w){var S=this;if(p){var C=p.content,A=d.ownerDocument;if(!(!A||!C||C==="none"||C==="-moz-alt-content"||p.display==="none")){this.counters.parse(new D0(this.context,p));var D=new zE(this.context,p),R=A.createElement("html2canvaspseudoelement");Dy(p,R),D.content.forEach(function(q){if(q.type===0)R.appendChild(A.createTextNode(q.value));else if(q.type===22){var X=A.createElement("img");X.src=q.value,X.style.opacity="1",R.appendChild(X)}else if(q.type===18){if(q.name==="attr"){var W=q.values.filter(Pn);W.length&&R.appendChild(A.createTextNode(u.getAttribute(W[0].value)||""))}else if(q.name==="counter"){var ne=q.values.filter(sd),ye=ne[0],Se=ne[1];if(ye&&Pn(ye)){var le=S.counters.getCounterValue(ye.value),ve=Se&&Pn(Se)?s_.parse(S.context,Se.value):3;R.appendChild(A.createTextNode(Np(le,ve,!1)))}}else if(q.name==="counters"){var De=q.values.filter(sd),ye=De[0],Re=De[1],Se=De[2];if(ye&&Pn(ye)){var Me=S.counters.getCounterValues(ye.value),Ne=Se&&Pn(Se)?s_.parse(S.context,Se.value):3,st=Re&&Re.type===0?Re.value:"",mt=Me.map(function(He){return Np(He,Ne,!1)}).join(st);R.appendChild(A.createTextNode(mt))}}}else if(q.type===20)switch(q.value){case"open-quote":R.appendChild(A.createTextNode(Q0(D.quotes,S.quoteDepth++,!0)));break;case"close-quote":R.appendChild(A.createTextNode(Q0(D.quotes,--S.quoteDepth,!1)));break;default:R.appendChild(A.createTextNode(q.value))}}),R.className=h_+" "+f_;var k=w===Pp.BEFORE?" "+h_:" "+f_;return xm(d)?d.className.baseValue+=k:d.className+=k,R}}},o.destroy=function(u){return u.parentNode?(u.parentNode.removeChild(u),!0):!1},o}(),Pp;(function(o){o[o.BEFORE=0]="BEFORE",o[o.AFTER=1]="AFTER"})(Pp||(Pp={}));var Z2=function(o,u){var d=o.createElement("iframe");return d.className="html2canvas-container",d.style.visibility="hidden",d.style.position="fixed",d.style.left="-10000px",d.style.top="0px",d.style.border="0",d.width=u.width.toString(),d.height=u.height.toString(),d.scrolling="no",d.setAttribute(ew,"true"),o.body.appendChild(d),d},q2=function(o){return new Promise(function(u){if(o.complete){u();return}if(!o.src){u();return}o.onload=u,o.onerror=u})},X2=function(o){return Promise.all([].slice.call(o.images,0).map(q2))},Y2=function(o){return new Promise(function(u,d){var p=o.contentWindow;if(!p)return d("No window assigned for iframe");var w=p.document;p.onload=o.onload=function(){p.onload=o.onload=null;var S=setInterval(function(){w.body.childNodes.length>0&&w.readyState==="complete"&&(clearInterval(S),u(o))},50)}})},W2=["all","d","content"],Dy=function(o,u){for(var d=o.length-1;d>=0;d--){var p=o.item(d);W2.indexOf(p)===-1&&u.style.setProperty(p,o.getPropertyValue(p))}return u},$2=function(o){var u="";return o&&(u+="<!DOCTYPE ",o.name&&(u+=o.name),o.internalSubset&&(u+=o.internalSubset),o.publicId&&(u+='"'+o.publicId+'"'),o.systemId&&(u+='"'+o.systemId+'"'),u+=">"),u},J2=function(o,u,d){o&&o.defaultView&&(u!==o.defaultView.pageXOffset||d!==o.defaultView.pageYOffset)&&o.defaultView.scrollTo(u,d)},eT=function(o){var u=o[0],d=o[1],p=o[2];u.scrollLeft=d,u.scrollTop=p},tT=":before",rT=":after",h_="___html2canvas___pseudoelement_before",f_="___html2canvas___pseudoelement_after",iv=`{
    content: "" !important;
    display: none !important;
}`,nT=function(o){iT(o,"."+h_+tT+iv+`
         .`+f_+rT+iv)},iT=function(o,u){var d=o.ownerDocument;if(d){var p=d.createElement("style");p.textContent=u,o.appendChild(p)}},tw=function(){function o(){}return o.getOrigin=function(u){var d=o._link;return d?(d.href=u,d.href=d.href,d.protocol+d.hostname+d.port):"about:blank"},o.isSameOrigin=function(u){return o.getOrigin(u)===o._origin},o.setContext=function(u){o._link=u.document.createElement("a"),o._origin=o.getOrigin(u.location.href)},o._origin="about:blank",o}(),aT=function(){function o(u,d){this.context=u,this._options=d,this._cache={}}return o.prototype.addImage=function(u){var d=Promise.resolve();return this.has(u)||(Py(u)||lT(u))&&(this._cache[u]=this.loadImage(u)).catch(function(){}),d},o.prototype.match=function(u){return this._cache[u]},o.prototype.loadImage=function(u){return is(this,void 0,void 0,function(){var d,p,w,S,C=this;return ka(this,function(A){switch(A.label){case 0:return d=tw.isSameOrigin(u),p=!Ly(u)&&this._options.useCORS===!0&&wa.SUPPORT_CORS_IMAGES&&!d,w=!Ly(u)&&!d&&!Py(u)&&typeof this._options.proxy=="string"&&wa.SUPPORT_CORS_XHR&&!p,!d&&this._options.allowTaint===!1&&!Ly(u)&&!Py(u)&&!w&&!p?[2]:(S=u,w?[4,this.proxy(S)]:[3,2]);case 1:S=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+u.substring(0,256)),[4,new Promise(function(D,R){var k=new Image;k.onload=function(){return D(k)},k.onerror=R,(cT(S)||p)&&(k.crossOrigin="anonymous"),k.src=S,k.complete===!0&&setTimeout(function(){return D(k)},500),C._options.imageTimeout>0&&setTimeout(function(){return R("Timed out ("+C._options.imageTimeout+"ms) loading image")},C._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},o.prototype.has=function(u){return typeof this._cache[u]<"u"},o.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},o.prototype.proxy=function(u){var d=this,p=this._options.proxy;if(!p)throw new Error("No proxy defined");var w=u.substring(0,256);return new Promise(function(S,C){var A=wa.SUPPORT_RESPONSE_TYPE?"blob":"text",D=new XMLHttpRequest;D.onload=function(){if(D.status===200)if(A==="text")S(D.response);else{var q=new FileReader;q.addEventListener("load",function(){return S(q.result)},!1),q.addEventListener("error",function(X){return C(X)},!1),q.readAsDataURL(D.response)}else C("Failed to proxy resource "+w+" with status code "+D.status)},D.onerror=C;var R=p.indexOf("?")>-1?"&":"?";if(D.open("GET",""+p+R+"url="+encodeURIComponent(u)+"&responseType="+A),A!=="text"&&D instanceof XMLHttpRequest&&(D.responseType=A),d._options.imageTimeout){var k=d._options.imageTimeout;D.timeout=k,D.ontimeout=function(){return C("Timed out ("+k+"ms) proxying "+w)}}D.send()})},o}(),sT=/^data:image\/svg\+xml/i,oT=/^data:image\/.*;base64,/i,AT=/^data:image\/.*/i,lT=function(o){return wa.SUPPORT_SVG_DRAWING||!uT(o)},Ly=function(o){return AT.test(o)},cT=function(o){return oT.test(o)},Py=function(o){return o.substr(0,4)==="blob"},uT=function(o){return o.substr(-3).toLowerCase()==="svg"||sT.test(o)},Gt=function(){function o(u,d){this.type=0,this.x=u,this.y=d}return o.prototype.add=function(u,d){return new o(this.x+u,this.y+d)},o}(),Jf=function(o,u,d){return new Gt(o.x+(u.x-o.x)*d,o.y+(u.y-o.y)*d)},sm=function(){function o(u,d,p,w){this.type=1,this.start=u,this.startControl=d,this.endControl=p,this.end=w}return o.prototype.subdivide=function(u,d){var p=Jf(this.start,this.startControl,u),w=Jf(this.startControl,this.endControl,u),S=Jf(this.endControl,this.end,u),C=Jf(p,w,u),A=Jf(w,S,u),D=Jf(C,A,u);return d?new o(this.start,p,C,D):new o(D,A,S,this.end)},o.prototype.add=function(u,d){return new o(this.start.add(u,d),this.startControl.add(u,d),this.endControl.add(u,d),this.end.add(u,d))},o.prototype.reverse=function(){return new o(this.end,this.endControl,this.startControl,this.start)},o}(),Po=function(o){return o.type===1},hT=function(){function o(u){var d=u.styles,p=u.bounds,w=Fp(d.borderTopLeftRadius,p.width,p.height),S=w[0],C=w[1],A=Fp(d.borderTopRightRadius,p.width,p.height),D=A[0],R=A[1],k=Fp(d.borderBottomRightRadius,p.width,p.height),q=k[0],X=k[1],W=Fp(d.borderBottomLeftRadius,p.width,p.height),ne=W[0],ye=W[1],Se=[];Se.push((S+D)/p.width),Se.push((ne+q)/p.width),Se.push((C+ye)/p.height),Se.push((R+X)/p.height);var le=Math.max.apply(Math,Se);le>1&&(S/=le,C/=le,D/=le,R/=le,q/=le,X/=le,ne/=le,ye/=le);var ve=p.width-D,De=p.height-X,Re=p.width-q,Me=p.height-ye,Ne=d.borderTopWidth,st=d.borderRightWidth,mt=d.borderBottomWidth,ot=d.borderLeftWidth,Qt=Yn(d.paddingTop,u.bounds.width),He=Yn(d.paddingRight,u.bounds.width),Zt=Yn(d.paddingBottom,u.bounds.width),Ut=Yn(d.paddingLeft,u.bounds.width);this.topLeftBorderDoubleOuterBox=S>0||C>0?li(p.left+ot/3,p.top+Ne/3,S-ot/3,C-Ne/3,bn.TOP_LEFT):new Gt(p.left+ot/3,p.top+Ne/3),this.topRightBorderDoubleOuterBox=S>0||C>0?li(p.left+ve,p.top+Ne/3,D-st/3,R-Ne/3,bn.TOP_RIGHT):new Gt(p.left+p.width-st/3,p.top+Ne/3),this.bottomRightBorderDoubleOuterBox=q>0||X>0?li(p.left+Re,p.top+De,q-st/3,X-mt/3,bn.BOTTOM_RIGHT):new Gt(p.left+p.width-st/3,p.top+p.height-mt/3),this.bottomLeftBorderDoubleOuterBox=ne>0||ye>0?li(p.left+ot/3,p.top+Me,ne-ot/3,ye-mt/3,bn.BOTTOM_LEFT):new Gt(p.left+ot/3,p.top+p.height-mt/3),this.topLeftBorderDoubleInnerBox=S>0||C>0?li(p.left+ot*2/3,p.top+Ne*2/3,S-ot*2/3,C-Ne*2/3,bn.TOP_LEFT):new Gt(p.left+ot*2/3,p.top+Ne*2/3),this.topRightBorderDoubleInnerBox=S>0||C>0?li(p.left+ve,p.top+Ne*2/3,D-st*2/3,R-Ne*2/3,bn.TOP_RIGHT):new Gt(p.left+p.width-st*2/3,p.top+Ne*2/3),this.bottomRightBorderDoubleInnerBox=q>0||X>0?li(p.left+Re,p.top+De,q-st*2/3,X-mt*2/3,bn.BOTTOM_RIGHT):new Gt(p.left+p.width-st*2/3,p.top+p.height-mt*2/3),this.bottomLeftBorderDoubleInnerBox=ne>0||ye>0?li(p.left+ot*2/3,p.top+Me,ne-ot*2/3,ye-mt*2/3,bn.BOTTOM_LEFT):new Gt(p.left+ot*2/3,p.top+p.height-mt*2/3),this.topLeftBorderStroke=S>0||C>0?li(p.left+ot/2,p.top+Ne/2,S-ot/2,C-Ne/2,bn.TOP_LEFT):new Gt(p.left+ot/2,p.top+Ne/2),this.topRightBorderStroke=S>0||C>0?li(p.left+ve,p.top+Ne/2,D-st/2,R-Ne/2,bn.TOP_RIGHT):new Gt(p.left+p.width-st/2,p.top+Ne/2),this.bottomRightBorderStroke=q>0||X>0?li(p.left+Re,p.top+De,q-st/2,X-mt/2,bn.BOTTOM_RIGHT):new Gt(p.left+p.width-st/2,p.top+p.height-mt/2),this.bottomLeftBorderStroke=ne>0||ye>0?li(p.left+ot/2,p.top+Me,ne-ot/2,ye-mt/2,bn.BOTTOM_LEFT):new Gt(p.left+ot/2,p.top+p.height-mt/2),this.topLeftBorderBox=S>0||C>0?li(p.left,p.top,S,C,bn.TOP_LEFT):new Gt(p.left,p.top),this.topRightBorderBox=D>0||R>0?li(p.left+ve,p.top,D,R,bn.TOP_RIGHT):new Gt(p.left+p.width,p.top),this.bottomRightBorderBox=q>0||X>0?li(p.left+Re,p.top+De,q,X,bn.BOTTOM_RIGHT):new Gt(p.left+p.width,p.top+p.height),this.bottomLeftBorderBox=ne>0||ye>0?li(p.left,p.top+Me,ne,ye,bn.BOTTOM_LEFT):new Gt(p.left,p.top+p.height),this.topLeftPaddingBox=S>0||C>0?li(p.left+ot,p.top+Ne,Math.max(0,S-ot),Math.max(0,C-Ne),bn.TOP_LEFT):new Gt(p.left+ot,p.top+Ne),this.topRightPaddingBox=D>0||R>0?li(p.left+Math.min(ve,p.width-st),p.top+Ne,ve>p.width+st?0:Math.max(0,D-st),Math.max(0,R-Ne),bn.TOP_RIGHT):new Gt(p.left+p.width-st,p.top+Ne),this.bottomRightPaddingBox=q>0||X>0?li(p.left+Math.min(Re,p.width-ot),p.top+Math.min(De,p.height-mt),Math.max(0,q-st),Math.max(0,X-mt),bn.BOTTOM_RIGHT):new Gt(p.left+p.width-st,p.top+p.height-mt),this.bottomLeftPaddingBox=ne>0||ye>0?li(p.left+ot,p.top+Math.min(Me,p.height-mt),Math.max(0,ne-ot),Math.max(0,ye-mt),bn.BOTTOM_LEFT):new Gt(p.left+ot,p.top+p.height-mt),this.topLeftContentBox=S>0||C>0?li(p.left+ot+Ut,p.top+Ne+Qt,Math.max(0,S-(ot+Ut)),Math.max(0,C-(Ne+Qt)),bn.TOP_LEFT):new Gt(p.left+ot+Ut,p.top+Ne+Qt),this.topRightContentBox=D>0||R>0?li(p.left+Math.min(ve,p.width+ot+Ut),p.top+Ne+Qt,ve>p.width+ot+Ut?0:D-ot+Ut,R-(Ne+Qt),bn.TOP_RIGHT):new Gt(p.left+p.width-(st+He),p.top+Ne+Qt),this.bottomRightContentBox=q>0||X>0?li(p.left+Math.min(Re,p.width-(ot+Ut)),p.top+Math.min(De,p.height+Ne+Qt),Math.max(0,q-(st+He)),X-(mt+Zt),bn.BOTTOM_RIGHT):new Gt(p.left+p.width-(st+He),p.top+p.height-(mt+Zt)),this.bottomLeftContentBox=ne>0||ye>0?li(p.left+ot+Ut,p.top+Me,Math.max(0,ne-(ot+Ut)),ye-(mt+Zt),bn.BOTTOM_LEFT):new Gt(p.left+ot+Ut,p.top+p.height-(mt+Zt))}return o}(),bn;(function(o){o[o.TOP_LEFT=0]="TOP_LEFT",o[o.TOP_RIGHT=1]="TOP_RIGHT",o[o.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",o[o.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(bn||(bn={}));var li=function(o,u,d,p,w){var S=4*((Math.sqrt(2)-1)/3),C=d*S,A=p*S,D=o+d,R=u+p;switch(w){case bn.TOP_LEFT:return new sm(new Gt(o,R),new Gt(o,R-A),new Gt(D-C,u),new Gt(D,u));case bn.TOP_RIGHT:return new sm(new Gt(o,u),new Gt(o+C,u),new Gt(D,R-A),new Gt(D,R));case bn.BOTTOM_RIGHT:return new sm(new Gt(D,u),new Gt(D,u+A),new Gt(o+C,R),new Gt(o,R));case bn.BOTTOM_LEFT:default:return new sm(new Gt(D,R),new Gt(D-C,R),new Gt(o,u+A),new Gt(o,u))}},Qm=function(o){return[o.topLeftBorderBox,o.topRightBorderBox,o.bottomRightBorderBox,o.bottomLeftBorderBox]},fT=function(o){return[o.topLeftContentBox,o.topRightContentBox,o.bottomRightContentBox,o.bottomLeftContentBox]},Dm=function(o){return[o.topLeftPaddingBox,o.topRightPaddingBox,o.bottomRightPaddingBox,o.bottomLeftPaddingBox]},dT=function(){function o(u,d,p){this.offsetX=u,this.offsetY=d,this.matrix=p,this.type=0,this.target=6}return o}(),om=function(){function o(u,d){this.path=u,this.target=d,this.type=1}return o}(),pT=function(){function o(u){this.opacity=u,this.type=2,this.target=6}return o}(),gT=function(o){return o.type===0},rw=function(o){return o.type===1},mT=function(o){return o.type===2},av=function(o,u){return o.length===u.length?o.some(function(d,p){return d===u[p]}):!1},yT=function(o,u,d,p,w){return o.map(function(S,C){switch(C){case 0:return S.add(u,d);case 1:return S.add(u+p,d);case 2:return S.add(u+p,d+w);case 3:return S.add(u,d+w)}return S})},nw=function(){function o(u){this.element=u,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return o}(),iw=function(){function o(u,d){if(this.container=u,this.parent=d,this.effects=[],this.curves=new hT(this.container),this.container.styles.opacity<1&&this.effects.push(new pT(this.container.styles.opacity)),this.container.styles.transform!==null){var p=this.container.bounds.left+this.container.styles.transformOrigin[0].number,w=this.container.bounds.top+this.container.styles.transformOrigin[1].number,S=this.container.styles.transform;this.effects.push(new dT(p,w,S))}if(this.container.styles.overflowX!==0){var C=Qm(this.curves),A=Dm(this.curves);av(C,A)?this.effects.push(new om(C,6)):(this.effects.push(new om(C,2)),this.effects.push(new om(A,4)))}}return o.prototype.getEffects=function(u){for(var d=[2,3].indexOf(this.container.styles.position)===-1,p=this.parent,w=this.effects.slice(0);p;){var S=p.effects.filter(function(D){return!rw(D)});if(d||p.container.styles.position!==0||!p.parent){if(w.unshift.apply(w,S),d=[2,3].indexOf(p.container.styles.position)===-1,p.container.styles.overflowX!==0){var C=Qm(p.curves),A=Dm(p.curves);av(C,A)||w.unshift(new om(A,6))}}else w.unshift.apply(w,S);p=p.parent}return w.filter(function(D){return Yi(D.target,u)})},o}(),d_=function(o,u,d,p){o.container.elements.forEach(function(w){var S=Yi(w.flags,4),C=Yi(w.flags,2),A=new iw(w,o);Yi(w.styles.display,2048)&&p.push(A);var D=Yi(w.flags,8)?[]:p;if(S||C){var R=S||w.styles.isPositioned()?d:u,k=new nw(A);if(w.styles.isPositioned()||w.styles.opacity<1||w.styles.isTransformed()){var q=w.styles.zIndex.order;if(q<0){var X=0;R.negativeZIndex.some(function(ne,ye){return q>ne.element.container.styles.zIndex.order?(X=ye,!1):X>0}),R.negativeZIndex.splice(X,0,k)}else if(q>0){var W=0;R.positiveZIndex.some(function(ne,ye){return q>=ne.element.container.styles.zIndex.order?(W=ye+1,!1):W>0}),R.positiveZIndex.splice(W,0,k)}else R.zeroOrAutoZIndexOrTransformedOrOpacity.push(k)}else w.styles.isFloating()?R.nonPositionedFloats.push(k):R.nonPositionedInlineLevel.push(k);d_(A,k,S?k:d,D)}else w.styles.isInlineLevel()?u.inlineLevel.push(A):u.nonInlineLevel.push(A),d_(A,u,d,D);Yi(w.flags,8)&&aw(w,D)})},aw=function(o,u){for(var d=o instanceof l_?o.start:1,p=o instanceof l_?o.reversed:!1,w=0;w<u.length;w++){var S=u[w];S.container instanceof Nx&&typeof S.container.value=="number"&&S.container.value!==0&&(d=S.container.value),S.listValue=Np(d,S.container.styles.listStyleType,!0),d+=p?-1:1}},_T=function(o){var u=new iw(o,null),d=new nw(u),p=[];return d_(u,d,d,p),aw(u.container,p),d},sv=function(o,u){switch(u){case 0:return Oo(o.topLeftBorderBox,o.topLeftPaddingBox,o.topRightBorderBox,o.topRightPaddingBox);case 1:return Oo(o.topRightBorderBox,o.topRightPaddingBox,o.bottomRightBorderBox,o.bottomRightPaddingBox);case 2:return Oo(o.bottomRightBorderBox,o.bottomRightPaddingBox,o.bottomLeftBorderBox,o.bottomLeftPaddingBox);case 3:default:return Oo(o.bottomLeftBorderBox,o.bottomLeftPaddingBox,o.topLeftBorderBox,o.topLeftPaddingBox)}},vT=function(o,u){switch(u){case 0:return Oo(o.topLeftBorderBox,o.topLeftBorderDoubleOuterBox,o.topRightBorderBox,o.topRightBorderDoubleOuterBox);case 1:return Oo(o.topRightBorderBox,o.topRightBorderDoubleOuterBox,o.bottomRightBorderBox,o.bottomRightBorderDoubleOuterBox);case 2:return Oo(o.bottomRightBorderBox,o.bottomRightBorderDoubleOuterBox,o.bottomLeftBorderBox,o.bottomLeftBorderDoubleOuterBox);case 3:default:return Oo(o.bottomLeftBorderBox,o.bottomLeftBorderDoubleOuterBox,o.topLeftBorderBox,o.topLeftBorderDoubleOuterBox)}},xT=function(o,u){switch(u){case 0:return Oo(o.topLeftBorderDoubleInnerBox,o.topLeftPaddingBox,o.topRightBorderDoubleInnerBox,o.topRightPaddingBox);case 1:return Oo(o.topRightBorderDoubleInnerBox,o.topRightPaddingBox,o.bottomRightBorderDoubleInnerBox,o.bottomRightPaddingBox);case 2:return Oo(o.bottomRightBorderDoubleInnerBox,o.bottomRightPaddingBox,o.bottomLeftBorderDoubleInnerBox,o.bottomLeftPaddingBox);case 3:default:return Oo(o.bottomLeftBorderDoubleInnerBox,o.bottomLeftPaddingBox,o.topLeftBorderDoubleInnerBox,o.topLeftPaddingBox)}},wT=function(o,u){switch(u){case 0:return Am(o.topLeftBorderStroke,o.topRightBorderStroke);case 1:return Am(o.topRightBorderStroke,o.bottomRightBorderStroke);case 2:return Am(o.bottomRightBorderStroke,o.bottomLeftBorderStroke);case 3:default:return Am(o.bottomLeftBorderStroke,o.topLeftBorderStroke)}},Am=function(o,u){var d=[];return Po(o)?d.push(o.subdivide(.5,!1)):d.push(o),Po(u)?d.push(u.subdivide(.5,!0)):d.push(u),d},Oo=function(o,u,d,p){var w=[];return Po(o)?w.push(o.subdivide(.5,!1)):w.push(o),Po(d)?w.push(d.subdivide(.5,!0)):w.push(d),Po(p)?w.push(p.subdivide(.5,!0).reverse()):w.push(p),Po(u)?w.push(u.subdivide(.5,!1).reverse()):w.push(u),w},sw=function(o){var u=o.bounds,d=o.styles;return u.add(d.borderLeftWidth,d.borderTopWidth,-(d.borderRightWidth+d.borderLeftWidth),-(d.borderTopWidth+d.borderBottomWidth))},Lm=function(o){var u=o.styles,d=o.bounds,p=Yn(u.paddingLeft,d.width),w=Yn(u.paddingRight,d.width),S=Yn(u.paddingTop,d.width),C=Yn(u.paddingBottom,d.width);return d.add(p+u.borderLeftWidth,S+u.borderTopWidth,-(u.borderRightWidth+u.borderLeftWidth+p+w),-(u.borderTopWidth+u.borderBottomWidth+S+C))},bT=function(o,u){return o===0?u.bounds:o===2?Lm(u):sw(u)},BT=function(o,u){return o===0?u.bounds:o===2?Lm(u):sw(u)},Ry=function(o,u,d){var p=bT(rd(o.styles.backgroundOrigin,u),o),w=BT(rd(o.styles.backgroundClip,u),o),S=CT(rd(o.styles.backgroundSize,u),d,p),C=S[0],A=S[1],D=Fp(rd(o.styles.backgroundPosition,u),p.width-C,p.height-A),R=ET(rd(o.styles.backgroundRepeat,u),D,S,p,w),k=Math.round(p.left+D[0]),q=Math.round(p.top+D[1]);return[R,k,q,C,A]},ed=function(o){return Pn(o)&&o.value===id.AUTO},lm=function(o){return typeof o=="number"},CT=function(o,u,d){var p=u[0],w=u[1],S=u[2],C=o[0],A=o[1];if(!C)return[0,0];if(ki(C)&&A&&ki(A))return[Yn(C,d.width),Yn(A,d.height)];var D=lm(S);if(Pn(C)&&(C.value===id.CONTAIN||C.value===id.COVER)){if(lm(S)){var R=d.width/d.height;return R<S!=(C.value===id.COVER)?[d.width,d.width/S]:[d.height*S,d.height]}return[d.width,d.height]}var k=lm(p),q=lm(w),X=k||q;if(ed(C)&&(!A||ed(A))){if(k&&q)return[p,w];if(!D&&!X)return[d.width,d.height];if(X&&D){var W=k?p:w*S,ne=q?w:p/S;return[W,ne]}var ye=k?p:d.width,Se=q?w:d.height;return[ye,Se]}if(D){var le=0,ve=0;return ki(C)?le=Yn(C,d.width):ki(A)&&(ve=Yn(A,d.height)),ed(C)?le=ve*S:(!A||ed(A))&&(ve=le/S),[le,ve]}var De=null,Re=null;if(ki(C)?De=Yn(C,d.width):A&&ki(A)&&(Re=Yn(A,d.height)),De!==null&&(!A||ed(A))&&(Re=k&&q?De/p*w:d.height),Re!==null&&ed(C)&&(De=k&&q?Re/w*p:d.width),De!==null&&Re!==null)return[De,Re];throw new Error("Unable to calculate background-size for element")},rd=function(o,u){var d=o[u];return typeof d>"u"?o[0]:d},ET=function(o,u,d,p,w){var S=u[0],C=u[1],A=d[0],D=d[1];switch(o){case 2:return[new Gt(Math.round(p.left),Math.round(p.top+C)),new Gt(Math.round(p.left+p.width),Math.round(p.top+C)),new Gt(Math.round(p.left+p.width),Math.round(D+p.top+C)),new Gt(Math.round(p.left),Math.round(D+p.top+C))];case 3:return[new Gt(Math.round(p.left+S),Math.round(p.top)),new Gt(Math.round(p.left+S+A),Math.round(p.top)),new Gt(Math.round(p.left+S+A),Math.round(p.height+p.top)),new Gt(Math.round(p.left+S),Math.round(p.height+p.top))];case 1:return[new Gt(Math.round(p.left+S),Math.round(p.top+C)),new Gt(Math.round(p.left+S+A),Math.round(p.top+C)),new Gt(Math.round(p.left+S+A),Math.round(p.top+C+D)),new Gt(Math.round(p.left+S),Math.round(p.top+C+D))];default:return[new Gt(Math.round(w.left),Math.round(w.top)),new Gt(Math.round(w.left+w.width),Math.round(w.top)),new Gt(Math.round(w.left+w.width),Math.round(w.height+w.top)),new Gt(Math.round(w.left),Math.round(w.height+w.top))]}},TT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ov="Hidden Text",ST=function(){function o(u){this._data={},this._document=u}return o.prototype.parseMetrics=function(u,d){var p=this._document.createElement("div"),w=this._document.createElement("img"),S=this._document.createElement("span"),C=this._document.body;p.style.visibility="hidden",p.style.fontFamily=u,p.style.fontSize=d,p.style.margin="0",p.style.padding="0",p.style.whiteSpace="nowrap",C.appendChild(p),w.src=TT,w.width=1,w.height=1,w.style.margin="0",w.style.padding="0",w.style.verticalAlign="baseline",S.style.fontFamily=u,S.style.fontSize=d,S.style.margin="0",S.style.padding="0",S.appendChild(this._document.createTextNode(ov)),p.appendChild(S),p.appendChild(w);var A=w.offsetTop-S.offsetTop+2;p.removeChild(S),p.appendChild(this._document.createTextNode(ov)),p.style.lineHeight="normal",w.style.verticalAlign="super";var D=w.offsetTop-p.offsetTop+2;return C.removeChild(p),{baseline:A,middle:D}},o.prototype.getMetrics=function(u,d){var p=u+" "+d;return typeof this._data[p]>"u"&&(this._data[p]=this.parseMetrics(u,d)),this._data[p]},o}(),ow=function(){function o(u,d){this.context=u,this.options=d}return o}(),FT=1e4,UT=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w._activeEffects=[],w.canvas=p.canvas?p.canvas:document.createElement("canvas"),w.ctx=w.canvas.getContext("2d"),p.canvas||(w.canvas.width=Math.floor(p.width*p.scale),w.canvas.height=Math.floor(p.height*p.scale),w.canvas.style.width=p.width+"px",w.canvas.style.height=p.height+"px"),w.fontMetrics=new ST(document),w.ctx.scale(w.options.scale,w.options.scale),w.ctx.translate(-p.x,-p.y),w.ctx.textBaseline="bottom",w._activeEffects=[],w.context.logger.debug("Canvas renderer initialized ("+p.width+"x"+p.height+") with scale "+p.scale),w}return u.prototype.applyEffects=function(d){for(var p=this;this._activeEffects.length;)this.popEffect();d.forEach(function(w){return p.applyEffect(w)})},u.prototype.applyEffect=function(d){this.ctx.save(),mT(d)&&(this.ctx.globalAlpha=d.opacity),gT(d)&&(this.ctx.translate(d.offsetX,d.offsetY),this.ctx.transform(d.matrix[0],d.matrix[1],d.matrix[2],d.matrix[3],d.matrix[4],d.matrix[5]),this.ctx.translate(-d.offsetX,-d.offsetY)),rw(d)&&(this.path(d.path),this.ctx.clip()),this._activeEffects.push(d)},u.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},u.prototype.renderStack=function(d){return is(this,void 0,void 0,function(){var p;return ka(this,function(w){switch(w.label){case 0:return p=d.element.container.styles,p.isVisible()?[4,this.renderStackContent(d)]:[3,2];case 1:w.sent(),w.label=2;case 2:return[2]}})})},u.prototype.renderNode=function(d){return is(this,void 0,void 0,function(){return ka(this,function(p){switch(p.label){case 0:if(Yi(d.container.flags,16))debugger;return d.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(d)]:[3,3];case 1:return p.sent(),[4,this.renderNodeContent(d)];case 2:p.sent(),p.label=3;case 3:return[2]}})})},u.prototype.renderTextWithLetterSpacing=function(d,p,w){var S=this;if(p===0)this.ctx.fillText(d.text,d.bounds.left,d.bounds.top+w);else{var C=S_(d.text);C.reduce(function(A,D){return S.ctx.fillText(D,A,d.bounds.top+w),A+S.ctx.measureText(D).width},d.bounds.left)}},u.prototype.createFontStyle=function(d){var p=d.fontVariant.filter(function(C){return C==="normal"||C==="small-caps"}).join(""),w=LT(d.fontFamily).join(", "),S=Yp(d.fontSize)?""+d.fontSize.number+d.fontSize.unit:d.fontSize.number+"px";return[[d.fontStyle,p,d.fontWeight,S,w].join(" "),w,S]},u.prototype.renderTextNode=function(d,p){return is(this,void 0,void 0,function(){var w,S,C,A,D,R,k,q,X=this;return ka(this,function(W){return w=this.createFontStyle(p),S=w[0],C=w[1],A=w[2],this.ctx.font=S,this.ctx.direction=p.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",D=this.fontMetrics.getMetrics(C,A),R=D.baseline,k=D.middle,q=p.paintOrder,d.textBounds.forEach(function(ne){q.forEach(function(ye){switch(ye){case 0:X.ctx.fillStyle=la(p.color),X.renderTextWithLetterSpacing(ne,p.letterSpacing,R);var Se=p.textShadow;Se.length&&ne.text.trim().length&&(Se.slice(0).reverse().forEach(function(le){X.ctx.shadowColor=la(le.color),X.ctx.shadowOffsetX=le.offsetX.number*X.options.scale,X.ctx.shadowOffsetY=le.offsetY.number*X.options.scale,X.ctx.shadowBlur=le.blur.number,X.renderTextWithLetterSpacing(ne,p.letterSpacing,R)}),X.ctx.shadowColor="",X.ctx.shadowOffsetX=0,X.ctx.shadowOffsetY=0,X.ctx.shadowBlur=0),p.textDecorationLine.length&&(X.ctx.fillStyle=la(p.textDecorationColor||p.color),p.textDecorationLine.forEach(function(le){switch(le){case 1:X.ctx.fillRect(ne.bounds.left,Math.round(ne.bounds.top+R),ne.bounds.width,1);break;case 2:X.ctx.fillRect(ne.bounds.left,Math.round(ne.bounds.top),ne.bounds.width,1);break;case 3:X.ctx.fillRect(ne.bounds.left,Math.ceil(ne.bounds.top+k),ne.bounds.width,1);break}}));break;case 1:p.webkitTextStrokeWidth&&ne.text.trim().length&&(X.ctx.strokeStyle=la(p.webkitTextStrokeColor),X.ctx.lineWidth=p.webkitTextStrokeWidth,X.ctx.lineJoin=window.chrome?"miter":"round",X.ctx.strokeText(ne.text,ne.bounds.left,ne.bounds.top+R)),X.ctx.strokeStyle="",X.ctx.lineWidth=0,X.ctx.lineJoin="miter";break}})}),[2]})})},u.prototype.renderReplacedElement=function(d,p,w){if(w&&d.intrinsicWidth>0&&d.intrinsicHeight>0){var S=Lm(d),C=Dm(p);this.path(C),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(w,0,0,d.intrinsicWidth,d.intrinsicHeight,S.left,S.top,S.width,S.height),this.ctx.restore()}},u.prototype.renderNodeContent=function(d){return is(this,void 0,void 0,function(){var p,w,S,C,A,D,ve,ve,R,k,q,X,Re,W,ne,Me,ye,Se,le,ve,De,Re,Me;return ka(this,function(Ne){switch(Ne.label){case 0:this.applyEffects(d.getEffects(4)),p=d.container,w=d.curves,S=p.styles,C=0,A=p.textNodes,Ne.label=1;case 1:return C<A.length?(D=A[C],[4,this.renderTextNode(D,S)]):[3,4];case 2:Ne.sent(),Ne.label=3;case 3:return C++,[3,1];case 4:if(!(p instanceof zx))return[3,8];Ne.label=5;case 5:return Ne.trys.push([5,7,,8]),[4,this.context.cache.match(p.src)];case 6:return ve=Ne.sent(),this.renderReplacedElement(p,w,ve),[3,8];case 7:return Ne.sent(),this.context.logger.error("Error loading image "+p.src),[3,8];case 8:if(p instanceof kx&&this.renderReplacedElement(p,w,p.canvas),!(p instanceof Hx))return[3,12];Ne.label=9;case 9:return Ne.trys.push([9,11,,12]),[4,this.context.cache.match(p.svg)];case 10:return ve=Ne.sent(),this.renderReplacedElement(p,w,ve),[3,12];case 11:return Ne.sent(),this.context.logger.error("Error loading svg "+p.svg.substring(0,255)),[3,12];case 12:return p instanceof Gx&&p.tree?(R=new u(this.context,{scale:this.options.scale,backgroundColor:p.backgroundColor,x:0,y:0,width:p.width,height:p.height}),[4,R.render(p.tree)]):[3,14];case 13:k=Ne.sent(),p.width&&p.height&&this.ctx.drawImage(k,0,0,p.width,p.height,p.bounds.left,p.bounds.top,p.bounds.width,p.bounds.height),Ne.label=14;case 14:if(p instanceof F_&&(q=Math.min(p.bounds.width,p.bounds.height),p.type===Fm?p.checked&&(this.ctx.save(),this.path([new Gt(p.bounds.left+q*.39363,p.bounds.top+q*.79),new Gt(p.bounds.left+q*.16,p.bounds.top+q*.5549),new Gt(p.bounds.left+q*.27347,p.bounds.top+q*.44071),new Gt(p.bounds.left+q*.39694,p.bounds.top+q*.5649),new Gt(p.bounds.left+q*.72983,p.bounds.top+q*.23),new Gt(p.bounds.left+q*.84,p.bounds.top+q*.34085),new Gt(p.bounds.left+q*.39363,p.bounds.top+q*.79)]),this.ctx.fillStyle=la(q0),this.ctx.fill(),this.ctx.restore()):p.type===Um&&p.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(p.bounds.left+q/2,p.bounds.top+q/2,q/4,0,Math.PI*2,!0),this.ctx.fillStyle=la(q0),this.ctx.fill(),this.ctx.restore())),MT(p)&&p.value.length){switch(X=this.createFontStyle(S),Re=X[0],W=X[1],ne=this.fontMetrics.getMetrics(Re,W).baseline,this.ctx.font=Re,this.ctx.fillStyle=la(S.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=QT(p.styles.textAlign),Me=Lm(p),ye=0,p.styles.textAlign){case 1:ye+=Me.width/2;break;case 2:ye+=Me.width;break}Se=Me.add(ye,0,0,-Me.height/2+1),this.ctx.save(),this.path([new Gt(Me.left,Me.top),new Gt(Me.left+Me.width,Me.top),new Gt(Me.left+Me.width,Me.top+Me.height),new Gt(Me.left,Me.top+Me.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Lp(p.value,Se),S.letterSpacing,ne),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Yi(p.styles.display,2048))return[3,20];if(p.styles.listStyleImage===null)return[3,19];if(le=p.styles.listStyleImage,le.type!==0)return[3,18];ve=void 0,De=le.url,Ne.label=15;case 15:return Ne.trys.push([15,17,,18]),[4,this.context.cache.match(De)];case 16:return ve=Ne.sent(),this.ctx.drawImage(ve,p.bounds.left-(ve.width+10),p.bounds.top),[3,18];case 17:return Ne.sent(),this.context.logger.error("Error loading list-style-image "+De),[3,18];case 18:return[3,20];case 19:d.listValue&&p.styles.listStyleType!==-1&&(Re=this.createFontStyle(S)[0],this.ctx.font=Re,this.ctx.fillStyle=la(S.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Me=new wc(p.bounds.left,p.bounds.top+Yn(p.styles.paddingTop,p.bounds.width),p.bounds.width,M0(S.lineHeight,S.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Lp(d.listValue,Me),S.letterSpacing,M0(S.lineHeight,S.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Ne.label=20;case 20:return[2]}})})},u.prototype.renderStackContent=function(d){return is(this,void 0,void 0,function(){var p,w,le,S,C,le,A,D,le,R,k,le,q,X,le,W,ne,le,ye,Se,le;return ka(this,function(ve){switch(ve.label){case 0:if(Yi(d.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(d.element)];case 1:ve.sent(),p=0,w=d.negativeZIndex,ve.label=2;case 2:return p<w.length?(le=w[p],[4,this.renderStack(le)]):[3,5];case 3:ve.sent(),ve.label=4;case 4:return p++,[3,2];case 5:return[4,this.renderNodeContent(d.element)];case 6:ve.sent(),S=0,C=d.nonInlineLevel,ve.label=7;case 7:return S<C.length?(le=C[S],[4,this.renderNode(le)]):[3,10];case 8:ve.sent(),ve.label=9;case 9:return S++,[3,7];case 10:A=0,D=d.nonPositionedFloats,ve.label=11;case 11:return A<D.length?(le=D[A],[4,this.renderStack(le)]):[3,14];case 12:ve.sent(),ve.label=13;case 13:return A++,[3,11];case 14:R=0,k=d.nonPositionedInlineLevel,ve.label=15;case 15:return R<k.length?(le=k[R],[4,this.renderStack(le)]):[3,18];case 16:ve.sent(),ve.label=17;case 17:return R++,[3,15];case 18:q=0,X=d.inlineLevel,ve.label=19;case 19:return q<X.length?(le=X[q],[4,this.renderNode(le)]):[3,22];case 20:ve.sent(),ve.label=21;case 21:return q++,[3,19];case 22:W=0,ne=d.zeroOrAutoZIndexOrTransformedOrOpacity,ve.label=23;case 23:return W<ne.length?(le=ne[W],[4,this.renderStack(le)]):[3,26];case 24:ve.sent(),ve.label=25;case 25:return W++,[3,23];case 26:ye=0,Se=d.positiveZIndex,ve.label=27;case 27:return ye<Se.length?(le=Se[ye],[4,this.renderStack(le)]):[3,30];case 28:ve.sent(),ve.label=29;case 29:return ye++,[3,27];case 30:return[2]}})})},u.prototype.mask=function(d){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(d.slice(0).reverse()),this.ctx.closePath()},u.prototype.path=function(d){this.ctx.beginPath(),this.formatPath(d),this.ctx.closePath()},u.prototype.formatPath=function(d){var p=this;d.forEach(function(w,S){var C=Po(w)?w.start:w;S===0?p.ctx.moveTo(C.x,C.y):p.ctx.lineTo(C.x,C.y),Po(w)&&p.ctx.bezierCurveTo(w.startControl.x,w.startControl.y,w.endControl.x,w.endControl.y,w.end.x,w.end.y)})},u.prototype.renderRepeat=function(d,p,w,S){this.path(d),this.ctx.fillStyle=p,this.ctx.translate(w,S),this.ctx.fill(),this.ctx.translate(-w,-S)},u.prototype.resizeImage=function(d,p,w){var S;if(d.width===p&&d.height===w)return d;var C=(S=this.canvas.ownerDocument)!==null&&S!==void 0?S:document,A=C.createElement("canvas");A.width=Math.max(1,p),A.height=Math.max(1,w);var D=A.getContext("2d");return D.drawImage(d,0,0,d.width,d.height,0,0,p,w),A},u.prototype.renderBackgroundImage=function(d){return is(this,void 0,void 0,function(){var p,w,S,C,A,D;return ka(this,function(R){switch(R.label){case 0:p=d.styles.backgroundImage.length-1,w=function(k){var q,X,W,Qt,Te,ut,Ut,Vt,mt,ne,Qt,Te,ut,Ut,Vt,ye,Se,le,ve,De,Re,Me,Ne,st,mt,ot,Qt,He,Zt,Ut,Vt,Wt,Te,ut,Ct,Rt,he,nt,yt,_t,xt,Ft;return ka(this,function(Pt){switch(Pt.label){case 0:if(k.type!==0)return[3,5];q=void 0,X=k.url,Pt.label=1;case 1:return Pt.trys.push([1,3,,4]),[4,S.context.cache.match(X)];case 2:return q=Pt.sent(),[3,4];case 3:return Pt.sent(),S.context.logger.error("Error loading background-image "+X),[3,4];case 4:return q&&(W=Ry(d,p,[q.width,q.height,q.width/q.height]),Qt=W[0],Te=W[1],ut=W[2],Ut=W[3],Vt=W[4],mt=S.ctx.createPattern(S.resizeImage(q,Ut,Vt),"repeat"),S.renderRepeat(Qt,mt,Te,ut)),[3,6];case 5:gC(k)?(ne=Ry(d,p,[null,null,null]),Qt=ne[0],Te=ne[1],ut=ne[2],Ut=ne[3],Vt=ne[4],ye=uC(k.angle,Ut,Vt),Se=ye[0],le=ye[1],ve=ye[2],De=ye[3],Re=ye[4],Me=document.createElement("canvas"),Me.width=Ut,Me.height=Vt,Ne=Me.getContext("2d"),st=Ne.createLinearGradient(le,De,ve,Re),F0(k.stops,Se).forEach(function(ur){return st.addColorStop(ur.stop,la(ur.color))}),Ne.fillStyle=st,Ne.fillRect(0,0,Ut,Vt),Ut>0&&Vt>0&&(mt=S.ctx.createPattern(Me,"repeat"),S.renderRepeat(Qt,mt,Te,ut))):mC(k)&&(ot=Ry(d,p,[null,null,null]),Qt=ot[0],He=ot[1],Zt=ot[2],Ut=ot[3],Vt=ot[4],Wt=k.position.length===0?[C_]:k.position,Te=Yn(Wt[0],Ut),ut=Yn(Wt[Wt.length-1],Vt),Ct=hC(k,Te,ut,Ut,Vt),Rt=Ct[0],he=Ct[1],Rt>0&&he>0&&(nt=S.ctx.createRadialGradient(He+Te,Zt+ut,0,He+Te,Zt+ut,Rt),F0(k.stops,Rt*2).forEach(function(ur){return nt.addColorStop(ur.stop,la(ur.color))}),S.path(Qt),S.ctx.fillStyle=nt,Rt!==he?(yt=d.bounds.left+.5*d.bounds.width,_t=d.bounds.top+.5*d.bounds.height,xt=he/Rt,Ft=1/xt,S.ctx.save(),S.ctx.translate(yt,_t),S.ctx.transform(1,0,0,xt,0,0),S.ctx.translate(-yt,-_t),S.ctx.fillRect(He,Ft*(Zt-_t)+_t,Ut,Vt*Ft),S.ctx.restore()):S.ctx.fill())),Pt.label=6;case 6:return p--,[2]}})},S=this,C=0,A=d.styles.backgroundImage.slice(0).reverse(),R.label=1;case 1:return C<A.length?(D=A[C],[5,w(D)]):[3,4];case 2:R.sent(),R.label=3;case 3:return C++,[3,1];case 4:return[2]}})})},u.prototype.renderSolidBorder=function(d,p,w){return is(this,void 0,void 0,function(){return ka(this,function(S){return this.path(sv(w,p)),this.ctx.fillStyle=la(d),this.ctx.fill(),[2]})})},u.prototype.renderDoubleBorder=function(d,p,w,S){return is(this,void 0,void 0,function(){var C,A;return ka(this,function(D){switch(D.label){case 0:return p<3?[4,this.renderSolidBorder(d,w,S)]:[3,2];case 1:return D.sent(),[2];case 2:return C=vT(S,w),this.path(C),this.ctx.fillStyle=la(d),this.ctx.fill(),A=xT(S,w),this.path(A),this.ctx.fill(),[2]}})})},u.prototype.renderNodeBackgroundAndBorders=function(d){return is(this,void 0,void 0,function(){var p,w,S,C,A,D,R,k,q=this;return ka(this,function(X){switch(X.label){case 0:return this.applyEffects(d.getEffects(2)),p=d.container.styles,w=!Qu(p.backgroundColor)||p.backgroundImage.length,S=[{style:p.borderTopStyle,color:p.borderTopColor,width:p.borderTopWidth},{style:p.borderRightStyle,color:p.borderRightColor,width:p.borderRightWidth},{style:p.borderBottomStyle,color:p.borderBottomColor,width:p.borderBottomWidth},{style:p.borderLeftStyle,color:p.borderLeftColor,width:p.borderLeftWidth}],C=IT(rd(p.backgroundClip,0),d.curves),w||p.boxShadow.length?(this.ctx.save(),this.path(C),this.ctx.clip(),Qu(p.backgroundColor)||(this.ctx.fillStyle=la(p.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(d.container)]):[3,2];case 1:X.sent(),this.ctx.restore(),p.boxShadow.slice(0).reverse().forEach(function(W){q.ctx.save();var ne=Qm(d.curves),ye=W.inset?0:FT,Se=yT(ne,-ye+(W.inset?1:-1)*W.spread.number,(W.inset?1:-1)*W.spread.number,W.spread.number*(W.inset?-2:2),W.spread.number*(W.inset?-2:2));W.inset?(q.path(ne),q.ctx.clip(),q.mask(Se)):(q.mask(ne),q.ctx.clip(),q.path(Se)),q.ctx.shadowOffsetX=W.offsetX.number+ye,q.ctx.shadowOffsetY=W.offsetY.number,q.ctx.shadowColor=la(W.color),q.ctx.shadowBlur=W.blur.number,q.ctx.fillStyle=W.inset?la(W.color):"rgba(0,0,0,1)",q.ctx.fill(),q.ctx.restore()}),X.label=2;case 2:A=0,D=0,R=S,X.label=3;case 3:return D<R.length?(k=R[D],k.style!==0&&!Qu(k.color)&&k.width>0?k.style!==2?[3,5]:[4,this.renderDashedDottedBorder(k.color,k.width,A,d.curves,2)]:[3,11]):[3,13];case 4:return X.sent(),[3,11];case 5:return k.style!==3?[3,7]:[4,this.renderDashedDottedBorder(k.color,k.width,A,d.curves,3)];case 6:return X.sent(),[3,11];case 7:return k.style!==4?[3,9]:[4,this.renderDoubleBorder(k.color,k.width,A,d.curves)];case 8:return X.sent(),[3,11];case 9:return[4,this.renderSolidBorder(k.color,A,d.curves)];case 10:X.sent(),X.label=11;case 11:A++,X.label=12;case 12:return D++,[3,3];case 13:return[2]}})})},u.prototype.renderDashedDottedBorder=function(d,p,w,S,C){return is(this,void 0,void 0,function(){var A,D,R,k,q,X,W,ne,ye,Se,le,ve,De,Re,Me,Ne,Me,Ne;return ka(this,function(st){return this.ctx.save(),A=wT(S,w),D=sv(S,w),C===2&&(this.path(D),this.ctx.clip()),Po(D[0])?(R=D[0].start.x,k=D[0].start.y):(R=D[0].x,k=D[0].y),Po(D[1])?(q=D[1].end.x,X=D[1].end.y):(q=D[1].x,X=D[1].y),w===0||w===2?W=Math.abs(R-q):W=Math.abs(k-X),this.ctx.beginPath(),C===3?this.formatPath(A):this.formatPath(D.slice(0,2)),ne=p<3?p*3:p*2,ye=p<3?p*2:p,C===3&&(ne=p,ye=p),Se=!0,W<=ne*2?Se=!1:W<=ne*2+ye?(le=W/(2*ne+ye),ne*=le,ye*=le):(ve=Math.floor((W+ye)/(ne+ye)),De=(W-ve*ne)/(ve-1),Re=(W-(ve+1)*ne)/ve,ye=Re<=0||Math.abs(ye-De)<Math.abs(ye-Re)?De:Re),Se&&(C===3?this.ctx.setLineDash([0,ne+ye]):this.ctx.setLineDash([ne,ye])),C===3?(this.ctx.lineCap="round",this.ctx.lineWidth=p):this.ctx.lineWidth=p*2+1.1,this.ctx.strokeStyle=la(d),this.ctx.stroke(),this.ctx.setLineDash([]),C===2&&(Po(D[0])&&(Me=D[3],Ne=D[0],this.ctx.beginPath(),this.formatPath([new Gt(Me.end.x,Me.end.y),new Gt(Ne.start.x,Ne.start.y)]),this.ctx.stroke()),Po(D[1])&&(Me=D[1],Ne=D[2],this.ctx.beginPath(),this.formatPath([new Gt(Me.end.x,Me.end.y),new Gt(Ne.start.x,Ne.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},u.prototype.render=function(d){return is(this,void 0,void 0,function(){var p;return ka(this,function(w){switch(w.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=la(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),p=_T(d),[4,this.renderStack(p)];case 1:return w.sent(),this.applyEffects([]),[2,this.canvas]}})})},u}(ow),MT=function(o){return o instanceof Vx||o instanceof jx?!0:o instanceof F_&&o.type!==Um&&o.type!==Fm},IT=function(o,u){switch(o){case 0:return Qm(u);case 2:return fT(u);case 1:default:return Dm(u)}},QT=function(o){switch(o){case 1:return"center";case 2:return"right";case 0:default:return"left"}},DT=["-apple-system","system-ui"],LT=function(o){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?o.filter(function(u){return DT.indexOf(u)===-1}):o},PT=function(o){LA(u,o);function u(d,p){var w=o.call(this,d,p)||this;return w.canvas=p.canvas?p.canvas:document.createElement("canvas"),w.ctx=w.canvas.getContext("2d"),w.options=p,w.canvas.width=Math.floor(p.width*p.scale),w.canvas.height=Math.floor(p.height*p.scale),w.canvas.style.width=p.width+"px",w.canvas.style.height=p.height+"px",w.ctx.scale(w.options.scale,w.options.scale),w.ctx.translate(-p.x,-p.y),w.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+p.width+"x"+p.height+" at "+p.x+","+p.y+") with scale "+p.scale),w}return u.prototype.render=function(d){return is(this,void 0,void 0,function(){var p,w;return ka(this,function(S){switch(S.label){case 0:return p=A_(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,d),[4,RT(p)];case 1:return w=S.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=la(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(w,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},u}(ow),RT=function(o){return new Promise(function(u,d){var p=new Image;p.onload=function(){u(p)},p.onerror=d,p.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(o))})},OT=function(){function o(u){var d=u.id,p=u.enabled;this.id=d,this.enabled=p,this.start=Date.now()}return o.prototype.debug=function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Hg([this.id,this.getTime()+"ms"],u)):this.info.apply(this,u))},o.prototype.getTime=function(){return Date.now()-this.start},o.prototype.info=function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Hg([this.id,this.getTime()+"ms"],u))},o.prototype.warn=function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Hg([this.id,this.getTime()+"ms"],u)):this.info.apply(this,u))},o.prototype.error=function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Hg([this.id,this.getTime()+"ms"],u)):this.info.apply(this,u))},o.instances={},o}(),zT=function(){function o(u,d){var p;this.windowBounds=d,this.instanceName="#"+o.instanceCount++,this.logger=new OT({id:this.instanceName,enabled:u.logging}),this.cache=(p=u.cache)!==null&&p!==void 0?p:new aT(this,u)}return o.instanceCount=1,o}(),kT=function(o,u){return u===void 0&&(u={}),HT(o,u)};typeof window<"u"&&tw.setContext(window);var HT=function(o,u){return is(void 0,void 0,void 0,function(){var d,p,w,S,C,A,D,R,k,q,X,W,ne,ye,Se,le,ve,De,Re,Me,st,Ne,st,mt,ot,Qt,He,Zt,Ut,Vt,Wt,Te,ut,Ct,Rt,he,nt,yt,_t,xt;return ka(this,function(Ft){switch(Ft.label){case 0:if(!o||typeof o!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(d=o.ownerDocument,!d)throw new Error("Element is not attached to a Document");if(p=d.defaultView,!p)throw new Error("Document is not attached to a Window");return w={allowTaint:(mt=u.allowTaint)!==null&&mt!==void 0?mt:!1,imageTimeout:(ot=u.imageTimeout)!==null&&ot!==void 0?ot:15e3,proxy:u.proxy,useCORS:(Qt=u.useCORS)!==null&&Qt!==void 0?Qt:!1},S=Zy({logging:(He=u.logging)!==null&&He!==void 0?He:!0,cache:u.cache},w),C={windowWidth:(Zt=u.windowWidth)!==null&&Zt!==void 0?Zt:p.innerWidth,windowHeight:(Ut=u.windowHeight)!==null&&Ut!==void 0?Ut:p.innerHeight,scrollX:(Vt=u.scrollX)!==null&&Vt!==void 0?Vt:p.pageXOffset,scrollY:(Wt=u.scrollY)!==null&&Wt!==void 0?Wt:p.pageYOffset},A=new wc(C.scrollX,C.scrollY,C.windowWidth,C.windowHeight),D=new zT(S,A),R=(Te=u.foreignObjectRendering)!==null&&Te!==void 0?Te:!1,k={allowTaint:(ut=u.allowTaint)!==null&&ut!==void 0?ut:!1,onclone:u.onclone,ignoreElements:u.ignoreElements,inlineImages:R,copyStyles:R},D.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),q=new nv(D,o,k),X=q.clonedReferenceElement,X?[4,q.toIFrame(d,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return W=Ft.sent(),ne=U_(X)||N2(X)?yB(X.ownerDocument):Hm(D,X),ye=ne.width,Se=ne.height,le=ne.left,ve=ne.top,De=NT(D,X,u.backgroundColor),Re={canvas:u.canvas,backgroundColor:De,scale:(Rt=(Ct=u.scale)!==null&&Ct!==void 0?Ct:p.devicePixelRatio)!==null&&Rt!==void 0?Rt:1,x:((he=u.x)!==null&&he!==void 0?he:0)+le,y:((nt=u.y)!==null&&nt!==void 0?nt:0)+ve,width:(yt=u.width)!==null&&yt!==void 0?yt:Math.ceil(ye),height:(_t=u.height)!==null&&_t!==void 0?_t:Math.ceil(Se)},R?(D.logger.debug("Document cloned, using foreign object rendering"),st=new PT(D,Re),[4,st.render(X)]):[3,3];case 2:return Me=Ft.sent(),[3,5];case 3:return D.logger.debug("Document cloned, element located at "+le+","+ve+" with size "+ye+"x"+Se+" using computed rendering"),D.logger.debug("Starting DOM parsing"),Ne=Zx(D,X),De===Ne.styles.backgroundColor&&(Ne.styles.backgroundColor=vc.TRANSPARENT),D.logger.debug("Starting renderer for element at "+Re.x+","+Re.y+" with size "+Re.width+"x"+Re.height),st=new UT(D,Re),[4,st.render(Ne)];case 4:Me=Ft.sent(),Ft.label=5;case 5:return(!((xt=u.removeContainer)!==null&&xt!==void 0)||xt)&&(nv.destroy(W)||D.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),D.logger.debug("Finished rendering"),[2,Me]}})})},NT=function(o,u,d){var p=u.ownerDocument,w=p.documentElement?Qp(o,getComputedStyle(p.documentElement).backgroundColor):vc.TRANSPARENT,S=p.body?Qp(o,getComputedStyle(p.body).backgroundColor):vc.TRANSPARENT,C=typeof d=="string"?Qp(o,d):d===null?vc.TRANSPARENT:4294967295;return u===p.documentElement?Qu(w)?Qu(S)?C:S:w:C};function Aw(o){return u=>typeof u===o}var jT=Aw("function"),VT=o=>o===null,Av=o=>Object.prototype.toString.call(o).slice(8,-1)==="RegExp",lv=o=>!GT(o)&&!VT(o)&&(jT(o)||typeof o=="object"),GT=Aw("undefined");function KT(o,u){const{length:d}=o;if(d!==u.length)return!1;for(let p=d;p--!==0;)if(!ca(o[p],u[p]))return!1;return!0}function ZT(o,u){if(o.byteLength!==u.byteLength)return!1;const d=new DataView(o.buffer),p=new DataView(u.buffer);let w=o.byteLength;for(;w--;)if(d.getUint8(w)!==p.getUint8(w))return!1;return!0}function qT(o,u){if(o.size!==u.size)return!1;for(const d of o.entries())if(!u.has(d[0]))return!1;for(const d of o.entries())if(!ca(d[1],u.get(d[0])))return!1;return!0}function XT(o,u){if(o.size!==u.size)return!1;for(const d of o.entries())if(!u.has(d[0]))return!1;return!0}function ca(o,u){if(o===u)return!0;if(o&&lv(o)&&u&&lv(u)){if(o.constructor!==u.constructor)return!1;if(Array.isArray(o)&&Array.isArray(u))return KT(o,u);if(o instanceof Map&&u instanceof Map)return qT(o,u);if(o instanceof Set&&u instanceof Set)return XT(o,u);if(ArrayBuffer.isView(o)&&ArrayBuffer.isView(u))return ZT(o,u);if(Av(o)&&Av(u))return o.source===u.source&&o.flags===u.flags;if(o.valueOf!==Object.prototype.valueOf)return o.valueOf()===u.valueOf();if(o.toString!==Object.prototype.toString)return o.toString()===u.toString();const d=Object.keys(o),p=Object.keys(u);if(d.length!==p.length)return!1;for(let w=d.length;w--!==0;)if(!Object.prototype.hasOwnProperty.call(u,d[w]))return!1;for(let w=d.length;w--!==0;){const S=d[w];if(!(S==="_owner"&&o.$$typeof)&&!ca(o[S],u[S]))return!1}return!0}return Number.isNaN(o)&&Number.isNaN(u)?!0:o===u}function YT(o,u){const d=be.useRef(void 0);(!d.current||!ca(u,d.current))&&(d.current=u),be.useEffect(o,d.current)}function WT(){const o=be.useRef(!0);return o.current?(o.current=!1,!0):o.current}function lw(o){const u=be.useRef(null),d=be.useRef(!1),p=be.useRef(o);be.useEffect(()=>(d.current||(u.current=p.current(),d.current=!0),()=>{u.current&&(u.current(),u.current=null)}),[])}function $T(){const o=be.useRef(!1);return be.useEffect(()=>(o.current=!0,()=>{o.current=!1}),[]),be.useCallback(()=>o.current,[])}function JT(o){const u=be.useRef(o);return be.useEffect(()=>{u.current=o}),u}function M_(o={}){const[u,d]=be.useState(o),p=be.useCallback(w=>{d(S=>({...S,...w instanceof Function?w(S):w}))},[]);return[u,p]}function Wp(o){lw(()=>{o()})}function cv(o){const u=be.useRef();return be.useEffect(()=>{u.current=o}),u.current}function I_(o){const u=be.useRef(!1);u.current||(o(),u.current=!0)}function Wm(o){const u=JT(o);lw(()=>()=>u.current())}function eS(o,u){const d=WT();be.useEffect(()=>{if(!d)return o()},u)}var Oy,uv;function tS(){if(uv)return Oy;uv=1;var o=new Error("Element already at target scroll position"),u=new Error("Scroll cancelled"),d=Math.min,p=Date.now;Oy={left:w("scrollLeft"),top:w("scrollTop")};function w(A){return function(R,k,q,X){q=q||{},typeof q=="function"&&(X=q,q={}),typeof X!="function"&&(X=C);var W=p(),ne=R[A],ye=q.ease||S,Se=isNaN(q.duration)?350:+q.duration,le=!1;return ne===k?X(o,R[A]):requestAnimationFrame(De),ve;function ve(){le=!0}function De(Re){if(le)return X(u,R[A]);var Me=p(),Ne=d(1,(Me-W)/Se),st=ye(Ne);R[A]=st*(k-ne)+ne,Ne<1?requestAnimationFrame(De):requestAnimationFrame(function(){X(null,R[A])})}}}function S(A){return .5*(1-Math.cos(Math.PI*A))}function C(){}return Oy}var rS=tS();const nS=Vh(rS);var wm={exports:{}},iS=wm.exports,hv;function aS(){return hv||(hv=1,function(o){(function(u,d){o.exports?o.exports=d():u.Scrollparent=d()})(iS,function(){function u(p){var w=getComputedStyle(p,null).getPropertyValue("overflow");return w.indexOf("scroll")>-1||w.indexOf("auto")>-1}function d(p){if(p instanceof HTMLElement||p instanceof SVGElement){for(var w=p.parentNode;w.parentNode;){if(u(w))return w;w=w.parentNode}return document.scrollingElement||document.documentElement}}return d})}(wm)),wm.exports}var sS=aS();const cw=Vh(sS);var zy,fv;function oS(){if(fv)return zy;fv=1;var o=function(p){return Object.prototype.hasOwnProperty.call(p,"props")},u=function(p,w){return p+d(w)},d=function(p){return p===null||typeof p=="boolean"||typeof p>"u"?"":typeof p=="number"?p.toString():typeof p=="string"?p:Array.isArray(p)?p.reduce(u,""):o(p)&&Object.prototype.hasOwnProperty.call(p.props,"children")?d(p.props.children):""};return d.default=d,zy=d,zy}var AS=oS();const dv=Vh(AS);var lS=["Array","ArrayBuffer","AsyncFunction","AsyncGenerator","AsyncGeneratorFunction","Date","Error","Function","Generator","GeneratorFunction","HTMLElement","Map","Object","Promise","RegExp","Set","WeakMap","WeakSet"],cS=["bigint","boolean","null","number","string","symbol","undefined"];function $m(o){const u=Object.prototype.toString.call(o).slice(8,-1);if(/HTML\w+Element/.test(u))return"HTMLElement";if(uS(u))return u}function PA(o){return u=>$m(u)===o}function uS(o){return lS.includes(o)}function pd(o){return u=>typeof u===o}function hS(o){return cS.includes(o)}var fS=["innerHTML","ownerDocument","style","attributes","nodeValue"];function Yt(o){if(o===null)return"null";switch(typeof o){case"bigint":return"bigint";case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"symbol":return"symbol";case"undefined":return"undefined"}if(Yt.array(o))return"Array";if(Yt.plainFunction(o))return"Function";const u=$m(o);return u||"Object"}Yt.array=Array.isArray;Yt.arrayOf=(o,u)=>!Yt.array(o)&&!Yt.function(u)?!1:o.every(d=>u(d));Yt.asyncGeneratorFunction=o=>$m(o)==="AsyncGeneratorFunction";Yt.asyncFunction=PA("AsyncFunction");Yt.bigint=pd("bigint");Yt.boolean=o=>o===!0||o===!1;Yt.date=PA("Date");Yt.defined=o=>!Yt.undefined(o);Yt.domElement=o=>Yt.object(o)&&!Yt.plainObject(o)&&o.nodeType===1&&Yt.string(o.nodeName)&&fS.every(u=>u in o);Yt.empty=o=>Yt.string(o)&&o.length===0||Yt.array(o)&&o.length===0||Yt.object(o)&&!Yt.map(o)&&!Yt.set(o)&&Object.keys(o).length===0||Yt.set(o)&&o.size===0||Yt.map(o)&&o.size===0;Yt.error=PA("Error");Yt.function=pd("function");Yt.generator=o=>Yt.iterable(o)&&Yt.function(o.next)&&Yt.function(o.throw);Yt.generatorFunction=PA("GeneratorFunction");Yt.instanceOf=(o,u)=>!o||!u?!1:Object.getPrototypeOf(o)===u.prototype;Yt.iterable=o=>!Yt.nullOrUndefined(o)&&Yt.function(o[Symbol.iterator]);Yt.map=PA("Map");Yt.nan=o=>Number.isNaN(o);Yt.null=o=>o===null;Yt.nullOrUndefined=o=>Yt.null(o)||Yt.undefined(o);Yt.number=o=>pd("number")(o)&&!Yt.nan(o);Yt.numericString=o=>Yt.string(o)&&o.length>0&&!Number.isNaN(Number(o));Yt.object=o=>!Yt.nullOrUndefined(o)&&(Yt.function(o)||typeof o=="object");Yt.oneOf=(o,u)=>Yt.array(o)?o.indexOf(u)>-1:!1;Yt.plainFunction=PA("Function");Yt.plainObject=o=>{if($m(o)!=="Object")return!1;const u=Object.getPrototypeOf(o);return u===null||u===Object.getPrototypeOf({})};Yt.primitive=o=>Yt.null(o)||hS(typeof o);Yt.promise=PA("Promise");Yt.propertyOf=(o,u,d)=>{if(!Yt.object(o)||!u)return!1;const p=o[u];return Yt.function(d)?d(p):Yt.defined(p)};Yt.regexp=PA("RegExp");Yt.set=PA("Set");Yt.string=pd("string");Yt.symbol=pd("symbol");Yt.undefined=pd("undefined");Yt.weakMap=PA("WeakMap");Yt.weakSet=PA("WeakSet");var Kt=Yt,ky,pv;function dS(){if(pv)return ky;pv=1;var o=function(ve){return u(ve)&&!d(ve)};function u(le){return!!le&&typeof le=="object"}function d(le){var ve=Object.prototype.toString.call(le);return ve==="[object RegExp]"||ve==="[object Date]"||S(le)}var p=typeof Symbol=="function"&&Symbol.for,w=p?Symbol.for("react.element"):60103;function S(le){return le.$$typeof===w}function C(le){return Array.isArray(le)?[]:{}}function A(le,ve){return ve.clone!==!1&&ve.isMergeableObject(le)?ye(C(le),le,ve):le}function D(le,ve,De){return le.concat(ve).map(function(Re){return A(Re,De)})}function R(le,ve){if(!ve.customMerge)return ye;var De=ve.customMerge(le);return typeof De=="function"?De:ye}function k(le){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(le).filter(function(ve){return Object.propertyIsEnumerable.call(le,ve)}):[]}function q(le){return Object.keys(le).concat(k(le))}function X(le,ve){try{return ve in le}catch{return!1}}function W(le,ve){return X(le,ve)&&!(Object.hasOwnProperty.call(le,ve)&&Object.propertyIsEnumerable.call(le,ve))}function ne(le,ve,De){var Re={};return De.isMergeableObject(le)&&q(le).forEach(function(Me){Re[Me]=A(le[Me],De)}),q(ve).forEach(function(Me){W(le,Me)||(X(le,Me)&&De.isMergeableObject(ve[Me])?Re[Me]=R(Me,De)(le[Me],ve[Me],De):Re[Me]=A(ve[Me],De))}),Re}function ye(le,ve,De){De=De||{},De.arrayMerge=De.arrayMerge||D,De.isMergeableObject=De.isMergeableObject||o,De.cloneUnlessOtherwiseSpecified=A;var Re=Array.isArray(ve),Me=Array.isArray(le),Ne=Re===Me;return Ne?Re?De.arrayMerge(le,ve,De):ne(le,ve,De):A(ve,De)}ye.all=function(ve,De){if(!Array.isArray(ve))throw new Error("first argument should be an array");return ve.reduce(function(Re,Me){return ye(Re,Me,De)},{})};var Se=ye;return ky=Se,ky}var pS=dS();const Uu=Vh(pS);function gS(...o){return o.every(u=>Kt.string(u)||Kt.array(u)||Kt.plainObject(u))}function mS(o,u,d){return uw(o,u)?[o,u].every(Kt.array)?!o.some(vv(d))&&u.some(vv(d)):[o,u].every(Kt.plainObject)?!Object.entries(o).some(_v(d))&&Object.entries(u).some(_v(d)):u===d:!1}function gv(o,u,d){const{actual:p,key:w,previous:S,type:C}=d,A=dl(o,w),D=dl(u,w);let R=[A,D].every(Kt.number)&&(C==="increased"?A<D:A>D);return Kt.undefined(p)||(R=R&&D===p),Kt.undefined(S)||(R=R&&A===S),R}function mv(o,u,d){const{key:p,type:w,value:S}=d,C=dl(o,p),A=dl(u,p),D=w==="added"?C:A,R=w==="added"?A:C;if(!Kt.nullOrUndefined(S)){if(Kt.defined(D)){if(Kt.array(D)||Kt.plainObject(D))return mS(D,R,S)}else return ca(R,S);return!1}return[C,A].every(Kt.array)?!R.every(Q_(D)):[C,A].every(Kt.plainObject)?yS(Object.keys(D),Object.keys(R)):![C,A].every(k=>Kt.primitive(k)&&Kt.defined(k))&&(w==="added"?!Kt.defined(C)&&Kt.defined(A):Kt.defined(C)&&!Kt.defined(A))}function yv(o,u,{key:d}={}){let p=dl(o,d),w=dl(u,d);if(!uw(p,w))throw new TypeError("Inputs have different types");if(!gS(p,w))throw new TypeError("Inputs don't have length");return[p,w].every(Kt.plainObject)&&(p=Object.keys(p),w=Object.keys(w)),[p,w]}function _v(o){return([u,d])=>Kt.array(o)?ca(o,d)||o.some(p=>ca(p,d)||Kt.array(d)&&Q_(d)(p)):Kt.plainObject(o)&&o[u]?!!o[u]&&ca(o[u],d):ca(o,d)}function yS(o,u){return u.some(d=>!o.includes(d))}function vv(o){return u=>Kt.array(o)?o.some(d=>ca(d,u)||Kt.array(u)&&Q_(u)(d)):ca(o,u)}function wp(o,u){return Kt.array(o)?o.some(d=>ca(d,u)):ca(o,u)}function Q_(o){return u=>o.some(d=>ca(d,u))}function uw(...o){return o.every(Kt.array)||o.every(Kt.number)||o.every(Kt.plainObject)||o.every(Kt.string)}function dl(o,u){return Kt.plainObject(o)||Kt.array(o)?Kt.string(u)?u.split(".").reduce((p,w)=>p&&p[w],o):Kt.number(u)?o[u]:o:o}function xv(o,u){if([o,u].some(Kt.nullOrUndefined))throw new Error("Missing required parameters");if(![o,u].every(k=>Kt.plainObject(k)||Kt.array(k)))throw new Error("Expected plain objects or array");return{added:(k,q)=>{try{return mv(o,u,{key:k,type:"added",value:q})}catch{return!1}},changed:(k,q,X)=>{try{const W=dl(o,k),ne=dl(u,k),ye=Kt.defined(q),Se=Kt.defined(X);if(ye||Se){const le=Se?wp(X,W):!wp(q,W),ve=wp(q,ne);return le&&ve}return[W,ne].every(Kt.array)||[W,ne].every(Kt.plainObject)?!ca(W,ne):W!==ne}catch{return!1}},changedFrom:(k,q,X)=>{if(!Kt.defined(k))return!1;try{const W=dl(o,k),ne=dl(u,k),ye=Kt.defined(X);return wp(q,W)&&(ye?wp(X,ne):!ye)}catch{return!1}},decreased:(k,q,X)=>{if(!Kt.defined(k))return!1;try{return gv(o,u,{key:k,actual:q,previous:X,type:"decreased"})}catch{return!1}},emptied:k=>{try{const[q,X]=yv(o,u,{key:k});return!!q.length&&!X.length}catch{return!1}},filled:k=>{try{const[q,X]=yv(o,u,{key:k});return!q.length&&!!X.length}catch{return!1}},increased:(k,q,X)=>{if(!Kt.defined(k))return!1;try{return gv(o,u,{key:k,actual:q,previous:X,type:"increased"})}catch{return!1}},removed:(k,q)=>{try{return mv(o,u,{key:k,type:"removed",value:q})}catch{return!1}}}}function od(o){const u=be.useRef(o),d=ca(u.current,o),p=be.useRef(d),w=be.useRef(xv(u.current,o));return be.useEffect(()=>{u.current=o}),(p.current!==d||!d)&&(p.current=d,w.current=xv(u.current,o)),w.current}var Us="top",ko="bottom",Ho="right",Ms="left",D_="auto",$p=[Us,ko,Ho,Ms],Ad="start",jp="end",_S="clippingParents",hw="viewport",bp="popper",vS="reference",wv=$p.reduce(function(o,u){return o.concat([u+"-"+Ad,u+"-"+jp])},[]),fw=[].concat($p,[D_]).reduce(function(o,u){return o.concat([u,u+"-"+Ad,u+"-"+jp])},[]),xS="beforeRead",wS="read",bS="afterRead",BS="beforeMain",CS="main",ES="afterMain",TS="beforeWrite",SS="write",FS="afterWrite",US=[xS,wS,bS,BS,CS,ES,TS,SS,FS];function gl(o){return o?(o.nodeName||"").toLowerCase():null}function ro(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var u=o.ownerDocument;return u&&u.defaultView||window}return o}function Nh(o){var u=ro(o).Element;return o instanceof u||o instanceof Element}function zo(o){var u=ro(o).HTMLElement;return o instanceof u||o instanceof HTMLElement}function L_(o){if(typeof ShadowRoot>"u")return!1;var u=ro(o).ShadowRoot;return o instanceof u||o instanceof ShadowRoot}function MS(o){var u=o.state;Object.keys(u.elements).forEach(function(d){var p=u.styles[d]||{},w=u.attributes[d]||{},S=u.elements[d];!zo(S)||!gl(S)||(Object.assign(S.style,p),Object.keys(w).forEach(function(C){var A=w[C];A===!1?S.removeAttribute(C):S.setAttribute(C,A===!0?"":A)}))})}function IS(o){var u=o.state,d={popper:{position:u.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(u.elements.popper.style,d.popper),u.styles=d,u.elements.arrow&&Object.assign(u.elements.arrow.style,d.arrow),function(){Object.keys(u.elements).forEach(function(p){var w=u.elements[p],S=u.attributes[p]||{},C=Object.keys(u.styles.hasOwnProperty(p)?u.styles[p]:d[p]),A=C.reduce(function(D,R){return D[R]="",D},{});!zo(w)||!gl(w)||(Object.assign(w.style,A),Object.keys(S).forEach(function(D){w.removeAttribute(D)}))})}}const QS={name:"applyStyles",enabled:!0,phase:"write",fn:MS,effect:IS,requires:["computeStyles"]};function pl(o){return o.split("-")[0]}var Hh=Math.max,Pm=Math.min,ld=Math.round;function p_(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(u){return u.brand+"/"+u.version}).join(" "):navigator.userAgent}function dw(){return!/^((?!chrome|android).)*safari/i.test(p_())}function cd(o,u,d){u===void 0&&(u=!1),d===void 0&&(d=!1);var p=o.getBoundingClientRect(),w=1,S=1;u&&zo(o)&&(w=o.offsetWidth>0&&ld(p.width)/o.offsetWidth||1,S=o.offsetHeight>0&&ld(p.height)/o.offsetHeight||1);var C=Nh(o)?ro(o):window,A=C.visualViewport,D=!dw()&&d,R=(p.left+(D&&A?A.offsetLeft:0))/w,k=(p.top+(D&&A?A.offsetTop:0))/S,q=p.width/w,X=p.height/S;return{width:q,height:X,top:k,right:R+q,bottom:k+X,left:R,x:R,y:k}}function P_(o){var u=cd(o),d=o.offsetWidth,p=o.offsetHeight;return Math.abs(u.width-d)<=1&&(d=u.width),Math.abs(u.height-p)<=1&&(p=u.height),{x:o.offsetLeft,y:o.offsetTop,width:d,height:p}}function pw(o,u){var d=u.getRootNode&&u.getRootNode();if(o.contains(u))return!0;if(d&&L_(d)){var p=u;do{if(p&&o.isSameNode(p))return!0;p=p.parentNode||p.host}while(p)}return!1}function bc(o){return ro(o).getComputedStyle(o)}function DS(o){return["table","td","th"].indexOf(gl(o))>=0}function Lu(o){return((Nh(o)?o.ownerDocument:o.document)||window.document).documentElement}function Jm(o){return gl(o)==="html"?o:o.assignedSlot||o.parentNode||(L_(o)?o.host:null)||Lu(o)}function bv(o){return!zo(o)||bc(o).position==="fixed"?null:o.offsetParent}function LS(o){var u=/firefox/i.test(p_()),d=/Trident/i.test(p_());if(d&&zo(o)){var p=bc(o);if(p.position==="fixed")return null}var w=Jm(o);for(L_(w)&&(w=w.host);zo(w)&&["html","body"].indexOf(gl(w))<0;){var S=bc(w);if(S.transform!=="none"||S.perspective!=="none"||S.contain==="paint"||["transform","perspective"].indexOf(S.willChange)!==-1||u&&S.willChange==="filter"||u&&S.filter&&S.filter!=="none")return w;w=w.parentNode}return null}function Jp(o){for(var u=ro(o),d=bv(o);d&&DS(d)&&bc(d).position==="static";)d=bv(d);return d&&(gl(d)==="html"||gl(d)==="body"&&bc(d).position==="static")?u:d||LS(o)||u}function R_(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function Rp(o,u,d){return Hh(o,Pm(u,d))}function PS(o,u,d){var p=Rp(o,u,d);return p>d?d:p}function gw(){return{top:0,right:0,bottom:0,left:0}}function mw(o){return Object.assign({},gw(),o)}function yw(o,u){return u.reduce(function(d,p){return d[p]=o,d},{})}var RS=function(u,d){return u=typeof u=="function"?u(Object.assign({},d.rects,{placement:d.placement})):u,mw(typeof u!="number"?u:yw(u,$p))};function OS(o){var u,d=o.state,p=o.name,w=o.options,S=d.elements.arrow,C=d.modifiersData.popperOffsets,A=pl(d.placement),D=R_(A),R=[Ms,Ho].indexOf(A)>=0,k=R?"height":"width";if(!(!S||!C)){var q=RS(w.padding,d),X=P_(S),W=D==="y"?Us:Ms,ne=D==="y"?ko:Ho,ye=d.rects.reference[k]+d.rects.reference[D]-C[D]-d.rects.popper[k],Se=C[D]-d.rects.reference[D],le=Jp(S),ve=le?D==="y"?le.clientHeight||0:le.clientWidth||0:0,De=ye/2-Se/2,Re=q[W],Me=ve-X[k]-q[ne],Ne=ve/2-X[k]/2+De,st=Rp(Re,Ne,Me),mt=D;d.modifiersData[p]=(u={},u[mt]=st,u.centerOffset=st-Ne,u)}}function zS(o){var u=o.state,d=o.options,p=d.element,w=p===void 0?"[data-popper-arrow]":p;w!=null&&(typeof w=="string"&&(w=u.elements.popper.querySelector(w),!w)||pw(u.elements.popper,w)&&(u.elements.arrow=w))}const kS={name:"arrow",enabled:!0,phase:"main",fn:OS,effect:zS,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ud(o){return o.split("-")[1]}var HS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function NS(o,u){var d=o.x,p=o.y,w=u.devicePixelRatio||1;return{x:ld(d*w)/w||0,y:ld(p*w)/w||0}}function Bv(o){var u,d=o.popper,p=o.popperRect,w=o.placement,S=o.variation,C=o.offsets,A=o.position,D=o.gpuAcceleration,R=o.adaptive,k=o.roundOffsets,q=o.isFixed,X=C.x,W=X===void 0?0:X,ne=C.y,ye=ne===void 0?0:ne,Se=typeof k=="function"?k({x:W,y:ye}):{x:W,y:ye};W=Se.x,ye=Se.y;var le=C.hasOwnProperty("x"),ve=C.hasOwnProperty("y"),De=Ms,Re=Us,Me=window;if(R){var Ne=Jp(d),st="clientHeight",mt="clientWidth";if(Ne===ro(d)&&(Ne=Lu(d),bc(Ne).position!=="static"&&A==="absolute"&&(st="scrollHeight",mt="scrollWidth")),Ne=Ne,w===Us||(w===Ms||w===Ho)&&S===jp){Re=ko;var ot=q&&Ne===Me&&Me.visualViewport?Me.visualViewport.height:Ne[st];ye-=ot-p.height,ye*=D?1:-1}if(w===Ms||(w===Us||w===ko)&&S===jp){De=Ho;var Qt=q&&Ne===Me&&Me.visualViewport?Me.visualViewport.width:Ne[mt];W-=Qt-p.width,W*=D?1:-1}}var He=Object.assign({position:A},R&&HS),Zt=k===!0?NS({x:W,y:ye},ro(d)):{x:W,y:ye};if(W=Zt.x,ye=Zt.y,D){var Ut;return Object.assign({},He,(Ut={},Ut[Re]=ve?"0":"",Ut[De]=le?"0":"",Ut.transform=(Me.devicePixelRatio||1)<=1?"translate("+W+"px, "+ye+"px)":"translate3d("+W+"px, "+ye+"px, 0)",Ut))}return Object.assign({},He,(u={},u[Re]=ve?ye+"px":"",u[De]=le?W+"px":"",u.transform="",u))}function jS(o){var u=o.state,d=o.options,p=d.gpuAcceleration,w=p===void 0?!0:p,S=d.adaptive,C=S===void 0?!0:S,A=d.roundOffsets,D=A===void 0?!0:A,R={placement:pl(u.placement),variation:ud(u.placement),popper:u.elements.popper,popperRect:u.rects.popper,gpuAcceleration:w,isFixed:u.options.strategy==="fixed"};u.modifiersData.popperOffsets!=null&&(u.styles.popper=Object.assign({},u.styles.popper,Bv(Object.assign({},R,{offsets:u.modifiersData.popperOffsets,position:u.options.strategy,adaptive:C,roundOffsets:D})))),u.modifiersData.arrow!=null&&(u.styles.arrow=Object.assign({},u.styles.arrow,Bv(Object.assign({},R,{offsets:u.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:D})))),u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-placement":u.placement})}const VS={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jS,data:{}};var cm={passive:!0};function GS(o){var u=o.state,d=o.instance,p=o.options,w=p.scroll,S=w===void 0?!0:w,C=p.resize,A=C===void 0?!0:C,D=ro(u.elements.popper),R=[].concat(u.scrollParents.reference,u.scrollParents.popper);return S&&R.forEach(function(k){k.addEventListener("scroll",d.update,cm)}),A&&D.addEventListener("resize",d.update,cm),function(){S&&R.forEach(function(k){k.removeEventListener("scroll",d.update,cm)}),A&&D.removeEventListener("resize",d.update,cm)}}const KS={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:GS,data:{}};var ZS={left:"right",right:"left",bottom:"top",top:"bottom"};function bm(o){return o.replace(/left|right|bottom|top/g,function(u){return ZS[u]})}var qS={start:"end",end:"start"};function Cv(o){return o.replace(/start|end/g,function(u){return qS[u]})}function O_(o){var u=ro(o),d=u.pageXOffset,p=u.pageYOffset;return{scrollLeft:d,scrollTop:p}}function z_(o){return cd(Lu(o)).left+O_(o).scrollLeft}function XS(o,u){var d=ro(o),p=Lu(o),w=d.visualViewport,S=p.clientWidth,C=p.clientHeight,A=0,D=0;if(w){S=w.width,C=w.height;var R=dw();(R||!R&&u==="fixed")&&(A=w.offsetLeft,D=w.offsetTop)}return{width:S,height:C,x:A+z_(o),y:D}}function YS(o){var u,d=Lu(o),p=O_(o),w=(u=o.ownerDocument)==null?void 0:u.body,S=Hh(d.scrollWidth,d.clientWidth,w?w.scrollWidth:0,w?w.clientWidth:0),C=Hh(d.scrollHeight,d.clientHeight,w?w.scrollHeight:0,w?w.clientHeight:0),A=-p.scrollLeft+z_(o),D=-p.scrollTop;return bc(w||d).direction==="rtl"&&(A+=Hh(d.clientWidth,w?w.clientWidth:0)-S),{width:S,height:C,x:A,y:D}}function k_(o){var u=bc(o),d=u.overflow,p=u.overflowX,w=u.overflowY;return/auto|scroll|overlay|hidden/.test(d+w+p)}function _w(o){return["html","body","#document"].indexOf(gl(o))>=0?o.ownerDocument.body:zo(o)&&k_(o)?o:_w(Jm(o))}function Op(o,u){var d;u===void 0&&(u=[]);var p=_w(o),w=p===((d=o.ownerDocument)==null?void 0:d.body),S=ro(p),C=w?[S].concat(S.visualViewport||[],k_(p)?p:[]):p,A=u.concat(C);return w?A:A.concat(Op(Jm(C)))}function g_(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function WS(o,u){var d=cd(o,!1,u==="fixed");return d.top=d.top+o.clientTop,d.left=d.left+o.clientLeft,d.bottom=d.top+o.clientHeight,d.right=d.left+o.clientWidth,d.width=o.clientWidth,d.height=o.clientHeight,d.x=d.left,d.y=d.top,d}function Ev(o,u,d){return u===hw?g_(XS(o,d)):Nh(u)?WS(u,d):g_(YS(Lu(o)))}function $S(o){var u=Op(Jm(o)),d=["absolute","fixed"].indexOf(bc(o).position)>=0,p=d&&zo(o)?Jp(o):o;return Nh(p)?u.filter(function(w){return Nh(w)&&pw(w,p)&&gl(w)!=="body"}):[]}function JS(o,u,d,p){var w=u==="clippingParents"?$S(o):[].concat(u),S=[].concat(w,[d]),C=S[0],A=S.reduce(function(D,R){var k=Ev(o,R,p);return D.top=Hh(k.top,D.top),D.right=Pm(k.right,D.right),D.bottom=Pm(k.bottom,D.bottom),D.left=Hh(k.left,D.left),D},Ev(o,C,p));return A.width=A.right-A.left,A.height=A.bottom-A.top,A.x=A.left,A.y=A.top,A}function vw(o){var u=o.reference,d=o.element,p=o.placement,w=p?pl(p):null,S=p?ud(p):null,C=u.x+u.width/2-d.width/2,A=u.y+u.height/2-d.height/2,D;switch(w){case Us:D={x:C,y:u.y-d.height};break;case ko:D={x:C,y:u.y+u.height};break;case Ho:D={x:u.x+u.width,y:A};break;case Ms:D={x:u.x-d.width,y:A};break;default:D={x:u.x,y:u.y}}var R=w?R_(w):null;if(R!=null){var k=R==="y"?"height":"width";switch(S){case Ad:D[R]=D[R]-(u[k]/2-d[k]/2);break;case jp:D[R]=D[R]+(u[k]/2-d[k]/2);break}}return D}function Vp(o,u){u===void 0&&(u={});var d=u,p=d.placement,w=p===void 0?o.placement:p,S=d.strategy,C=S===void 0?o.strategy:S,A=d.boundary,D=A===void 0?_S:A,R=d.rootBoundary,k=R===void 0?hw:R,q=d.elementContext,X=q===void 0?bp:q,W=d.altBoundary,ne=W===void 0?!1:W,ye=d.padding,Se=ye===void 0?0:ye,le=mw(typeof Se!="number"?Se:yw(Se,$p)),ve=X===bp?vS:bp,De=o.rects.popper,Re=o.elements[ne?ve:X],Me=JS(Nh(Re)?Re:Re.contextElement||Lu(o.elements.popper),D,k,C),Ne=cd(o.elements.reference),st=vw({reference:Ne,element:De,placement:w}),mt=g_(Object.assign({},De,st)),ot=X===bp?mt:Ne,Qt={top:Me.top-ot.top+le.top,bottom:ot.bottom-Me.bottom+le.bottom,left:Me.left-ot.left+le.left,right:ot.right-Me.right+le.right},He=o.modifiersData.offset;if(X===bp&&He){var Zt=He[w];Object.keys(Qt).forEach(function(Ut){var Vt=[Ho,ko].indexOf(Ut)>=0?1:-1,Wt=[Us,ko].indexOf(Ut)>=0?"y":"x";Qt[Ut]+=Zt[Wt]*Vt})}return Qt}function eF(o,u){u===void 0&&(u={});var d=u,p=d.placement,w=d.boundary,S=d.rootBoundary,C=d.padding,A=d.flipVariations,D=d.allowedAutoPlacements,R=D===void 0?fw:D,k=ud(p),q=k?A?wv:wv.filter(function(ne){return ud(ne)===k}):$p,X=q.filter(function(ne){return R.indexOf(ne)>=0});X.length===0&&(X=q);var W=X.reduce(function(ne,ye){return ne[ye]=Vp(o,{placement:ye,boundary:w,rootBoundary:S,padding:C})[pl(ye)],ne},{});return Object.keys(W).sort(function(ne,ye){return W[ne]-W[ye]})}function tF(o){if(pl(o)===D_)return[];var u=bm(o);return[Cv(o),u,Cv(u)]}function rF(o){var u=o.state,d=o.options,p=o.name;if(!u.modifiersData[p]._skip){for(var w=d.mainAxis,S=w===void 0?!0:w,C=d.altAxis,A=C===void 0?!0:C,D=d.fallbackPlacements,R=d.padding,k=d.boundary,q=d.rootBoundary,X=d.altBoundary,W=d.flipVariations,ne=W===void 0?!0:W,ye=d.allowedAutoPlacements,Se=u.options.placement,le=pl(Se),ve=le===Se,De=D||(ve||!ne?[bm(Se)]:tF(Se)),Re=[Se].concat(De).reduce(function(xt,Ft){return xt.concat(pl(Ft)===D_?eF(u,{placement:Ft,boundary:k,rootBoundary:q,padding:R,flipVariations:ne,allowedAutoPlacements:ye}):Ft)},[]),Me=u.rects.reference,Ne=u.rects.popper,st=new Map,mt=!0,ot=Re[0],Qt=0;Qt<Re.length;Qt++){var He=Re[Qt],Zt=pl(He),Ut=ud(He)===Ad,Vt=[Us,ko].indexOf(Zt)>=0,Wt=Vt?"width":"height",Te=Vp(u,{placement:He,boundary:k,rootBoundary:q,altBoundary:X,padding:R}),ut=Vt?Ut?Ho:Ms:Ut?ko:Us;Me[Wt]>Ne[Wt]&&(ut=bm(ut));var Ct=bm(ut),Rt=[];if(S&&Rt.push(Te[Zt]<=0),A&&Rt.push(Te[ut]<=0,Te[Ct]<=0),Rt.every(function(xt){return xt})){ot=He,mt=!1;break}st.set(He,Rt)}if(mt)for(var he=ne?3:1,nt=function(Ft){var Pt=Re.find(function(ur){var ir=st.get(ur);if(ir)return ir.slice(0,Ft).every(function(yr){return yr})});if(Pt)return ot=Pt,"break"},yt=he;yt>0;yt--){var _t=nt(yt);if(_t==="break")break}u.placement!==ot&&(u.modifiersData[p]._skip=!0,u.placement=ot,u.reset=!0)}}const nF={name:"flip",enabled:!0,phase:"main",fn:rF,requiresIfExists:["offset"],data:{_skip:!1}};function Tv(o,u,d){return d===void 0&&(d={x:0,y:0}),{top:o.top-u.height-d.y,right:o.right-u.width+d.x,bottom:o.bottom-u.height+d.y,left:o.left-u.width-d.x}}function Sv(o){return[Us,Ho,ko,Ms].some(function(u){return o[u]>=0})}function iF(o){var u=o.state,d=o.name,p=u.rects.reference,w=u.rects.popper,S=u.modifiersData.preventOverflow,C=Vp(u,{elementContext:"reference"}),A=Vp(u,{altBoundary:!0}),D=Tv(C,p),R=Tv(A,w,S),k=Sv(D),q=Sv(R);u.modifiersData[d]={referenceClippingOffsets:D,popperEscapeOffsets:R,isReferenceHidden:k,hasPopperEscaped:q},u.attributes.popper=Object.assign({},u.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":q})}const aF={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iF};function sF(o,u,d){var p=pl(o),w=[Ms,Us].indexOf(p)>=0?-1:1,S=typeof d=="function"?d(Object.assign({},u,{placement:o})):d,C=S[0],A=S[1];return C=C||0,A=(A||0)*w,[Ms,Ho].indexOf(p)>=0?{x:A,y:C}:{x:C,y:A}}function oF(o){var u=o.state,d=o.options,p=o.name,w=d.offset,S=w===void 0?[0,0]:w,C=fw.reduce(function(k,q){return k[q]=sF(q,u.rects,S),k},{}),A=C[u.placement],D=A.x,R=A.y;u.modifiersData.popperOffsets!=null&&(u.modifiersData.popperOffsets.x+=D,u.modifiersData.popperOffsets.y+=R),u.modifiersData[p]=C}const AF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:oF};function lF(o){var u=o.state,d=o.name;u.modifiersData[d]=vw({reference:u.rects.reference,element:u.rects.popper,placement:u.placement})}const cF={name:"popperOffsets",enabled:!0,phase:"read",fn:lF,data:{}};function uF(o){return o==="x"?"y":"x"}function hF(o){var u=o.state,d=o.options,p=o.name,w=d.mainAxis,S=w===void 0?!0:w,C=d.altAxis,A=C===void 0?!1:C,D=d.boundary,R=d.rootBoundary,k=d.altBoundary,q=d.padding,X=d.tether,W=X===void 0?!0:X,ne=d.tetherOffset,ye=ne===void 0?0:ne,Se=Vp(u,{boundary:D,rootBoundary:R,padding:q,altBoundary:k}),le=pl(u.placement),ve=ud(u.placement),De=!ve,Re=R_(le),Me=uF(Re),Ne=u.modifiersData.popperOffsets,st=u.rects.reference,mt=u.rects.popper,ot=typeof ye=="function"?ye(Object.assign({},u.rects,{placement:u.placement})):ye,Qt=typeof ot=="number"?{mainAxis:ot,altAxis:ot}:Object.assign({mainAxis:0,altAxis:0},ot),He=u.modifiersData.offset?u.modifiersData.offset[u.placement]:null,Zt={x:0,y:0};if(Ne){if(S){var Ut,Vt=Re==="y"?Us:Ms,Wt=Re==="y"?ko:Ho,Te=Re==="y"?"height":"width",ut=Ne[Re],Ct=ut+Se[Vt],Rt=ut-Se[Wt],he=W?-mt[Te]/2:0,nt=ve===Ad?st[Te]:mt[Te],yt=ve===Ad?-mt[Te]:-st[Te],_t=u.elements.arrow,xt=W&&_t?P_(_t):{width:0,height:0},Ft=u.modifiersData["arrow#persistent"]?u.modifiersData["arrow#persistent"].padding:gw(),Pt=Ft[Vt],ur=Ft[Wt],ir=Rp(0,st[Te],xt[Te]),yr=De?st[Te]/2-he-ir-Pt-Qt.mainAxis:nt-ir-Pt-Qt.mainAxis,nn=De?-st[Te]/2+he+ir+ur+Qt.mainAxis:yt+ir+ur+Qt.mainAxis,Rr=u.elements.arrow&&Jp(u.elements.arrow),Ye=Rr?Re==="y"?Rr.clientTop||0:Rr.clientLeft||0:0,Lt=(Ut=He==null?void 0:He[Re])!=null?Ut:0,bt=ut+yr-Lt-Ye,xr=ut+nn-Lt,Xr=Rp(W?Pm(Ct,bt):Ct,ut,W?Hh(Rt,xr):Rt);Ne[Re]=Xr,Zt[Re]=Xr-ut}if(A){var Ar,jr=Re==="x"?Us:Ms,Rn=Re==="x"?ko:Ho,vr=Ne[Me],Gr=Me==="y"?"height":"width",cn=vr+Se[jr],en=vr-Se[Rn],fr=[Us,Ms].indexOf(le)!==-1,or=(Ar=He==null?void 0:He[Me])!=null?Ar:0,Nn=fr?cn:vr-st[Gr]-mt[Gr]-or+Qt.altAxis,Nr=fr?vr+st[Gr]+mt[Gr]-or-Qt.altAxis:en,Yr=W&&fr?PS(Nn,vr,Nr):Rp(W?Nn:cn,vr,W?Nr:en);Ne[Me]=Yr,Zt[Me]=Yr-vr}u.modifiersData[p]=Zt}}const fF={name:"preventOverflow",enabled:!0,phase:"main",fn:hF,requiresIfExists:["offset"]};function dF(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function pF(o){return o===ro(o)||!zo(o)?O_(o):dF(o)}function gF(o){var u=o.getBoundingClientRect(),d=ld(u.width)/o.offsetWidth||1,p=ld(u.height)/o.offsetHeight||1;return d!==1||p!==1}function mF(o,u,d){d===void 0&&(d=!1);var p=zo(u),w=zo(u)&&gF(u),S=Lu(u),C=cd(o,w,d),A={scrollLeft:0,scrollTop:0},D={x:0,y:0};return(p||!p&&!d)&&((gl(u)!=="body"||k_(S))&&(A=pF(u)),zo(u)?(D=cd(u,!0),D.x+=u.clientLeft,D.y+=u.clientTop):S&&(D.x=z_(S))),{x:C.left+A.scrollLeft-D.x,y:C.top+A.scrollTop-D.y,width:C.width,height:C.height}}function yF(o){var u=new Map,d=new Set,p=[];o.forEach(function(S){u.set(S.name,S)});function w(S){d.add(S.name);var C=[].concat(S.requires||[],S.requiresIfExists||[]);C.forEach(function(A){if(!d.has(A)){var D=u.get(A);D&&w(D)}}),p.push(S)}return o.forEach(function(S){d.has(S.name)||w(S)}),p}function _F(o){var u=yF(o);return US.reduce(function(d,p){return d.concat(u.filter(function(w){return w.phase===p}))},[])}function vF(o){var u;return function(){return u||(u=new Promise(function(d){Promise.resolve().then(function(){u=void 0,d(o())})})),u}}function xF(o){var u=o.reduce(function(d,p){var w=d[p.name];return d[p.name]=w?Object.assign({},w,p,{options:Object.assign({},w.options,p.options),data:Object.assign({},w.data,p.data)}):p,d},{});return Object.keys(u).map(function(d){return u[d]})}var Fv={placement:"bottom",modifiers:[],strategy:"absolute"};function Uv(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return!u.some(function(p){return!(p&&typeof p.getBoundingClientRect=="function")})}function wF(o){o===void 0&&(o={});var u=o,d=u.defaultModifiers,p=d===void 0?[]:d,w=u.defaultOptions,S=w===void 0?Fv:w;return function(A,D,R){R===void 0&&(R=S);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},Fv,S),modifiersData:{},elements:{reference:A,popper:D},attributes:{},styles:{}},q=[],X=!1,W={state:k,setOptions:function(le){var ve=typeof le=="function"?le(k.options):le;ye(),k.options=Object.assign({},S,k.options,ve),k.scrollParents={reference:Nh(A)?Op(A):A.contextElement?Op(A.contextElement):[],popper:Op(D)};var De=_F(xF([].concat(p,k.options.modifiers)));return k.orderedModifiers=De.filter(function(Re){return Re.enabled}),ne(),W.update()},forceUpdate:function(){if(!X){var le=k.elements,ve=le.reference,De=le.popper;if(Uv(ve,De)){k.rects={reference:mF(ve,Jp(De),k.options.strategy==="fixed"),popper:P_(De)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(Qt){return k.modifiersData[Qt.name]=Object.assign({},Qt.data)});for(var Re=0;Re<k.orderedModifiers.length;Re++){if(k.reset===!0){k.reset=!1,Re=-1;continue}var Me=k.orderedModifiers[Re],Ne=Me.fn,st=Me.options,mt=st===void 0?{}:st,ot=Me.name;typeof Ne=="function"&&(k=Ne({state:k,options:mt,name:ot,instance:W})||k)}}}},update:vF(function(){return new Promise(function(Se){W.forceUpdate(),Se(k)})}),destroy:function(){ye(),X=!0}};if(!Uv(A,D))return W;W.setOptions(R).then(function(Se){!X&&R.onFirstUpdate&&R.onFirstUpdate(Se)});function ne(){k.orderedModifiers.forEach(function(Se){var le=Se.name,ve=Se.options,De=ve===void 0?{}:ve,Re=Se.effect;if(typeof Re=="function"){var Me=Re({state:k,name:le,instance:W,options:De}),Ne=function(){};q.push(Me||Ne)}})}function ye(){q.forEach(function(Se){return Se()}),q=[]}return W}}var bF=[KS,cF,VS,QS,AF,nF,fF,kS,aF],Mv=wF({defaultModifiers:bF});const Pu={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};Pu.defaultMerge;function BF(o,u){return u}function CF(o,u){return o.filter(d=>d!==void 0)}var Iv;(function(o){o[o.NOT=0]="NOT",o[o.RECORD=1]="RECORD",o[o.ARRAY=2]="ARRAY",o[o.SET=3]="SET",o[o.MAP=4]="MAP",o[o.OTHER=5]="OTHER"})(Iv||(Iv={}));function Qv(o){return typeof o!="object"||o===null?0:Array.isArray(o)?2:SF(o)?1:o instanceof Set?3:o instanceof Map?4:5}function EF(o){const u=new Set;for(const d of o)for(const p of[...Object.keys(d),...Object.getOwnPropertySymbols(d)])u.add(p);return u}function TF(o,u){return typeof o=="object"&&Object.prototype.propertyIsEnumerable.call(o,u)}function xw(o){var p;let u=0,d=(p=o[0])==null?void 0:p[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var w;do{if(d===void 0)return{done:!0,value:void 0};const S=d.next();if(S.done===!0){u+=1,d=(w=o[u])==null?void 0:w[Symbol.iterator]();continue}return{done:!1,value:S.value}}while(!0)}}}}}const Dv=["[object Object]","[object Module]"];function SF(o){if(!Dv.includes(Object.prototype.toString.call(o)))return!1;const{constructor:u}=o;if(u===void 0)return!0;const d=u.prototype;return!(d===null||typeof d!="object"||!Dv.includes(Object.prototype.toString.call(d))||!d.hasOwnProperty("isPrototypeOf"))}function FF(o,u,d){const p={};for(const w of EF(o)){const S=[];for(const D of o)TF(D,w)&&S.push(D[w]);if(S.length===0)continue;const C=u.metaDataUpdater(d,{key:w,parents:o}),A=ww(S,u,C);A!==Pu.skip&&(w==="__proto__"?Object.defineProperty(p,w,{value:A,configurable:!0,enumerable:!0,writable:!0}):p[w]=A)}return p}function UF(o){return o.flat()}function MF(o){return new Set(xw(o))}function IF(o){return new Map(xw(o))}function QF(o){return o.at(-1)}const um={mergeRecords:FF,mergeArrays:UF,mergeSets:MF,mergeMaps:IF,mergeOthers:QF};function Rm(...o){return DF({})(...o)}function DF(o,u){const d=LF(o,p);function p(...w){return ww(w,d,u)}return p}function LF(o,u){return{defaultMergeFunctions:um,mergeFunctions:{...um,...Object.fromEntries(Object.entries(o).filter(([d,p])=>Object.hasOwn(um,d)).map(([d,p])=>p===!1?[d,um.mergeOthers]:[d,p]))},metaDataUpdater:o.metaDataUpdater??BF,deepmerge:u,useImplicitDefaultMerging:o.enableImplicitDefaultMerging??!1,filterValues:o.filterValues===!1?void 0:o.filterValues??CF,actions:Pu}}function ww(o,u,d){var S;const p=((S=u.filterValues)==null?void 0:S.call(u,o,d))??o;if(p.length===0)return;if(p.length===1)return Hy(p,u,d);const w=Qv(p[0]);if(w!==0&&w!==5){for(let C=1;C<p.length;C++)if(Qv(p[C])!==w)return Hy(p,u,d)}switch(w){case 1:return PF(p,u,d);case 2:return RF(p,u,d);case 3:return OF(p,u,d);case 4:return zF(p,u,d);default:return Hy(p,u,d)}}function PF(o,u,d){const p=u.mergeFunctions.mergeRecords(o,u,d);return p===Pu.defaultMerge||u.useImplicitDefaultMerging&&p===void 0&&u.mergeFunctions.mergeRecords!==u.defaultMergeFunctions.mergeRecords?u.defaultMergeFunctions.mergeRecords(o,u,d):p}function RF(o,u,d){const p=u.mergeFunctions.mergeArrays(o,u,d);return p===Pu.defaultMerge||u.useImplicitDefaultMerging&&p===void 0&&u.mergeFunctions.mergeArrays!==u.defaultMergeFunctions.mergeArrays?u.defaultMergeFunctions.mergeArrays(o):p}function OF(o,u,d){const p=u.mergeFunctions.mergeSets(o,u,d);return p===Pu.defaultMerge||u.useImplicitDefaultMerging&&p===void 0&&u.mergeFunctions.mergeSets!==u.defaultMergeFunctions.mergeSets?u.defaultMergeFunctions.mergeSets(o):p}function zF(o,u,d){const p=u.mergeFunctions.mergeMaps(o,u,d);return p===Pu.defaultMerge||u.useImplicitDefaultMerging&&p===void 0&&u.mergeFunctions.mergeMaps!==u.defaultMergeFunctions.mergeMaps?u.defaultMergeFunctions.mergeMaps(o):p}function Hy(o,u,d){const p=u.mergeFunctions.mergeOthers(o,u,d);return p===Pu.defaultMerge||u.useImplicitDefaultMerging&&p===void 0&&u.mergeFunctions.mergeOthers!==u.defaultMergeFunctions.mergeOthers?u.defaultMergeFunctions.mergeOthers(o):p}function kF(o){const{arrowRef:u,placement:d,styles:p}=o,{arrow:{color:w,display:S,length:C,position:A,spread:D}}=p,R={display:S,position:A};let k,q=D,X=C;return d.startsWith("top")?k=`0,0 ${q/2},${X} ${q},0`:d.startsWith("bottom")?k=`${q},${X} ${q/2},0 0,${X}`:d.startsWith("left")?(X=D,q=C,k=`0,0 ${q},${X/2} 0,${X}`):d.startsWith("right")&&(X=D,q=C,k=`${q},${X} ${q},0 0,${X/2}`),se.jsx("span",{ref:u,className:"__floater__arrow",style:R,children:se.jsx("svg",{height:X,version:"1.1",width:q,xmlns:"http://www.w3.org/2000/svg",children:se.jsx("polygon",{fill:w,points:k})})})}function HF({onClick:o,styles:u}){const{color:d,height:p,width:w,...S}=u;return se.jsx("button",{"aria-label":"close",onClick:o,style:S,type:"button",children:se.jsx("svg",{height:`${p}px`,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:`${w}px`,xmlns:"http://www.w3.org/2000/svg",children:se.jsx("g",{children:se.jsx("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:d})})})})}function NF(o){const{content:u,footer:d,onClick:p,open:w,positionWrapper:S,showCloseButton:C,styles:A,title:D}=o,R={content:be.isValidElement(u)?u:se.jsx("div",{className:"__floater__content",style:A.content,children:u})};return D&&(R.title=be.isValidElement(D)?D:se.jsx("div",{className:"__floater__title",style:A.title,children:D})),d&&(R.footer=be.isValidElement(d)?d:se.jsx("div",{className:"__floater__footer",style:A.footer,children:d})),(C||S)&&!Kt.boolean(w)&&(R.close=se.jsx(HF,{onClick:p,styles:A.close})),se.jsxs("div",{className:"__floater__container",style:A.container,children:[R.close,R.title,R.content,R.footer]})}var jF=["position","top","right","bottom","left"],Br={INIT:"init",IDLE:"idle",RENDER:"render",OPENING:"opening",OPEN:"open",CLOSING:"closing"};function VF(o){const{component:u,content:d,floaterRef:p,hideArrow:w,id:S,onClick:C,placement:A,status:D,styles:R}=o,k=be.useMemo(()=>{const{arrow:{length:ye},floater:Se,floaterCentered:le,floaterClosing:ve,floaterOpening:De,floaterWithComponent:Re}=R;let Me={...Se};return w||(A.startsWith("top")?Me.padding=`0 0 ${ye}px`:A.startsWith("bottom")?Me.padding=`${ye}px 0 0`:A.startsWith("left")?Me.padding=`0 ${ye}px 0 0`:A.startsWith("right")&&(Me.padding=`0 0 0 ${ye}px`)),D===Br.CLOSING&&(Me={...Me,...ve}),(D===Br.OPENING||D===Br.OPEN)&&(Me={...Me,...De}),A==="center"&&(Me={...Me,...le}),u&&(Me={...Me,...Re}),Me},[u,w,A,D,R]),q=["render","open","opening","closing"].includes(D),X={},W=["__floater"],ne={role:"tooltip"};if(u){const ye={closeFn:C,id:S,...ne};X.content=be.isValidElement(u)?be.cloneElement(u,ye):u(ye)}else X.content=se.jsx(NF,{...o,content:d});return D===Br.OPEN&&W.push("__floater__open"),w||(X.arrow=se.jsx(kF,{...o})),q?se.jsx("div",{ref:p,id:S,style:{zIndex:R.options.zIndex},children:se.jsx("div",{className:W.join(" "),style:k,...ne,children:se.jsxs("div",{className:"__floater__body",children:[X.content,X.arrow]})})}):null}var GF=be.memo(VF),hm="react-floater-portal";function Rh(){var o;return!!(typeof window<"u"&&((o=window.document)!=null&&o.createElement))}function Lv(o){return{autoOpen:!1,debug:!1,disableFlip:!1,disableHoverToClick:!1,event:"click",eventDelay:.4,hideArrow:!1,offset:15,placement:"bottom",showCloseButton:!1,styles:{},target:null,wrapperOptions:{position:!1},...o}}function KF(o){if(o.startsWith("left"))return["top","bottom"];if(o.startsWith("right"))return["bottom","top"]}function ZF(o){return Rm({flip:{name:"flip",enabled:!0,options:{padding:20}},preventOverflow:{name:"preventOverflow",enabled:!0,options:{padding:10}}},o??{})}function bw(o){if(!o)return!1;const{nodeName:u}=o;return u==="BODY"||u==="HTML"?!1:getComputedStyle(o).position==="fixed"?!0:o.parentNode instanceof HTMLElement?bw(o.parentNode):!1}function Ny(){return"ontouchstart"in window&&/Mobi/.test(navigator.userAgent)}function fm({data:o,debug:u=!1,title:d}){const p=console.log;u&&d&&o&&(console.groupCollapsed(`%creact-floater: ${d}`,"color: #9b00ff; font-weight: bold; font-size: 12px;"),Array.isArray(o)?o.forEach(w=>{Kt.plainObject(w)&&w.key?p.apply(console,[w.key,w.value]):p.apply(console,[w])}):p.apply(console,[o]),console.groupEnd())}function jy(o,u){return Rm(o,u??{})}function qF(o,u,d,p=!1){o.removeEventListener(u,d,p)}function XF(o,u,d,p=!1){o.addEventListener(u,d,p)}function YF(o,u,d,p=!1){let w;w=S=>{d(S),qF(o,u,w)},XF(o,u,w,p)}function WF(){return`rf-${Math.round(Math.random()*1e5)}`}function Bw(o){be.useEffect(o,[])}function H_(o){Bw(o)}function $F(o){const u=be.useRef(!1);u.current||(o(),u.current=!0)}function Cw(o){const u=be.useRef(o);u.current=o,Bw(()=>()=>u.current())}function JF(o,u){const d=be.useRef(!0);be.useEffect(()=>{d.current||o()},u),d.current&&(d.current=!1)}function eU(o){const{children:u,hasChildren:d,internalId:p,placement:w,portalElement:S,target:C,zIndex:A}=o,D=be.useRef(null),R=be.useCallback(()=>{var k;if(Rh()){if(S&&(D.current=Kt.string(S)?document.querySelector(S):S),!S||!D.current){const q=document.getElementById(hm);if(q){const X=((k=q.dataset.ids)==null?void 0:k.split(",").filter(Boolean))??[];!X.includes(p)&&p&&X.push(p),q.dataset.ids=X.join(","),D.current=q}else D.current=document.createElement("div"),D.current.id=hm,D.current.dataset.ids=p,D.current.style.zIndex=`${A}`,document.body.appendChild(D.current)}!S&&!document.getElementById(hm)&&D.current&&document.body.appendChild(D.current)}},[p,S,A]);return H_(()=>{Rh&&R()}),be.useEffect(()=>{R()},[R]),Cw(()=>{var k;if(!(!Rh()||!D.current))try{if(D.current.id===hm){const q=((k=D.current.dataset.ids)==null?void 0:k.split(","))??[];q.includes(p)&&(D.current.dataset.ids=q.filter(X=>X!==p).join(",")),q.length<=1&&(document.body.removeChild(D.current),D.current=null)}}catch{D.current=null}}),D.current?!d&&!C&&w!=="center"?null:ix.createPortal(u,D.current):null}function tU(o){const{childRef:u,children:d,id:p,isControlled:w,onClick:S,onMount:C,onMouseEnter:A,onMouseLeave:D,status:R,style:k,styles:q,wrapperRef:X}=o;H_(()=>{C()});let W=null;const ne={...q,...k,...be.isValidElement(d)?d.props.style:void 0},ye=`${p}-wrapper`;let Se={"aria-describedby":[Br.OPENING,Br.OPEN,Br.CLOSING].includes(R)?p:void 0,style:ne};return w||(Se={...Se,onClick:S,onMouseEnter:A,onMouseLeave:D}),d&&(be.Children.count(d)===1&&be.isValidElement(d)&&d.type!==be.Fragment?W=Kt.function(d.type)?se.jsx("span",{ref:X,id:ye,...Se,children:be.cloneElement(be.Children.only(d),{innerRef:u})}):be.cloneElement(be.Children.only(d),{id:ye,ref:X,...Se}):W=se.jsx("span",{ref:X,id:ye,...Se,children:d})),W}var rU=be.memo(tU),nU={zIndex:100};function iU(o){const{options:u={},...d}=o??{};return Rm({arrow:{color:"#fff",display:"inline-flex",length:16,position:"absolute",spread:32},close:{backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",fontSize:0,height:15,outline:"none",padding:10,position:"absolute",right:0,top:0,width:15,WebkitAppearance:"none"},container:{backgroundColor:"#fff",color:"#666",minHeight:60,minWidth:200,padding:20,position:"relative",zIndex:10},content:{fontSize:15},footer:{borderTop:"1px solid #ccc",fontSize:13,marginTop:10,paddingTop:5},floater:{display:"inline-block",filter:"drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))",maxWidth:300,opacity:0,position:"relative",transition:"opacity 0.3s",visibility:"hidden",zIndex:u.zIndex},floaterCentered:{left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)"},floaterClosing:{opacity:0,visibility:"visible"},floaterOpening:{opacity:1,visibility:"visible"},floaterWithComponent:{maxWidth:"100%"},title:{borderBottom:"1px solid #555",color:"#555",fontSize:18,marginBottom:5,paddingBottom:6,paddingRight:18},wrapper:{cursor:"help",zIndex:u.zIndex},wrapperPosition:{left:-1e3,position:"absolute",top:-1e3,visibility:"hidden"},options:Rm(nU,u)},d)}function aU(o){const{autoOpen:u=!1,callback:d,children:p,component:w,content:S,debug:C=!1,disableFlip:A=!1,disableHoverToClick:D=!1,event:R="click",eventDelay:k=.4,footer:q,getPopper:X,hideArrow:W=!1,id:ne,modifiers:ye,offset:Se=15,open:le,placement:ve="bottom",portalElement:De,showCloseButton:Re=!1,style:Me,styles:Ne,target:st,title:mt,wrapperOptions:ot}=Lv(o),[Qt,He]=be.useReducer((fr,or)=>({...fr,...or}),{currentPlacement:ve,positionWrapper:!!(ot!=null&&ot.position)&&!!st,status:Br.INIT,statusWrapper:Br.INIT}),Zt=be.useRef(null),Ut=be.useRef(null),Vt=be.useRef(),Wt=be.useRef(null),Te=be.useRef(WF()),ut=be.useRef(!1),Ct=be.useRef(),Rt=be.useRef(Qt),he=be.useRef(),nt=be.useRef(null),yt=be.useRef({}),{currentPlacement:_t,positionWrapper:xt,status:Ft,statusWrapper:Pt}=Qt,{changed:ur}=od(Qt),{changed:ir}=od(o),yr=be.useCallback((fr,or)=>{ut.current&&(He(fr),Rt.current={...Qt,...fr},or&&or())},[He,Qt]),nn=be.useCallback(fr=>{let or=Rt.current.status===Br.OPEN?Br.CLOSING:Br.RENDER;Kt.undefined(fr)||(or=fr),yr({status:or,statusWrapper:or===Br.CLOSING?Br.RENDER:Br.IDLE})},[yr]),Rr=be.useRef(()=>Rh()?st?Kt.domElement(st)?st:document.querySelector(st):Ut.current??nt.current:null),Ye=be.useMemo(()=>Rh()&&(C||!!window.ReactFloaterDebug),[C]),Lt=be.useMemo(()=>R==="hover"&&Ny()&&!D?"click":R,[D,R]),bt=be.useMemo(()=>{var Nn;const fr=iU(Ne),or=Rr.current();if(xt){let Nr;Ft!==Br.IDLE?Nr=fr.wrapperPosition:Pt===Br.RENDER&&(Nr=(Nn=he.current)==null?void 0:Nn.state.styles),fr.wrapper={...fr.wrapper,...Nr}}if(or){const Nr=window.getComputedStyle(or);yt.current?fr.wrapper={...fr.wrapper,...yt.current}:["relative","static"].includes(Nr.position)||(yt.current={},xt||(jF.forEach(Yr=>{yt.current[Yr]=Nr[Yr]}),fr.wrapper={...fr.wrapper,...yt.current}))}return fr},[xt,Ft,Pt,Ne]),xr=be.useCallback(()=>{const fr=Rt.current.status===Br.RENDER?Br.OPENING:Br.IDLE,or=Rr.current();if(ve==="center")setTimeout(()=>{yr({status:fr})},100);else if(or){if(Wt.current){const{arrow:Nn,flip:Nr,offset:Yr,...Un}=ZF(ye);Ct.current=Mv(or,Wt.current,{placement:ve,strategy:bw(Rr.current())?"fixed":"absolute",modifiers:[jy({name:"arrow",enabled:!W,options:{element:Zt.current,padding:8}},Nn),jy({name:"flip",enabled:!A,options:{altAxis:!1,fallbackPlacements:KF(ve||"bottom")}},Nr),jy({name:"offset",enabled:!0,options:{offset:[0,Se]}},Yr),{name:"updatePlacement",enabled:!0,phase:"afterWrite",fn:({instance:Ii,state:jn})=>{jn.placement!==Rt.current.currentPlacement&&(Ct.current=Ii,yr({currentPlacement:jn.placement}))}},{name:"applyArrowStyle",enabled:!0,phase:"write",fn:({state:Ii})=>{const{elements:{arrow:jn},placement:as}=Ii;jn&&(as.startsWith("top")?(jn.style.bottom="0px",jn.style.right=""):as.startsWith("bottom")?(jn.style.top="0px",jn.style.right=""):as.startsWith("left")?(jn.style.right="0px",jn.style.bottom=""):as.startsWith("right")&&(jn.style.left="0px",jn.style.bottom=""))}},...Object.values(Un)],onFirstUpdate:Ii=>{yr({currentPlacement:Ii.placement,status:fr}),ve!==Ii.placement&&setTimeout(()=>{var jn;(jn=Ct.current)==null||jn.forceUpdate()})}}),X&&Ct.current&&X(Ct.current,"floater")}else yr({status:Br.IDLE});if(nt.current&&!he.current&&Rt.current.positionWrapper){const Nn=ot!=null&&ot.offset?ot.offset:0;he.current=Mv(or,nt.current,{placement:(ot==null?void 0:ot.placement)??ve,modifiers:[{name:"arrow",enabled:!1},{name:"offset",options:{offset:[0,Nn]}},{name:"flip",enabled:!1}],onFirstUpdate:Nr=>{yr({statusWrapper:Br.RENDER}),ve!==Nr.placement&&setTimeout(()=>{var Yr;(Yr=he.current)==null||Yr.forceUpdate()})}}),X&&X(he.current,"wrapper")}}},[A,X,W,ye,Se,ve,yr,ot.offset,ot==null?void 0:ot.placement]),Xr=be.useRef(()=>{Ct.current&&Ct.current.forceUpdate(),he.current&&he.current.forceUpdate()}),Ar=be.useRef(()=>{he.current&&he.current.forceUpdate(),yr({status:Rt.current.status===Br.OPENING?Br.OPEN:Br.IDLE},()=>{d&&d(Rt.current.status===Br.OPEN?"open":"close",Lv(o))})}),jr=be.useCallback(()=>{Kt.boolean(le)||(Lt==="click"||Lt==="hover"&&xt)&&(fm({title:"click",data:[{event:R,status:Ft===Br.OPEN?"closing":"opening"}],debug:Ye}),nn(Ft==="idle"?Br.RENDER:void 0))},[Ye,Lt,R,le,xt,Ft,nn]),Rn=be.useCallback(()=>{Kt.boolean(le)||Ny()||Lt!=="hover"||(fm({title:"mouseEnter",data:[{key:"originalEvent",value:R}],debug:Ye}),Ft===Br.IDLE&&(clearTimeout(Vt.current),Vt.current=void 0,nn(Br.RENDER)))},[Ye,Lt,R,le,Ft,nn]),vr=be.useCallback(()=>{if(!(Kt.boolean(le)||Ny())&&Lt==="hover"){fm({title:"mouseLeave",data:[{key:"originalEvent",value:R}],debug:Ye});const fr=[Br.OPENING,Br.OPEN].includes(Ft);k?xt||fr&&(clearTimeout(Vt.current),Vt.current=window.setTimeout(()=>{nn(),Vt.current=void 0},k*1e3)):nn(Ft===Br.CLOSING?Br.IDLE:Br.CLOSING)}},[Ye,Lt,R,k,le,xt,Ft,nn]),Gr=be.useCallback(()=>{xt&&xr()},[xr,xt]),cn=()=>{Ct.current&&(Ct.current.destroy(),Ct.current=void 0),he.current&&(he.current.destroy(),he.current=void 0)};$F(()=>{Rh()&&window.addEventListener("load",Xr.current)}),H_(()=>{ut.current=!0,fm({title:"init",data:{hasChildren:!!p,hasTarget:!!st,isControlled:Kt.boolean(le),positionWrapper:xt,target:Rr.current(),floater:Wt.current},debug:Ye}),xr()}),Cw(()=>{ut.current=!1,cn(),window.removeEventListener("load",Xr.current)}),JF(()=>{if(Rh()){if(ir("open")){let fr;Kt.boolean(le)&&(fr=le?Br.RENDER:Br.CLOSING),nn(fr)}(ir("wrapperOptions.position")||ir("target"))&&yr({positionWrapper:!!(ot!=null&&ot.position)&&!!st}),(ur("status",Br.IDLE)&&le||ur("status",Br.IDLE,Br.INIT)&&u)&&nn(Br.RENDER),ur("status",Br.RENDER)&&(Ct.current&&Ct.current.destroy(),xr()),Wt.current&&ur("status",[Br.RENDER,Br.CLOSING])&&YF(Wt.current,"transitionend",Ar.current),ur("status",Br.IDLE,Br.CLOSING)&&Ct.current&&(Ct.current.destroy(),Ct.current=void 0,he.current&&he.current.forceUpdate())}});const en=se.jsx(rU,{childRef:Ut,id:ne??Te.current,isControlled:Kt.boolean(le),onClick:jr,onMount:Gr,onMouseEnter:Rn,onMouseLeave:vr,status:Ft,style:Me,styles:bt.wrapper,wrapperRef:nt,children:p});return se.jsxs(se.Fragment,{children:[se.jsxs(eU,{hasChildren:!!p,internalId:Te.current,placement:_t,portalElement:De,target:st,zIndex:bt.options.zIndex,children:[se.jsx(GF,{arrowRef:Zt,component:w,content:S,floaterRef:Wt,footer:q,hideArrow:W||_t==="center",id:ne??Te.current,onClick:jr,placement:_t,positionWrapper:xt,showCloseButton:Re,status:Ft,styles:bt,title:mt}),xt&&en]}),!xt&&en]})}var sU=Object.defineProperty,oU=(o,u,d)=>u in o?sU(o,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[u]=d,Jr=(o,u,d)=>oU(o,typeof u!="symbol"?u+"":u,d);function AU(){var o;return!!(typeof window<"u"&&((o=window.document)!=null&&o.createElement))}function Ew(o){return o?o.getBoundingClientRect():null}function lU(o=!1){const{body:u,documentElement:d}=document;if(!u||!d)return 0;if(o){const p=[u.scrollHeight,u.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight].sort((S,C)=>S-C),w=Math.floor(p.length/2);return p.length%2===0?(p[w-1]+p[w])/2:p[w]}return Math.max(u.scrollHeight,u.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight)}function Mu(o){if(!o)return null;if(typeof o=="string")try{return document.querySelector(o)}catch{return null}return o}function cU(o){return!o||o.nodeType!==1?null:getComputedStyle(o)}function Gp(o,u,d){if(!o)return Oh();const p=cw(o);if(p){if(p.isSameNode(Oh()))return d?document:Oh();if(!(p.scrollHeight>p.offsetHeight)&&!u)return p.style.overflow="initial",Oh()}return p}function ey(o,u){if(!o)return!1;const d=Gp(o,u);return d?!d.isSameNode(Oh()):!1}function uU(o){return o.offsetParent!==document.body}function hd(o,u="fixed"){if(!o||!(o instanceof HTMLElement))return!1;const{nodeName:d}=o,p=cU(o);return d==="BODY"||d==="HTML"?!1:p&&p.position===u?!0:o.parentNode?hd(o.parentNode,u):!1}function hU(o){var u;if(!o)return!1;let d=o;for(;d&&d!==document.body;){if(d instanceof HTMLElement){const{display:p,visibility:w}=getComputedStyle(d);if(p==="none"||w==="hidden")return!1}d=(u=d.parentElement)!=null?u:null}return!0}function fU(o,u,d){var p,w,S;const C=Ew(o),A=Gp(o,d),D=ey(o,d),R=hd(o);let k=0,q=(p=C==null?void 0:C.top)!=null?p:0;if(D&&R){const X=(w=o==null?void 0:o.offsetTop)!=null?w:0,W=(S=A==null?void 0:A.scrollTop)!=null?S:0;q=X-W}else A instanceof HTMLElement&&(k=A.scrollTop,!D&&!hd(o)&&(q+=k),A.isSameNode(Oh())||(q+=Oh().scrollTop));return Math.floor(q-u)}function dU(o,u,d){var p;if(!o)return 0;const{offsetTop:w=0,scrollTop:S=0}=(p=cw(o))!=null?p:{};let C=o.getBoundingClientRect().top+S;w&&(ey(o,d)||uU(o))&&(C-=w);const A=Math.floor(C-u);return A<0?0:A}function Oh(){var o;return(o=document.scrollingElement)!=null?o:document.documentElement}function pU(o,u){const{duration:d,element:p}=u;return new Promise((w,S)=>{const{scrollTop:C}=p,A=o>C?o-C:C-o;nS.top(p,o,{duration:A<100?50:d},D=>D&&D.message!=="Element already at target scroll position"?S(D):w())})}var gn={INIT:"init",START:"start",STOP:"stop",RESET:"reset",PREV:"prev",NEXT:"next",GO:"go",CLOSE:"close",SKIP:"skip",UPDATE:"update"},yc={TOUR_START:"tour:start",STEP_BEFORE:"step:before",BEACON:"beacon",TOOLTIP:"tooltip",STEP_AFTER:"step:after",TOUR_END:"tour:end",TOUR_STATUS:"tour:status",TARGET_NOT_FOUND:"error:target_not_found"},gr={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},Ir={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished"},Tw="react-joyride-portal";function gU(o){const u={};for(const d in o)o[d]!==void 0&&(u[d]=o[d]);return u}function Sw(o=navigator.userAgent){let u=o;return typeof window>"u"?u="node":document.documentMode?u="ie":/Edge/.test(o)?u="edge":window.opera||o.includes(" OPR/")?u="opera":typeof window.InstallTrigger<"u"?u="firefox":window.chrome?u="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(o)&&(u="safari"),u}function Bm(o){return Object.prototype.toString.call(o).slice(8,-1).toLowerCase()}function fl(o,u={}){const{defaultValue:d,step:p,steps:w}=u;let S=dv(o);if(S)(S.includes("{step}")||S.includes("{steps}"))&&p&&w&&(S=S.replace("{step}",p.toString()).replace("{steps}",w.toString()));else if(be.isValidElement(o)&&!Object.values(o.props).length&&Bm(o.type)==="function"){const C=o.type({});S=fl(C,u)}else S=dv(d);return S}function mU(o){const u=/^#?([\da-f])([\da-f])([\da-f])$/i,d=o.replace(u,(w,S,C,A)=>S+S+C+C+A+A),p=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(d);return p?[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]:[]}function yU(o,u,d){const{action:p}=u,w=d&&[gn.PREV,gn.NEXT].includes(p);return o.disableBeacon||o.placement==="center"||w}function Pv(){return!["chrome","safari","firefox","opera"].includes(Sw())}function jh({data:o,debug:u=!1,title:d,warn:p=!1}){var w;const S=p?(w=console.warn)!=null?w:console.error:console.log;u&&(d&&o?(console.groupCollapsed(`%creact-joyride: ${d}`,"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(o)?o.forEach(C=>{Kt.plainObject(C)&&C.key?S.apply(console,[C.key,C.value]):S.apply(console,[C])}):S.apply(console,[o]),console.groupEnd()):console.error("Missing title or data props"))}function _U(o,u){const d=gU(u);return{...o,...d}}function vU(o,...u){if(!Kt.plainObject(o))throw new TypeError("Expected an object");const d={};for(const p in o)({}).hasOwnProperty.call(o,p)&&(u.includes(p)||(d[p]=o[p]));return d}function xU(o,...u){if(!Kt.plainObject(o))throw new TypeError("Expected an object");if(!u.length)return o;const d={};for(const p in o)({}).hasOwnProperty.call(o,p)&&u.includes(p)&&(d[p]=o[p]);return d}function m_(o,u,d){const p=S=>S.replace("{step}",String(u)).replace("{steps}",String(d));if(Bm(o)==="string")return p(o);if(!be.isValidElement(o))return o;const{children:w}=o.props;if(Bm(w)==="string"&&w.includes("{step}"))return be.cloneElement(o,{children:p(w)});if(Array.isArray(w))return be.cloneElement(o,{children:w.map(S=>typeof S=="string"?p(S):m_(S,u,d))});if(Bm(o.type)==="function"&&!Object.values(o.props).length){const S=o.type({});return m_(S,u,d)}return o}function wU(o){const{isFirstStep:u,lifecycle:d,previousLifecycle:p,scrollToFirstStep:w,step:S,target:C}=o;return!S.disableScrolling&&(!u||w||d===gr.TOOLTIP)&&S.placement!=="center"&&(!S.isFixed||!hd(C))&&p!==d&&[gr.BEACON,gr.TOOLTIP].includes(d)}var bU={modifiers:{preventOverflow:{options:{rootBoundary:"viewport"}}},wrapperOptions:{offset:-18,position:!0}},Fw={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},BU={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:Fw,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},CU={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},EU={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},Bp={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},Rv={borderRadius:4,position:"absolute"};function TU(o,u){var d,p,w,S,C;const{floaterProps:A,styles:D}=o,R=Uu((d=u.floaterProps)!=null?d:{},A??{}),k=Uu(D??{},(p=u.styles)!=null?p:{}),q=Uu(EU,k.options||{}),X=u.placement==="center"||u.disableBeacon;let{width:W}=q;window.innerWidth>480&&(W=380),"width"in q&&(W=typeof q.width=="number"&&window.innerWidth<q.width?window.innerWidth-30:q.width);const ne={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:q.zIndex},ye={beacon:{...Bp,display:X?"none":"inline-block",height:q.beaconSize,position:"relative",width:q.beaconSize,zIndex:q.zIndex},beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:q.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:`rgba(${mU(q.primaryColor).join(",")}, 0.2)`,border:`2px solid ${q.primaryColor}`,borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:q.backgroundColor,borderRadius:5,boxSizing:"border-box",color:q.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:W},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:{...Bp,backgroundColor:q.primaryColor,borderRadius:4,color:"#fff"},buttonBack:{...Bp,color:q.primaryColor,marginLeft:"auto",marginRight:5},buttonClose:{...Bp,color:q.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14},buttonSkip:{...Bp,color:q.textColor,fontSize:14},overlay:{...ne,backgroundColor:q.overlayColor,mixBlendMode:"hard-light"},overlayLegacy:{...ne},overlayLegacyCenter:{...ne,backgroundColor:q.overlayColor},spotlight:{...Rv,backgroundColor:"gray"},spotlightLegacy:{...Rv,boxShadow:`0 0 0 9999px ${q.overlayColor}, ${q.spotlightShadow}`},floaterStyles:{arrow:{color:(C=(S=(w=R==null?void 0:R.styles)==null?void 0:w.arrow)==null?void 0:S.color)!=null?C:q.arrowColor},options:{zIndex:q.zIndex+100}},options:q};return Uu(ye,k)}function SU(o){return xU(o,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function Om(o,u){var d,p,w,S,C,A;if(!u)return null;const D=u??{},R=Uu.all([BU,SU(o),D],{isMergeableObject:Kt.plainObject}),k=TU(o,R),q=ey(Mu(R.target),R.disableScrollParentFix),X=Uu.all([bU,(d=o.floaterProps)!=null?d:{},(p=R.floaterProps)!=null?p:{}]);return X.offset=R.offset,X.styles=Uu((w=X.styles)!=null?w:{},k.floaterStyles),X.offset+=(C=(S=o.spotlightPadding)!=null?S:R.spotlightPadding)!=null?C:0,R.placementBeacon&&X.wrapperOptions&&(X.wrapperOptions.placement=R.placementBeacon),q&&X.modifiers.preventOverflow&&(X.modifiers.preventOverflow.options={...X.modifiers.preventOverflow.options,rootBoundary:"viewport",boundary:"clippingParents"}),{...R,locale:Uu.all([Fw,(A=o.locale)!=null?A:{},R.locale||{}]),floaterProps:X,styles:vU(k,"floaterStyles")}}function Uw(o,u=!1){return Kt.plainObject(o)?o.target?!0:(jh({title:"validateStep",data:"target is missing from the step",warn:!0,debug:u}),!1):(jh({title:"validateStep",data:"step must be an object",warn:!0,debug:u}),!1)}function Ov(o,u=!1){return Kt.array(o)?o.every(d=>Uw(d,u)):(jh({title:"validateSteps",data:"steps must be an array",warn:!0,debug:u}),!1)}var FU={action:"init",controlled:!1,index:0,lifecycle:gr.INIT,origin:null,size:0,status:Ir.IDLE},UU=class{constructor(o){Jr(this,"beaconPopper"),Jr(this,"tooltipPopper"),Jr(this,"data",new Map),Jr(this,"listener"),Jr(this,"props"),Jr(this,"store",new Map),Jr(this,"updateState",(w,S=!1)=>{this.setState({...this.getState(),...this.prepareState(w,S)})}),Jr(this,"cleanupPoppers",()=>{this.beaconPopper=null,this.tooltipPopper=null}),Jr(this,"getPopper",w=>w==="beacon"?this.beaconPopper:this.tooltipPopper),Jr(this,"setPopper",(w,S)=>{var C,A;S==="wrapper"?this.beaconPopper=w:this.tooltipPopper=w,w&&this.store.get("lifecycle")===gr.COMPLETE&&this.updateState({action:gn.UPDATE,lifecycle:gr.INIT});const D=(A=(C=this.getStep())==null?void 0:C.floaterProps)==null?void 0:A.getPopper;D&&D(w,S)}),Jr(this,"addListener",w=>{this.listener=w}),Jr(this,"setSteps",w=>{const{size:S,status:C}=this.getState(),A={size:w.length,status:C};this.data.set("steps",w),C===Ir.WAITING&&!S&&w.length&&(A.status=Ir.RUNNING),this.updateState(A)}),Jr(this,"close",(w=null)=>{const{index:S,status:C}=this.getState();C===Ir.RUNNING&&this.updateState({action:gn.CLOSE,index:S+1,origin:w,lifecycle:gr.COMPLETE})}),Jr(this,"go",w=>{const{controlled:S,status:C}=this.getState();if(S||C!==Ir.RUNNING)return;const A=this.getStep(w);this.updateState({action:gn.GO,index:w,lifecycle:gr.COMPLETE,status:A?C:Ir.FINISHED})}),Jr(this,"info",()=>this.getState()),Jr(this,"next",()=>{const{index:w,status:S}=this.getState();S===Ir.RUNNING&&this.updateState({action:gn.NEXT,index:this.getUpdatedIndex(w+1),lifecycle:gr.COMPLETE})}),Jr(this,"open",()=>{const{status:w}=this.getState();w===Ir.RUNNING&&this.updateState({action:gn.UPDATE,lifecycle:gr.TOOLTIP})}),Jr(this,"prev",()=>{const{index:w,status:S}=this.getState();S===Ir.RUNNING&&this.updateState({action:gn.PREV,index:this.getUpdatedIndex(w-1),lifecycle:gr.COMPLETE})}),Jr(this,"reset",(w=!1)=>{const{controlled:S}=this.getState();S||this.updateState({action:gn.RESET,index:0,lifecycle:gr.COMPLETE,status:w?Ir.RUNNING:Ir.READY})}),Jr(this,"skip",()=>{const{status:w}=this.getState();w===Ir.RUNNING&&this.updateState({action:gn.SKIP,lifecycle:gr.COMPLETE,status:Ir.SKIPPED})}),Jr(this,"start",w=>{const{index:S,size:C}=this.getState();this.updateState({action:gn.START,index:Kt.number(w)?w:S,status:C?Ir.RUNNING:Ir.WAITING},!0)}),Jr(this,"stop",(w=!1)=>{const{index:S,status:C}=this.getState();[Ir.FINISHED,Ir.SKIPPED].includes(C)||this.updateState({action:gn.STOP,index:S+(w?1:0),lifecycle:gr.COMPLETE,status:Ir.PAUSED})});const{continuous:u=!1,stepIndex:d,steps:p=[]}=o??{};this.setState({action:gn.INIT,controlled:Kt.number(d),continuous:u,index:Kt.number(d)?d:0,lifecycle:gr.INIT,origin:null,status:p.length?Ir.READY:Ir.IDLE},!0),this.setSteps(p),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.props=o??{steps:[]}}getStep(o){const u=this.data.get("steps"),{index:d}=this.getState();return Om(this.props,u[o??d])}getUpdatedIndex(o){const{size:u}=this.getState();return Math.min(Math.max(o,0),u)}hasUpdatedState(o){return!ca(o,this.getState())}prepareState(o,u=!1){var d,p,w,S,C,A;const{action:D,controlled:R,index:k,size:q,status:X}=this.getState(),W=(d=o.index)!=null?d:k;return{action:(p=o.action)!=null?p:D,controlled:R,index:R&&!u?k:W,lifecycle:(w=o.lifecycle)!=null?w:gr.INIT,origin:(S=o.origin)!=null?S:null,size:(C=o.size)!=null?C:q,status:(A=o.status)!=null?A:X}}setState(o,u=!1){const d=this.getState(),{action:p,index:w,lifecycle:S,origin:C=null,size:A,status:D}={...d,...o};this.store.set("action",p),this.store.set("index",w),this.store.set("lifecycle",S),this.store.set("origin",C),this.store.set("size",A),this.store.set("status",D),u&&(this.store.set("controlled",o.controlled),this.store.set("continuous",o.continuous)),this.listener&&this.hasUpdatedState(d)&&this.listener(this.getState())}getState(){var o;return(o=this==null?void 0:this.store)!=null&&o.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:{...FU}}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};function MU(o){return new UU(o)}function IU(o){const{callback:u,continuous:d,debug:p,disableScrollParentFix:w,getHelpers:S,run:C,scrollDuration:A,scrollOffset:D,scrollToFirstStep:R,stepIndex:k,steps:q}=o,X=be.useRef(MU(o)),[W,ne]=M_(X.current.getState()),{action:ye,controlled:Se,index:le,lifecycle:ve,size:De,status:Re}=W,Me=be.useRef(null),Ne=cv(o),st=cv(W),{changed:mt}=od(o),{changed:ot,changedFrom:Qt}=od(W),He=be.useMemo(()=>Om(o,q[le]),[le,o,q]),Zt=be.useMemo(()=>Om(o,q[le-1]),[le,o,q]);I_(()=>{X.current.addListener(Vt=>{ne(Vt)})});const Ut=be.useCallback(Vt=>{var Wt,Te,ut,Ct,Rt,he;if(!He)return;const nt=Mu(He.target),yt=wU({isFirstStep:le===0,lifecycle:ve,previousLifecycle:Vt.lifecycle,scrollToFirstStep:R,step:He,target:nt}),_t=X.current.getPopper("beacon"),xt=X.current.getPopper("tooltip");if(Re===Ir.RUNNING&&yt){const Ft=ey(nt,w),Pt=Gp(nt,w);let ur=Math.floor(dU(nt,D,w))||0;if(jh({title:"scrollToStep",data:[{key:"index",value:le},{key:"lifecycle",value:ve},{key:"status",value:Re}],debug:p}),ve===gr.BEACON&&_t){const{modifiersData:ir,placement:yr}=(Wt=_t.state)!=null?Wt:{},{offset:nn}=ir??{},Rr=(ut=(Te=nn==null?void 0:nn.top)==null?void 0:Te.y)!=null?ut:0;!["bottom"].includes(yr)&&!Ft&&(ur=Math.floor(Rr-D))}else if(ve===gr.TOOLTIP&&xt){const{modifiersData:ir,placement:yr}=(Ct=xt.state)!=null?Ct:{},{offset:nn}=ir??{},Rr=(he=(Rt=nn==null?void 0:nn.top)==null?void 0:Rt.y)!=null?he:0,Ye=!!yr&&yr!==He.placement;["top","right","left"].includes(yr)&&!Ye&&!Ft?ur=Math.floor(Rr-D):ur-=He.spotlightPadding}ur=ur>=0?ur:0,Re===Ir.RUNNING&&pU(ur,{element:Pt,duration:A}).then(()=>{setTimeout(()=>{var ir;(ir=X.current.getPopper("tooltip"))==null||ir.update()},10)})}},[p,w,le,ve,A,D,R,Re,He]);return Wp(()=>{C&&De&&Ov(q,p)&&X.current.start(),S&&S(X.current.getHelpers())}),eS(()=>{C&&De&&Re===Ir.IDLE&&X.current.updateState({status:Ir.READY}),S&&S(X.current.getHelpers())},[S,C,De,Re]),YT(()=>{var Vt,Wt,Te,ut;if(!Ne||!st)return;(ot("action",[gn.NEXT,gn.PREV,gn.SKIP,gn.CLOSE])||Me.current===gn.CLOSE&&ye===gn.START)&&(Me.current=ye),Re===Ir.RUNNING&&He&&ve===gr.INIT&&X.current.updateState({action:(Vt=Me.current)!=null?Vt:gn.UPDATE,lifecycle:gr.READY}),De&&!He&&ve===gr.INIT&&X.current.updateState({action:gn.UPDATE,lifecycle:gr.COMPLETE,status:Ir.FINISHED}),Re===Ir.RUNNING&&(He==null?void 0:He.placement)==="center"&&ot("lifecycle",gr.COMPLETE)&&X.current.updateState({action:gn.UPDATE,lifecycle:gr.INIT});const Rt=Mu(He==null?void 0:He.target),he=!!Rt;He&&he&&hU(Rt)?Qt("lifecycle",gr.INIT,gr.READY)&&(u==null||u({...W,action:(Wt=Me.current)!=null?Wt:ye,step:He,type:yc.STEP_BEFORE})):He&&Re===Ir.RUNNING&&(console.warn(he?"Target not visible":"Target not mounted",He),u==null||u({...W,type:yc.TARGET_NOT_FOUND,step:He}),Se||X.current.updateState({action:gn.UPDATE,index:le+(ye===gn.PREV?-1:1)})),He&&ot("lifecycle",gr.READY)&&X.current.updateState({action:gn.UPDATE,lifecycle:yU(He,W,d)?gr.TOOLTIP:gr.BEACON}),He&&ot("lifecycle",gr.BEACON)&&(u==null||u({...W,step:He,type:yc.BEACON})),He&&ot("lifecycle",gr.TOOLTIP)&&(u==null||u({...W,step:He,type:yc.TOOLTIP}));const nt=Re===Ir.RUNNING||Se&&Re===Ir.PAUSED&&!!He,yt=He??Zt;if(nt&&yt&&ot("lifecycle",gr.COMPLETE,gr.TOOLTIP)&&(he||!He)&&(u==null||u({...W,action:(Te=Me.current)!=null?Te:gn.UPDATE,index:(ut=st.index)!=null?ut:le,lifecycle:ve,step:yt,type:yc.STEP_AFTER})),Re===Ir.WAITING&&X.current.updateState({status:Ir.RUNNING}),mt()){const{stepIndex:xt,steps:Ft}=Ne;if(ca(Ft,q)||(Ov(q,p)?X.current.updateState({size:q.length}):console.warn("Steps are not valid",q)),mt("run"))C?X.current.getState().size&&X.current.start(k):X.current.stop();else if(Kt.number(k)&&mt("stepIndex")){const Pt=Kt.number(xt)&&xt<k?gn.NEXT:gn.PREV;[Ir.FINISHED,Ir.SKIPPED].includes(Re)||X.current.updateState({action:Pt,index:k},!0)}}ot("index")&&jh({title:`step:${ve}`,data:[{key:"props",value:o}],debug:p}),ot("lifecycle",gr.COMPLETE)&&le&&le>=De&&X.current.updateState({action:gn.UPDATE,lifecycle:gr.COMPLETE,status:Ir.FINISHED}),Zt&&ot("status",[Ir.FINISHED,Ir.SKIPPED])&&(u==null||u({...W,index:le-1,step:Zt,type:yc.TOUR_END}),X.current.reset()),He&&Qt("status",[Ir.IDLE,Ir.READY,Ir.PAUSED],Ir.RUNNING)&&(u==null||u({...W,step:He,type:yc.TOUR_START})),He&&ot("action",gn.STOP)&&(u==null||u({...W,step:He,type:yc.TOUR_STATUS})),He&&ot("action",gn.RESET)&&(u==null||u({...W,step:He,type:yc.TOUR_STATUS})),Ut(st)},[ye,u,mt,ot,Qt,d,Se,p,le,ve,Ne,st,Zt,o,C,Ut,De,W,Re,He,k,q]),X}function QU(o){const[{element:u,useExternalPortal:d},p]=M_({useExternalPortal:!1,element:null});return Wp(()=>{if(o)if(Kt.domElement(o))p({element:o,useExternalPortal:!0});else{const w=document.querySelector(o);w&&p({element:w})}if(!o){const w=document.createElement("div");w.id=Tw,document.body.appendChild(w),p({element:w})}}),Wm(()=>{!u||d||u.parentNode===document.body&&document.body.removeChild(u)}),u}function DU({styles:o}){return se.jsx("div",{className:"react-joyride__spotlight","data-test-id":"spotlight",style:o},"JoyrideSpotlight")}function LU(o){const{continuous:u,debug:d,disableOverlay:p,disableOverlayClose:w,disableScrolling:S,disableScrollParentFix:C=!1,lifecycle:A,onClickOverlay:D,placement:R,spotlightClicks:k,spotlightPadding:q=0,styles:X,target:W}=o,ne=$T(),{changed:ye}=od(o),Se=be.useRef(),le=be.useRef(),ve=be.useRef(null),[{isScrolling:De,mouseOverSpotlight:Re,showSpotlight:Me},Ne]=M_({isScrolling:!1,mouseOverSpotlight:!1,resizedAt:0,showSpotlight:!0}),st=be.useCallback(Te=>{ne&&Ne(Te)},[ne,Ne]),mt=be.useMemo(()=>{let Te=X.overlay;return Pv()&&(Te=R==="center"?X.overlayLegacyCenter:X.overlayLegacy),{cursor:w?"default":"pointer",height:lU(),pointerEvents:Re?"none":"auto",...Te}},[w,Re,R,X.overlay,X.overlayLegacy,X.overlayLegacyCenter]),ot=be.useMemo(()=>{var Te,ut,Ct;const Rt=Mu(W),he=Ew(Rt),nt=hd(Rt),yt=fU(Rt,q,C);return{height:Math.round(((Te=he==null?void 0:he.height)!=null?Te:0)+q*2),left:Math.round(((ut=he==null?void 0:he.left)!=null?ut:0)-q),opacity:Me?1:0,pointerEvents:k?"none":"auto",position:nt?"fixed":"absolute",top:yt,transition:"opacity 0.2s",width:Math.round(((Ct=he==null?void 0:he.width)!=null?Ct:0)+q*2),...Pv()?X.spotlightLegacy:X.spotlight}},[C,Me,k,q,X.spotlight,X.spotlightLegacy,W]),Qt=be.useCallback(Te=>{const{height:ut,left:Ct,position:Rt,top:he,width:nt}=ot,yt=Rt==="fixed"?Te.clientY:Te.pageY,_t=Rt==="fixed"?Te.clientX:Te.pageX,xt=yt>=he&&yt<=he+ut,Pt=_t>=Ct&&_t<=Ct+nt&&xt;Pt!==Re&&st({mouseOverSpotlight:Pt})},[ot,Re,st]),He=be.useCallback(()=>{clearTimeout(Se.current),Se.current=window.setTimeout(()=>{ne&&Ne({resizedAt:Date.now()})},100)},[ne,Ne]),Zt=be.useCallback(()=>{const Te=Mu(W);ve.current!==document?(De||st({isScrolling:!0,showSpotlight:!1}),clearTimeout(le.current),le.current=window.setTimeout(()=>{st({isScrolling:!1,showSpotlight:!0})},50)):hd(Te,"sticky")&&st({})},[De,W,st]);Wp(()=>{const Te=Mu(W);ve.current=Gp(Te??document.body,C,!0),window.addEventListener("resize",He)}),Wm(()=>{var Te;window.removeEventListener("mousemove",Qt),window.removeEventListener("resize",He),clearTimeout(Se.current),clearTimeout(le.current),(Te=ve==null?void 0:ve.current)==null||Te.removeEventListener("scroll",Zt)}),be.useEffect(()=>{var Te;ye("lifecycle",gr.TOOLTIP)&&((Te=ve==null?void 0:ve.current)==null||Te.addEventListener("scroll",Zt,{passive:!0}),setTimeout(()=>{De||st({showSpotlight:!0})},100))},[ye,Zt,De,st]),be.useEffect(()=>{(ye("spotlightClicks")||ye("disableOverlay")||ye("lifecycle"))&&(k&&A===gr.TOOLTIP?window.addEventListener("mousemove",Qt,!1):A!==gr.TOOLTIP&&window.removeEventListener("mousemove",Qt))},[ye,Qt,A,k]),be.useEffect(()=>{if(ye("target")||ye("disableScrollParentFix")){const Te=Mu(W);ve.current=Gp(Te??document.body,C,!0)}},[ye,C,W]);const Ut=[gr.INIT,gr.BEACON,gr.COMPLETE,gr.ERROR];if(p||(u?Ut.includes(A):A!==gr.TOOLTIP))return null;let Vt=R!=="center"&&Me&&se.jsx(DU,{styles:ot});const Wt={...mt};if(Sw()==="safari"){const{mixBlendMode:Te,zIndex:ut,...Ct}=mt;Vt=se.jsx("div",{style:{...Ct},children:Vt}),delete Wt.backgroundColor}return se.jsx("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:D,role:"presentation",style:Wt,children:Vt})}function PU(o){const{children:u,element:d}=o;return d?ix.createPortal(u,d):null}var RU=class{constructor(o,u){if(Jr(this,"element"),Jr(this,"options"),Jr(this,"canBeTabbed",d=>{const{tabIndex:p}=d;return p===null||p<0?!1:this.canHaveFocus(d)}),Jr(this,"canHaveFocus",d=>{const p=/input|select|textarea|button|object/,w=d.nodeName.toLowerCase();return(p.test(w)&&!d.getAttribute("disabled")||w==="a"&&!!d.getAttribute("href"))&&this.isVisible(d)}),Jr(this,"findValidTabElements",()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed)),Jr(this,"handleKeyDown",d=>{const{code:p="Tab"}=this.options;d.code===p&&this.interceptTab(d)}),Jr(this,"interceptTab",d=>{d.preventDefault();const p=this.findValidTabElements(),{shiftKey:w}=d;if(!p.length)return;let S=document.activeElement?p.indexOf(document.activeElement):0;S===-1||!w&&S+1===p.length?S=0:w&&S===0?S=p.length-1:S+=w?-1:1,p[S].focus()}),Jr(this,"isHidden",d=>{const p=d.offsetWidth<=0&&d.offsetHeight<=0,w=window.getComputedStyle(d);return p&&!d.innerHTML?!0:p&&w.getPropertyValue("overflow")!=="visible"||w.getPropertyValue("display")==="none"}),Jr(this,"isVisible",d=>{let p=d;for(;p;)if(p instanceof HTMLElement){if(p===document.body)break;if(this.isHidden(p))return!1;p=p.parentNode}return!0}),Jr(this,"removeScope",()=>{window.removeEventListener("keydown",this.handleKeyDown)}),Jr(this,"checkFocus",d=>{document.activeElement!==d&&(d.focus(),window.requestAnimationFrame(()=>this.checkFocus(d)))}),Jr(this,"setFocus",()=>{const{selector:d}=this.options;if(!d)return;const p=this.element.querySelector(d);p&&window.requestAnimationFrame(()=>this.checkFocus(p))}),!(o instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=o,this.options=u,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}};function OU(o){const{beaconComponent:u,continuous:d,index:p,isLastStep:w,locale:S,onClickOrHover:C,shouldFocus:A,size:D,step:R,styles:k}=o,q=be.useRef(null);I_(()=>{if(u)return;const Se=document.head||document.getElementsByTagName("head")[0],le=document.createElement("style");le.id="joyride-beacon-animation",o.nonce&&le.setAttribute("nonce",o.nonce),le.appendChild(document.createTextNode(`
        @keyframes joyride-beacon-inner {
          20% {
            opacity: 0.9;
          }
        
          90% {
            opacity: 0.7;
          }
        }
        
        @keyframes joyride-beacon-outer {
          0% {
            transform: scale(1);
          }
        
          45% {
            opacity: 0.7;
            transform: scale(0.75);
          }
        
          100% {
            opacity: 0.9;
            transform: scale(1);
          }
        }
      `)),Se.appendChild(le)}),Wp(()=>{setTimeout(()=>{Kt.domElement(q.current)&&A&&q.current.focus()},0)}),Wm(()=>{const Se=document.getElementById("joyride-beacon-animation");Se!=null&&Se.parentNode&&Se.parentNode.removeChild(Se)});const X=Se=>{q.current=Se},W=fl(S.open),ne={"aria-label":W,onClick:C,onMouseEnter:C,ref:X,title:W};let ye;if(u){const Se=u;ye=se.jsx(Se,{continuous:d,index:p,isLastStep:w,size:D,step:R,...ne})}else ye=se.jsxs("button",{className:"react-joyride__beacon","data-test-id":"button-beacon",style:k.beacon,type:"button",...ne,children:[se.jsx("span",{style:k.beaconInner}),se.jsx("span",{style:k.beaconOuter})]},"JoyrideBeacon");return ye}function zU({styles:o,...u}){const{color:d,height:p,width:w,...S}=o;return se.jsx("button",{style:S,type:"button",...u,children:se.jsx("svg",{height:typeof p=="number"?`${p}px`:p,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:typeof w=="number"?`${w}px`:w,xmlns:"http://www.w3.org/2000/svg",children:se.jsx("g",{children:se.jsx("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:d})})})})}function kU(o){const{backProps:u,closeProps:d,index:p,isLastStep:w,primaryProps:S,skipProps:C,step:A,tooltipProps:D}=o,{content:R,hideBackButton:k,hideCloseButton:q,hideFooter:X,showSkipButton:W,styles:ne,title:ye}=A,Se={};return Se.primary=se.jsx("button",{"data-test-id":"button-primary",style:ne.buttonNext,type:"button",...S}),W&&!w&&(Se.skip=se.jsx("button",{"aria-live":"off","data-test-id":"button-skip",style:ne.buttonSkip,type:"button",...C})),!k&&p>0&&(Se.back=se.jsx("button",{"data-test-id":"button-back",style:ne.buttonBack,type:"button",...u})),Se.close=!q&&se.jsx(zU,{"data-test-id":"button-close",styles:ne.buttonClose,...d}),se.jsxs("div",{"aria-label":fl(ye??R),className:"react-joyride__tooltip",style:ne.tooltip,...D,children:[se.jsxs("div",{style:ne.tooltipContainer,children:[ye&&se.jsx("h1",{"aria-label":fl(ye),style:ne.tooltipTitle,children:ye}),se.jsx("div",{style:ne.tooltipContent,children:R})]}),!X&&se.jsxs("div",{style:ne.tooltipFooter,children:[se.jsx("div",{style:ne.tooltipFooterSpacer,children:Se.skip}),Se.back,Se.primary]}),Se.close]},"JoyrideTooltip")}function HU(o){const{continuous:u,helpers:d,index:p,isLastStep:w,setTooltipRef:S,size:C,step:A}=o,D=le=>{le.preventDefault(),d.prev()},R=le=>{le.preventDefault(),d.close("button_close")},k=le=>{if(le.preventDefault(),!u){d.close("button_primary");return}d.next()},q=le=>{le.preventDefault(),d.skip()},X=()=>{const{back:le,close:ve,last:De,next:Re,nextLabelWithProgress:Me,skip:Ne}=A.locale,st=fl(le),mt=fl(ve),ot=fl(De),Qt=fl(Re),He=fl(Ne);let Zt=ve,Ut=mt;if(u){if(Zt=Re,Ut=Qt,A.showProgress&&!w){const Vt=fl(Me,{step:p+1,steps:C});Zt=m_(Me,p+1,C),Ut=Vt}w&&(Zt=De,Ut=ot)}return{backProps:{"aria-label":st,children:le,"data-action":"back",onClick:D,role:"button",title:st},closeProps:{"aria-label":mt,children:ve,"data-action":"close",onClick:R,role:"button",title:mt},primaryProps:{"aria-label":Ut,children:Zt,"data-action":"primary",onClick:k,role:"button",title:Ut},skipProps:{"aria-label":He,children:Ne,"data-action":"skip",onClick:q,role:"button",title:He},tooltipProps:{"aria-modal":!0,ref:S,role:"alertdialog"}}},{beaconComponent:W,tooltipComponent:ne,...ye}=A;let Se;if(ne){const le={...X(),continuous:u,index:p,isLastStep:w,size:C,step:ye,setTooltipRef:S},ve=ne;Se=se.jsx(ve,{...le})}else Se=se.jsx(kU,{...X(),continuous:u,index:p,isLastStep:w,size:C,step:A});return Se}function NU(o){const{cleanupPoppers:u,continuous:d,debug:p,helpers:w,index:S,lifecycle:C,nonce:A,setPopper:D,shouldScroll:R,size:k,step:q,updateState:X}=o,W=be.useRef(null),ne=be.useRef(null),{changed:ye,changedFrom:Se}=od(o);Wp(()=>{jh({title:`step:${S}`,data:[{key:"props",value:o}],debug:p})}),Wm(()=>{var Me;(Me=W.current)==null||Me.removeScope()}),be.useEffect(()=>{var Me;ye("lifecycle",gr.TOOLTIP)&&R&&ne.current&&(W.current=new RU(ne.current,{selector:"[data-action=primary]"}),W.current.setFocus()),Se("lifecycle",[gr.TOOLTIP,gr.INIT],gr.INIT)&&((Me=W.current)==null||Me.removeScope(),u())},[ye,Se,u,R]);const le=Me=>{Me.type==="mouseenter"&&q.event!=="hover"||X({lifecycle:gr.TOOLTIP})},ve=Me=>{ne.current=Me},De=Mu(q.target);if(!Uw(q)||!Kt.domElement(De))return null;const Re=Me=>se.jsx(HU,{continuous:d,helpers:w,index:S,isLastStep:S+1===k,setTooltipRef:ve,size:k,step:q,...Me});return se.jsx("div",{className:"react-joyride__step",children:se.jsx(aU,{...q.floaterProps,component:Re,debug:p,getPopper:D,id:`react-joyride-step-${S}`,open:C===gr.TOOLTIP,placement:q.placement,portalElement:`#${Tw}`,target:q.target,children:se.jsx(OU,{beaconComponent:q.beaconComponent,continuous:d,index:S,isLastStep:S+1===k,locale:q.locale,nonce:A,onClickOrHover:le,shouldFocus:R,size:k,step:q,styles:q.styles})},`JoyrideStep-${S}`)})}function jU(o){const u=_U(CU,o),{continuous:d,debug:p,disableCloseOnEsc:w,nonce:S,portalElement:C,scrollToFirstStep:A,steps:D}=u,R=IU(u),k=QU(C);I_(()=>{jh({title:"init",data:[{key:"props",value:o},{key:"state",value:R.current.getState()}],debug:p})}),be.useEffect(()=>{const ve=De=>{const{index:Re,lifecycle:Me}=R.current.getState(),Ne=D[Re];Me===gr.TOOLTIP&&De.code==="Escape"&&!Ne.disableCloseOnEsc&&R.current.close("keyboard")};return w||document.body.addEventListener("keydown",ve,{passive:!0}),()=>{w||document.body.removeEventListener("keydown",ve)}},[w,D,R]);const{index:q,lifecycle:X,status:W}=R.current.getState(),ne=W===Ir.RUNNING,ye={},Se=be.useMemo(()=>Om(o,D[q]),[q,o,D]),le=()=>{Se!=null&&Se.disableOverlayClose||R.current.close("overlay")};return Se?(ne&&(ye.step=se.jsx(NU,{...R.current.getState(),cleanupPoppers:R.current.cleanupPoppers,continuous:d,debug:p,helpers:R.current.getHelpers(),nonce:S,setPopper:R.current.setPopper,shouldScroll:!Se.disableScrolling&&(q!==0||A),step:Se,updateState:R.current.updateState}),ye.overlay=se.jsx(PU,{element:k,children:se.jsx(LU,{...Se,continuous:d,debug:p,lifecycle:X,onClickOverlay:le})})),se.jsxs("div",{className:"react-joyride",children:[ye.step,ye.overlay]})):null}function VU(o){return AU()?se.jsx(jU,{...o}):null}function GU(){var ir,yr,nn,Rr;const o=be.useRef(null),u=be.useRef(null),[d,p]=be.useState("All"),[w,S]=be.useState("any"),[C,A]=be.useState("Auto"),[D,R]=be.useState(null),[k,q]=be.useState(""),[X,W]=be.useState(()=>localStorage.getItem("sodrepo_layersToRemove")?JSON.parse(localStorage.getItem("sodrepo_layersToRemove")):[{id:"waterway",description:"All waterways",checked:!0},{id:"waterway_label",description:"Named rivers",checked:!0},{id:"tunnel_path",description:"Streams in tunnels",checked:!0},{id:"aeroway-runway",description:"Airport runways",checked:!0},{id:"building",description:"Buildings",checked:!1},{id:"landcover",description:"Natural areas",checked:!1},{id:"boundary_state",description:"State borders",checked:!1},{id:"boundary_county",description:"County borders",checked:!1},{id:"place_city_r5",description:"Cities",checked:!1},{id:"roadname_major",description:"Major road labels",checked:!1}]),[ne,ye]=be.useState([]),[Se,le]=be.useState(!1),ve=4,[De,Re]=be.useState(!1),[Me,Ne]=be.useState(null),[st,mt]=be.useState(!0),[ot,Qt]=be.useState(!1),[He,Zt]=be.useState(()=>localStorage.getItem("sodrepo_darkMode")==="true"),[Ut,Vt]=be.useState(()=>localStorage.getItem("sodrepo_clickMode")==="true"),[Wt,Te]=be.useState(()=>localStorage.getItem("sodrepo_arrowMode")==="true"),[ut,Ct]=be.useState(()=>localStorage.getItem("sodrepo_joyride")!=="done"),[Rt]=be.useState([{target:"#mapContainer",content:"This is the map area. Zoom and pan to explore open data regions.",placement:"center"},{target:"#portalType",content:"Here you can filter by portal type like Gov, Geo, or Open."},{target:"#feature",content:"Use this to check for available like SPARQL or MQA support."},{target:"#admLevel",content:"Control the administrative level displayed on the map."},{target:"#matchedPortals",content:"This is the list of matched portals based on your search criteria."},{target:"#mapContainer .maplibregl-ctrl-top-left",content:"Use the navigation controls to zoom or rotate the map."},{target:"#search",content:"Search for portals by name or region."},{target:"#mapLayers",content:"Toggle the layers you want to show or hide."},{target:"#statistics",content:"Statistic Overview for an summary of the current active Open Data Portals."},{target:"#download",content:"Download the JSON dataset, active filter CSV or current map view as an image."},{target:"#options",content:"Click here to toggle  Click or Hover mode, dark mode or show and hide federal state relations."},{target:"#portalDetails",content:"After you clicked an area on the map, you see more details about the selected portal(s)."},{target:"#mapContainer",content:"Lets get started!",placement:"center"}]),he=qf.openDataPortals.filter(Ye=>{var Lt,bt,xr,Xr,Ar,jr,Rn,vr;return(d==="All"||Ye.portalType===d)&&(w==="any"||w==="mqa"&&((Lt=Ye.mqa)==null?void 0:Lt.available)===!0||w==="sparql"&&((bt=Ye.sparql)==null?void 0:bt.available)===!0)&&(!k||((xr=Ye.name)==null?void 0:xr.toLowerCase().includes(k.toLowerCase()))||((Xr=Ye.nameEn)==null?void 0:Xr.toLowerCase().includes(k.toLowerCase()))||((Ar=Ye.inCountryEn)==null?void 0:Ar.toLowerCase().includes(k.toLowerCase()))||((jr=Ye.inFederalState)==null?void 0:jr.toLowerCase().includes(k.toLowerCase()))||((Rn=Ye.inDistrict)==null?void 0:Rn.toLowerCase().includes(k.toLowerCase()))||((vr=Ye.inCity)==null?void 0:vr.toLowerCase().includes(k.toLowerCase())))}),nt=qf.openDataPortals.length-he.length,yt=Array.from(new Set(he.map(Ye=>Ye.inCountryEn).filter(Boolean))),_t=yt.length===1?yt[0]:"multiple countries",xt=he.reduce((Ye,Lt)=>{var Xr,Ar;const bt=Lt.geoBoundariesType||"Unknown";Ye.levels[bt]=(Ye.levels[bt]||0)+1;const xr=Lt.portalType||"Unknown";return Ye.types[xr]=(Ye.types[xr]||0)+1,(Xr=Lt.sparql)!=null&&Xr.available&&Ye.sparql++,(Ar=Lt.mqa)!=null&&Ar.available&&Ye.mqa++,Ye},{levels:{},types:{},sparql:0,mqa:0});be.useEffect(()=>{const Ye=setTimeout(()=>{Qt(!0),setTimeout(()=>mt(!1),2e3)},4e3);return()=>clearTimeout(Ye)},[]),be.useEffect(()=>{localStorage.getItem("sodrepo_joyride")!=="done"&&setTimeout(()=>Ct(!0),500)},[]),be.useEffect(()=>{localStorage.setItem("sodrepo_darkMode",He),localStorage.setItem("sodrepo_clickMode",Ut),localStorage.setItem("sodrepo_arrowMode",Wt),localStorage.setItem("sodrepo_layersToRemove",JSON.stringify(X)),u.current=new J_.Map({container:o.current,style:He?"/carto-dark.json":"/carto-light.json",center:[10.45,51.2],zoom:5.5,attributionControl:!1}),u.current.once("styledata",()=>{const Ye=u.current;X.forEach(Lt=>{Ye.getLayer(Lt.id)&&Lt.checked&&(console.log(Lt.id),Ye.removeLayer(Lt.id))})}),u.current.on("load",async()=>{const Ye={};try{for(const bt of r0){const xr=await fetch(`/geo/${bt.toLowerCase()}.json`);if(!xr.ok)throw new Error(`GeoJSON ${bt} not found`);const Xr=await xr.json();Ye[bt]=Xr.features;const Ar=`gb-${bt}`,jr=`${Ar}-fill`,Rn=`${Ar}-outline`;u.current.getSource(Ar)||u.current.addSource(Ar,{type:"geojson",data:Xr}),u.current.getLayer(jr)||u.current.addLayer({id:jr,type:"fill",source:Ar,paint:{"fill-color":["case",["in",["get","shapeName"],["literal",qf.openDataPortals.filter(vr=>{var Gr,cn;return vr.geoBoundariesType===bt&&(d==="All"||vr.portalType===d)&&(w==="any"||w==="mqa"&&((Gr=vr.mqa)==null?void 0:Gr.available)===!0||w==="sparql"&&((cn=vr.sparql)==null?void 0:cn.available)===!0)}).flatMap(vr=>[vr.inCountryEn,vr.inFederalState,vr.inDistrict,vr.inCity].filter(Boolean))]],"#005599","#011e3b"],"fill-opacity":.5},minzoom:C==="Auto"?zg[bt][0]:0,maxzoom:C==="Auto"?zg[bt][1]:24,layout:C==="Auto"?{}:{visibility:C===bt?"visible":"none"}}),u.current.getLayer(Rn)||u.current.addLayer({id:Rn,type:"line",source:Ar,paint:{"line-color":"#003366","line-width":1},minzoom:C==="Auto"?zg[bt][0]:0,maxzoom:C==="Auto"?zg[bt][1]:24,layout:C==="Auto"?{}:{visibility:C===bt?"visible":"none"}}),Ut?(u.current.on("mouseenter",`gb-${bt}-fill`,vr=>{const Gr=vr.features[0].properties,cn=or=>or==null?void 0:or.replace(/,.*$/,"").trim(),en=cn(Gr.shapeName),fr=qf.openDataPortals.filter(or=>or.geoBoundariesType===bt&&(cn(or.inFederalState)===en||cn(or.inDistrict)===en||cn(or.inCity)===en||cn(or.inCountryEn)===en)&&(d==="All"||or.portalType===d));fr.length>0&&Ne(fr)}),u.current.on("mouseleave",`gb-${bt}-fill`,()=>{u.current.getCanvas().style.cursor="",setTimeout(()=>{Ne(null)},15)})):u.current.on("click",`gb-${bt}-fill`,vr=>{const Gr=vr.features[0].properties,cn=or=>or==null?void 0:or.replace(/,.*$/,"").trim(),en=cn(Gr.shapeName),fr=qf.openDataPortals.filter(or=>or.geoBoundariesType===bt&&(cn(or.inFederalState)===en||cn(or.inDistrict)===en||cn(or.inCity)===en||cn(or.inCountryEn)===en)&&(d==="All"||or.portalType===d));fr.length>0&&Ne(fr)})}}catch{}u.current.addControl(new J_.NavigationControl,"top-left");const Lt=[];if(Wt)for(const bt of qw){const xr=(jr,Rn)=>{const vr=fr=>fr.replace(/,.*$/,"").trim(),Gr=vr(jr);let en=(Ye[Rn]||[]).find(fr=>vr(fr.properties.shapeName)===Gr);if(en)return en;for(const fr of Object.keys(Ye))if(en=Ye[fr].find(or=>vr(or.properties.shapeName)===Gr),en)return en;return null},Xr=xr(bt.from,bt.levelFrom),Ar=xr(bt.to,bt.levelTo);if(Xr&&Ar){const jr=t0(Xr).geometry.coordinates,Rn=t0(Ar).geometry.coordinates;Lt.push({type:"Feature",geometry:{type:"LineString",coordinates:[jr,Rn]},properties:{from:bt.from,to:bt.to,type:`${bt.levelFrom}${bt.levelTo}`,arrow:""}})}}u.current.getSource("hierarchy-arrows")||u.current.addSource("hierarchy-arrows",{type:"geojson",data:{type:"FeatureCollection",features:Lt}}),u.current.getLayer("hierarchy-arrows-layer")||(u.current.addLayer({id:"hierarchy-arrows-layer",type:"line",source:"hierarchy-arrows",paint:{"line-color":"#f5f1e6","line-width":2,"line-dasharray":[2,1]}}),u.current.addLayer({id:"hierarchy-arrows-symbols",type:"symbol",source:"hierarchy-arrows",layout:{"symbol-placement":"line","text-field":["get","arrow"],"text-size":32,"symbol-spacing":100,"text-rotation-alignment":"map","text-keep-upright":!1},paint:{"text-color":He?"#f5f1e6":"#003366"}},"hierarchy-arrows-layer"))})},[d,w,C,Ut,He,Wt,X]),be.useEffect(()=>{const Ye=Lt=>{Lt.key==="Escape"&&Re(!1)};return window.addEventListener("keydown",Ye),()=>window.removeEventListener("keydown",Ye)},[]),be.useEffect(()=>{if(!u.current)return;const Ye=u.current;X.forEach(({id:Lt,checked:bt})=>{Ye.getLayer(Lt)&&Ye.setLayoutProperty(Lt,"visibility",bt?"visible":"none")})},[X]);const Ft=()=>{const Ye=document.querySelector("#mapContainer"),bt=u.current.getCanvas().toDataURL("image/png"),xr=document.createElement("img");xr.src=bt,xr.style.position="absolute",xr.style.top="0",xr.style.left="0",xr.style.width="100%",xr.style.height="100%",xr.style.zIndex="9999",Ye.appendChild(xr),kT(Ye,{useCORS:!0,logging:!0}).then(Xr=>{const Ar=document.createElement("a");Ar.download="sodrepo-map.png",Ar.href=Xr.toDataURL("image/png"),Ar.click(),Ye.removeChild(xr)})},Pt=Ye=>{ye(Lt=>Lt.find(xr=>xr.url===Ye.url)?Lt.filter(xr=>xr.url!==Ye.url):Lt.length<ve?[...Lt,Ye]:Lt)},ur=Ye=>{W(Lt=>Lt.map(bt=>bt.id===Ye?{...bt,checked:!bt.checked}:bt))};return se.jsxs("div",{id:"mapContainer",children:[se.jsx(VU,{steps:Rt,run:ut,continuous:!0,showProgress:!0,disableScrolling:!0,callback:Ye=>{(Ye.status==="finished"||Ye.status==="skipped")&&(localStorage.setItem("sodrepo_joyride","done"),Ct(!1))},styles:{options:{zIndex:99999,primaryColor:"#003366",backgroundColor:He?"#003366":"#f5f1e6",textColor:He?"#f5f1e6":"#003366"}}}),st&&se.jsxs("div",{style:{position:"fixed",top:"25%",left:"20%",width:"60%",height:"60%",zIndex:3e3,backgroundColor:"#003366",color:"#fffbe6",textAlign:"center",padding:"4px 48px 16px 16px",fontSize:"3rem",fontWeight:"bold",boxShadow:"0 4px 6px rgba(0,0,0,0.2)",opacity:ot?0:1,transition:"opacity 2s ease",borderRadius:"150px",alignContent:"center",alignItems:"center"},children:["Welcome to SODREPO! ",se.jsx("br",{}),"Explore the map and click on any region to discover its associated Open Data Portal. For more information, check our  Guide at the top!",se.jsx("button",{onClick:()=>mt(!1),style:{position:"absolute",right:12,top:10,background:"none",border:"none",color:"#fff",fontSize:"1.2rem",cursor:"pointer"},"aria-label":"Close Banner",children:""})]}),se.jsxs("div",{style:{position:"absolute",top:"25%",left:60,zIndex:1e3,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",padding:"0 10px",borderRadius:"6px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",fontSize:28,minWidth:"15%",maxWidth:"15%",minHeight:"20%",maxHeight:"30vh",overflowY:"auto"},children:[se.jsx("div",{style:{fontWeight:"bold",position:"sticky",top:0,background:He?"#003366":"#f5f1e6",zIndex:10,padding:"4px 0"},children:se.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[se.jsx("label",{id:"search",style:{fontSize:"1.4rem",fontWeight:"bold",flex:1},children:" Search: "}),se.jsx("input",{type:"text",value:k,onChange:Ye=>q(Ye.target.value),placeholder:"Portal name, region...",style:{background:He?"#004466":"#ffffff",color:He?"#f5f1e6":"#003366",border:"1px solid #888",borderRadius:"6px",padding:"6px 36px 6px 12px",fontSize:"1rem",width:"100%",flex:1,transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}}),k.length>0&&se.jsx("button",{onClick:()=>q(""),style:{position:"absolute",right:8,background:"none",border:"none",color:"#cc0000",fontSize:"1.2rem",cursor:"pointer",padding:0,lineHeight:1},"aria-label":"Clear search input",children:""})]})}),se.jsx("div",{children:Array.isArray(he)&&he.length>0&&k!==""?se.jsx("div",{style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",paddingTop:"10px"},children:he.map((Ye,Lt)=>se.jsxs("div",{style:{marginBottom:"1em",borderBottom:"1px solid #ccc",paddingBottom:"0.5em",fontSize:"1.2rem"},children:[Lt+1,".) ",Ye.inCountry," - ",Ye.inFederalState||null," ",Ye.inDistrict||null," ",Ye.inCity||null,se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"Name:"}),se.jsx("span",{children:Ye.nameEn})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"Topic:"}),se.jsx("span",{children:Ye.mainTopic})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"Typ:"}),se.jsx("span",{children:Ye.portalTypeEn})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"URL:"}),se.jsx("a",{href:Ye.url,target:"_blank",rel:"noreferrer",style:{color:He?"#f5f1e6":"#003366",textDecoration:"none"},children:" Visit portal"})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[se.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"6px"},children:[se.jsx("input",{type:"checkbox",checked:ne.some(bt=>bt.url===Ye.url),onChange:()=>Pt(Ye),style:{width:"24px",height:"24px",border:"3px solid #003366",borderRadius:"16px",backgroundColor:ne.some(bt=>bt.url===Ye.url)?"#003366":"#fff",cursor:"pointer",transition:"background-color 0.3s"}}),se.jsx("span",{style:{fontSize:"0.8em"},children:" Compare"})]}),se.jsx("button",{onClick:()=>{R(Ye),Re(!0)},style:{marginTop:"10px",padding:"6px 12px",background:"#003366",color:"white",border:"none",fontSize:"0.8em",borderRadius:"6px",cursor:"pointer"},children:" Show More"})]})]},Lt))}):se.jsx("p",{style:{fontSize:"1.4rem",marginLeft:"10px",color:"#888"},children:"Type in a Portal name, region "})})]}),se.jsxs("div",{style:{position:"absolute",top:"50%",left:60,zIndex:1e3,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",padding:"10px",borderRadius:"6px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",fontSize:28,minWidth:"15%",maxWidth:"15%",minHeight:"20%",maxHeight:"30vh",overflowY:"auto"},children:[se.jsx("label",{id:"mapLayers",style:{fontWeight:"bold",position:"sticky",top:0,background:He?"#003366":"#f5f1e6",zIndex:10,padding:"4px 0",fontSize:"1.4rem"},children:" Handle Map Layers:"}),se.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",padding:10},children:X.map(Ye=>se.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"44%",padding:"6px 8px",borderRadius:6,backgroundColor:He?Ye.checked?"#003366":null:Ye.checked?"#f0f0f0":null,color:He?"#f5f1e6":"#003366",boxShadow:"inset 0 0 1px rgba(0,0,0,0.2)",fontSize:"1rem",cursor:"pointer"},onClick:()=>ur(Ye.id),children:[se.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Ye.description}),se.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[se.jsx("input",{type:"checkbox",checked:Ye.checked,onChange:()=>ur(Ye.id),style:{display:"none"}}),se.jsx("span",{style:{position:"relative",width:"40px",height:"20px",backgroundColor:Ye.checked?"#005599":"#ccc",borderRadius:"20px",transition:"background-color 0.3s ease"},children:se.jsx("span",{style:{content:'""',position:"absolute",height:"16px",width:"16px",left:Ye.checked?"22px":"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:"left 0.3s ease"}})})]})]},Ye.id))})]}),se.jsx("div",{style:{position:"absolute",top:"75%",left:60,zIndex:1e3,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",padding:"10px",borderRadius:"6px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",fontSize:28,minWidth:"15%",maxWidth:"15%",minHeight:"20%"},children:se.jsxs("div",{style:{zIndex:1e3,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",fontSize:"0.8rem"},children:[se.jsxs("strong",{id:"statistics",style:{fontSize:"1.4rem"},children:[" Portal Statistics of ",he.length," portals:"]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"20px"},children:[se.jsxs("div",{style:{flex:1},children:[se.jsx("div",{children:se.jsx("strong",{children:" ADM Levels"})}),Object.entries(xt.levels).map(([Ye,Lt])=>{const bt=(Lt/he.length*100).toFixed(1);return se.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:"4px"},children:[se.jsx("span",{style:{width:30},children:Ye}),se.jsx("div",{style:{flex:1,background:"#ccc",marginLeft:"25px",height:"20px",position:"relative",overflow:"hidden",borderRadius:"4px"},title:`${bt}%`,children:se.jsxs("div",{style:{width:`${bt}%`,background:"#005599",height:"100%",position:"absolute",top:0,left:0,transition:"width 0.6s ease-in-out",display:"flex",alignItems:"center",paddingLeft:"6px",color:"#fff",fontSize:"0.75rem",fontWeight:"bold"},children:[bt,"%"]})}),se.jsx("span",{style:{marginLeft:"6px"},children:Lt})]},Ye)})]}),se.jsxs("div",{style:{flex:1},children:[se.jsx("div",{children:se.jsx("strong",{children:" Portal Types"})}),Object.entries(xt.types).map(([Ye,Lt])=>{const bt=(Lt/he.length*100).toFixed(1);return se.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:"4px"},children:[se.jsx("span",{style:{width:30},children:Ye}),se.jsx("div",{style:{flex:1,background:"#ccc",marginLeft:"25px",height:"20px",position:"relative",overflow:"hidden",borderRadius:"4px"},title:`${bt}%`,children:se.jsxs("div",{style:{width:`${bt}%`,background:"#3377aa",height:"100%",position:"absolute",top:0,left:0,transition:"width 0.6s ease-in-out",display:"flex",alignItems:"center",paddingLeft:"6px",color:"#fff",fontSize:"0.75rem",fontWeight:"bold"},children:[bt,"%"]})}),se.jsx("span",{style:{marginLeft:"6px"},children:Lt})]},Ye)})]})]}),se.jsxs("div",{style:{marginTop:"12px"},children:[se.jsx("div",{children:se.jsx("strong",{children:"Features"})}),se.jsxs("div",{children:[" SPARQL: ",xt.sparql]}),se.jsxs("div",{children:[" MQA: ",xt.mqa]})]})]})}),se.jsxs("div",{style:{position:"absolute",top:10,left:60,zIndex:1e3,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",padding:"10px",borderRadius:"6px",boxShadow:"0 0 6px rgba(0,0,0,0.2)",fontSize:28,minWidth:"15%",maxWidth:"15%",minHeight:"20%"},children:[se.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"8px"},children:[se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[se.jsx("label",{id:"portalType",style:{fontSize:"1.4rem",fontWeight:"bold"},children:" Portal-Typ:"}),se.jsxs("select",{onChange:Ye=>p(Ye.target.value),value:d,style:{background:He?"#004466":"#ffffff",color:He?"#f5f1e6":"#003366",border:"1px solid #888",borderRadius:"6px",padding:"6px 12px",fontSize:"1rem",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer"},children:[se.jsx("option",{value:"All",children:"All"}),se.jsx("option",{value:"Gov",children:"Gov"}),se.jsx("option",{value:"Geo",children:"Geo"}),se.jsx("option",{value:"Open",children:"Open"}),se.jsx("option",{value:"Other",children:"Other"})]})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[se.jsx("label",{id:"feature",style:{fontSize:"1.4rem",fontWeight:"bold"},children:" Feature-Check:"}),se.jsxs("select",{onChange:Ye=>S(Ye.target.value),value:w,style:{background:He?"#004466":"#ffffff",color:He?"#f5f1e6":"#003366",border:"1px solid #888",borderRadius:"6px",padding:"6px 12px",fontSize:"1rem",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer"},children:[se.jsx("option",{value:"any",children:"Any"}),se.jsx("option",{value:"mqa",children:"MQA available"}),se.jsx("option",{value:"sparql",children:"SPARQL available"})]})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[se.jsx("label",{id:"admLevel",style:{fontSize:"1.4rem",fontWeight:"bold"},children:" ADM-Level:"}),se.jsxs("select",{onChange:Ye=>A(Ye.target.value),value:C,style:{background:He?"#004466":"#ffffff",color:He?"#f5f1e6":"#003366",border:"1px solid #888",borderRadius:"6px",padding:"6px 12px",fontSize:"1rem",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer"},children:[se.jsx("option",{value:"Auto",children:"Automatic (Zoom)"}),r0.map(Ye=>se.jsx("option",{value:Ye,children:Ye},Ye))]})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px"},children:[se.jsx("label",{style:{fontSize:"1.4rem",fontWeight:"bold"},children:"Reset-Filters:"}),se.jsx("button",{onClick:()=>{p("All"),S("any"),A("Auto")},style:{padding:"2px 2px",background:He?"#004466":"#eeeeee",color:He?"#f5f1e6":"#003366",border:"1px solid #888",borderRadius:"4px",fontSize:"1.3rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease"},children:""})]})]}),se.jsx("div",{style:{marginTop:"12px",fontSize:"1rem",fontWeight:"bold"},children:he.length===0?"0 portals matched!":`${he.length} portal${he.length>1?"s":""} in ${_t} match current filters`}),se.jsx("div",{style:{marginTop:"10px",fontSize:"0.9em"},children:se.jsxs("div",{id:"matchedPortals",style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"1.4rem"},children:[se.jsx("div",{style:{width:20,height:20,background:"rgba(0, 85, 153, 0.5)",border:"1px solid #444",borderRadius:"15px"}}),he.length," matched",se.jsx("div",{style:{width:20,height:20,background:"rgba(1, 30, 59, 0.5)",border:"1px solid #444",borderRadius:"15px"}}),nt," not matched"]})})]}),se.jsx("div",{ref:o,style:{width:"100%",height:"100vh",transition:"all 0.4s ease-in-out"}}),se.jsxs("div",{style:{position:"absolute",top:10,left:"50%",transform:"translateX(-50%)",zIndex:1001,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",padding:"8px 16px",borderRadius:"8px",boxShadow:"0 0 8px rgba(0,0,0,0.1)",fontSize:"1.8rem",fontWeight:"bold"},children:[se.jsx("h1",{style:{fontSize:"1.7rem"},children:"SODREPO - Spatial Open Data Regions & Portals"}),!ut&&se.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:se.jsx("button",{onClick:()=>Ct(!0),style:{textAlign:"center",padding:"6px 12px",background:He?"#f5f1e6":"#003366",color:He?"#003366":"#f5f1e6",border:"none",fontSize:"0.9rem",borderRadius:"4px",cursor:"pointer",marginBottom:"4px"},children:" Show Guide"})}),se.jsxs("div",{style:{padding:"4px",background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",border:"1px solid #ccc",borderRadius:"3px",fontSize:"0.9rem"},children:[se.jsx("div",{id:"options",style:{textAlign:"center"},children:"Options:"}),se.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",justifyContent:"center"},children:[se.jsxs("label",{style:{position:"relative",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",cursor:"pointer"},title:"Toggle Click or Hover modus for information",children:[se.jsx("input",{type:"checkbox",checked:Ut,onChange:()=>Vt(!Ut),style:{display:"none"}}),se.jsx("span",{style:{position:"relative",width:"40px",height:"20px",backgroundColor:Ut?"#005599":"#ccc",borderRadius:"20px",transition:"background-color 0.3s ease"},children:se.jsx("span",{style:{content:'""',position:"absolute",height:"16px",width:"16px",left:Ut?"22px":"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:"left 0.3s ease"}})}),se.jsx("span",{style:{fontWeight:"bold",color:He?"#f5f1e6":"#000"},children:Ut?" Click":"Hover"})]}),"|",se.jsxs("label",{style:{position:"relative",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",cursor:"pointer"},title:"Toggle Dark Mode",children:[se.jsx("input",{type:"checkbox",checked:He,onChange:()=>Zt(!He),style:{display:"none"}}),se.jsx("span",{style:{position:"relative",width:"40px",height:"20px",backgroundColor:He?"#005599":"#ccc",borderRadius:"20px",transition:"background-color 0.3s ease"},children:se.jsx("span",{style:{content:'""',position:"absolute",height:"16px",width:"16px",left:He?"22px":"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:"left 0.3s ease"}})}),se.jsx("span",{style:{fontWeight:"bold",color:He?"#f5f1e6":"#000"},children:He?" Light Mode":" Dark Mode"})]}),"|",se.jsxs("label",{style:{position:"relative",display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem",cursor:"pointer"},title:"Toggle Spatial center of next goverment layer",children:[se.jsx("input",{type:"checkbox",checked:Wt,onChange:()=>Te(!Wt),style:{display:"none"}}),se.jsx("span",{style:{position:"relative",width:"40px",height:"20px",backgroundColor:Wt?"#005599":"#ccc",borderRadius:"20px",transition:"background-color 0.3s ease"},children:se.jsx("span",{style:{content:'""',position:"absolute",height:"16px",width:"16px",left:Wt?"22px":"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:"left 0.3s ease"}})}),se.jsx("span",{style:{fontWeight:"bold",color:He?"#f5f1e6":"#000"},children:Wt?"  Relations":"  Relations"})]})]}),se.jsx("div",{style:{textAlign:"center",paddingTop:"8px"},children:"Legend:"}),se.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"20px",fontSize:"0.9rem",fontWeight:"bold",padding:"1px 12px",borderRadius:"10px"},children:[se.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},title:"Region contains Open Data Portal",children:[se.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:"rgba(0, 85, 153, 0.5)",border:"1px solid #003366"}}),se.jsx("span",{children:"Portal found"})]}),se.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},title:"Region has no matching portal",children:[se.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:"rgba(1, 30, 59, 0.5)",border:"1px solid #001122"}}),se.jsx("span",{children:"Portal not found"})]})]})]})]}),se.jsxs("div",{style:{position:"absolute",bottom:0,left:0,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",fontSize:"11px",fontFamily:"sans-serif",padding:"6px 12px",margin:"0 0 20px 0",borderRadius:"4px 4px 0 0",zIndex:1e3,boxShadow:"0 0 4px rgba(0, 0, 0, 0.2)"},children:[se.jsxs("span",{lang:"en",children:[" ",new Date().getFullYear()," ",se.jsx("a",{href:"https://sodic-research.github.com",target:"_blank",rel:"noreferrer",style:{background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",textDecoration:"none"},children:"SODIC Research Group Info"})]}),"  ",se.jsx("span",{lang:"en",children:se.jsx("a",{href:"https://github.com/SODIC-research/SODREPO",target:"_blank",rel:"noreferrer",style:{background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",textDecoration:"none"},children:"SODREPO GitHub"})})," || ",se.jsx("span",{lang:"en",children:se.jsx(ad,{to:"/privacypolicy",style:{background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",textDecoration:"none"},children:"Privacy Policy"})}),"  ",se.jsx("span",{lang:"en",children:se.jsx(ad,{to:"/imprint",style:{background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",textDecoration:"none"},children:"Imprint"})})]}),se.jsxs("div",{id:"download",style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",fontSize:"11px",fontFamily:"sans-serif",padding:"6px 12px",margin:"0 0 20px 0",borderRadius:"4px 4px 0 0",zIndex:1e3,boxShadow:"0 0 4px rgba(0, 0, 0, 0.2)",textAlign:"center"},children:[se.jsx("button",{onClick:()=>{const Ye=new Blob([JSON.stringify(qf,null,2)],{type:"application/json"}),Lt=URL.createObjectURL(Ye),bt=document.createElement("a");bt.href=Lt,bt.download="sodrepoData.json",document.body.appendChild(bt),bt.click(),document.body.removeChild(bt),URL.revokeObjectURL(Lt)},style:{border:"none",background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":null,cursor:"pointer",padding:0},children:" Download SODREPO Dataset (JSON)"}),"|",se.jsx("button",{onClick:()=>{const Ye=["Name","Country","Federal State","City","Type","URL"],Lt=he.map(jr=>[jr.nameEn,jr.inCountryEn,jr.inFederalState,jr.inCity,jr.portalTypeEn,jr.url]),bt=[Ye,...Lt].map(jr=>jr.join(";")).join(`
`),xr=new Blob([bt],{type:"text/csv;charset=utf-8;"}),Xr=URL.createObjectURL(xr),Ar=document.createElement("a");Ar.href=Xr,Ar.download="sodrepo_export.csv",Ar.click(),URL.revokeObjectURL(Xr)},style:{border:"none",background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":null,cursor:"pointer",padding:0},children:" Download Filtered Portals (CSV)"}),"|",se.jsx("button",{onClick:Ft,style:{border:"none",background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":null,cursor:"pointer",padding:0},children:" Export Map as PNG"})]}),se.jsxs("div",{style:{position:"absolute",bottom:0,right:0,background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",fontSize:"11px",fontFamily:"sans-serif",padding:"6px 10px",margin:"0 10px 20px 0",borderRadius:"4px 4px 0 0",zIndex:1e3,boxShadow:"0 0 4px rgba(0, 0, 0, 0.2)"},children:[" ",se.jsx("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"noreferrer",style:{color:He?"#f5f1e6":"#000",textDecoration:"none"},children:"OpenStreetMap contributors"})," ","|",se.jsx("a",{href:"https://carto.com/",target:"_blank",rel:"noreferrer",style:{color:He?"#f5f1e6":"#000",textDecoration:"none"},children:"Tiles by CARTO"})," ","|",se.jsx("a",{href:"https://www.geoboundaries.org/",target:"_blank",rel:"noreferrer",style:{color:He?"#f5f1e6":"#000",textDecoration:"none"},children:"Boundary data provided by GeoBoundaries project (CC BY 4.0)."})," ","|",se.jsx("a",{href:"https://sodic-research.github.io",target:"_blank",rel:"noreferrer",style:{color:He?"#f5f1e6":"#000",textDecoration:"none"},children:"Visualization: SODIC Research Group"})]}),se.jsx("div",{style:{position:"absolute",top:20,right:20,minWidth:"15%",maxWidth:"15%",minHeight:"20%",background:He?"#003366":"#f5f1e6",color:He?"#f5f1e6":"#003366",padding:"12px",borderRadius:"8px",boxShadow:"0 0 10px rgba(0,0,0,0.15)",zIndex:1e3,overflowY:"auto",maxHeight:"calc(100vh - 150px)",fontSize:28},children:Array.isArray(Me)&&Me.length>0?se.jsx("div",{style:{transition:"all 1s ease-in-out"},children:Me.map((Ye,Lt)=>se.jsxs("div",{style:{marginBottom:"1em",borderBottom:"1px solid #ccc",paddingBottom:"0.5em"},children:[Lt+1,".) ",Ye.inCountry," - ",Ye.inFederalState||null," ",Ye.inDistrict||null," ",Ye.inCity||null,se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"Name:"}),se.jsx("span",{children:Ye.nameEn})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"Topic:"}),se.jsx("span",{children:Ye.mainTopic})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"Typ:"}),se.jsx("span",{children:Ye.portalTypeEn})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[se.jsx("span",{style:{fontWeight:"bold"},children:"URL:"}),se.jsx("a",{href:Ye.url,target:"_blank",rel:"noreferrer",style:{color:He?"#f5f1e6":"#003366",textDecoration:"none"},children:" Visit portal"})]}),se.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[se.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"6px"},children:[se.jsx("input",{type:"checkbox",checked:ne.some(bt=>bt.url===Ye.url),onChange:()=>Pt(Ye),style:{width:"24px",height:"24px",border:"3px solid #003366",borderRadius:"16px",backgroundColor:ne.some(bt=>bt.url===Ye.url)?"#003366":"#fff",cursor:"pointer",transition:"background-color 0.3s"}}),se.jsx("span",{style:{fontSize:"0.8em"},children:" Compare"})]}),ne.length>=2&&se.jsx("div",{style:{position:"fixed",bottom:80,left:"50%",transform:"translateX(-50%)",zIndex:2e3},children:se.jsxs("button",{onClick:()=>le(!0),style:{padding:"10px 20px",background:"#003366",color:"#fff",borderRadius:"6px",fontSize:"1rem",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:[" Compare ",ne.length," Portals"]})}),se.jsx("button",{onClick:()=>{R(Ye),Re(!0)},style:{marginTop:"10px",padding:"6px 12px",background:He?"#f5f1e6":"#003366",color:He?"#003366":"#f5f1e6",border:"none",fontSize:"0.8em",borderRadius:"4px",cursor:"pointer"},children:" Show More"})]})]},Lt))}):se.jsx("div",{id:"portalDetails",style:{maxHeight:"15%",minHeight:"20%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"10px"},children:se.jsx("p",{style:{color:"#888"},children:" Click on any area to see details."})})}),De&&D&&se.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:se.jsxs("div",{style:{background:"white",padding:"24px",borderRadius:"8px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 0 20px rgba(0,0,0,0.3)"},children:[se.jsx("h2",{children:D.name}),se.jsxs("p",{children:[se.jsx("strong",{children:"Topic:"})," ",D.mainTopic]}),se.jsxs("p",{children:[se.jsx("strong",{children:"License:"})," ",D.license]}),se.jsxs("p",{children:[se.jsx("strong",{children:"Publisher:"})," ",(ir=D.publisher)==null?void 0:ir.name]}),se.jsxs("p",{children:[se.jsx("strong",{children:"SPARQL:"})," ",(yr=D.sparql)!=null&&yr.available?"Yes":"No"]}),se.jsxs("p",{children:[se.jsx("strong",{children:"MQA:"})," ",(nn=D.mqa)!=null&&nn.available?"Yes":"No"]}),se.jsxs("p",{children:[se.jsx("strong",{children:"More:"})," ",(Rr=D.additionalProperties)==null?void 0:Rr.notesEn]}),se.jsx("div",{style:{marginTop:"16px",display:"flex",justifyContent:"flex-end"},children:se.jsx("button",{onClick:()=>{Re(!1),R(null)},style:{padding:"6px 12px",background:"#003366",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Close"})})]})}),Se&&ne.length>1&&se.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:se.jsxs("div",{style:{padding:"16px",maxHeight:"80vh",overflowY:"auto",background:"white",borderRadius:"8px",width:"90%",maxWidth:"800px"},children:[se.jsx("h2",{children:"Portal Comparison"}),se.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[se.jsx("thead",{children:se.jsxs("tr",{children:[se.jsx("th",{children:"Feature"}),ne.map((Ye,Lt)=>se.jsx("th",{children:Ye.nameEn},Lt))]})}),se.jsxs("tbody",{children:[se.jsxs("tr",{children:[se.jsx("td",{children:"MQA"}),ne.map((Ye,Lt)=>{var bt;return se.jsx("td",{children:(bt=Ye.mqa)!=null&&bt.available?"":""},Lt)})]}),se.jsxs("tr",{children:[se.jsx("td",{children:"SPARQL"}),ne.map((Ye,Lt)=>{var bt;return se.jsx("td",{children:(bt=Ye.sparql)!=null&&bt.available?"":""},Lt)})]}),se.jsxs("tr",{children:[se.jsx("td",{children:"License"}),ne.map((Ye,Lt)=>se.jsx("td",{children:Ye.license},Lt))]})]})]}),se.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end",gap:"10px"},children:[se.jsx("button",{style:{padding:"6px 12px",background:"#003366",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>ye([]),children:" Clear Compare"}),se.jsx("button",{style:{padding:"6px 12px",background:"#003366",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},onClick:()=>le(!1),children:"Close"})]})]})})]})}function KU(){return se.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[se.jsx(ad,{to:"/",style:{textDecoration:"none",color:"black"},children:se.jsx("h2",{style:{marginBottom:"1rem"},children:" Back to Mainpage"})}),se.jsx("h1",{children:"Impressum"}),se.jsx("p",{children:se.jsx("strong",{children:"Angaben gem 5 TMG:"})}),se.jsxs("p",{children:["SODREPO - Spatial Open Data Regions & Portals",se.jsx("br",{}),"SODIC Research Group",se.jsx("br",{}),"Technische Universitt Chemnitz",se.jsx("br",{}),"Professur Datenmanagement",se.jsx("br",{}),"Strae der Nationen 62",se.jsx("br",{}),"09111 Chemnitz",se.jsx("br",{}),"Deutschland",se.jsx("br",{}),"Vertreten durch: Florian Hahn, Wissenschaftlicher Mitarbeiter, Technische Universitt Chemnitz",se.jsx("br",{}),"E-Mail: ",se.jsx("a",{href:"mailto:florian.hahn@informatik.tu-chemnitz.de",children:"florian.hahn@informatik.tu-chemnitz.de"})," ",se.jsx("br",{}),"Web: ",se.jsx("a",{href:"http://sodic-research.github.com",children:"http://sodic-research.github.com"}),"GitHub: ",se.jsx("a",{href:"https://github.com/SODIC-research/SODREPO",target:"_blank",rel:"noreferrer",children:"SODREPO GitHub"})]}),se.jsx("p",{children:"Verantwortlich fr den Inhalt nach  55 Abs. 2 RStV:"}),se.jsxs("p",{children:["Florian Hahn",se.jsx("br",{}),"Technische Universitt Chemnitz",se.jsx("br",{}),"Professur Datenmanagement",se.jsx("br",{}),"Strae der Nationen 62",se.jsx("br",{}),"09111 Chemnitz"]})]})}function ZU(){return se.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto"},children:[se.jsx(ad,{to:"/",style:{textDecoration:"none",color:"black"},children:se.jsx("h2",{style:{marginBottom:"1rem"},children:" Back to Mainpage"})}),se.jsx("h1",{children:"Datenschutzerklrung"}),se.jsx("p",{children:se.jsx("strong",{children:"Allgemeine Hinweise:"})}),se.jsx("p",{children:"Der Schutz Ihrer Daten ist uns wichtig. Diese Anwendung speichert keine personenbezogenen Daten. Es werden keine Cookies oder externen Tracker eingesetzt."}),se.jsx("p",{children:"Diese Webseite dient der Visualisierung offener Verwaltungsportale auf Basis ffentlicher Geodaten. Es werden keine personenbezogenen Daten verarbeitet. Es erfolgt kein Tracking, keine Einbindung externer Werbung und keine Erstellung von Nutzerprofilen."}),se.jsx("p",{children:se.jsx("strong",{children:"Server-Log-Dateien:"})}),se.jsx("p",{children:"Bei jedem Zugriff auf unsere Webseite werden Informationen automatisch durch den Browser an unseren Server gesendet und in sogenannten Server-Log-Dateien gespeichert. Diese Daten enthalten keine direkten personenbezogenen Informationen und dienen ausschlielich der statistischen Auswertung und zur Verbesserung der Website."}),se.jsx("p",{children:se.jsx("strong",{children:"GitHub Pages:"})}),se.jsxs("p",{children:["Diese Seite wird ber GitHub Pages bereitgestellt. Es gelten die Datenschutzrichtlinien von GitHub Inc. (",se.jsx("a",{href:"https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement",target:"_blank",rel:"noreferrer",children:"GitHub Privacy Statement"}),")."]}),se.jsx("p",{children:se.jsx("strong",{children:"Verwendung von Karten"})}),se.jsx("p",{children:"Diese Seite verwendet MapLibre GL JS, um OpenStreetMap-basierte Karten darzustellen. Die verwendeten Kartenstile stammen von CARTO und die administrativen Grenzen von GeoBoundaries (CC BY 4.0). Es erfolgt keine Datenbertragung an diese Anbieter durch dich als Nutzer, da alle GeoJSON-Dateien lokal gehostet werden."}),se.jsx("p",{children:se.jsx("strong",{children:"Cookies"})}),se.jsx("p",{children:"Diese Webseite setzt keine Cookies und verwendet keine Tracking-Technologien."}),se.jsx("p",{children:se.jsx("strong",{children:"Downloadfunktion"})}),se.jsx("p",{children:"Die bereitgestellten JSON-Daten und CSV Daten werden beim Anklicken als Datei generiert und lokal durch den Browser des Nutzers heruntergeladen. Dabei werden keine personenbezogenen Daten gespeichert oder bertragen."}),se.jsx("p",{children:se.jsx("strong",{children:"Haftungsausschluss:"})}),se.jsx("p",{children:"Die Inhalte dieser Webseite wurden mit grtmglicher Sorgfalt erstellt. Fr die Richtigkeit, Vollstndigkeit und Aktualitt der Inhalte kann jedoch keine Gewhr bernommen werden. Als Diensteanbieter sind wir gem 7 Abs.1 TMG fr eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, bermittelte oder gespeicherte fremde Informationen zu berwachen oder nach Umstnden zu forschen, die auf eine rechtswidrige Ttigkeit hinweisen."}),se.jsx("p",{children:se.jsx("strong",{children:"Kontakt zur Datenschutzaufsicht:"})}),se.jsxs("p",{children:["Schsischer Datenschutzbeauftragter",se.jsx("br",{}),"Devrientstrae 5",se.jsx("br",{}),"01067 Dresden",se.jsx("br",{}),"Web: ",se.jsx("a",{href:"https://www.saechsdsb.de/",children:"https://www.saechsdsb.de/"})]})]})}Nw.createRoot(document.getElementById("root")).render(se.jsx(Lw.StrictMode,{children:se.jsx(AB,{children:se.jsxs(zb,{children:[se.jsx(pm,{path:"/",element:se.jsx(GU,{})}),se.jsx(pm,{path:"/imprint",element:se.jsx(KU,{})}),se.jsx(pm,{path:"/privacypolicy",element:se.jsx(ZU,{})})]})})}));
